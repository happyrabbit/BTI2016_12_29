var CountryConfig=function(){this.countries_config={};this.live_countries={};this.country_synonyms={gb:"uk"};this.init=function(){country_config.countries_config=country_config.get_country_config()};this.get_country_config=function(t){if(typeof BF_STATIC.all_countries!="undefined"&&BF_STATIC.all_countries){var i=BF_STATIC.all_countries;if(typeof t!="undefined"){return i[t]}else{return i}}else{return"undefined"}};this.get_homepage_link=function(t){if(Object.keys(country_config.countries_config).length==0){country_config.countries_config=country_config.get_country_config()}if(t.length>0&&typeof t!="undefined"&&country_config.countries_config&&typeof country_config.countries_config[t]!="undefined"){if(typeof country_config.countries_config[t].composite_code!="undefined"){return BF_STATIC.web_root+"/"+(BF_STATIC.bf_env=="dev"?"index":"")+"?country="+country_config.countries_config[t].composite_code}else{return BF_STATIC.web_root+"/"+(BF_STATIC.bf_env=="dev"?"index":"")+"?country="+country_config.countries_config[t].country_code}}else{return BF_STATIC.web_root+"/"+(BF_STATIC.bf_env=="dev"?"index":"")+"?country=en-us"}};this.get_live_countries=function(){var t={};var i={};i=country_config.get_country_config();if(Object.size(i)>0&&typeof i!="undefined"){for(key in i){t[key]=1}}return t};this.get_cookie_bar_vertical_bpage_message=function(t){var i={};i=country_config.get_country_config();if(t.length>0&&typeof t!="undefined"&&i&&typeof i[t]!="undefined"){if(typeof i[t].cookie_bar_vertical_bpage_message!="undefined"){return i[t].cookie_bar_vertical_bpage_message}else{return null}}else{return null}};this.get_languages_config=function(t){if(typeof bf_all_languages!="undefined"&&bf_all_languages){var i=bf_all_languages;if(typeof t!="undefined"){if(i[t]!="undefined"){return i[t]}else{return"undefined"}}else{return i}}else{return"undefined"}};this.get_country_categories=function(t){var i={};countries=country_config.get_country_config();if(t.length>0&&typeof t!="undefined"&&countries&&typeof countries[t]!="undefined"){if(typeof countries[t].country_categories!="undefined"){return countries[t].country_categories}else{return null}}else{return null}}};Object.size=function(t){var i=0,n;for(n in t){if(t.hasOwnProperty(n))i++}return i};var country_config=new CountryConfig;(function e(t,i,n){function a(s,o){if(!i[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return a(i?i:e)},d,d.exports,e,t,i,n)}return i[s].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)a(n[s]);return a})({1:[function(require,t,exports){var i=require("underscore");var n=require("./settings");var a="";var r={};function s(t){return i.object(i.map(t,function(t,n){t=i.isNull(t)||i.isUndefined(t)?"":t;return[n,t]}))}var o={queue:[],timeout:null,history:[],push:function(t){t=i.clone(t);if(!this.validateData(t)){return false}var a=i.last(this.queue);if(a&&a["type"]!==t["type"]){this.sendData();this.push(t);return true}this.queue.push(t);var r=this.getURL(this.queue);if(r.length>n.get("urlLengthLimit")){this.queue.pop();this.sendData();this.push(t);return true}if(!n.get("batch")){this.sendData()}else if(!this.timeout){this.timeout=setTimeout(this.sendData.bind(this),n.get("delay"))}return true},validateData:function(t){var a=n.get("requiredFields");for(var r=0,s=a.length;r<s;r++){if(!(a[r]in t)){if(n.get("debug")){throw new Error("Pixiedust required event field: "+a[r])}return false}}var o=n.get("acceptedDataTypes");for(var l in t){var u=t[l];var d=typeof t[l];if(!i.isNull(u)&&!i.isUndefined(u)&&!i.contains(o,d)){if(n.get("debug")){throw new Error('Pixiedust: field "'+l+'" is invalid data type: '+d)}return false}}var c=this.getURL([t]);if(c.length>n.get("urlLengthLimit")){if(n.get("debug")){throw new Error("Pixiedust: single event exceeds url length limit",t)}return false}return true},sendData:function(){var t;if(this.queue&&this.queue.length){t=this.getURL(this.queue);this.createPixel(t);this.history.push(t)}this.queue=[];clearTimeout(this.timeout);this.timeout=null},createPixel:function(t){(new Image).src=t},getURL:function(t){t=i.map(t,function(t){return i.defaults(t,r)});var n=i.uniq(i.flatten(i.map(t,i.keys)));i.each(t,function(t){i.each(t,function(n,a){if(i.isNull(n)||i.isUndefined(n)){t[a]=""}})});t=i.map(t,s);var o=i.object(i.map(n,function(n){return[n,i.pluck(t,n)]}));o["_z"]=Date.now();o["_d"]=a;o["_n"]=t.length;var l=i.map(o,function(t,n){t=i.isArray(t)?t:[t];return encodeURIComponent(n)+"="+encodeURIComponent(t.join(a))});return this.url()+"?"+l.join("&")},setSessionVars:function(t){i.each(t,function(n,a){if(i.isNull(n)||i.isUndefined(n)){t[a]=""}});r=i.extend(r,s(t))},url:function(){return n.get("trackingURL")+"/v"+n.get("apiVersion")+".gif"},getHistory:function(){return this.history.slice()}};t.exports=o},{"./settings":4,underscore:6}],2:[function(require,t,exports){(function(){var t=require("./utils");var i=require("./pixiedust");var n=new i;window.pixiedust=n;if(!window.BF_STATIC){throw new Error("Pixiedust: BF_STATIC must be defined.")}var a=r();t.onReady(function(){var i=window.BF_STATIC;var r=window.bf_visit;var s=r&&r.unique.id;n.setSessionVars({client_id:s||null,session_id:t.uniqueId()});n.start({env:i["bf_env"],sampling_rate:i["pixiedust_sampling_rate"]||0,sampling_rate_options:{buzz_recommendation_impression:i["pixiedust_pound_sampling_rate"],buzz_recommendation_click:i["pixiedust_pound_sampling_rate"]}});var o=window.document.querySelector('meta[property="bf:userid"]');var l=o?o.getAttribute("content"):"";var u={page:i["tt_page"],author:i["username"],author_id:l,buzz:i["uri"],buzz_id:i["campaignid"],type:"pageview",referrer:window.document.referrer,url:window.location.href,client_country_code:i["country_track"]||t.getCookie("bf-geo-country")};if(a){u["category"]="social_discovery"}n.push(u);n.flush()});function r(){var i=t.getCookie("HT_PRIMARY");if(!i){return false}var n=i.split("%2C");var a=n[0];var r=n[1];var s=n[2];return a==="UNCOUNTED"&&window.location.pathname.match("/h2/")&&window.BF_STATIC["uri"]===s&&window.BF_STATIC["username"]===r}})()},{"./pixiedust":3,"./utils":5}],3:[function(require,t,exports){var i=require("underscore");var n=require("./dispatch");var a=require("./settings");function r(t){var n=a.get("samplingRateOptions")||{};var r=n[t["type"]];var s=i.isFinite(r)?r:1;return Math.random()<s}var s=function(){this.enabled=false;this.started=false;this.queue=[]};s.prototype.push=function(t){if(this.enabled&&r(t)){return n.push(t)}this.queue.push(t);return true};s.prototype.start=function(t){if(this.started){if(a.get("debug")){throw new Error("Pixiedust instance may only be started once")}return}t=t||{};a.init(t["env"]);a.set({samplingRate:t["sampling_rate"],samplingRateOptions:i.clone(t["sampling_rate_options"])});this.enabled=Math.random()<a.get("samplingRate");this.started=true;if(a.get("debug")){this.setupTestMethods()}if(this.enabled){while(this.queue.length){this.push(this.queue.shift())}}};s.prototype.setupTestMethods=function(){this.__testHistory=function(){if(!this.enabled){if(a.get("debug")){throw new Error("Pixiedust is not enabled (perhaps due to sampling)")}}return n.getHistory()}};s.prototype.setSessionVars=n.setSessionVars;s.prototype.flush=n.sendData.bind(n);t.exports=s},{"./dispatch":1,"./settings":4,underscore:6}],4:[function(require,t,exports){var i=require("underscore");var n="dev";var a={};var r={dev:{trackingURL:"http://pixiedust-dev.buzzfeed.com",debug:true},stage:{trackingURL:"https://pixiedust-stage.buzzfeed.com",debug:true},live:{trackingURL:"https://pixiedust.buzzfeed.com",debug:false}};var s={apiVersion:"1",delay:200,urlLengthLimit:2e3,batch:true,samplingRate:0,requiredFields:["type"],acceptedDataTypes:["string","boolean","number"]};function o(t){if(t in a){return a[t]}var i=r[n];if(i&&t in i){return i[t]}return s[t]}function l(t,n){var r={};if(i.isObject(t)){r=t}else{r[t]=n}i.extend(a,r)}function u(t){if(!r[t]){console.warn("Pixiedust: environment not recognized:",t);return}n=t}t.exports={init:u,get:o,set:l}},{underscore:6}],5:[function(require,t,exports){var i={uniqueId:function(){var t=Math.random()*1e8|0;return Date.now().toString(32)+t.toString(32)},getCookie:function(t){var i=document.cookie.split(";");var n=t+"=";for(var a=0;a<i.length;a++){var r=i[a];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(n)===0){return r.substring(n.length,r.length)}}return null},onReady:function(){var t=false;var i=document.readyState;var n=[];if(i==="complete"){t=true}else{document.addEventListener("DOMContentLoaded",function(){var i;t=true;while(n.length){i=n.shift();i()}})}return function(i){if(t){return i()}n.push(i)}}()};t.exports=i},{}],6:[function(require,t,exports){(function(){var i=this;var n=i._;var a=Array.prototype,r=Object.prototype,s=Function.prototype;var o=a.push,l=a.slice,u=a.concat,d=r.toString,c=r.hasOwnProperty;var _=Array.isArray,f=Object.keys,h=s.bind;var p=function(t){if(t instanceof p)return t;if(!(this instanceof p))return new p(t);this._wrapped=t};if(typeof exports!=="undefined"){if(typeof t!=="undefined"&&t.exports){exports=t.exports=p}exports._=p}else{i._=p}p.VERSION="1.7.0";var m=function(t,i,n){if(i===void 0)return t;switch(n==null?3:n){case 1:return function(n){return t.call(i,n)};case 2:return function(n,a){return t.call(i,n,a)};case 3:return function(n,a,r){return t.call(i,n,a,r)};case 4:return function(n,a,r,s){return t.call(i,n,a,r,s)}}return function(){return t.apply(i,arguments)}};p.iteratee=function(t,i,n){if(t==null)return p.identity;if(p.isFunction(t))return m(t,i,n);if(p.isObject(t))return p.matches(t);return p.property(t)};p.each=p.forEach=function(t,i,n){if(t==null)return t;i=m(i,n);var a,r=t.length;if(r===+r){for(a=0;a<r;a++){i(t[a],a,t)}}else{var s=p.keys(t);for(a=0,r=s.length;a<r;a++){i(t[s[a]],s[a],t)}}return t};p.map=p.collect=function(t,i,n){if(t==null)return[];i=p.iteratee(i,n);var a=t.length!==+t.length&&p.keys(t),r=(a||t).length,s=Array(r),o;for(var l=0;l<r;l++){o=a?a[l]:l;s[l]=i(t[o],o,t)}return s};var g="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,i,n,a){if(t==null)t=[];i=m(i,a,4);var r=t.length!==+t.length&&p.keys(t),s=(r||t).length,o=0,l;if(arguments.length<3){if(!s)throw new TypeError(g);n=t[r?r[o++]:o++]}for(;o<s;o++){l=r?r[o]:o;n=i(n,t[l],l,t)}return n};p.reduceRight=p.foldr=function(t,i,n,a){if(t==null)t=[];i=m(i,a,4);var r=t.length!==+t.length&&p.keys(t),s=(r||t).length,o;if(arguments.length<3){if(!s)throw new TypeError(g);n=t[r?r[--s]:--s]}while(s--){o=r?r[s]:s;n=i(n,t[o],o,t)}return n};p.find=p.detect=function(t,i,n){var a;i=p.iteratee(i,n);p.some(t,function(t,n,r){if(i(t,n,r)){a=t;return true}});return a};p.filter=p.select=function(t,i,n){var a=[];if(t==null)return a;i=p.iteratee(i,n);p.each(t,function(t,n,r){if(i(t,n,r))a.push(t)});return a};p.reject=function(t,i,n){return p.filter(t,p.negate(p.iteratee(i)),n)};p.every=p.all=function(t,i,n){if(t==null)return true;i=p.iteratee(i,n);var a=t.length!==+t.length&&p.keys(t),r=(a||t).length,s,o;for(s=0;s<r;s++){o=a?a[s]:s;if(!i(t[o],o,t))return false}return true};p.some=p.any=function(t,i,n){if(t==null)return false;i=p.iteratee(i,n);var a=t.length!==+t.length&&p.keys(t),r=(a||t).length,s,o;for(s=0;s<r;s++){o=a?a[s]:s;if(i(t[o],o,t))return true}return false};p.contains=p.include=function(t,i){if(t==null)return false;if(t.length!==+t.length)t=p.values(t);return p.indexOf(t,i)>=0};p.invoke=function(t,i){var n=l.call(arguments,2);var a=p.isFunction(i);return p.map(t,function(t){return(a?i:t[i]).apply(t,n)})};p.pluck=function(t,i){return p.map(t,p.property(i))};p.where=function(t,i){return p.filter(t,p.matches(i))};p.findWhere=function(t,i){return p.find(t,p.matches(i))};p.max=function(t,i,n){var a=-Infinity,r=-Infinity,s,o;if(i==null&&t!=null){t=t.length===+t.length?t:p.values(t);for(var l=0,u=t.length;l<u;l++){s=t[l];if(s>a){a=s}}}else{i=p.iteratee(i,n);p.each(t,function(t,n,s){o=i(t,n,s);if(o>r||o===-Infinity&&a===-Infinity){a=t;r=o}})}return a};p.min=function(t,i,n){var a=Infinity,r=Infinity,s,o;if(i==null&&t!=null){t=t.length===+t.length?t:p.values(t);for(var l=0,u=t.length;l<u;l++){s=t[l];if(s<a){a=s}}}else{i=p.iteratee(i,n);p.each(t,function(t,n,s){o=i(t,n,s);if(o<r||o===Infinity&&a===Infinity){a=t;r=o}})}return a};p.shuffle=function(t){var i=t&&t.length===+t.length?t:p.values(t);var n=i.length;var a=Array(n);for(var r=0,s;r<n;r++){s=p.random(0,r);if(s!==r)a[r]=a[s];a[s]=i[r]}return a};p.sample=function(t,i,n){if(i==null||n){if(t.length!==+t.length)t=p.values(t);return t[p.random(t.length-1)]}return p.shuffle(t).slice(0,Math.max(0,i))};p.sortBy=function(t,i,n){i=p.iteratee(i,n);return p.pluck(p.map(t,function(t,n,a){return{value:t,index:n,criteria:i(t,n,a)}}).sort(function(t,i){var n=t.criteria;var a=i.criteria;if(n!==a){if(n>a||n===void 0)return 1;if(n<a||a===void 0)return-1}return t.index-i.index}),"value")};var b=function(t){return function(i,n,a){var r={};n=p.iteratee(n,a);p.each(i,function(a,s){var o=n(a,s,i);t(r,a,o)});return r}};p.groupBy=b(function(t,i,n){if(p.has(t,n))t[n].push(i);else t[n]=[i]});p.indexBy=b(function(t,i,n){t[n]=i});p.countBy=b(function(t,i,n){if(p.has(t,n))t[n]++;else t[n]=1});p.sortedIndex=function(t,i,n,a){n=p.iteratee(n,a,1);var r=n(i);var s=0,o=t.length;while(s<o){var l=s+o>>>1;if(n(t[l])<r)s=l+1;else o=l}return s};p.toArray=function(t){if(!t)return[];if(p.isArray(t))return l.call(t);if(t.length===+t.length)return p.map(t,p.identity);return p.values(t)};p.size=function(t){if(t==null)return 0;return t.length===+t.length?t.length:p.keys(t).length};p.partition=function(t,i,n){i=p.iteratee(i,n);var a=[],r=[];p.each(t,function(t,n,s){(i(t,n,s)?a:r).push(t)});return[a,r]};p.first=p.head=p.take=function(t,i,n){if(t==null)return void 0;if(i==null||n)return t[0];if(i<0)return[];return l.call(t,0,i)};p.initial=function(t,i,n){return l.call(t,0,Math.max(0,t.length-(i==null||n?1:i)))};p.last=function(t,i,n){if(t==null)return void 0;if(i==null||n)return t[t.length-1];return l.call(t,Math.max(t.length-i,0))};p.rest=p.tail=p.drop=function(t,i,n){return l.call(t,i==null||n?1:i)};p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,i,n,a){if(i&&p.every(t,p.isArray)){return u.apply(a,t)}for(var r=0,s=t.length;r<s;r++){var l=t[r];if(!p.isArray(l)&&!p.isArguments(l)){if(!n)a.push(l)}else if(i){o.apply(a,l)}else{v(l,i,n,a)}}return a};p.flatten=function(t,i){return v(t,i,false,[])};p.without=function(t){return p.difference(t,l.call(arguments,1))};p.uniq=p.unique=function(t,i,n,a){if(t==null)return[];if(!p.isBoolean(i)){a=n;n=i;i=false}if(n!=null)n=p.iteratee(n,a);var r=[];var s=[];for(var o=0,l=t.length;o<l;o++){var u=t[o];if(i){if(!o||s!==u)r.push(u);s=u}else if(n){var d=n(u,o,t);if(p.indexOf(s,d)<0){s.push(d);r.push(u)}}else if(p.indexOf(r,u)<0){r.push(u)}}return r};p.union=function(){return p.uniq(v(arguments,true,true,[]))};p.intersection=function(t){if(t==null)return[];var i=[];var n=arguments.length;for(var a=0,r=t.length;a<r;a++){var s=t[a];if(p.contains(i,s))continue;for(var o=1;o<n;o++){if(!p.contains(arguments[o],s))break}if(o===n)i.push(s)}return i};p.difference=function(t){var i=v(l.call(arguments,1),true,true,[]);return p.filter(t,function(t){return!p.contains(i,t)})};p.zip=function(t){if(t==null)return[];var i=p.max(arguments,"length").length;var n=Array(i);for(var a=0;a<i;a++){n[a]=p.pluck(arguments,a)}return n};p.object=function(t,i){if(t==null)return{};var n={};for(var a=0,r=t.length;a<r;a++){if(i){n[t[a]]=i[a]}else{n[t[a][0]]=t[a][1]}}return n};p.indexOf=function(t,i,n){if(t==null)return-1;var a=0,r=t.length;if(n){if(typeof n=="number"){a=n<0?Math.max(0,r+n):n}else{a=p.sortedIndex(t,i);return t[a]===i?a:-1}}for(;a<r;a++)if(t[a]===i)return a;return-1};p.lastIndexOf=function(t,i,n){if(t==null)return-1;var a=t.length;if(typeof n=="number"){a=n<0?a+n+1:Math.min(a,n+1)}while(--a>=0)if(t[a]===i)return a;return-1};p.range=function(t,i,n){if(arguments.length<=1){i=t||0;t=0}n=n||1;var a=Math.max(Math.ceil((i-t)/n),0);var r=Array(a);for(var s=0;s<a;s++,t+=n){r[s]=t}return r};var y=function(){};p.bind=function(t,i){var n,a;if(h&&t.bind===h)return h.apply(t,l.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");n=l.call(arguments,2);a=function(){if(!(this instanceof a))return t.apply(i,n.concat(l.call(arguments)));y.prototype=t.prototype;var r=new y;y.prototype=null;var s=t.apply(r,n.concat(l.call(arguments)));if(p.isObject(s))return s;return r};return a};p.partial=function(t){var i=l.call(arguments,1);return function(){var n=0;var a=i.slice();for(var r=0,s=a.length;r<s;r++){if(a[r]===p)a[r]=arguments[n++]}while(n<arguments.length)a.push(arguments[n++]);return t.apply(this,a)}};p.bindAll=function(t){var i,n=arguments.length,a;if(n<=1)throw new Error("bindAll must be passed function names");for(i=1;i<n;i++){a=arguments[i];t[a]=p.bind(t[a],t)}return t};p.memoize=function(t,i){var n=function(a){var r=n.cache;var s=i?i.apply(this,arguments):a;if(!p.has(r,s))r[s]=t.apply(this,arguments);return r[s]};n.cache={};return n};p.delay=function(t,i){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},i)};p.defer=function(t){return p.delay.apply(p,[t,1].concat(l.call(arguments,1)))};p.throttle=function(t,i,n){var a,r,s;var o=null;var l=0;if(!n)n={};var u=function(){l=n.leading===false?0:p.now();o=null;s=t.apply(a,r);if(!o)a=r=null};return function(){var d=p.now();if(!l&&n.leading===false)l=d;var c=i-(d-l);a=this;r=arguments;if(c<=0||c>i){clearTimeout(o);o=null;l=d;s=t.apply(a,r);if(!o)a=r=null}else if(!o&&n.trailing!==false){o=setTimeout(u,c)}return s}};p.debounce=function(t,i,n){var a,r,s,o,l;var u=function(){var d=p.now()-o;if(d<i&&d>0){a=setTimeout(u,i-d)}else{a=null;if(!n){l=t.apply(s,r);if(!a)s=r=null}}};return function(){s=this;r=arguments;o=p.now();var d=n&&!a;if(!a)a=setTimeout(u,i);if(d){l=t.apply(s,r);s=r=null}return l}};p.wrap=function(t,i){return p.partial(i,t)};p.negate=function(t){return function(){return!t.apply(this,arguments)}};p.compose=function(){var t=arguments;var i=t.length-1;return function(){var n=i;var a=t[i].apply(this,arguments);while(n--)a=t[n].call(this,a);return a}};p.after=function(t,i){return function(){if(--t<1){return i.apply(this,arguments)}}};p.before=function(t,i){var n;return function(){if(--t>0){n=i.apply(this,arguments)}else{i=null}return n}};p.once=p.partial(p.before,2);p.keys=function(t){if(!p.isObject(t))return[];if(f)return f(t);var i=[];for(var n in t)if(p.has(t,n))i.push(n);return i};p.values=function(t){var i=p.keys(t);var n=i.length;var a=Array(n);for(var r=0;r<n;r++){a[r]=t[i[r]]}return a};p.pairs=function(t){var i=p.keys(t);var n=i.length;var a=Array(n);for(var r=0;r<n;r++){a[r]=[i[r],t[i[r]]]}return a};p.invert=function(t){var i={};var n=p.keys(t);for(var a=0,r=n.length;a<r;a++){i[t[n[a]]]=n[a]}return i};p.functions=p.methods=function(t){var i=[];for(var n in t){if(p.isFunction(t[n]))i.push(n)}return i.sort()};p.extend=function(t){if(!p.isObject(t))return t;var i,n;for(var a=1,r=arguments.length;a<r;a++){i=arguments[a];for(n in i){if(c.call(i,n)){t[n]=i[n]}}}return t};p.pick=function(t,i,n){var a={},r;if(t==null)return a;if(p.isFunction(i)){i=m(i,n);for(r in t){var s=t[r];if(i(s,r,t))a[r]=s}}else{var o=u.apply([],l.call(arguments,1));t=new Object(t);for(var d=0,c=o.length;d<c;d++){r=o[d];if(r in t)a[r]=t[r]}}return a};p.omit=function(t,i,n){if(p.isFunction(i)){i=p.negate(i)}else{var a=p.map(u.apply([],l.call(arguments,1)),String);i=function(t,i){return!p.contains(a,i)}}return p.pick(t,i,n)};p.defaults=function(t){if(!p.isObject(t))return t;for(var i=1,n=arguments.length;i<n;i++){var a=arguments[i];for(var r in a){if(t[r]===void 0)t[r]=a[r]}}return t};p.clone=function(t){if(!p.isObject(t))return t;return p.isArray(t)?t.slice():p.extend({},t)};p.tap=function(t,i){i(t);return t};var w=function(t,i,n,a){if(t===i)return t!==0||1/t===1/i;if(t==null||i==null)return t===i;if(t instanceof p)t=t._wrapped;if(i instanceof p)i=i._wrapped;var r=d.call(t);if(r!==d.call(i))return false;switch(r){case"[object RegExp]":case"[object String]":return""+t===""+i;case"[object Number]":if(+t!==+t)return+i!==+i;return+t===0?1/+t===1/i:+t===+i;case"[object Date]":case"[object Boolean]":return+t===+i}if(typeof t!="object"||typeof i!="object")return false;var s=n.length;while(s--){if(n[s]===t)return a[s]===i}var o=t.constructor,l=i.constructor;if(o!==l&&"constructor"in t&&"constructor"in i&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(l)&&l instanceof l)){return false}n.push(t);a.push(i);var u,c;if(r==="[object Array]"){u=t.length;c=u===i.length;if(c){while(u--){if(!(c=w(t[u],i[u],n,a)))break}}}else{var _=p.keys(t),f;u=_.length;c=p.keys(i).length===u;if(c){while(u--){f=_[u];if(!(c=p.has(i,f)&&w(t[f],i[f],n,a)))break}}}n.pop();a.pop();return c};p.isEqual=function(t,i){return w(t,i,[],[])};p.isEmpty=function(t){if(t==null)return true;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return t.length===0;for(var i in t)if(p.has(t,i))return false;return true};p.isElement=function(t){return!!(t&&t.nodeType===1)};p.isArray=_||function(t){return d.call(t)==="[object Array]"};p.isObject=function(t){var i=typeof t;return i==="function"||i==="object"&&!!t};p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(i){return d.call(i)==="[object "+t+"]"}});if(!p.isArguments(arguments)){p.isArguments=function(t){return p.has(t,"callee")}}if(typeof/./!=="function"){p.isFunction=function(t){return typeof t=="function"||false}}p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))};p.isNaN=function(t){return p.isNumber(t)&&t!==+t};p.isBoolean=function(t){return t===true||t===false||d.call(t)==="[object Boolean]"};p.isNull=function(t){return t===null};p.isUndefined=function(t){return t===void 0};p.has=function(t,i){return t!=null&&c.call(t,i)};p.noConflict=function(){i._=n;return this};p.identity=function(t){return t};p.constant=function(t){return function(){return t}};p.noop=function(){};p.property=function(t){return function(i){return i[t]}};p.matches=function(t){var i=p.pairs(t),n=i.length;return function(t){if(t==null)return!n;t=new Object(t);for(var a=0;a<n;a++){var r=i[a],s=r[0];if(r[1]!==t[s]||!(s in t))return false}return true}};p.times=function(t,i,n){var a=Array(Math.max(0,t));i=m(i,n,1);for(var r=0;r<t;r++)a[r]=i(r);return a};p.random=function(t,i){if(i==null){i=t;t=0}return t+Math.floor(Math.random()*(i-t+1))};p.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var T=p.invert(k);var M=function(t){var i=function(i){return t[i]};var n="(?:"+p.keys(t).join("|")+")";var a=RegExp(n);var r=RegExp(n,"g");return function(t){t=t==null?"":""+t;return a.test(t)?t.replace(r,i):t}};p.escape=M(k);p.unescape=M(T);p.result=function(t,i){if(t==null)return void 0;var n=t[i];return p.isFunction(n)?t[i]():n};var S=0;p.uniqueId=function(t){var i=++S+"";return t?t+i:i};p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/;var z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var C=/\\|'|\r|\n|\u2028|\u2029/g;var A=function(t){return"\\"+z[t]};p.template=function(t,i,n){if(!i&&n)i=n;i=p.defaults({},i,p.templateSettings);var a=RegExp([(i.escape||L).source,(i.interpolate||L).source,(i.evaluate||L).source].join("|")+"|$","g");var r=0;var s="__p+='";t.replace(a,function(i,n,a,o,l){s+=t.slice(r,l).replace(C,A);r=l+i.length;if(n){s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(a){s+="'+\n((__t=("+a+"))==null?'':__t)+\n'"}else if(o){s+="';\n"+o+"\n__p+='"}return i});s+="';\n";if(!i.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(i.variable||"obj","_",s)}catch(e){e.source=s;throw e}var l=function(t){return o.call(this,t,p)};var u=i.variable||"obj";l.source="function("+u+"){\n"+s+"}";return l};p.chain=function(t){var i=p(t);i._chain=true;return i};var B=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(i){var n=p[i]=t[i];p.prototype[i]=function(){var t=[this._wrapped];o.apply(t,arguments);return B.call(this,n.apply(p,t))}})};p.mixin(p);p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=a[t];p.prototype[t]=function(){var n=this._wrapped;i.apply(n,arguments);if((t==="shift"||t==="splice")&&n.length===0)delete n[0];return B.call(this,n)}});p.each(["concat","join","slice"],function(t){var i=a[t];p.prototype[t]=function(){return B.call(this,i.apply(this._wrapped,arguments))}});p.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return p})}}).call(this)},{}]},{},[2]);var Localization=function(){this.test_mode=false;this.language=null;this.languages=["fr","es","pt","de","ja"];this.non_english=null;this.init=function(){if(typeof BF_STATIC!="undefined"){this.language=this.returnLang();this.country=this.returnCountry();this.non_english=this.nonEnglish();this.test_mode=this.inTestMode()}};this.getLangs=function(){return this.languages};this.returnLang=function(){if(typeof BF_STATIC.language!="undefined"){return BF_STATIC.language}else{return null}};this.returnCountry=function(){if(typeof BF_STATIC.country!="undefined"){return BF_STATIC.country}else{return null}};this.nonEnglish=function(){if(typeof BF_STATIC.non_english!="undefined"&&BF_STATIC.non_english){return true}else{return false}};this.foreignCountry=function(){if(typeof BF_STATIC.foreign_country!="undefined"&&BF_STATIC.foreign_country){return true}else{return false}};this.inTestMode=function(){if(typeof BF_STATIC.translation_debug!="undefined"&&BF_STATIC.translation_debug&&this.non_english&&this.language){return true}else{return false}};this.dictionary=function(){if(!this.language){return null}var language_dict={};var country_dict={};try{language_dict=eval(this.language+"_dictionary")}catch(e){language_dict=null}try{var country_obj=this.country.replace(/-/g,"_");country_dict=eval(country_obj+"_dictionary")}catch(e){country_dict=null}if(language_dict&&country_dict&&this.country&&this.language!=this.country&&(Object.keys(language_dict).length>0&&Object.keys(country_dict).length>0)){for(var key in country_dict){if(country_dict.hasOwnProperty(key)){language_dict[key]=country_dict[key]}}}return language_dict};this.testMode=function(t){return t+" ("+this.language+")"};this.translate=function(t,i){if(!t||typeof t!="string"){return null}var n,a=t.charAt(0)==" "?true:false,r=t.charAt(t.length-1)==" "?true:false;t=this.strip_spaces(t);n=this.dictionary()&&this.dictionary()[t]?this.dictionary()[t]:t;if(n&&i&&i.variables){n=this.var_replace(n,i.variables)}if(a){n=" "+n}if(r){n=n+" "}if(this.test_mode){n=this.testMode(n)}return n};this.strip_spaces=function(t){if(t.charAt(0)===" "){t=t.substr(1)}if(t.charAt(t.length-1)===" "){t=t.substr(0,t.length-1)}return t};this.var_replace=function(t,i){var n,a,r,s=t.split("#{"),o=s.length;for(a=0;a<o;a++){r=s[a];if(r){r=r.split("}")[0];if(i.hasOwnProperty(r)){n=i[r].toString()}else if(i.hasOwnProperty("#{"+r+"}")){n=i["#{"+r+"}"].toString()}else{n=null}if(n){n=this.translate(n);t=t.replace("#{"+r+"}",n)}}}return t}};var localize=new Localization;localize.init();var local=localize;local["t"]=local.translate;var BF_SiteSpeedUpload=function(){this._start_track_time={};this.opt_sampleRate=1;this.filter_empty_time=true;this.dom_time_spent=function(t){if(typeof bf_start_site_time=="undefined"){return false}var i=(new Date).getTime();var n=i-bf_start_site_time;var a=(BF_STATIC.tt_page?BF_STATIC.tt_page:"NA")+":DOM";if(bf_site_speed.filter_empty_time&&n||!bf_site_speed.filter_empty_time){gtrack.track_timing(a,t,n)}};this.start_track=function(t){bf_site_speed._start_track_time[t]=(new Date).getTime()};this.end_track=function(t,i,n){var a=(new Date).getTime();var r=bf_site_speed._start_track_time[t]?a-bf_site_speed._start_track_time[t]:0;delete bf_site_speed._start_track_time[t];if(bf_site_speed.filter_empty_time&&r||!bf_site_speed.filter_empty_time){gtrack.track_timing(t,i,r,n,bf_site_speed.opt_sampleRate)}}};var bf_site_speed=new BF_SiteSpeedUpload;Event.observe(window,"load",function(){bf_site_speed.dom_time_spent("Window Load")});var Hogan={};!function(t){function i(t,i,e){var n;return i&&"object"==typeof i&&(void 0!==i[t]?n=i[t]:e&&i.get&&"function"==typeof i.get&&(n=i.get(t))),n}function e(t,i,e,n,a,r){function s(){}function o(){}s.prototype=t,o.prototype=t.subs;var l,u=new s;u.subs=new o,u.subsText={},u.buf="",n=n||{},u.stackSubs=n,u.subsText=r;for(l in i)n[l]||(n[l]=i[l]);for(l in n)u.subs[l]=n[l];a=a||{},u.stackPartials=a;for(l in e)a[l]||(a[l]=e[l]);for(l in a)u.partials[l]=a[l];return u}function n(t){return String(null===t||void 0===t?"":t)}function a(t){return t=n(t),d.test(t)?t.replace(r,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(l,"&#39;").replace(u,"&quot;"):t}t.Template=function(t,i,e,n){t=t||{},this.r=t.code||this.r,this.c=e,this.options=n||{},this.text=i||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(){return""},v:a,t:n,render:function(t,i,e){return this.ri([t],i||{},e)},ri:function(t,i,e){return this.r(t,i,e)},ep:function(t,i){var n=this.partials[t],a=i[n.name];if(n.instance&&n.base==a)return n.instance;if("string"==typeof a){if(!this.c)throw new Error("No compiler available.");a=this.c.compile(a,this.options)}if(!a)return null;if(this.partials[t].base=a,n.subs){i.stackText||(i.stackText={});for(key in n.subs)i.stackText[key]||(i.stackText[key]=void 0!==this.activeSub&&i.stackText[this.activeSub]?i.stackText[this.activeSub]:this.text);a=e(a,n.subs,n.partials,this.stackSubs,this.stackPartials,i.stackText)}return this.partials[t].instance=a,a},rp:function(t,i,e,n){var a=this.ep(t,e);return a?a.ri(i,e,n):""},rs:function(t,i,e){var n=t[t.length-1];if(!c(n))return void e(t,i,this);for(var a=0;a<n.length;a++)t.push(n[a]),e(t,i,this),t.pop()},s:function(t,i,e,n,a,r,s){var o;return c(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ms(t,i,e,n,a,r,s)),o=!!t,!n&&o&&i&&i.push("object"==typeof t?t:i[i.length-1]),o)},d:function(t,e,n,a){var r,s=t.split("."),o=this.f(s[0],e,n,a),l=this.options.modelGet,u=null;if("."===t&&c(e[e.length-2]))o=e[e.length-1];else for(var d=1;d<s.length;d++)r=i(s[d],o,l),void 0!==r?(u=o,o=r):o="";return a&&!o?!1:(a||"function"!=typeof o||(e.push(u),o=this.mv(o,e,n),e.pop()),o)},f:function(t,e,n,a){for(var r=!1,s=null,o=!1,l=this.options.modelGet,u=e.length-1;u>=0;u--)if(s=e[u],r=i(t,s,l),void 0!==r){o=!0;break}return o?(a||"function"!=typeof r||(r=this.mv(r,e,n)),r):a?!1:""},ls:function(t,i,e,a,r){var s=this.options.delimiters;return this.options.delimiters=r,this.b(this.ct(n(t.call(i,a)),i,e)),this.options.delimiters=s,!1},ct:function(t,i,e){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(i,e)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,i,e,n,a,r,s){var o,l=i[i.length-1],u=t.call(l);return"function"==typeof u?n?!0:(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(u,l,e,o.substring(a,r),s)):u},mv:function(t,i,e){var a=i[i.length-1],r=t.call(a);return"function"==typeof r?this.ct(n(r.call(a)),a,e):r},sub:function(t,i,e,n){var a=this.subs[t];a&&(this.activeSub=t,a(i,e,this,n),this.activeSub=!1)}};var r=/&/g,s=/</g,o=/>/g,l=/\'/g,u=/\"/g,d=/[&<>\"\']/,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function i(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function e(t){
return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,i,e){if(i.charAt(e)!=t.charAt(0))return!1;for(var n=1,a=t.length;a>n;n++)if(i.charAt(e+n)!=t.charAt(n))return!1;return!0}function a(i,e,n,o){var l=[],u=null,d=null,c=null;for(d=n[n.length-1];i.length>0;){if(c=i.shift(),d&&"<"==d.tag&&!(c.tag in w))throw new Error("Illegal content in < super tag.");if(t.tags[c.tag]<=t.tags.$||r(c,o))n.push(c),c.nodes=a(i,c.tag,n,o);else{if("/"==c.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+c.n);if(u=n.pop(),c.n!=u.n&&!s(c.n,u.n,o))throw new Error("Nesting error: "+u.n+" vs. "+c.n);return u.end=c.i,l}"\n"==c.tag&&(c.last=0==i.length||"\n"==i[0].tag)}l.push(c)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return l}function r(t,i){for(var e=0,n=i.length;n>e;e++)if(i[e].o==t.n)return t.tag="#",!0}function s(t,i,e){for(var n=0,a=e.length;a>n;n++)if(e[n].c==t&&e[n].o==i)return!0}function o(t){var i=[];for(var e in t)i.push('"'+u(e)+'": function(c,p,t,i) {'+t[e]+"}");return"{ "+i.join(",")+" }"}function l(t){var i=[];for(var e in t.partials)i.push('"'+u(e)+'":{name:"'+u(t.partials[e].name)+'", '+l(t.partials[e])+"}");return"partials: {"+i.join(",")+"}, subs: "+o(t.subs)}function u(t){return t.replace(b,"\\\\").replace(p,'\\"').replace(m,"\\n").replace(g,"\\r").replace(v,"\\u2028").replace(y,"\\u2029")}function d(t){return~t.indexOf(".")?"d":"f"}function c(t,i){var e="<"+(i.prefix||""),n=e+t.n+k++;return i.partials[n]={name:t.n,partials:{}},i.code+='t.b(t.rp("'+u(n)+'",c,p,"'+(t.indent||"")+'"));',n}function _(t,i){i.code+="t.b(t.t(t."+d(t.n)+'("'+u(t.n)+'",c,p,0)));'}function f(t){return"t.b("+t+");"}var h=/\S/,p=/\"/g,m=/\n/g,g=/\r/g,b=/\\/g,v=/\u2028/,y=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(a,r){function s(){b.length>0&&(v.push({tag:"_t",text:new String(b)}),b="")}function o(){for(var i=!0,e=k;e<v.length;e++)if(i=t.tags[v[e].tag]<t.tags._v||"_t"==v[e].tag&&null===v[e].text.match(h),!i)return!1;return i}function l(t,i){if(s(),t&&o())for(var e,n=k;n<v.length;n++)v[n].text&&((e=v[n+1])&&">"==e.tag&&(e.indent=v[n].text.toString()),v.splice(n,1));else i||v.push({tag:"\n"});y=!1,k=v.length}function u(t,i){var n="="+M,a=t.indexOf(n,i),r=e(t.substring(t.indexOf("=",i)+1,a)).split(" ");return T=r[0],M=r[r.length-1],a+n.length-1}var d=a.length,c=0,_=1,f=2,p=c,m=null,g=null,b="",v=[],y=!1,w=0,k=0,T="{{",M="}}";for(r&&(r=r.split(" "),T=r[0],M=r[1]),w=0;d>w;w++)p==c?n(T,a,w)?(--w,s(),p=_):"\n"==a.charAt(w)?l(y):b+=a.charAt(w):p==_?(w+=T.length-1,g=t.tags[a.charAt(w+1)],m=g?a.charAt(w+1):"_v","="==m?(w=u(a,w),p=c):(g&&w++,p=f),y=w):n(M,a,w)?(v.push({tag:m,n:e(b),otag:T,ctag:M,i:"/"==m?y-T.length:w+M.length}),b="",w+=M.length-1,p=c,"{"==m&&("}}"==M?w++:i(v[v.length-1]))):b+=a.charAt(w);return l(y,!0),v};var w={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(i){return"{code: function (c,p,i) { "+t.wrapMain(i.code)+" },"+l(i)+"}"};var k=0;t.generate=function(i,e,n){k=0;var a={code:"",subs:{},partials:{}};return t.walk(i,a),n.asString?this.stringify(a,e,n):this.makeTemplate(a,e,n)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,i,e){var n=this.makePartials(t);return n.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(n,i,this,e)},t.makePartials=function(t){var i,e={subs:{},partials:t.partials,name:t.name};for(i in e.partials)e.partials[i]=this.makePartials(e.partials[i]);for(i in t.subs)e.subs[i]=new Function("c","p","t","i",t.subs[i]);return e},t.codegen={"#":function(i,e){e.code+="if(t.s(t."+d(i.n)+'("'+u(i.n)+'",c,p,1),c,p,0,'+i.i+","+i.end+',"'+i.otag+" "+i.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(i.nodes,e),e.code+="});c.pop();}"},"^":function(i,e){e.code+="if(!t.s(t."+d(i.n)+'("'+u(i.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(i.nodes,e),e.code+="};"},">":c,"<":function(i,e){var n={partials:{},code:"",subs:{},inPartial:!0};t.walk(i.nodes,n);var a=e.partials[c(i,e)];a.subs=n.subs,a.partials=n.partials},$:function(i,e){var n={subs:{},code:"",partials:e.partials,prefix:i.n};t.walk(i.nodes,n),e.subs[i.n]=n.code,e.inPartial||(e.code+='t.sub("'+u(i.n)+'",c,p,i);')},"\n":function(t,i){i.code+=f('"\\n"'+(t.last?"":" + i"))},_v:function(t,i){i.code+="t.b(t.v(t."+d(t.n)+'("'+u(t.n)+'",c,p,0)));'},_t:function(t,i){i.code+=f('"'+u(t.text)+'"')},"{":_,"&":_},t.walk=function(i,e){for(var n,a=0,r=i.length;r>a;a++)n=t.codegen[i[a].tag],n&&n(i[a],e);return e},t.parse=function(t,i,e){return e=e||{},a(t,"",[],e.sectionTags||[])},t.cache={},t.cacheKey=function(t,i){return[t,!!i.asString,!!i.disableLambda,i.delimiters,!!i.modelGet].join("||")},t.compile=function(i,e){e=e||{};var n=t.cacheKey(i,e),a=this.cache[n];if(a){var r=a.partials;for(var s in r)delete r[s].instance;return a}return a=this.generate(this.parse(this.scan(i,e.delimiters),i,e),i,e),this.cache[n]=a}}("undefined"!=typeof exports?exports:Hogan);var Mustache=function(t){function i(i,e,n,a){var r=this.f(i,e,n,0),s=e;return r&&(s=s.concat(r)),t.Template.prototype.rp.call(this,i,s,n,a)}var e=function(e,n,a){this.rp=i,t.Template.call(this,e,n,a)};e.prototype=t.Template.prototype;var n,a=function(){this.cache={},this.generate=function(t,i){return new e(new Function("c","p","i",t),i,n)}};return a.prototype=t,n=new a,{to_html:function(t,i,e,a){var r=n.compile(t),s=r.render(i,e);return a?void a(s):s}}}(Hogan);var Box={};Box.EventTarget=function(){"use strict";function t(){this._handlers={}}return t.prototype={constructor:t,on:function(t,e){var i,n,a=this._handlers[t];for("undefined"==typeof a&&(a=this._handlers[t]=[]),i=0,n=a.length;n>i;i++)if(a[i]===e)return;a.push(e)},fire:function(t,e){var i,n,a,r={type:t,data:e};if(i=this._handlers[r.type],i instanceof Array)for(i=i.concat(),n=0,a=i.length;a>n;n++)i[n].call(this,r)},off:function(t,e){var i,n,a=this._handlers[t];if(a instanceof Array)for(i=0,n=a.length;n>i;i++)if(a[i]===e){a.splice(i,1);break}}},t}(),Box.NativeDOM=function(){"use strict";return{type:"native",query:function(t,e){return t.querySelector(e)},queryAll:function(t,e){return t.querySelectorAll(e)},on:function(t,e,i){t.addEventListener(e,i,!1)},off:function(t,e,i){t.removeEventListener(e,i,!1)}}}(),Box.DOM=Box.NativeDOM,Box.DOMEventDelegate=function(){"use strict";function t(t){return t&&t.hasAttribute("data-module")}function e(t){return t&&t.hasAttribute("data-type")}function i(i){for(var n=e(i);!n&&i&&!t(i);)i=i.parentNode,n=e(i);return n?i:null}function n(t,e,i){var n,a;for(n=0;n<r.length;n++)a=r[n],t["on"+a]&&e.call(i,a)}function a(t,e){this.element=t,this._handler=e,this._boundHandler={},this._attached=!1}var r=["click","mouseover","mouseout","mousedown","mouseup","mouseenter","mouseleave","mousemove","keydown","keyup","submit","change","contextmenu","dblclick","input","focusin","focusout"];return a.prototype={constructor:a,_handleEvent:function(t){var e=i(t.target),n=e?e.getAttribute("data-type"):"";this._handler["on"+t.type](t,e,n)},attachEvents:function(){this._attached||(n(this._handler,function(t){function e(){i._handleEvent.apply(i,arguments)}var i=this;Box.DOM.on(this.element,t,e),this._boundHandler[t]=e},this),this._attached=!0)},detachEvents:function(){n(this._handler,function(t){Box.DOM.off(this.element,t,this._boundHandler[t])},this)}},a}(),Box.Context=function(){"use strict";function t(t,e){this.application=t,this.element=e}return t.prototype={broadcast:function(t,e){this.application.broadcast(t,e)},getService:function(t){return this.application.getService(t)},hasService:function(t){return this.application.hasService(t)},getConfig:function(t){return this.application.getModuleConfig(this.element,t)},getGlobal:function(t){return this.application.getGlobal(t)},getGlobalConfig:function(t){return this.application.getGlobalConfig(t)},reportError:function(t){this.application.reportError(t)},getElement:function(){return this.element}},t}(),Box.Application=function(){"use strict";function t(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function e(t,e){return function(){return t.apply(e,arguments)}}function i(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function n(){m={},g={},v={},b=[],y={},w={},k=!1}function a(t){for(var e=0,i=b.length;i>e;e++)if(b[e]===t)return!0;return!1}function r(t){if(m.debug)throw t;T.fire("error",{exception:t})}function s(t,e){var i,n;for(i in t)n=t[i],"function"==typeof n&&(t[i]=function(t,i){return function(){var n=e+"."+t+"() - ";try{return i.apply(this,arguments)}catch(a){a.methodName=t,a.objectName=e,a.name=n+a.name,a.message=n+a.message,r(a)}}}(i,n))}function o(t){var e=t.getAttribute("data-module");return e?e.split(" ")[0]:""}function l(t,e){"function"==typeof t[e]&&t[e].apply(t,Array.prototype.slice.call(arguments,2))}function u(t){var e=v[t];if(e){if(!e.instance){if(a(t))return r(new ReferenceError("Circular service dependency: "+b.join(" -> ")+" -> "+t)),null;b.push(t),e.instance=e.creator(T),b.pop()}return e.instance}return r(new Error('Service "'+t+'" not found')),null}function d(t){var e,i,n,a,s,o=[],l={};for(i=t.instance.behaviors||[],e=0;e<i.length;e++)s=i[e],"behaviorInstances"in t||(t.behaviorInstances={}),a=t.behaviorInstances,n=y[s],s in l?r(new Error('Behavior "'+s+'" cannot be specified twice in a module.')):n?(a[s]||(a[s]=n.creator(t.context)),o.push(a[s])):r(new Error('Behavior "'+s+'" not found')),l[s]=!0;return o}function c(t,e,i){var n=new Box.DOMEventDelegate(e,i);t.push(n),n.attachEvents()}function _(t){var e=t.eventDelegates,i=d(t);c(e,t.element,t.instance);for(var n=0;n<i.length;n++)c(e,t.element,i[n])}function f(t){for(var e=t.eventDelegates,i=0;i<e.length;i++)e[i].detachEvents();t.eventDelegates=[]}function h(t){return w[t.id]}var p="[data-module]",m={},g={},b=[],v={},y={},w={},k=!1,T=new Box.EventTarget;return t(T,{init:function(e){return t(m,e||{}),this.startAll(document.documentElement),this.fire("init"),k=!0,this},destroy:function(){return this.stopAll(document.documentElement),n(),this},isStarted:function(t){var e=h(t);return"object"==typeof e},start:function(t){var e,i,n,a=o(t),u=g[a];if(!u)return r(new Error('Module type "'+a+'" is not defined.')),this;if(!this.isStarted(t)){t.id||(t.id="mod-"+a+"-"+u.counter),u.counter++,i=new Box.Context(this,t),n=u.creator(i),m.debug||s(n,a),e={moduleName:a,instance:n,context:i,element:t,eventDelegates:[]},w[t.id]=e;for(var c,f=d(e),h=0,p=f.length;p>h;h++)c=f[h],l(c,"init");l(e.instance,"init"),_(e)}return this},stop:function(t){var e=h(t);if(e){f(e);for(var i,n=d(e),a=n.length-1;a>=0;a--)i=n[a],l(i,"destroy");l(e.instance,"destroy"),delete w[t.id]}else if(m.debug)return r(new Error("Unable to stop module associated with element: "+t.id)),this;return this},startAll:function(t){for(var e=Box.DOM.queryAll(t,p),i=0,n=e.length;n>i;i++)this.start(e[i]);return this},stopAll:function(t){for(var e=Box.DOM.queryAll(t,p),i=0,n=e.length;n>i;i++)this.stop(e[i]);return this},addModule:function(t,e){return"undefined"!=typeof g[t]?(r(new Error("Module "+t+" has already been added.")),this):(g[t]={creator:e,counter:1},this)},getModuleConfig:function(t,e){var i,n=h(t);return n?(n.config||(i=Box.DOM.query(t,'script[type="text/x-config"]'),i&&(n.config=JSON.parse(i.text))),n.config?"undefined"==typeof e?n.config:e in n.config?n.config[e]:null:null):null},addService:function(t,e){return"undefined"!=typeof v[t]?(r(new Error("Service "+t+" has already been added.")),this):(v[t]={creator:e,instance:null},this)},getService:u,hasService:function(t){return v.hasOwnProperty(t)},addBehavior:function(t,e){return"undefined"!=typeof y[t]?(r(new Error("Behavior "+t+" has already been added.")),this):(y[t]={creator:e,instance:null},this)},broadcast:function(t,n){var a,r,s,o,l,u;for(r in w)if(w.hasOwnProperty(r)){for(u=[],s=w[r],-1!==i(s.instance.messages||[],t)&&u.push(e(s.instance.onmessage,s.instance)),l=d(s),a=0;a<l.length;a++)o=l[a],-1!==i(o.messages||[],t)&&u.push(e(o.onmessage,o));for(a=0;a<u.length;a++)u[a](t,n)}return this.fire("message",{message:t,messageData:n}),this},getGlobal:function(t){return t in window?window[t]:null},getGlobalConfig:function(t){return"undefined"==typeof t?m:t in m?m[t]:null},setGlobalConfig:function(e){return k?(r(new Error("Cannot set global configuration after application initialization")),this):(t(m,e),this)},reportError:r})}();Box.Application.addService("log",function(t){"use strict";var i={};var n=t.getGlobal("BF_STATIC");i.info=function(t){if(n.bf_env!=="dev"||!console||!console.info){return false}console.info(t);if(console.trace){console.trace()}return true};i.error=function(t){if(n.bf_env==="dev"&&console&&console.error){console.error(t)}return false};i.debug=function(t){if(n.bf_env!=="dev"||!console||!console.debug){return false}console.debug(t);if(console.trace){console.trace()}return true};return i});Box.Application.addService("util",function(t){"use strict";var i={};var jQuery=t.getGlobal("jQuery");var n=t.getGlobal("Prototype");var a=t.getGlobal("BF_STATIC");var r=t.getGlobal("$H");var s=t.getGlobal("$A");var o=t.getGlobal("Object");i.hasjQuery=function(){return!!jQuery&&!n}();i.isMobile=function(){if(i.hasjQuery&&/^mobile/i.test(a.tt_page)){return true}else if(i.hasjQuery&&/^ab_debug/i.test(a.tt_page)){return true}else if(i.hasjQuery&&a.tt_page==="BuzzAdvertise"){return true}else{return false}}();i.isMobileApp=function(){return a.mobile_app||false}();i.isDevEnv=function(){return a.bf_env==="dev"}();i.each=function(t,i){if(jQuery){return jQuery.each(t,function(t,n){i(n,t)})}else{return s(t).each(i)}};i.isNodeList=function(t){var i=Object.prototype.toString.call(t);return typeof t==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(i)&&typeof t.length!=="undefined"&&(t.length===0||typeof t[0]==="object"&&t[0].nodeType>0)};i.nodeListToArray=function(t){return Array.prototype.slice.call(t)};i.first=function(t){var n=i.isNodeList(t)?i.nodeListToArray(t):t;if(Array.isArray(n)&&n.length){return n[0]}return t};i.last=function(t){var n=i.isNodeList(t)?i.nodeListToArray(t):t;if(Array.isArray(n)&&n.length){return n[n.length-1]}return t};i.isArraylike=function(t){var i=!!t&&"length"in t&&t.length;var n=Array.isArray?Array.isArray(t):t instanceof Array;var a=t!==null&&t===t.window;if(typeof t==="function"||a){return false}return n||i===0||typeof i==="number"&&i>0&&i-1 in t};i.each=function(t,n){var a;var r=0;var s=t.length;var o=i.isArraylike(t);if(o){for(;r<s;r++){a=n.call(t[r],r,t[r],t);if(a===false){break}}}else{for(r in t){a=n.call(t[r],r,t[r],t);if(a===false){break}}}};i.toArray=function(t){if(!t||!t.length){return t}if(Array.isArray&&Array.isArray(t)){return t}var i=[];var n=0;for(;n<t.length;n++){i.push(t[n])}return i};i.extend=function(){var t=i.toArray(arguments);if(typeof t[0]==="boolean"){t.shift()}if(i.hasjQuery){return jQuery.extend.apply(jQuery,t)}else{t.forEach(function(i,n){if(!n){return}t[0]=r(t[0]).merge(i).toObject()});return t[0]}};i.isEmptyObj=function(t){for(var i in t){if(t.hasOwnProperty(i)){return false}}return true};i.throttle=function(t,i){var n;if(!i){return t}return function(){if(n){clearTimeout(n)}n=setTimeout(t,i)}};i.getUniqueEventName=function(t,i){return t+"-"+i.id};i.getKeys=function(t){var i;if(o.keys){return o.keys(t)}else{i=[];for(var n in t){if(t.hasOwnProperty(n)){i.push(n)}}return i}};i.isIOSMobile=function(){var t=navigator.userAgent.toLowerCase();if(t.match(/iphone|ipod/)){return true}return false}();i.getQueryParams=function(){var n=t.getGlobal("location").search.substring(1);var a=t.getGlobal("decodeURIComponent");var r={};if(n){n.split("&").forEach(function(t){var i=t.split("=");r[a(i[0])]=a(i[1])})}i.addQueryParam=function(i,n,a){i=i||t.getGlobal("location").href;return i+(i.split("?")[1]?"&":"?")+(n+"="+a)};return r};return i});Box.Application.addService("dom",function(t){"use strict";var i={};var n=t.getGlobal("Element");var a=t.getGlobal("Form");var r=t.getGlobal("Event");var jQuery=t.getGlobal("jQuery");var $=t.getGlobal("$");var s=t.getGlobal("$$");var o=t.getGlobal("document");var l=t.getGlobal("window");var u=t.getService("util");var d=t.getService("log");i.$=function(t){if(jQuery){return jQuery(t)}else{return s(t)}};i.getFirstEl=function(t){return u.hasjQuery&&t.jquery?t[0]:t};i.stringToHTML=function(t){var i=o.createElement("div");i.innerHTML=t;return i.childNodes};i.stringToFragment=function(t){if(!o.createDocumentFragment){return d.error("documentFragment is not supported")}var n=i.stringToHTML(t);var a=o.createDocumentFragment();while(n.length){a.appendChild(n[0])}return a};i.stringToReturnType=function(t,n){switch(n){case"fragment":return i.stringToFragment(t);case"nodeList":return i.stringToHTML(t)}return t};i.find=function(t,i){if(t.querySelectorAll){return Array.prototype.slice.call(t.querySelectorAll(i))}else if(u.hasjQuery){return jQuery(t).find(i).get()}return n.select(t,i).toArray()};i.up=function(t,i){if(u.hasjQuery){return jQuery(t).parents(i)[0]}return n.up(t,i)};i.after=function(t,i){if(u.hasjQuery){jQuery(t).after(i)}else{$(t).insert({after:i})}};i.previous=function(t){if(u.hasjQuery){return jQuery(t).prev()}else{return $(t).previous()}};i.next=function(t){if(u.hasjQuery){return jQuery(t).next()}else{return $(t).next()}};i.append=function(t,i){if(u.hasjQuery){jQuery(t).append(i)}else{$(t).insert({bottom:i})}};i.updateHTML=function(t,n){var a=$(i.getFirstEl(t));if(u.hasjQuery){a.html(n)}else{a.update(n)}};i.appendOnce=function(t,n,a){n=n||"body";var r;if(!t){return d.error("dom.appendOnce: No `nodeToAppend` passed")}if(!(t instanceof Node)){return d.error("dom.appendOnce: `nodeToAppend` should be instance of Node")}if(!a&&t){if(l.DocumentFragment&&t instanceof DocumentFragment&&t.firstChild.id){a="#"+t.firstChild.id}else if(t instanceof HTMLElement&&t.id){a="#"+t.id}}if(!a){return d.error("dom.appendOnce: Unable to detect selector to check element presence")}if(typeof n==="string"){r=i.$(n)[0]||i.$("body")[0]}else{r=n}if(!(r instanceof Node)){return d.error("dom.appendOnce: `container` is not a Node type object")}if(i.find(r,a).length){return true}r.appendChild(t);return true};i.addClass=function(t,i){if(!Array.isArray(t)){t=[t]}var a;var r;if(o.documentElement.classList){for(a=0,r=t.length;a<r;a++){if(typeof t[a]!=="undefined"){t[a].classList.add(i)}}}else if(u.hasjQuery){jQuery(t).addClass(i)}else{for(a=0,r=t.length;a<r;a++){n.addClassName(t[a],i)}}};i.removeClass=function(t,i){if(!Array.isArray(t)){t=[t]}var a;var r;if(o.documentElement.classList){var s=i.split(" ");for(a=0,r=t.length;a<r;a++){DOMTokenList.prototype.remove.apply(t[a].classList,s)}}else if(u.hasjQuery){jQuery(t).removeClass(i)}else{for(a=0,r=t.length;a<r;a++){n.removeClassName(t[a],i)}}};i.hasClass=function(t,i){if(!Array.isArray(t)){t=[t]}var a;var r;if(o.documentElement.classList){for(a=0,r=t.length;a<r;a++){if(t[a].classList.contains(i)){return true}}}else if(u.hasjQuery){return jQuery(t).hasClass(i)}else{for(a=0,r=t.length;a<r;a++){if(n.hasClassName(t[a],i)){return true}}}return false};i.serialize=function(t){if(u.hasjQuery){var i={};var n=jQuery(t).serializeArray();n.forEach(function(t){var n=t.name;var a=t.value;if(!i[n]){i[n]=a}else{i[n]=jQuery.makeArray(i[n]);i[n].push(a)}});return i}return a.serialize(t,{})};i.bindOnce=function(t,i,n){if(u.hasjQuery){var a=jQuery(t);a.on(i,function(e){n(e);a.off(i)})}else{r.observe(t,i,function(e){n(e);r.stopObserving(t,i)})}};i.getStyle=function(t,i){if(u.isMobile||u.hasjQuery){return jQuery(t).css(i)}else{return $(t).getStyle(i)}};i.setStyle=function(t,i){var n;if(u.isMobile||u.hasjQuery){for(n in i){jQuery(t).css(n,i[n])}}else{t.setStyle(i)}};i.getViewPosition=function(t,i){var n=t.getBoundingClientRect();var a=window.innerHeight||document.documentElement.clientHeight;i=i||0;var r={top:0-i,bottom:a+i};return{isWithinViewport:function(){return n.top>=0&&n.bottom<=a},isWithinLookahead:function(){return n.top>=r.top&&n.bottom<=r.bottom},isPartiallyInViewport:function(){return n.top>=0&&n.top<=a||n.bottom>0&&n.bottom<a},isPartiallyInLookahead:function(){return n.top<r.top&&n.bottom>r.top||n.top<r.bottom&&n.bottom>r.bottom}}};i.on=function(t,i){if(u.isMobile){$(l).on(t,i)}else{r.observe(l,t,i)}};i.off=function(t,i){if(u.isMobile){$(l).off(t,i)}else{r.stopObserving(l,t,i)}};i.offset=function(t){var i={};if(u.hasjQuery){i=jQuery(t).offset()}else{i=n.cumulativeOffset(t)}return i};return i});Box.Application.addService("modal",function(t){"use strict";var i=t.getService("template-engine");var n=t.getService("dom");var a={};var r;var s;var o;var l;function u(t){this.options=Object.extend({destroyOnHide:true,keyboard:true},t);if(r){this.create()}else{s.call(this,this.create)}}u.prototype.create=function(){var t="js-modal-instance";n.addClass(n.find(r,".modal__wrapper"),t);this.setContent(this.options.content,n.find(r,".modal__body").first());n.appendOnce(r.cloneNode(true),"body","body");this.$modal=n.find("body","."+t).first();n.removeClass(this.$modal,t);if(typeof this.options.onCreate==="function"){this.options.onCreate.call(this)}};u.prototype.setContent=function(t,i){if(t&&i){n.updateHTML(i,t)}};u.prototype.show=function(){n.addClass(document.body,"js-show-modal");n.addClass(this.$modal,"modal__wrapper--open");o.call(this);if(typeof this.options.onShow==="function"){this.options.onShow.call(this)}};u.prototype.hide=function(){n.removeClass(document.body,"js-show-modal");n.removeClass(this.$modal,"modal__wrapper--open");l.call(this);if(typeof this.options.onHide==="function"){this.options.onHide.call(this)}};u.prototype.destroy=function(){this.hide();this.$modal.parentNode.removeChild(this.$modal);if(typeof this.options.onDestroy==="function"){this.options.onDestroy.call(this)}};u.prototype.getElement=function(){return this.$modal};s=function(t){var n=this;i.load({id:"modal_base",returnType:"fragment",callback:function(i){r=i;t.call(n)}})};o=function(){var t=this;this.callbacks={keydown:function(e){if((e.which||e.keyCode)===27){(t.options.destroyOnHide?t.destroy:t.hide).call(t)}},click:function(e){if(!e.target.closest(".loader-overlay")&&(e.target.closest(".modal__close")||e.target.closest(".modal__cancel")||!e.target.closest(".modal__content"))){(t.options.destroyOnHide?t.destroy:t.hide).call(t)}}};if(this.options.keyboard){n.on("keydown",this.callbacks.keydown)}n.on("click",this.callbacks.click)};l=function(){if(this.options.keyboard){n.off("keydown",this.callbacks.keydown)}n.off("click",this.callbacks.click)};a.create=function(t){return new u(t)};return a});Box.Application.addService("ajax",function(t){"use strict";var i=t.getGlobal("Ajax");var n=t.getGlobal("document");var a=t.getGlobal("BF_STATIC");var r=t.getService("log");var s=i.Response.prototype._getHeaderJSON;i.Response.prototype._getHeaderJSON=function(){if(!this.request.isSameOrigin()){return null}else{return s.call(this)}};var o={};o.request=function(t){var n={};if(t.type){n.method=t.type}else{n.method="get"}if(t.data){n.parameters=t.data}n.onComplete=t.always;n.onSuccess=t.success;n.onFailure=t.error;n.contentType=t.contentType;n.postBody=t.postBody;n.onCreate=function(t){if(t.request.isSameOrigin()){return}var i=t.transport;i.setRequestHeader=i.setRequestHeader.wrap(function(t,i,n){if(/^(accept|accept-language|content-language)$/i.test(i)){return t(i,n)}if(/^content-type$/i.test(i)&&/^(application\/x-www-form-urlencoded|multipart\/form-data|text\/plain)(;.+)?$/i.test(n)){return t(i,n)}})};return new i.Request(t.url,n)};o.createScript=function(t){var i;var s;function o(t,i){if(t.readyState==="loaded"||t.readyState==="complete"){i()}else{setTimeout(function(){o(t,i)},100)}}if(!t||typeof t.url==="undefined"){return r.error("service:ajax.createScript(): No url provided")}if(!a||typeof t.forceLoad!=="undefined"||!a.bf_test_mode){i=n.getElementsByTagName("script")[0];s=n.createElement("script");s.type="text/javascript";s.async=false;s.src=t.url;if(typeof t.onError==="function"){s.onerror=t.onError}if(typeof t.onSuccess==="function"){if(typeof s.addEventListener!=="undefined"){s.addEventListener("load",t.onSuccess,false)}else{s.onreadystatechange=function(){s.onreadystatechange=null;o(s,t.onSuccess)}}}i.parentNode.insertBefore(s,i)}else{r.info("service:ajax.createScript(): disable load",t.url,"for test mode")}};return o});Box.Application.addService("template-engine",function(t){"use strict";var i={};var n=t.getGlobal("Hogan");var a=t.getGlobal("document");var r=t.getGlobal("BF_STATIC");var s=t.getGlobal("local");var o=t.getService("util");var l=t.getService("log");var u=t.getService("dom");var d=t.getService("ajax");var c={};var _={bf_footer_dialogs:["pick_dialog","user_post_delete","user_post_edit","user_post_preview","user_post_promoted_edit","user_post_stats","viral_tracking_dialog"],share_button:["_share_button"],"select-box":["selectWrap","selectText","selectTextValue","selectList","selectListItem"],seed_user_promos_inline:["mailchimp_newsletter_signup_form","news_app_promo"],modal:["modal_base"],popup:["popup_base"],superduper_modal:["superduper__form","superduper__section","superduper__success"],"navigation-menu":["navigation-menu"],infinite_sidebar:["_infinite_sidebar"],"lede.homepage":["lede.homepage"],"native-video":["native-video-thumb","native-video-controls"],"photo-viewer":["photo-viewer"],"photo-viewer-mobile":["photo-viewer-mobile"],"modal-dialog":["modal-dialog"]};var f="/js/mustache/templates/";var h={translate:function(){return function(t){return s.t(t)}}};var p="/js/mustache/compiled/";var m=[];var g={};var b={templateUrl:"",data:{},partials:{},callback:function z(){},context:window,args:[],extendPartials:true,returnType:"string"};function v(t){return m.indexOf(t)}function y(t){return v(t)>=0}function w(t){if(y(t)){return}m.push(t);g[t]=[]}function k(t){var i=v(t);if(i>=0){m.splice(i,1)}delete g[t]}function T(t,i){g[t].push(i)}function M(t){if(t.templateUrl&&y(t.templateUrl)){g[t.templateUrl].forEach(function(t){if(typeof t!=="function"){return}t()});k(t.templateUrl)}else if(typeof t.wrappedCallback==="function"){t.wrappedCallback()}return true}function S(t){l.error("template-engine.load: "+t);return M()}function L(t){return function(){if(typeof t.callback!=="function"){return l.error('"callback" option should be function, '+typeof t.callback+" receiven")}var n;t=o.extend({},b,t||{});if(t.extendPartials){t.partials=o.extend({},c,t.partials)}n=i.render(t.id,t.data,t.partials)||"";var a=t.args.slice(0);a.unshift(u.stringToReturnType(n,t.returnType));t.callback.apply(t.context,a)}}i.compile=function(t,a){var r;var s={};if(!i.templateExists(t)){r=n.compile(a);s[t]=r;i.addTemplates(s)}return i.getTemplate(t)};i.templateExists=function(t){return t&&typeof c[t]!=="undefined"};i.addTemplates=function(t){if(typeof t!=="object"||t===null){l.error('template-engine.addTemplates: Missing or wrong "newTemplates" param: '+t)}var n;for(n in t){if(!t.hasOwnProperty(n)){continue}if(i.templateExists(n)){continue}c[n]=t[n]}};i.render=function(t,a,s){var l;var u;var d=a||{};var c=i.getTemplate(t);if(!c){return false}for(u in s){if(!s.hasOwnProperty(u)||typeof s[u]!=="string"){continue}s[u]=n.compile(s[u])}l=o.extend({},r,h,d);return c.render(l,s)};i.getTemplate=function(t){if(!t){l.error("template-engine.getTemplate: Missing template id.");return undefined}if(!i.templateExists(t)){var n='template-engine.getTemplate: Template "'+t+'" does not exist.';n+="Use template-engine.load() to load it.";l.error(n);return undefined}return c[t]};i.getTemplateUrl=function(t){var i;for(i in _){if(!_.hasOwnProperty(i)){continue}if(_[i].indexOf(t)!==-1){return r.static_root+p+i+".js"}}return false};i.loadRawTemplate=function(t){if(!t||typeof t.id==="undefined"){l.error("template-engine.loadRawTemplate: Missing template ID.");return}if(typeof t.path==="undefined"){t.path=f}var s=typeof t.v==="undefined"?"":"?v="+t.v;d.request({url:r.static_root+t.path+t.id+".mustache"+s,success:function(r){var s=a.createElement("div");s.innerHTML=typeof r.responseText!=="undefined"?r.responseText:r;var l=s.getElementsByTagName("script");var u={};o.each(l,function(t,i){u[i.id]=n.compile(i.innerHTML)});i.addTemplates(u);if(typeof t.callback==="function"){t.callback()}}})};i.load=function(t){t=o.extend({},b,t);t.args=o.toArray(t.args);t.wrappedCallback=L(t);if(typeof t.id==="undefined"){return S("Missing template ID.")}if(i.templateExists(t.id)){return M(t)}if(!t.templateUrl){t.templateUrl=i.getTemplateUrl(t.id)}if(!t.templateUrl){l.error("Template with ID "+t.id+" does not exist and no template url was provided.");return M()}if(y(t.templateUrl)){T(t.templateUrl,t.wrappedCallback)}else{w(t.templateUrl);T(t.templateUrl,t.wrappedCallback);d.createScript({forceLoad:true,url:t.templateUrl+"?v="+r.version,onSuccess:function(){l.info("template-engine loaded for ID "+t.id);M(t)},onError:function(){S("Error loading script "+t.templateUrl)}})}return true};i.renderString=function(t,i,a){return n.compile(t).render(i,a)};return i});BF_js_version="1.0.0";BF_XSS={request:function(t){var i=BF_server+t.script;i+="?version="+BF_js_version;for(name in t.params){i+="&";var n=t.params[name];i+=escape(name)+"="+escape(n)}var a=document.createElement("script");a.src=i;document.getElementsByTagName("body")[0].appendChild(a)},swift_injection:function(t){if(t=="http://platform.twitter.com/widgets.js"&&BF_STATIC.bf_test_mode&&document.cookie.match("sel2_subbuzz_add_tweet")===null){return true}var i=document.createElement("script");i.src=t;document.getElementsByTagName("head")[0].appendChild(i)},badge:function(t){if(BF_XSS.__open_badge){BF_XSS.__open_badge.style.display="none"}if(t.close==true){BF_XSS.__close_badge=true;return}if(BF_XSS.__close_badge){BF_XSS.__close_badge=false;return false}var i=t.target;var n=unescape(i.getAttribute("rel:bf_data"));this.obj=JSON.parse(n);var a=this.obj.buzz_id+"_"+this.obj.badge_type;if(!document.getElementById(a)){var r=document.createElement("div");r.id=a;r.className="badge-tip badge-"+this.obj.badge_type;t.target.appendChild(r);var s=document.createElement("div");s.className="spinner";s.innerText=" ";r.appendChild(s)}if(BF_XSS.__open_badge&&BF_XSS.__open_badge.id==a){BF_XSS.__open_badge=null;return true}BF_XSS.__open_badge=document.getElementById(a);BF_XSS.__open_badge.style.display="block";BF_XSS.request({script:"_badge",params:{element_id:a,json:n}});return false},stats_response:function(t,i){if(typeof i=="undefined")i=BF_XSS.buzz_id;var n=document.getElementById(i+"_top_linking_sites");if(n){for(var a=0;a<t.domains.length;a++){if(t.domains[a]){var r=document.createElement("li");var s=document.createElement("a");s.setAttribute("href","http://"+t.domains[a]["domain"]);s.appendChild(document.createTextNode(t.domains[a]["domain"]));r.appendChild(s);n.appendChild(r)}}}n=document.getElementById(i+"_total_views");if(t.impressions&&t.impressions.length>0){var o=t.impressions[0]["total"]+"";o=o.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");o=o.replace(/,{2,}/,",");if(n){n.appendChild(document.createTextNode(o))}}if(t.pie){BF_XSS.update_chart(t.pie,i+"_chart")}},update_chart:function(t,i){var i=document.getElementById(i);var n=i.getAttribute("width");if(!n)n=50;var a=i.getAttribute("height");if(!a)a=40;var r=document.createElement("img");var s="https://chart.googleapis.com/chart?chs="+n+"x"+a+"&chd=t:"+t+","+(100-t)+"&cht=p3&chco=0077ee,ee3322&chf=bg,s,0d0d0d";r.src=s;i.appendChild(r);i.className="chart"}};function EventManagerBase(){this.EVENTS={};this.FIRED={}}EventManagerBase.prototype={constructor:EventManagerBase,observe:function(t,i,n){if(!this.EVENTS[t])this.EVENTS[t]={listeners:[],one_time_listeners:[]};var a=bfjs.findAll(this.EVENTS[t].listeners,function(t,a){return t.fn===i&&t.content===n});if(!a.length)this.EVENTS[t].listeners.push({fn:i,context:n})},observe_once:function(t,i,n){if(!this.EVENTS[t])this.EVENTS[t]={listeners:[],one_time_listeners:[]};var a=bfjs.findAll(this.EVENTS[t].one_time_listeners,function(t,a){return t.fn===i&&t.content===n});if(!a.length)this.EVENTS[t].one_time_listeners.push({fn:i,context:n})},stop_observing:function(t,i,n){
var a=false,r;if(this.EVENTS[t]){r=this.EVENTS[t].listeners;for(var s=0;s<r.length;s++){if(n&&r[s].context!==n)continue;if(r[s].fn===i){this.EVENTS[t].listeners.splice(s,1);a=true;break}}r=this.EVENTS[t].one_time_listeners;for(var s=0;s<r.length;s++){if(n&&r[s].context!==n)continue;if(r[s].fn===i){this.EVENTS[t].one_time_listeners.splice(s,1);a=true;break}}}return a},fire:function(t,i,n){if(typeof BF_STATIC!=="undefined"&&BF_STATIC.bf_env&&BF_STATIC.bf_env==="dev"&&(String.prototype.toQueryParams&&window.location.href.toQueryParams().debug)){console.log("Firing: "+t,n,i)}this.FIRED[t]=this.FIRED[t]?this.FIRED[t]+1:1;window[t]=true;if(typeof i=="undefined")i={};if(this.EVENTS[t]){var a=this.EVENTS[t].listeners;for(var r=0;r<a.length;r++){this._single_fire(a[r],i,n)}for(var s;s=this.EVENTS[t].one_time_listeners.pop();){this._single_fire(s,i,n)}}},_single_fire:function(t,i,n){try{if(t.context){t.fn.call(t.context,i,n)}else{t.fn(i,n)}}catch(a){console.dir(a);console.trace()}},has_fired:function(t){return this.FIRED[t]}};var EventManager=new EventManagerBase;var BuzzLoader=function(){var t=false;var i={p1:[],p2:[],p3:[],p4:[],p5:[],p6:[],p7:[],p8:[],p9:[],p10:[],user:[]};var n=function(){var n;for(n=1;n<=10;n++){i["p"+n].each(function(t){try{t()}catch(i){if(typeof window["BF_STATIC"]!="undefined"&&BF_STATIC.bf_env=="dev"){}}})}t=true;i["user"].each(function(t){t()})};return{waitForDOM:function(){if(Prototype.Browser.IE){if(!$("buzz-body")){setTimeout("BuzzLoader.waitForDOM();",100)}else{n()}}else{document.observe("dom:loaded",n)}},callLoaded:function(n){if(t){n()}else{i["user"].push(n)}},register:function(n,a){if(t)n();if(a>10||a<1)return 0;i["p"+a].push(n);return 1},register_injection:function(t,i){return BuzzLoader.register(function(){setTimeout(function(){BF_XSS.swift_injection(t)},1)},i)}}}();BuzzLoader.waitForDOM();BFW_INFO_COOKIE="bf2-b_info";DEFAULT_USER="default_user";var sought_permission_key=false;var BF_User=function(){this.bools=["p_allow_raw_html","p_disable_quickpost","p_disable_comment","p_disable_reaction","p_admin","p_access_stats","p_alias","p_dashboard","p_partner_admin","public_dashboard","p_boost_buzz","p_developer_admin","p_editor_admin","p_other_admin","show_account_settings","is_facebook_user","terminal_user","f_partner","f_ad","is_microsite","f_self_serve","is_subchannel","is_channel"];this.isLoggedIn=function(){if(BFW_Util.getCookie(BFW_INFO_COOKIE)){var t=new BF_User;if(typeof t.getUserInfo().permission_key=="undefined"){t.set_permission_key()}return true}else{return false}};this.set_permission_key=function(){if(sought_permission_key)return;sought_permission_key=true;var t=(new BF_User).getUserInfo();var i=false;var n=["p_admin","p_developer_admin","p_editor_admin","p_partner_admin","p_other_admin"];if(!n.each){n.each=n.forEach}n.each(function(n){i=i||t[n]=="true"});if(i||!"acls"in window){(new BF_Request).request("/buzzfeed/_admin_user?action=permission_key",{method:"get",onSuccess:function(t){var i=JSON.parse(t.responseText);if(typeof i.permission_key!="undefined"){BFW_Util.updateInfoCookie({permission_key:i.permission_key})}}})}else{if("ACL"in window){var a=[];for(var r in ACL){a[ACL[r][0]]=0}acl.debug=acl.skip_debug_msg=true;for(var r in ACL){if(acl.user_can(r))a[ACL[r][0]]=a[ACL[r][0]]|1<<ACL[r][1]}acl.debug=acl.skip_debug_msg=false;var s="";for(var o=a.length-1;o>=0;o--){if(typeof a[o]=="undefined")a[o]=0;s+=parseInt(a[o],10).toString(16)}BFW_Util.updateInfoCookie({permission_key:s})}else{sought_permission_key=false;setTimeout(function(){(new BF_User).set_permission_key()},500)}}};this.logout=function(t){if(!t)BF_Request.location({reload_track:true,reload_track_no_delay:true})};this.getUserInfo=function(){var t=BFW_Util.getCookie(BFW_INFO_COOKIE);var i=BFW_Util.getParameters({str:t,escape:true});var n=BFW_Util.getCookie(DEFAULT_USER);if(i&&n){i.default_user=BFW_Util.getParameters({str:n,escape:true});if(!i.default_user.permission_key){if("localStorage"in window&&window["localStorage"]!==null){i.default_user.permission_key=localStorage.getItem("default_permission_key")}}}if("localStorage"in window&&window["localStorage"]!==null){var a=localStorage.getItem("earned_reactions");if(i&&a){i.earned_reactions=a}var r=localStorage.getItem("permission_key");if(i&&r)i.permission_key=r}if(typeof i!="undefined"){bfjs.each(this.bools,function(t){if(typeof i[t]=="undefined")i[t]="false";if(typeof i.default_user=="undefined"){i.default_user={b:"false"}}else if(typeof i.default_user[t]=="undefined"||i.default_user[t]=="undefined"){i.default_user[t]="false"}});i["isa"]=i["p_admin"]}return i||{}};this.load_user_settings=function(){if(this.isLoggedIn()&&!this.getUserInfo().username){try{if(window["user_nav"]){user_nav.signout()}}catch(e){console.error(e)}}else if(this.isLoggedIn()&&bf_username==this.getUserInfo().username&&!document.location.href.match(/\/submissions\//)){var t=document.createElement("script");t.src=bf_sr+"/js/public/contribute/user_settings.js?"+BF_STATIC.version;document.getElementsByTagName("body")[0].appendChild(t);var t=document.createElement("script");t.src=bf_sr+"/js/public/contribute/user_post.js?"+BF_STATIC.version;document.getElementsByTagName("body")[0].appendChild(t)}};this.getUsernameFromSession=function(){var t="";try{t=(new BF_User).getUserInfo().username}catch(e){}return t}};setTimeout(function(){var t=new BF_User;if(!t.isLoggedIn()){localStorage.removeItem("permission_key");localStorage.removeItem("default_permission_key")}},1);var BFW_Util={_cookies:{},_clearCookieCache:function(){BFW_Util._cookies={}},getCookie:function(t){var i=BFW_Util._cookies[t];if(!i){var n=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(t)+"=([^;\\s]*)"));if(n){var a=decodeURIComponent(n[2]);BFW_Util._cookies[t]=a;i=a}}return i},deleteCookie:function(t,i){this._clearCookieCache();var n=new Date;n.setTime(n.getTime()-1e9);var a="; expires="+n.toGMTString();var r=decodeURIComponent(t)+"="+a+"; path=/";if(i){r+="; domain=."+i}else{r+="; domain=.buzzfeed.com"}document.cookie=r},setCookie:function(t){this._clearCookieCache();if(BF_STATIC.bf_env=="dev"&&t.name=="country"&&typeof t.clem_valid=="undefined"){alert("Make sure you talk to Clem before making updates to the country cookie!!")}var i=1e3*60*60*24*365;if(t.seconds||t.seconds==0){i=t.seconds*1e3}var n=new Date;n.setTime(n.getTime()+i);var a="";if(i>0){a="; expires="+n.toGMTString()}var r=t.no_encode?t.value:encodeURIComponent(t.value);var s=encodeURIComponent(t.name)+"="+r+a+"; path=/";if(t.host){s+="; domain=."+t.host}else{s+="; domain=.buzzfeed.com"}document.cookie=s;if(typeof t.callback!="undefined"){t.callback()}},saveEarnedReactions:function(t){var i=t.value.earned_reactions;if(i){if("localStorage"in window&&window["localStorage"]!==null){localStorage.setItem("earned_reactions",Object.toJSON(i))}else{console.warn("earned reactions not supported (no local storage)")}}},updateInfoCookie:function(t){var i=(new BF_User).getUserInfo();if(t.earned_reactions){if("localStorage"in window&&window["localStorage"]!==null){localStorage.setItem("earned_reactions",t.earned_reactions)}else{console.warn("earned reactions not supported (no local storage)")}}if("localStorage"in window&&window["localStorage"]!==null){var n=t.permission_key;if(n){if((new BF_User).getUserInfo().username==(new BF_User).getUserInfo().default_user.username){localStorage.setItem("default_permission_key",n)}localStorage.setItem("permission_key",n)}}for(var a in i){if(typeof t[a]!="undefined")i[a]=t[a]}var r=["msg_count","msg_count_updated"];r.each(function(n){if(typeof t[n]!="undefined"){i[n]=t[n]}});if("localStorage"in window&&window["localStorage"]!==null){delete i.permission_key;delete t.permission_key}delete t.earned_reactions;delete i.earned_reactions;for(var s in i){if(i[s]=="false")delete i[s]}BFW_Util.setCookie({name:BFW_INFO_COOKIE,value:$H(i).toQueryString()})},getParameters:function(t){var i={};var n=null;if(t&&t.str){n=t.str}if(!n){n=window.location.toString();if(n.indexOf("?")>-1){n=n.split("?")[1]}else{n=null}}if(!n||n==null){return}n=n.replace(/&amp;/g,"&");var a=n.split("&");bfjs.each(a,function(n){n=n.split("=");if(t&&t["escape"]){n[1]=unescape(n[1])}if(i[n[0]]){if(typeof i[n[0]]=="string"){var a=new Array;a[0]=i[n[0]];a[1]=n[1];i[n[0]]=a}else{i[n[0]].push(n[1])}}else{i[n[0]]=n[1]}});return i}};var BF_Pager={current_page:1,disabled:false,more:function(t){var i=t.el;if(BF_Pager.disabled)return false;BF_Pager.current_page++;i.addClassName("loading");BF_Pager.disabled=true;if(typeof t.unlimited=="undefined"&&acl.user_can("community_manage")&&t.paging_url.match(/responses\/paging/)){t.unlimited=Math.round((new Date).getTime()/1e3)}if(acl.user_can("general_admin"))t.unlimited=Math.round((new Date).getTime()/1e3);var n="p="+BF_Pager.current_page+(typeof t.unlimited!="undefined"?"&r="+t.unlimited:"");new Ajax.Request(t.paging_url+(/\?/.test(t.paging_url)?"&":"?")+n,{method:"get",onSuccess:function(t){try{i.removeClassName("loading");BF_Pager.disabled=false;if(t.responseText.match("<!--PAGING_OVER-->"))i.hide();$("post_list").innerHTML+=t.responseText;var n=document.write;document.write=function(t){$("post_list").innerHTML+=t};t.responseText.evalScripts();t.responseText.scan(/id."(post-\d+)"/m,function(t){if(t.length==2){universal_dom.update(t[1])}});t.responseText.scan(/id."(contribwhat_\d+)"/m,function(t){if(t.length==2){var i=t[1];$$("#"+i+" img").each(function(t){if(t.getAttribute("rel:bf_image_src")){bf_prog_load.load_image(t,t.getAttribute("rel:bf_image_src"))}})}});document.write=n;if(typeof BF_TWITTER2!=="undefined"){BF_TWITTER2.init()}if(t.responseText.match("fb-video"))FB.XFBML.parse($s("body"));bf_editor.init();bf_post_tools.init();bf_prog_load.init();picks_controller.init();EventManager.fire("pager:load:done")}catch(e){console.error(e)}}});return false}};var showModeratedUser=function(){if("universal_dom"in window){universal_dom.assign_handler({bucket:"show_for_moderated_user",handler:function(t,i){var n=new BF_User;if(n.isLoggedIn()&&n.getUserInfo().moderated=="1"){t.removeClassName("hidden")}}})}else{setTimeout(showModeratedUser,250)}};var showIndexUser=function(){if("universal_dom"in window){universal_dom.assign_handler({bucket:"show_for_index_user",handler:function(t,i){var n=new BF_User;if(n.isLoggedIn()&&n.getUserInfo().f_index=="true"){t.removeClassName("hidden")}}})}else{setTimeout(showIndexUser,250)}};var showPEditorAdminUser=function(){if("universal_dom"in window){universal_dom.assign_handler({bucket:"show_for_p_editor_admin_user",handler:function(t,i){var n=new BF_User;var a=n.getUserInfo().default_user;if(n.isLoggedIn()&&(n.getUserInfo().p_editor_admin=="true"||n.getUserInfo().p_admin=="true")){t.removeClassName("hidden")}if(n.isLoggedIn()&&(a.p_editor_admin=="true"||a.p_admin=="true")){t.removeClassName("hidden")}}})}else{setTimeout(showPEditorAdminUser,250)}};showModeratedUser();showIndexUser();showPEditorAdminUser();function Tracker(){this.entries=[];this.registered=new Array;this.url=window.location.toString();this.url=this.url.replace(/#H\w+$/i,"");this.url=encodeURIComponent(this.url);if(typeof window["HASH_REFER"]!="undefined"){this.referrer=window["HASH_REFER"]}else{this.referrer=document.referrer.toString()}this.referrer=encodeURIComponent(this.referrer);this.network_cookie=BFW_Util.getCookie("BUZZ_WIDGET");if(this.network_cookie&&window.location.href.match(this.network_cookie)||window["IS_HASH_WIDGET_CLICK"]){if(this.url.indexOf(encodeURIComponent("?"))>0){this.url=this.url.replace(encodeURIComponent("?"),encodeURIComponent("?w=1&"))}else if(this.url.indexOf(encodeURIComponent("#"))>0){this.url=this.url.replace(encodeURIComponent("#"),encodeURIComponent("?w=1#"))}else{this.url+=encodeURIComponent("?w=1")}BFW_Util.deleteCookie("BUZZ_WIDGET");if(Tracker.DEBUG)console.debug("Tracking this page as a widget referrer %s",decodeURIComponent(this.url))}this.defaults={c:"",u:"",type:"",user:"",buzz:"",query:"",url:this.url,referrer:this.referrer};this.cloud=Cloud.servers[Math.floor(Math.random()*Cloud.servers.length)];this.source="https://"+this.cloud+"/small.gif?type="}Tracker.gClick=function(t){return};Tracker.video=function(t){return};Tracker.browser=function(t){return};Tracker.prototype={setDefaults:function(t){for(key in t){this.defaults[key]=t[key]}},add:function(t,i){valid=true;entry={};for(key in this.defaults){entry[key]=this.defaults[key]}for(key in t){entry[key]=t[key]}if(i){valid=false;if(BFW_Util.getCookie("BF-U"))BFW_Util.deleteCookie("BF-U")}if(valid){this.entries.push(entry)}},run:function(t){if(this.entries.length){var i=this.entries.find(function(t){return t.type==100});if(i&&i.query){this.entries.unshift({buzz:i.user,user:i.user,c:i.u,u:i.u,type:this.types.VXN_CLICK_IN,types:[this.types.VXN_CLICK_IN],domain:"",query:"",url:""});this.entries.unshift({buzz:"buzz",user:"buzz",c:"7BA7",u:"7BA7",type:this.types.VXN_CLICK_OUT,types:[this.types.VXN_CLICK_OUT],domain:"",query:"",url:""})}if(this.DEBUG){console.log("Tracking "+this.entries.length+" entry positions");this.entries.each(function(e){var t={};["buzz","query","type","user"].each(function(i){if(e[i]){t[i]=e[i]+"";t[i]=t[i].split(",").first()}});if(t["type"]==30||t["type"]==35&&t["query"]){console.log([t["user"],t["buzz"],tracker.positions[t["query"]]])}else if(e.type==""){console.log([t["user"],t["buzz"],"Primary page impression"])}else if(e.type=="12"){console.log([t["user"],t["buzz"],"Unique page impression"])}else{console.log([t["user"],t["buzz"],e.type])}})}list=this.entries.shift();if(list.type!=""){list.referrer=""}different={};last=Object.clone(list);multiple=false;while(this.entries.length){multiple=true;entry=this.entries.shift();if(entry.type!=""){entry.referrer=""}for(key in list){list[key]+=","+entry[key];if(!different[key]&&last[key]!=entry[key]){different[key]=1}}}if(multiple){for(key in list){if(!different[key]&&key!="type"){list[key]=list[key].replace(/,.*$/,"")}}}var n=new Image;var a=list.type+"&user="+list.user+"&buzz="+list.buzz+"&url="+list.url+"&query="+list.query+"&referrer="+list.referrer+"&c="+list.c+"&u="+list.u+"&z="+(new Date).getTime();n.src=this.source+a;if(Tracker.DEBUG){console.log("Pixel: ",list,this.source+a)}try{if(Cloud.staging.sample>0&&Math.random()<=Cloud.staging.sample){var r="https://"+Cloud.staging.server+"/small.gif?type=";(new Image).src=r+a}}catch(e){console.error(e)}this.pixels.push(n)}},track:function(){var reg_tracker=this.tracker.registered[this.index];var reg_event=reg_tracker.events[this.event];if(!reg_tracker.data_obj){reg_tracker.data_obj=reg_tracker.data.length==0?{}:JSON.parse(reg_tracker.data)}if(!reg_event.data_obj){var link_reg=/[^\w\d\_]/g;reg_event.data_obj=link_reg.test(reg_event.data)?JSON.parse(reg_event.data):eval("("+reg_event.data+")")}$H(reg_event.data_obj).each(function(pair){if(pair.key=="callback"){try{eval(pair.value+"("+reg_tracker.data+");")}catch(e){console.error(e)}return true}if(!Object.isArray(pair.value)){pair.value=[pair.value]}pair.value.each(function(t){data=Object.clone(reg_tracker.data_obj);data.type=this.tracker.types[pair.key];data.query=t;this.tracker.add(data)}.bind(this))}.bind(this));if(this.run){this.tracker.run()}},trackSiteClick:function(e){var t=false;var n=false;el=e.element();if(e.srcElement){el=e.srcElement}else if(e.currentTarget){el=e.currentTarget}if(!el.hasAttribute("track")||el.tagName&&el.tagName.toLowerCase()=="img"){if(el.parentNode&&el.parentNode.tagName.toLowerCase()=="a"){el=el.parentNode}}if(el.getAttribute("track")=="")return;track_data=JSON.parse(el.getAttribute("track"));if(el.hasAttribute("rel:gt_act")&&el.getAttribute("rel:gt_act").match("share/")){n=true}if(!track_data){n=true}if(n){return true}if(!el.href.match(/buzzfeed.com/)){t=true;track_data.referrer=encodeURIComponent(el.href)}if(BF_STATIC.tt_page=="Buzz"||BF_STATIC.tt_page=="User"){if(BF_STATIC.tt_page=="User"){track_data=tracker.defaults}if(typeof hashtrack!="undefined"&&typeof hashtrack.tracked_hash_tag!="undefined"){track_data.types=["101"]}else{track_data.types=["100"]}}ctracker=new Tracker;for(i=0;i<track_data.types.length;i++){track_data.type=track_data.types[i];if(typeof track_data["queries"]!="undefined"&&track_data["queries"][i]){track_data.query=track_data["queries"][i]}else if(t){track_data.query=encodeURIComponent(el.href)}else{track_data.query=""}ctracker.add(track_data)}ctracker.run()},attach:function(){if(arguments&&arguments.length>0){base_el=$(arguments[0])}else{base_el=document}var t=function(t){if(t.hasClassName("flex_ab")){var i=t.id.match(/-(\d+)/);if(i&&BF_SELECTED_PROMOS[i[1]]){var n=BF_SELECTED_PROMOS[i[1]];t.setAttribute("track_load",'{"FLEX_PRO_IMP": '+n.promo_id+"}");t.setAttribute("track_mousedown",'{"FLEX_PRO_CLICK": '+n.promo_id+"}")}}var a=t.getAttribute("track");var r={data:a,events:{}};this.registered.push(r);this.events.each(function(i){if(!a)return false;try{r.events[i]={};var n=t.readAttribute("track_"+i);if(n){r.events[i].data=n;if(i=="load"){this.track.bind({tracker:this,event:i,index:this.registered.length-1})()}else{Event.observe(t,i,this.track.bind({tracker:this,event:i,index:this.registered.length-1,run:true}))}}}catch(e){console.error(e)}},this);var s;if(BF_STATIC.tt_page=="Buzz"&&objExists(buzzDetails)&&buzzDetails.ad=="1"||BF_STATIC.tt_page=="User"){s=$$(".PageContent a")}else if(BF_STATIC.tt_page=="Buzz"){s=[]}else{s=$A(t.getElementsByTagName("A"))}s.each(function(i){i.setAttribute("track",a);Event.observe(i,"mousedown",Tracker.prototype.trackSiteClick);if(t.getAttribute("rel:ext_track_pixel")){i.setAttribute("rel:ext_track_pixel",t.getAttribute("rel:ext_track_pixel"));Event.observe(i,"mousedown",function(t){var n=new Image;n.src=i.getAttribute("rel:ext_track_pixel");if(Tracker.DEBUG){console.debug("External click tracking call made to %s",n.src)}})}});t.removeClassName("track")}.bind(this);universal_dom.assign_handler({bucket:"track",handler:t});this.run()},registered:[],pixels:[],events:["load","mousedown","mouseover","submit"],positions:["","Header","Homepage Flow","B-Page Viral Alert","Index Sidebar","B-Page Sidebar","C-Page Sidebar","Non-ad Flow","Non-ad Header","Non-ad Sidebar Partner","Non-ad Sidebar Raw","Non-ad Sidebar Badge","Non-ad Permalink Flow","Non-ad Clickable Sidebar","Non-ad Related Buzz","Non-ad Viral Related Unit","Viral Related Unit","Bottom-Of-Page Promo","Multi Homepage Flow","Valley of The Nerds","AOL Related Promo","Targeted-B","Targeted-C","Targeted-A"],types:{REFERRER_DIRECT:0,REFERRER_INTERNAL:1,REFERRER_LINK:2,REFERRER_SEARCH:3,REFERRER_NETWORK:4,SHARE_EMAIL:5,SHARE_FACEBOOK:6,SHARE_STUMBLE:7,SHARE_DELICIOUS:8,SHARE_DIGG:9,SHARE_REDDIT:10,SHARE_MIXX:11,SHARE_TWITTER:15,SHARE_FARK:16,SHARE_MYSPACE:17,SHARE_REBUZZ:18,SHARE_RESERVED4:19,SHARE_RESERVED5:20,UNIQUE_VISIT:12,WIDGET_IMPRESSION:13,WIDGET_CLICK:14,BUZZBOX_IMPRESSION:21,BUZZBOX_CLICK:22,VXN_CLICK_OUT:23,VXN_CLICK_IN:24,BUZZBOX_RES4:25,BUZZBOX_RES5:26,BUZZBOX_RES6:27,BUZZBOX_RES7:28,BUZZBOX_RES8:29,PROMO_IMPRESSION:30,PROMO_AD_IMP:31,BOOST_IMPRESSION:32,FLEX_PRO_IMP:33,PROMO_IMP_RES4:34,PROMO_CLICK:35,PROMO_AD_CLICK:36,BOOST_CLICK:37,FLEX_PRO_CLICK:38,PROMO_CLICK_RES4:39,SITE_CLICK:100,HASH_CLICK:101}};Tracker.DEBUG=document.location.search.match(/tracker=true/)?true:false;function track_gplusone(t,i){i=typeof i!="undefined"&&i?i:"";if(t.state=="on"){gtrack.track_events(i,"share/googleplus/plus-one","");(new BF_Targetting_Pixel).add("google_plus")}else if(t.state=="off"){gtrack.track_events(i,"share/googleplus/minus-one","")}}function track_gplusone_sbm(t){track_gplusone(t,"Buzz:sharing-bottom-more")}function track_gplus_share_open(t){event_type=typeof event_type!="undefined"&&event_type?event_type:"";gtrack.track_events(event_type,"share/googleplus/plus-share-start","",null,true)}function track_gplus_share(t){event_type=typeof event_type!="undefined"&&event_type?event_type:"";gtrack.track_events(event_type,"share/googleplus/plus-one","",null,true)}QuantcastCounter=0;Tracker.Quantcast=function(){if(typeof _qevents=="undefined"&&QuantcastCounter<20){QuantcastCounter++;setTimeout("Tracker.Quantcast()",250);return false}_qevents.push({qacct:"p-3aud4J6uA4Z6Y"})};function Referrer(){this.track_subdomains=true;this.referrer=false;this.goal=false;this.cookies={session:{name:"rvt2_sess",expires:0},persist:{name:"rvt2_persist",expires:31536e6}};this._cookies={};this._goals=[];this.cookies_cancel="cancel";this.returns={default_bucket:">2m",buckets:{"1h":60,"3h":180,"6h":320,"12h":720,"24h":1440,"48h":2880,"1w":10080,"2w":20160,"1m":43200,"2m":86400}};this.track=function(){this._set_cookie("rvt_sess","",-1e3);this._set_cookie("rvt_persist","",-1e3);this.referrer=this._parse_referrer();if(this._is_returning()){this.track_return()}else if(this._is_initial()){this.track_initial()}else if(this._is_candidate()){this.start_initial()}};this.track_referrer=function(t){if(this._is_returning()){var i="",n="initial",t=this._parse_referrer(),a=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),r=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!t)t="direct";if(!r.d)return this.cancel_track();if(this._is_returning())n="return/"+a.bkt;if(r.h)i="/"+r.h}};this.track_goal=function(t){if(this._is_returning()||this._is_initial()){var i="",n="initial",a=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),r=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!r.d)return this.cancel_track();if(this._is_returning())n="return/"+a.bkt;if(r.h)i="/"+r.h;this._goals.push(t)}};this.track_return=function(){var t="",i=1,n="",a={},r=false,s=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),o=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!o.d)return this.cancel_track();if(!o.t)o.t=Math.floor(d.getTime()/1e3);if(o.h)n="/"+o.h;if(!this._has_cookie(this.cookies.session.name)||!s.bkt){t=this._determine_time_bucket(o.t);if(o[t])i=parseInt(o[t])+1;a={t:o.t,d:o.d};if(o.h)a.h=o.h;a[t]=i;this._set_cookie(this.cookies.persist.name,Object.toJSON(a),this.cookies.persist.expires);this._track("impression/"+o.d+"/return/"+t+"/"+i+n);r=true}else{t=s.bkt}if(!s.session)s.session=0;this._set_cookie(this.cookies.session.name,Object.toJSON({bkt:t,session:s.session+1}),this.cookies.session.expires);this._track("view/"+o.d+"/return/"+t+n);if(r)this.track_referrer()};this.track_initial=function(){var t=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),i=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON(),n="";if(!i.d)return this.cancel_track();if(i.h)n="/"+i.h;if(!t.initial)t.initial=0;this._set_cookie(this.cookies.session.name,Object.toJSON({initial:t.initial+1}),this.cookies.session.expires);this._track("view/"+i.d+"/initial"+n)};this.start_initial=function(){var t=new Date,i=location.href.replace(/^(http|https)(\:\/\/)(.*\@.*\:)?([A-Z0-9\-\.]+\.[A-Z]+)([0-9\:]+)?(\/.*)$/i,"$6"),n="",a={};a={d:this.referrer,t:Math.floor(t.getTime()/1e3)};if(this._has_hashtrack()){a.h=this._get_hashtrack();n="/"+a.h}this._set_cookie(this.cookies.persist.name,Object.toJSON(a),this.cookies.persist.expires);this._track("impression/"+this.referrer+"/initial"+n);this.track_initial()};this.cancel_track=function(){this._set_cookie(this.cookies.session.name,this.cookies_cancel,-1e3);this._set_cookie(this.cookies.persist.name,this.cookies_cancel,this.cookies.persist.expires);return false};this._track=function(t,i){return};this._has_hashtrack=function(){return window.location.href.indexOf("#H")!=-1};this._get_hashtrack=function(){return this._has_hashtrack()?window.location.href.replace(/^(.*\#)(H[A-Z0-9]+)(.*)?$/,"$2"):""};this._is_trackable=function(){return this.referrer&&this.referrer!=""&&!/buzzfeed\.com$/i.exec(this.referrer)};this._is_returning=function(){return this._has_cookie(this.cookies.persist.name)&&(!this._has_cookie(this.cookies.session.name)||this._has_cookie(this.cookies.session.name,"session"))};this._is_initial=function(){return this._has_cookie(this.cookies.persist.name)&&this._has_cookie(this.cookies.session.name,"initial")};this._is_candidate=function(){return this._is_trackable()&&!this._has_any_cookies()};this._get_cookie=function(t){if(typeof this._cookies[t]!="undefined"&&this._cookies[t]!=""){return this._cookies[t]}else if(this._has_cookie(t)){var i=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return unescape(i[2])}else{return false}};this._has_cookie=function(t,i){var n=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");if(i&&typeof i=="string")i=RegExp(RegExp.escape(i));return n?i&&i!=""?unescape(n[2]).match(i):n[2]!=this.cookies_cancel:false};this._has_any_cookies=function(){return document.cookie&&document.cookie.match(/[\w\d]+/gm)};this._set_cookie=function(t,i,e,n){var a=31536e6,r="",s="";if(e||e==0)a=parseInt(e);if(a&&a!=0){var o=new Date;o.setTime(o.getTime()+a);r="; expires="+o.toGMTString()}s=escape(t)+"="+escape(i)+r+"; path=/; domain=."+(n?escape(n):"buzzfeed.com");document.cookie=s;this._cookies[t]=i};this._determine_time_bucket=function(t){var i=this.returns.default_bucket,n=0,a=new Date;n=Math.floor((Math.floor(a.getTime()/1e3)-t)/60);for(var r in this.returns.buckets){if(n<=this.returns.buckets[r]){i=r;break}}return i};this._parse_referrer=function(){var t=document.referrer.toLowerCase();t=t.replace(/^(http|https)(\:\/\/)(.*\@.*\:)?([A-Z0-9\-\.]+\.[A-Z]+)(.*)$/i,"$4");t=t.replace(/^www\./i,"");if(!this.track_subdomains)t=t.replace(/^(.*\.)?([A-Z0-9\-\.]+\.[A-Z]+)$/i,"$2");return t}}try{var return_tracker=new Referrer;return_tracker.track()}catch(e){}POLLER_CALLBACK_LOOKUP=new Object;function poller_call_back(t,i){var n=POLLER_CALLBACK_LOOKUP[t];var a=n.callback;if(!n||!n.callback){console.error("no poller callback function defined with key: %s",t);return}else{n.poller.stop_polling();n.callback(i)}}function set_poller_trigger(){var t=5e3;var i=new Date;i.setTime(i.getTime()+t);var n="";n="; expires="+i.toGMTString();var a="BUZZ_POLLER_COOKIE=true"+n+"; domain=.buzzfeed.com; path=/static/js/poller";document.cookie=a}cookie_poller=function(){this.active=false;this.count=0;this.start=function(t){this.active=true;this.count=0;cookie_poller_active=true;if(!t||!t.callback_string||!t.poll_url||!t.pollid){this.usage();return}this.callback_string=t.callback_string;this.callback_arguments=t.arguments;this.poll_url=t.poll_url;this.pollid=t.pollid;this.poll()};this.add_poller_callback=function(t,i,n){POLLER_CALLBACK_LOOKUP[t]={callback:i,poller:this}};this.poll=function(t){this.count++;if(this.count*500>1e3*10*60){this.active=false}if(this.active==true){var i=this.poll_url;i+="?version="+(new Date).getTime();i+="&callback="+escape(this.callback_string);i+="&pollid="+this.pollid;if(this.callback_arguments){var n=escape(Object.toJSON(this.callback_arguments));i+="&args="+n}var a=document.createElement("script");a.src=i;var r=document.getElementsByTagName("body")[0];if(r){r.appendChild(a)}var s=function(){this.poll()}.bind(this);setTimeout(s,500)}};this.stop_polling=function(){this.active=false;this.count=0};this.usage=function(){var t="usage: cookie_poller.poll( {callback_string: 'afunction', poll_url: 'http://example/js/poll.js, pollid: 'a_unique_id', [ arguemnts: {} ] } )";console.error(t);console.error("cookie_poller.poll() needs a callback_string, a XSS poller url, a unique id and an optional arguments hash")}};var TT_Filters={round:function(t){return Math.round(t)},floor:function(t){return Math.floor(t)},ceil:function(t){return Math.ceil(t)},add_commas:function(t){t+="";t=t.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");t=t.replace(/,{2,}/,",");return t},upper:function(t){return t.toUpperCase()},lower:function(t){return t.toLowerCase()},ucfirst:function(t){return t.toString().substring(0,1).toUpperCase()+t.substring(1,t.length)},lcfirst:function(t){return t.toString().substring(0,1).toLowerCase()+t.substring(1,t.length)},titleCase:function(t){if(!t||t==""){return""}var n=t;var a=n.split(" ");var r=new Array("and","the","to","for","is","in","a","at","an","from","by","if","of");for(i=0;i<a.length;i++){if(i==0){a[i]=a[i].substring(0,1).toUpperCase()+a[i].substring(1)}else if(r.indexOf(a[i])<0){a[i]=a[i].substring(0,1).toUpperCase()+a[i].substring(1)}}retval=a.join(" ");return retval},quoteCase:function(t){if(!t||t==""){return""}var i=t.toLowerCase();i=i.replace(/^("*)/,"");i=i.replace(/("*)$/,"");return'"'+this.ucfirst(i)+'"'},trim:function(t){return t.toString().replace(/^\s+/,"").replace(/\s+$/,"")},collapse:function(t){return t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")},html:function(t){if(t){return t.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}},boost_preview:function(t){if(t){t=t.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;");ents=new Array("b","strong","i","em");for(i=0;i<ents.length;i++){var n=new RegExp("&lt;"+ents[i]+"&gt;","gi");var a=new RegExp("&lt;/"+ents[i]+"&gt;","gi");t=t.replace(n,"<"+ents[i]+">");t=t.replace(a,"</"+ents[i]+">")}t=t.replace(/&lt;a href="http:\/\/(.*?)"&gt;/gi,'<a href="http://$1">');t=t.replace(/&lt;\/a&gt;/gi,"</a>");return t}},link:function(t){if(t){return t.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/"/g,"").replace(/\s/g,"%20")}},js:function(t){if(t){return t.toString().replace(/'/g,"").replace(/\n|\r/g,"")}},html_entity:function(t){return"HTML_ENTITY: not implemented.  see http://www.w3.org/TR/REC-html40/sgml/entities.html"},html_para:function(t){return t.toString().replace(/\n+/g,"<p>")},html_break:function(t){return t.toString().replace(/\n+/g,"<br><br>")},html_line_break:function(t){return t.toString().replace(/\n/g,"<br>")},uri:function(t){return escape(t)},unescape_uri:function(t){t=t.replace(/\+/g," ");return unescape(t)},indent:function(t,i){if(!i)i="    ";var n=t.split(/\n/);var a="";for(var r=0;r<n.length;r++){n[r]=n[r].toString().replace(/^/g,i)}return n.join("\n")},truncate:function(t,i){if(t){if(!i)i=32;if(t.length<=i)return t;return t.toString().substring(0,i-3)+"..."}},repeat:function(t,i){if(!i)i=1;var n=t;for(var a=i-1;a>0;a--){n+=t}return n},remove:function(t,i){if(!i)return t;var n=new RegExp(i,"g");return t.toString().replace(n,"")},replace:function(t,i,n){if(t){if(!i)return t;if(!n)n="";var a=new RegExp(i,"g");t=t.toString().replace(a,n)}return t},strftime:function(t,i){var n=new Date;var a=t;if(t<1e10){a=t+""+"000"}n.setTime(a);for(var r in TT_strftime_funks){if(r.length==1){i=i.replace("%"+r,TT_strftime_funks[r](n))}}return i},alert:function(t){alert(t);return""},clean_entities:function(t){if(t){return TT_cleanEntities(t)}},html_noentities:function(t){if(t){return t.toString().replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/"/g,"&quot;")}},html_entities:function(t){return TT_cleanEntities(t).toString().replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}};TT_strftime_funks={zeropad:function(t){return t>9?t:"0"+t},a:function(t){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]},A:function(t){return["Sunday","Monday","Tuedsay","Wednesday","Thursday","Friday","Saturday"][t.getDay()]},b:function(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]},B:function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]},c:function(t){return t.toString()},d:function(t){return this.zeropad(t.getDate())},H:function(t){return this.zeropad(t.getHours())},I:function(t){return t.getHours()==12||t.getHours()==0?12:this.zeropad((t.getHours()+12)%12)},i:function(t){return t.getHours()==12||t.getHours()==0?12:(t.getHours()+12)%12},m:function(t){return this.zeropad(t.getMonth()+1)},M:function(t){return this.zeropad(t.getMinutes())},p:function(t){return this.H(t)<12?"am":"pm"},S:function(t){return this.zeropad(t.getSeconds())},w:function(t){return t.getDay()},y:function(t){return this.zeropad(this.Y(t)%100)},Y:function(t){return t.getFullYear()},"%":function(t){return"%"}};function TT_cleanEntities(t){var n={160:"nbsp",161:"iexcl",164:"curren",
162:"cent",163:"pound",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",8482:"trade",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",215:"times",247:"divide",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8230:"hellip",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"};var a=t.split("");var r="";for(i=0;i<a.length;i++){var s=a[i].charCodeAt(0);if(n[s])r+="&"+n[s]+";";else if(s>127)r+="&#"+s+";";else r+=a[i]}return r}var effect_callbacks={};var BF_Effect={OpenMenu:function(t,i,n){if(!n){n={}}n["top"]=objExists(n.top)?n.top:0;n["left"]=objExists(n.left)?n.left:0;n["position"]=objExists(n.position)?n.position:"absolute";var a=$(t);var r=a.positionedOffset();var t={el:a,offSetTop:Number(r[1])+Number(a.getHeight()),offSetLeft:Number(r[0])};$(t.el).insert(i);var s={top:n.top=="auto"?"auto":t.offSetTop+n.top+"px",left:n.left=="always_0"?0:t.offSetLeft+n.left+"px",position:n.position};if(objExists(n["height"])){s["height"]=n["height"]}$(i).setStyle(s).show()},EffectCallbacks:function(t){EventManager.fire("BF_Effect:"+t,{});if(objExists(effect_callbacks[t])){effect_callbacks[t].each(function(t){t()})}},EffectCallbacksAdd:function(t,i){effect_callbacks[t]=[];effect_callbacks[t].push(i)},MarqueeOn:function(t,i){if(!t){return}if(!i){i=250}if(!$(t).hasClassName("marquee")){$(t).addClassName("marquee");$(t).setAttribute("rel:mtext",$(t).innerHTML.replace("&nbsp;"," ").toString());$(t).setAttribute("rel:mstatus","on");$(t).setAttribute("rel:mpos",0)}if($(t).hasClassName("marquee")&&$(t).getAttribute("rel:mstatus")=="on"){var n=Number($(t).getAttribute("rel:mpos"));var a=$(t).getAttribute("rel:mtext").toString();$(t).innerHTML=a.substr(a.length-n,a.length);$(t).setAttribute("rel:mpos",n+1)}setTimeout(function(){BF_Effect.MarqueeOn(t,i)},i)},ScrollIntoView:function(t,i){if(!$(t)||$(t).viewportOffset().top==0||window["BF_STATIC"]&&BF_STATIC.bf_test_mode){return}var n=false;Event.observe(window,"mousewheel",u);if(typeof i=="undefined"){i=.5}var a=document.viewport.getHeight();var r=$(t).getHeight();var s=document.viewport.getScrollOffsets().top+$(t).viewportOffset().top;var o=Math.ceil($(t).viewportOffset().top/i/100);if($(t).viewportOffset().top>0){if(a>=r){var l=(a-r)/2;s-=l;o=Math.ceil(($(t).viewportOffset().top-l)/i/100)}}function u(){n=true}function d(t,i){if(n){Event.stopObserving(window,"mousewheel",u);return}var a=document.viewport.getScrollOffsets().top;if(Math.abs(t-a)<Math.abs(i)){i=t-a}window.scrollTo(0,a+i);if(a==document.viewport.getScrollOffsets().top){Event.stopObserving(window,"mousewheel",u);return}if(a+i!=t){setTimeout(function(){d(t,i)},1)}else{Event.stopObserving(window,"mousewheel",u);return}}d(s,o)},FadeOut:function(t,i,n,a){if(a){BF_Effect.EffectCallbacksAdd("FadeOut",a)}if(!n){n=50}if(!i){$(t).setOpacity(1).show();i=100-2;setTimeout(function(){BF_Effect.FadeOut(t,i,n)},n)}else{i=i-10;if(i>0){$(t).setOpacity(i/100);setTimeout(function(){BF_Effect.FadeOut(t,i,n)},n)}else{$(t).hide();BF_Effect.EffectCallbacks("FadeOut")}}},FadeIn:function(t,i,n,a){try{if(a){BF_Effect.EffectCallbacksAdd("FadeIn",a)}if(!n){n=5}if(!i){$(t).setOpacity(.01);$(t).show();i=1;setTimeout(function(){BF_Effect.FadeIn(t,i,n)},n)}else{i=i+10;if(i<100){$(t).setOpacity(i/100);setTimeout(function(){BF_Effect.FadeIn(t,i,n)},n)}else{$(t).setOpacity(1);BF_Effect.EffectCallbacks("FadeIn")}}}catch(e){console.error(e)}},SlideDown:function(t,i){try{if(!$(t))return;if(!i)i=20;if(window["BF_STATIC"]&&BF_STATIC.bf_test_mode){$(t).setStyle({height:"auto"}).show();return}if(!$(t).hasClassName("SlideDown")){$(t).addClassName("SlideDown");$(t).setStyle({height:"auto",overflow:"hidden"});$(t).setAttribute("rel:SlideGoal",$(t).getHeight());$(t).setAttribute("rel:Step",Math.max(1,Math.round($(t).getHeight()/20)));$(t).setStyle({height:"0px"});$(t).show()}else if($(t).getHeight()>=parseInt($(t).getAttribute("rel:SlideGoal"))){$(t).setStyle({height:"auto",overflow:"visible"});$(t).removeClassName("SlideDown");return}$(t).setStyle({height:Number($(t).getHeight())+Number($(t).getAttribute("rel:Step"))+"px"});setTimeout(function(){BF_Effect.SlideDown(t,i)},i)}catch(e){console.error(e)}},SlideUp:function(t,i){try{if(!$(t))return;if(!i)i=20;if(window["BF_STATIC"]&&BF_STATIC.bf_test_mode){$(t).hide();return}if(!$(t).hasClassName("SlideUp")){$(t).addClassName("SlideUp");$(t).setAttribute("rel:Step",Math.max(1,Math.round($(t).getHeight()/20)));$(t).setStyle({overflow:"hidden"});$(t).show()}else if($(t).cleanHeight()<=Number($(t).getAttribute("rel:Step"))*2){$(t).removeClassName("SlideUp");$(t).hide();return}$(t).setStyle({height:Number($(t).cleanHeight())-Number($(t).getAttribute("rel:Step"))+"px"});setTimeout(function(){BF_Effect.SlideUp(t,i)},i)}catch(e){console.error(e)}}};Object.extend(Element.Methods,{showOnScreen:function(t,i){t.show();BF_Effect.ScrollIntoView(t,i)}});Object.extend(Element.Methods,{BFOnAttributeChange:function(t,i,n){if(typeof t.observers=="undefined")t.observers={};if(typeof t.observers[i]=="undefined")t.observers[i]=[];t.observers[i].push(n)}});Object.extend(Element.Methods,{BFSetAttribute:function(t,i,n){var a=t.getAttribute(i);t.setAttribute(i,n);if(typeof t.observers!="undefined"&&typeof t.observers[i]!="undefined"){t.observers[i].each(function(i){i({element:t,old_value:a,new_value:n})})}}});Element.addMethods();var BF_PrototypeExtend={getTextDescendants:function(t,i){var n=[];function a(t){var r=t.firstChild;while(r){if(Node.TEXT_NODE==r.nodeType){if(!i||!!i&&!r.nodeValue.match(/^([\s\n\t\r]+)$/))n.push(r)}if(Object.isElement(r)&&["script","style","iframe","embed","object","head"].indexOf(r.tagName.toLowerCase())==-1)a(r);r=r.nextSibling}}a(t);return n}};Element.addMethods(BF_PrototypeExtend);try{var bf_ee=bf_ee||{};bf_ee.keys=[],bf_ee.code="38,38,40,40,37,39,37,39,66,65";document.observe("keydown",function(e){try{bf_ee.keys.push(e.keyCode);if(bf_ee.keys.toString().indexOf(bf_ee.code)>=0){bf_ee.keys=[];var t=0,i=["wilkie.gif"],n=["wilkie.gif"];$$(".thumb img, img.bf-image, img.thumb, .thumb-unit img, .thumbbb img, .sub_buzz_content img").each(function(n){n.src=BF_STATIC.static_root+"/images/public/wow/"+i[t%i.length];t++});$$(".pinned-image, .bf-image-bigstory").each(function(i){i.src=BF_STATIC.static_root+"/images/public/wow/"+n[t%n.length];t++});$s(".splash__media")&&($s(".splash__media").src=BF_STATIC.static_root+"/images/public/wow/wilkie_splash.png");$$("body").first().setStyle({"background-color":"#ffffff"});$$(".page_header").each(function(t){t.setStyle({"border-bottom-color":"#6235ac"})});bf_ee.words=$$("body").first().getTextDescendants(true);if(bf_ee.words.length>0){bf_ee.words.each(function(t){var i=0,n="",a=0,r=t.nodeValue.length;while(r>a){n+="Wilkie!"+" ";a=n.length;i++}n=n.substr(0,r);t.nodeValue=n})}}}catch(e){}})}catch(e){}var BF_UI={init:function(){universal_dom.assign_handler({bucket:"toggle_bf_dropdown",event:"click",handler:BF_UI.openDropdownEventHandler});universal_dom.assign_handler({bucket:"bf_radio",event:"click",handler:function(e){var t=e.target.up(".bf_radio");if(!t)return;var i=t.getAttribute("data-checked")*1?0:1;t.setAttribute("data-checked",i);if(i){t.down(".bf_radio_left",0).addClassName("active");t.down(".bf_radio_right",0).removeClassName("active")}else{t.down(".bf_radio_left",0).removeClassName("active");t.down(".bf_radio_right",0).addClassName("active")}EventManager.fire("bf_ui:radio_toggle",{target:t,checked:i,field:t.getAttribute("data-field")},true)}});universal_dom.assign_handler({bucket:"animatedgifs",event:"click",handler:function(){var t=arguments[0].target;var i=0;var n,a,r,s;if($(t).up(".sub_buzz_content")){var o=$(t).up(".sub_buzz_content").down("img");if(o.getAttribute("rel:fake_photorow")){i=1;n=parseInt(o.getStyle("left"))*-1;a=parseInt(o.getStyle("top"))*-1;r=parseInt(o.getStyle("width"));s=parseInt(o.getStyle("height"))}}else if($(t).up(".grid_cell_image_wrapper")){var o=$(t).up(".grid_cell_image_wrapper").down("img");i=1;n=parseInt(o.getStyle("left"))*-1;a=parseInt(o.getStyle("top"))*-1;r=parseInt(o.up().getStyle("width"));s=parseInt(o.up().getStyle("height"))}else{return false}}})},closeDialog:function(t,i){if(!i)i={};var n=$(t);n.hide();if(typeof picks_controller!="undefined"&&picks_controller){picks_controller.stop_spinner()}if(typeof user_post!="undefined"&&user_post.show_video_preview)$("video-form-preview").show();var a=$(t).getElementsByTagName("IFRAME")[0];var r=a;if(a){a=a.contentWindow?a.contentWindow:a.contentDocument.document?a.contentDocument.document:a.contentDocument}try{if(i.loadDefaultDiv){if(a&&a["document"]){if(a.document.getElementById(i.loadDefaultDiv)){a.document.getElementById(i.loadDefaultDiv).style.display="block"}}}else if($("user_post_preview_iframe")){var s=$("user_post_preview_iframe").contentWindow.document.getElementById("preview_div");if(typeof s!="undefined"&&s!=null){s.innerHTML='<img src="'+BF_STATIC.image_root+"/static/images/public/spinners/loading.gif"+'" alt="spinner">'}}else if(r){r.src=BF_STATIC.image_root+"/static/images/public/spinners/loading.gif"}if(a&&typeof a.minimizeEventHandler=="function"){a.minimizeEventHandler()}}catch(o){console.error(o)}if(i.onComplete){i.onComplete()}if(i.id=="user-image-edit")BF_UI.closeDialog("super-image-edit");n.fire("bf_ui:closeDialog")},create_or_show_dialog:function(t){var i=55;var n=20;if(!t.width)t.width=820;if(!t.height)t.height=545;if(!t.scrolling)t.scrolling="no";if(!$(t.id)){if(!t.title)t.title="Dialog";if(!t.url.match(/^https?:\/\//))t.url=t.url;t.m_height=t.height-i;t.m_width=t.width-n;var a=new Template(' 				<div class="bf_overlay_mask"></div> 				<div class="bf_dialog" style="width: #{width}px; height: #{height}px !important;"> 					<div class="bf_dialog_header"><span class="title">#{title}</span> <a href="javascript:;" onclick="BF_UI.closeDialog(\'#{id}\',{loadDefaultDiv:\'#{url}\'});return false;" class="close">&times;</a></div> 					<div class="bf_dialog_content" style="width: #{m_width}px; height: #{m_height}px !important;"> 						<iframe id="#{id}_iframe" src="#{url}" name="#{id}_iframe" frameborder="0" scrolling="#{scrolling}" allowTransparency="true" style="width: 100%; height: 100% !important"></iframe> 					</div> 				</div> 			');var r=a.evaluate(t);var s=document.createElement("div");s.id=t.id;s.style.display="none";s.className="bf_canvas";s.innerHTML=r;document.getElementsByTagName("BODY")[0].appendChild(s)}else{var o=$$("#"+t.id+" .bf_dialog").first(),l=$$("#"+t.id+" .bf_dialog_content").first();if(o)o.setStyle({height:t.height+"px !important",width:t.width+"px"});if(l)l.setStyle({height:t.m_height+"px !important",width:t.m_width+"px"})}var u=$(t.id+"_iframe");if(u&&!escape(u.src).match(new RegExp(escape(t.url)))){u.up(0).update('<iframe id="'+t.id+'_iframe" src="'+t.url+'" name="'+t.id+'_iframe" frameborder="0" scrolling="'+t.scrolling+'" allowTransparency="true" style="width: 100%; height: 100% !important"></iframe>')}BF_UI.showDialog(t.id,t.title);if(t.onload){try{u.observe("load",function(){t.onload.each(function(t){t()})})}catch(e){}}},showDialog:function(t,i,n){var a;try{a=Box.Application.getService("template-engine");if(typeof user_post!="undefined"&&$("video-form-preview")&&$("video-form-preview").visible()){$("video-form-preview").hide();user_post.show_video_preview=true}else if(typeof user_post!="undefined"){user_post.show_video_preview=false}}catch(e){if(typeof user_post!="undefined"&&user_post.show_video_preview){user_post.show_video_preview=false}}var r=$(t);if(!r&&a){a.load({id:t,callback:function(a){var r;if(a){$($$(".js-page-container")[0]).insert({after:a});r=$$(".js-"+t)[0]||$(t);BF_UI.doShowDialog(t,i,n,r)}else{}}})}else if(r){BF_UI.doShowDialog(t,i,n,r)}},doShowDialog:function(t,i,n,a){a.show();if(typeof n!="undefined"&&n&&$(n)){$(n).insert({top:a})}var r=a.select(".title");if(r&&r.length>0&&i){r.first().update(i)}var s=a.select(".bf_dialog").first();if(s)s.style.top=Math.floor(Math.max(document.viewport.getScrollOffsets().top,document.viewport.getScrollOffsets().top+document.viewport.getHeight()/2-$(s).getHeight()/2))+"px"},showBarChart:function(e){var t=e.getAttribute("rel:chart_data");var i=t.evalJSON?t.evalJSON():jQuery.parseJSON(t);var n=0,a=0;if(window.Prototype)$H(i).each(function(t){if(t.key.match(/baseline/))n++;else if(t.key.match(/column_.*\.0/))a++});else jQuery.each(i,function(t){if(t.match(/baseline/))n++;else if(t.match(/column_.*\.0/))a++});if(n>a-1){var r=function(t){if(!window.Prototype)t.key=t;var n=t.key.split(".")[0];var a=t.key.split(".")[1];if(n=="baseline"){if(typeof i[n+"."+(parseInt(a)+1)]!="undefined")i[t.key]=i[n+"."+(parseInt(a)+1)];else delete i[t.key]}};if(window.Prototype)$H(i).each(r);else jQuery.each(i,r)}var s=[];var o;var l;var u=[];var d=[];var c=[];var _;var f;var h=0;var p=[];for(item in i){if(item.split("_")[0]=="column"){var m=item.split(".")[1];p.push(m)}switch(item.split(".")[0]){case"x_axis":o=i[item];u[h]=i[item];h++;break;case"y_axis":l=i[item];break;case"baseline":u[h]=i[item];h++;break;case"barchart_color":c.push(i[item]);break}}if(window.Prototype)p=p.uniq();else p=jQuery.unique(p);g();function g(){for(var t=0;t<p.length;t++){for(item in i){if(item.split("_")[0]=="column"){var n=item.split(".")[0];var a=item.split(".")[1];if(n=="column_one"){if(t==a){d[t]=[String(i[n+"."+t])]}}else if(n=="column_two"||n=="column_three"||n=="column_four"||n=="column_five"||n=="column_six"){if(t==a){d[t].push(parseInt(i[n+"."+t]))}}}}}d.splice(0,0,u);var r=google.visualization.arrayToDataTable(d);var s={hAxis:{title:o},vAxis:{title:l},colors:c,chartArea:{width:"75%",height:"75%"},legend:{position:"top"}};var _=new google.visualization.ColumnChart(e);_.draw(r,s)}},showPieChart:function(e){var t=[];var i=[];var n=e.getAttribute("rel:chart_data");var a=n.evalJSON?n.evalJSON():jQuery.parseJSON(n);for(item in a){if(item.match("chart_caption")){if(!t[item.split(".")[1]])t[item.split(".")[1]]=[];t[item.split(".")[1]][0]=a[item]}else if(item.match("chart_value")){if(!t[item.split(".")[1]])t[item.split(".")[1]]=[];t[item.split(".")[1]][1]=parseInt(a[item])}else if(item.match("chart_color")){i[item.split(".")[1]]=a[item]}}t.splice(0,0,["title","value"]);var r=google.visualization.arrayToDataTable(t);var s={colors:i,chartArea:{width:"85%",height:"65%"},legend:{position:"top"}};var a=new google.visualization.PieChart(e);a.draw(r,s)},json2vennchart:function(t){var i=[],n=[],a=[];var r=function(r){var s={};if(!window.Prototype){s.key=r;s.value=t[r]}else s=r;var o=s.key.split(".")[0];var l=s.key.split(".")[1];if(typeof i[l]=="undefined"&&o!="vennchart_intersection")i[l]={};if(o=="vennchart_color")i[l]["color"]=s.value;else if(o=="vennchart_title")i[l]["title"]=s.value;else if(o=="vennchart_value")i[l]["value"]=s.value;else if(o=="vennchart_intersection")n[l]=s.value;else if(o=="vennchart_metadata")a=s.value.evalJSON?s.value.evalJSON():jQuery.parseJSON(s.value)};if(window.Prototype)$H(t).each(r);else jQuery.each(t,r);var s=0;for(var o=0;o<i.length-1;o++){i[o]["intersections"]=[];for(var l=0;l<i.length-1-o;l++){i[o]["intersections"].push(n[s]);s++}}return{areas:i,conf:a}},showVennChart:function(e,t){t=t||false;var i=e.getAttribute("rel:chart_data");var n=i.evalJSON?i.evalJSON():jQuery.parseJSON(i);var a=BF_UI.json2vennchart(n);areas=a.areas;var r=[],s=[],o=[];for(var l=0;l<areas.length;l++){r[l]=areas[l].value||0;s[l]=areas[l].title;o[l]=areas[l].color}size=e.getDimensions?e.getDimensions():window.jQuery?{width:$(e).width(),height:$(e).height()}:{width:0,height:0};if(!t){var u=Raphael(e);venn=u.vennchart(0,0,size.width||559,size.height||345,{values:r},{colors:o,titles:s,conf:a.conf,positionrecalc:true,fallback:t});if(window.jQuery!="undefined")$(u.canvas).mousemove(venn.mousemove);else $(u.canvas).onmousemove=venn.mousemove}else{var d=document.createElement("canvas");d.width=size.width||300;d.height=size.height||250;$(e).append(d);Raphael.fn.vennchart(0,0,d.width,d.height,{values:r},{colors:o,titles:s,conf:a.conf,positionrecalc:true,fallback:t,fallbackelem:d})}},renderEntities:function(t){var i="BF_RENDER_ENTITIES_DIV_73625";var n=$(i);if(!n){var a=document.getElementsByTagName("body")[0];n=document.createElement("DIV");n.setAttribute("id",i);n.id=i;n.style.display="none";a.appendChild(n)}n.innerHTML=t;t=n.innerHTML;t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");return t},initialize_simple_color_picker:function(t){var i=$(t.field);if(!i)return;var n=function(n){i.BFSetAttribute("value",n);i.setValue(n);if(t.callback)t.callback.call(this,{target:i,stop:function(){}})};i.disabled=true;i.addClassName("hidden");var a=function(t){var i=$(t.target.parentNode.current);var n=$(t.target.parentNode.select);if(t.forceOff){BF_Effect.SlideUp(n,1);i.removeClassName("hidden");n.addClassName("hidden")}else{if(n.hasClassName("hidden")){n.removeClassName("hidden");BF_Effect.SlideDown(n,1)}else n.addClassName("hidden")}};i.BFOnAttributeChange("value",function(t){if(!t.new_value)return;var i=BF_UI.backgroundColorToFontColor(t.new_value);t.element.setStyle({backgroundColor:t.new_value,color:i});a({forceOff:true,target:{parentNode:t.element.picker}});t.element.picker.current.setStyle({backgroundColor:t.new_value,color:i});t.element.picker.current.update(t.new_value)});var r=document.createElement("div");r.addClassName("simple_color_picker");var s=document.createElement("div");s.addClassName("holder");var o=document.createElement("div");o.addClassName("select");o.setAttribute("style","float:left;");o.addClassName("hidden");var l=document.createElement("div");l.addClassName("current");l.addClassName("preview");l.appendChild(document.createTextNode(local.t("None")));l.observe("click",a);s.appendChild(l);s.appendChild(o);r.appendChild(s);t.colors.each(function(t){if(!t.match("^#")&&!t.match("Transparent")){t="#"+t}t=local.t(t);var i=BF_UI.backgroundColorToFontColor(t);var a=document.createElement("div");a.addClassName("preview");a.setStyle({backgroundColor:t,color:i});a.appendChild(document.createTextNode(t));a.observe("click",function(){n(t)});o.appendChild(a)});if(t.allow_custom){var u=document.createElement("input");u.addClassName("preview");u.addClassName("input");u.setAttribute("placeholder",local.t("Custom"));u.observe("blur",function(e){var t=e.target.value;if(t.match("^([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})"))t="#"+t;if(t.match("^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$")){n(t.toUpperCase());e.target.value=t}else if(t=="Transparent"){n(t.toUpperCase());e.target.value=t}else{u.value=""}});o.appendChild(u)}s.current=l;s.select=o;i.picker=s;$(i.parentNode).appendChild(r);if(objExists(t.default_color)){defColor=t.default_color;if(!defColor.match("^#")&&!defColor.match("Transparent"))defColor="#"+defColor;i.BFSetAttribute("value",defColor)}return r},backgroundColorToFontColor:function(t){if(!t.match("^#")){t="#"+t}if(t.length==4){t=t.substring(0,4)+t.substring(1,4)}if(t.length!=7)return;var i=parseInt(r(t).substring(0,2),16);var n=parseInt(r(t).substring(2,4),16);var a=parseInt(r(t).substring(4,6),16);function r(t){return t.charAt(0)=="#"?t.substring(1,7):t}if(i+n+a>400){return"black"}else{return"white"}},closeDropdowns:function(){$$(".bf_dropdown.open").each(function(t){t.removeClassName("open")});$$("body")[0].stopObserving("click",BF_UI.dropdownClickHandler);EventManager.fire("bf_ui:close_dropdowns")},dropdownClickHandler:function(e){var t=e.findElement(".bf_dropdown");if(!t)BF_UI.closeDropdowns()},openDropdownEventHandler:function(e){e.stop();BF_UI.closeDropdowns();var t;if(e.dropdown_id){t=$(e.dropdown_id)}else if(e.dropdown){t=$(e.dropdown)}else{t=e.findElement(".bf_dropdown")}if(t.hasClassName("open")){return BF_UI.closeDropdowns()}t.addClassName("open");var i=$(t).down(".bf_dropdown_menu");var n={top:0,left:0};if($(t).hasClassName("bf_unpositioned_dropdown"))i.show();else BF_Effect.OpenMenu(t,i,n);$$("body")[0].observe("click",BF_UI.dropdownClickHandler);EventManager.fire("bf_ui:open_dropdowns",{},t);if(typeof gtrack!="undefined"&&$(e.element)){BF_UI.trackUploadDropdown($(e.element))}},trackUploadDropdown:function(t){if(t.descendantOf($s(".thumbnail-chooser"))){gtrack.track_events("[ttp]:thumbnail-edit","thumbnail-dropdown")}if(t.descendantOf($("suplist_module_photo_row_launcher"))){gtrack.track_events("[ttp]:edit-item","multi-image-upload")}if(t.descendantOf($("suplist_module_photo_area"))){gtrack.track_events("[ttp]:edit-item","drop-down")}}};if(typeof window["BuzzLoader"]!="undefined")BuzzLoader.register(BF_UI.init,5);var BFJS=function(){var t=this;this.hasjQuery=function(){return typeof window["jQuery"]!=="undefined"&&typeof window["Prototype"]==="undefined"};this.selector=this.hasjQuery()?"find":"select";this.observer=this.hasjQuery()?"on":"observe";this.read_attr=this.hasjQuery()?"attr":"getAttribute";this.write_attr=this.hasjQuery()?"attr":"setAttribute";this.stop_observing=this.hasjQuery()?"unbind":"stopObserving";this.remove_class=this.hasjQuery()?"removeClass":"removeClassName";this.add_class=this.hasjQuery()?"addClass":"addClassName";this.has_class=this.hasjQuery()?"hasClass":"hasClassName";this.update_html=this.hasjQuery()?"html":"update";this.get_height=this.hasjQuery()?"height":"getHeight";this.get_width=this.hasjQuery()?"width":"getWidth";this.up=this.hasjQuery()?"parents":"up";this.gtrack_cat=this.hasjQuery()?"data-category":"rel:gt_cat";this.gtrack_act=this.hasjQuery()?"data-action":"rel:gt_act";this.gtrack_label=this.hasjQuery()?"data-label":"rel:gt_label";this.datetime=this.hasjQuery()?"data-datetime":"rel:datetime";this.dateformat=this.hasjQuery()?"data-dateformat":"rel:date_format";this.prefix=this.hasjQuery()?"data-prefix":"rel:prefix";this.trim=this.hasjQuery()?"trim":"strip";this.replace=this.hasjQuery()?"replaceWith":"replace";this.isEventManagerEmulated=false;this.map=function(t,i){if(this.hasjQuery()){return jQuery.map(t,i)}else{return $A(t).map(i)}};this.children=function(t,i){if(this.hasjQuery()){return jQuery(t).children(i)}else{return t.down(i)}};this.mergeOptions=function(t,i){if(this.hasjQuery()){return jQuery.extend(t,i)}else{return $H(t).merge(i).toObject()}};this.clone=function(t){if(this.hasjQuery()){return jQuery.extend({},t)}else{return Object.clone(t)}};this.each=function(t,i){if(t&&t.forEach){return t.forEach(i)}else if(this.hasjQuery()){return jQuery.each(t,function(t,n){i(n)})}else{return $A(t).each(i)}};this.match=function(t,i){if(!t){return false}if(t.match){return t.match(i)}else{return t.test(i)}};this.addClass=function(t,i){var n=$(bfjs.getFirstEl(t));n[bfjs.add_class](i)};this.removeClass=function(t,i){var n=$(bfjs.getFirstEl(t));n[bfjs.remove_class](i)};this.$=function(t){if(this.hasjQuery()){return jQuery(t)}else{return $$(t)}};this.ajax=function(t,i,n,a,r,s,o){if(this.hasjQuery()){return BF.ajax({type:i,url:t,success:r,error:s,contentType:n,dataType:a})}else{return(new BF_Request).request(t,{method:i,onSuccess:r,onError:s})}};this.updateHTML=function(t,i){var n=$(bfjs.getFirstEl(t));n[bfjs.update_html](i)};this.read_cookie=function(t){if(bfjs.isMobile()){return readCookie(t)}else{return BFW_Util.getCookie(t)}};this.write_cookie=function(t,i,n){if(bfjs.isMobile()){createCookie(t,i,n||9999)}else{var a={name:t,value:i};if(typeof n!=="undefined")a.seconds=n;BFW_Util.setCookie(a)}};this.escapeHTML=function(t){var i=document.createElement("div");i.appendChild(document.createTextNode(t));return i.innerHTML};this.decodeHTML=function(t){var i=document.createElement("div");if(bfjs.isMobile()){return $(i).html(t).text()}else{i.innerHTML=t;return i.innerHTML.unescapeHTML()}},this.eventFindEl=function(t,i){if(bfjs.isMobile()){return $(t.currentTarget).closest(i)[0]}else{return t.findElement(i)}};this.stripHTML=function(t){var i=document.createElement("DIV");i.innerHTML=t;return i.textContent||i.innerText||""};this.parseHTML=function(t){var i=document.implementation.createHTMLDocument();i.body.innerHTML=t;return i.body.children};this.closestElByClass=function(t,i){if(bfjs.isMobile()){return $(t).closest("."+i)[0]}else{var n=new RegExp(i);var a=true;while(a){if(t.className.search(n)>0){return t}t=t.parentNode;if(!t){a=false}}}};this.windowEvent=function(t,i){if(bfjs.isMobile()){$(window).on(t,i)}else{Event.observe(window,t,i)}};this.setGlobal=function(t,i){if(typeof t!=="string"||!t)return false;window[t]=i};this.getGlobal=function(t){return window[t]||undefined};this.getFirstEl=function(t){if(typeof t=="undefined"||t==null)return document.createElement("div");return bfjs.isMobile()&&t.jquery?t[0]:t};this.getElsByAttr=function(t){if(bfjs.isMobile()){return $(t)}else{return $$(t)}};this.getElementFromEvent=function(t){if(bfjs.isMobile()){return t.target}else{return t.element()}};this.getOffset=function(t){if(bfjs.isMobile()){var i=$(t).offset().top,n=$(t).offset().left;return[n,i]}else{return $(t).cumulativeOffset()}};this.setStyle=function(t,i){if(bfjs.isMobile()||this.hasjQuery()){for(key in i){$(t).css(key,i[key])}}else{t.setStyle(i)}};this.universal_each=function(t,i){if(bfjs.isMobile()){$.each(t,function(t,n){i(n,t)})}else{t.each(function(t,n){i(t,n)})}};this.universal_compare_els=function(t,i){if(bfjs.isMobile()){return t.is(i)}else{return t==i}};this.isMobile=function(){if(this.hasjQuery()&&/^mobile/i.test(BF_STATIC.tt_page)){return true}else if(this.hasjQuery()&&/^ab_debug/i.test(BF_STATIC.tt_page)){return true}else if(this.hasjQuery()&&BF_STATIC.tt_page=="BuzzAdvertise"){return true}else{return false}};this.onPageLoad=function(t){if(bfjs.isMobile()){$(document).ready(t)}else if(window.BuzzLoader){BuzzLoader.register(t,1)}};this.toggleClass=function(t,i,n){n=typeof n==="undefined"?false:n;var a=$(bfjs.getFirstEl(t));if(!n&&a[bfjs.has_class](i)){a[bfjs.remove_class](i)}else if(n){a[bfjs.add_class](i)}};this.indexOf=function(t,i){if(bfjs.isMobile()){return $.inArray(t,i)}else{return i.indexOf(t)}};this.formatNumber=function(t){if(t<1e3){return t}else if(t<1e4){return t.toString().charAt(0)+","+t.toString().substring(1)}else if(t>=1e6){return(t/1e6).toFixed(t%1e6!==0)+"M"}return(t/1e3).toFixed(t%1e3!==0)+"K"};this.getUrlVars=function(){var t={};var i=window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(i,n,a){t[n]=a});return t};this.toQueryParamsSafe=function(t,i){var n=t.strip().match(/([^?#]*)(#.*)?$/);if(!n)return{};return n[1].split(i||"&").inject({},function(t,i){if((i=i.split("="))[0]){var n=i.shift();try{n=decodeURIComponent(n)}catch(e){}var a=i.length>1?i.join("="):i[0];try{if(a!=undefined)a=decodeURIComponent(a)}catch(e){}if(n in t){if(!Object.isArray(t[n]))t[n]=[t[n]];t[n].push(a)}else t[n]=a}return t})};this.loadJSONP=function r(t,i,n){var a,r,s,o;a=0;r=i.head||i.getElementsByTagName("head")[0];s=i.createElement("script");s.type="text/javascript";o=function(i,n,a,s){n.call(s||t,a);r.removeChild(i);i=null};return function l(i,n,u,d){var c=false,_,f;u=u?u:{};_="__jsonp_"+a++;if(i.match(/\?/))i+="&callback="+_;else i+="?callback="+_;f=s.cloneNode();f.src=i;t[_]=function(i){i.callbackSuccess=true;c=true;o(f,n,i,d);try{delete t[_]}catch(e){t[_]=null}};u.attemptsNumber=u.attemptsNumber?u.attemptsNumber+1:1;f.onerror=function(){if(typeof u.retries!=="undefined"&&u.attemptsNumber<=u.retries){l(i,n,u,d)}else{o(f,n,{callbackSuccess:false},d)}};f.onreadystatechange=function(){if(this.readyState==="loaded"){setTimeout(function(){if(c)return;o(f,n,{callbackSuccess:false},d)},50)}};r.appendChild(f)}}(window,document);this.createScript=function(t){var i,n,a=function(t,i){if(t.readyState=="loaded"||t.readyState=="complete"){i()}else{setTimeout(function(){a(t,i)},100)}};if(!t||typeof t.url==="undefined"){return bfjs.logError("bfjs.createScript(): No url provided")}if(!window["BF_STATIC"]||!BF_STATIC.bf_test_mode){i=document.getElementsByTagName("script")[0];n=document.createElement("script");n.type="text/javascript";n.async=false;n.src=t.url;if(typeof t.onError==="function"){n.onerror=t.onError}if(typeof t.onSuccess==="function"){if(typeof n.addEventListener!=="undefined"){n.addEventListener("load",t.onSuccess,false)}else{n.onreadystatechange=function(){n.onreadystatechange=null;a(n,t.onSuccess)}}}i.parentNode.insertBefore(n,i)}else{bfjs.logInfo("bfjs.createScript(): disable load",t.url,"for test mode")}};this.logInfo=function(t){if(BF_STATIC.bf_env==="dev"){console.info(t)}return true};this.logError=function(t){if(BF_STATIC.bf_env==="dev"){console.error(t)}return false};this.find=function(t,i){return bfjs.findAll(t,i)[0]};this.findAll=function(t,i){var n,a,r=[];if(typeof t!=="object"||typeof i!=="function"){throw new TypeError("Incorrect argument type")}if(typeof t.findAll==="function"){return t.findAll(i)}else if(this.hasjQuery()&&typeof jQuery.grep==="function"){return jQuery.grep(t,i)}else{for(n=0,a=t.length;n<a;n++){if(!i(t[n],n))continue;r.push(t[n])}return r}};this.stripTags=function(t){if(typeof t!=="string"){throw new TypeError("Incorrect argument type")}if(this.hasjQuery()){t=t.replace(/(<([^>]+)>)/gi,"")}else{t=t.stripTags()}return t};this.EventManager={observe:function(i,n){if(!t.isEventManagerEmulated&&typeof EventManager!=="undefined"){return EventManager.observe(i,n)}else if(t.hasjQuery()&&jQuery.Callbacks){jQuery.bfEvents=jQuery.bfEvents||{};jQuery.bfEvents[i]=jQuery.bfEvents[i]||{};jQuery.bfEvents[i].callbacks=jQuery.bfEvents[i].callbacks||jQuery.Callbacks("unique");jQuery.bfEvents[i].callbacks.add(n)}else{throw new Error("Unable to locate observe function")}},observe_once:function(i,n){if(!t.isEventManagerEmulated&&typeof EventManager!=="undefined"){return EventManager.observe_once(i,n)}else if(t.hasjQuery()&&jQuery.Callbacks){jQuery.bfEvents=jQuery.bfEvents||{};jQuery.bfEvents[i]=jQuery.bfEvents[i]||{};jQuery.bfEvents[i].callbacks=jQuery.bfEvents[i].callbacks||jQuery.Callbacks("unique");jQuery.bfEvents[i].callbacks.add(n);jQuery.bfEvents[i].onceFunctions=jQuery.bfEvents[i].onceFunctions||[];jQuery.bfEvents[i].onceFunctions.push(n)}else{throw new Error("Unable to locate observe_once function")}},stop_observing:function(i,n){if(!t.isEventManagerEmulated&&typeof EventManager!=="undefined"){return EventManager.stop_observing(i,n)}else if(t.hasjQuery()&&jQuery.Callbacks){if(!jQuery.bfEvents||!jQuery.bfEvents[i]||!jQuery.bfEvents[i].callbacks||!jQuery.bfEvents[i].callbacks.has(n))return false;jQuery.bfEvents[i].callbacks.remove(n);if(jQuery.bfEvents[i].onceFunctions){jQuery.bfEvents[i].onceFunctions=jQuery.grep(jQuery.bfEvents[i].onceFunctions,function(t){return t!==n})}return true}else{throw new Error("Unable to locate stop_observing function")}},fire:function(i,n,a){if(typeof BF_STATIC!=="undefined"&&BF_STATIC.bf_env&&BF_STATIC.bf_env==="dev"){console.log("Firing: "+i,a,n)}if(!t.isEventManagerEmulated&&typeof EventManager!=="undefined"){return EventManager.fire(i,n,a)}else if(t.hasjQuery()&&jQuery.Callbacks){if(!jQuery.bfEvents||!jQuery.bfEvents[i]||!jQuery.bfEvents[i].callbacks)return;jQuery.bfEvents[i].callbacks.fire(n,a);if(jQuery.bfEvents[i].onceFunctions){
jQuery.each(jQuery.bfEvents[i].onceFunctions,function(t,n){jQuery.bfEvents[i].callbacks.remove(n)})}}else{throw new Error("Unable to locate fire function")}}};this.isInView=function(t){var t=t||{};var i=window.innerHeight||document.documentElement.clientHeight;var n={top:(t.lookahead||i)*-1,bottom:t.lookahead||i};var a={el:t.el,withinViewport:false,withinLookahead:false,partiallyInViewport:false,partiallyInLookahead:false,hidden:false};var r;if(typeof t.el==="undefined"){return a}r=t.el.getBoundingClientRect();if(r.height===0){a.hidden=true}if(r.top<n.top&&r.bottom>n.top||r.top<n.bottom&&r.bottom>n.bottom){a.partiallyInLookahead=true}if(r.top>=n.top&&r.bottom<=i+n.bottom){a.withinLookahead=true}if(r.top<i&&r.bottom>0){a.partiallyInViewport=true}if(r.top>=0&&r.bottom<=i){a.withinViewport=true}return a};this.inViewListener=function(){function i(i){var n=this;var a="data-inview-id";var r=0;var s={};var o;var l=function d(){for(var i in s){var n=s[i].handlers;var a=t.isInView({el:s[i].el,lookahead:s[i].lookahead});for(var r=0,o=n.length;r<o;r++){n[r](a)}}};var u=function(){if(o){clearTimeout(o)}o=setTimeout(l,i.throttleTimeout)};window.addEventListener("scroll",i.throttleTimeout?u:l,false);window.addEventListener("resize",i.throttleTimeout?u:l,false);this.add=function c(t){t=t||{};var i="el_"+r;var o;if(typeof t.el==="undefined"||typeof t.callback==="undefined"||typeof t.callback!=="function"){return false}if(typeof t.el==="string"){$$(t.el).each(function(i){n.add({el:i,callback:t.callback,lookahead:t.lookahead||0})});return false}else if(o=t.el.getAttribute(a)){i="el_"+o}else{s[i]={el:t.el,lookahead:t.lookahead||0,handlers:[]};t.el.setAttribute(a,r++)}s[i].handlers.push(t.callback);l()};this.remove=function _(t){var i;var r;if(typeof t.el==="undefined"){return false}if(typeof t.el==="string"){$$(t.el).each(function(t){n.remove({el:t})});return false}else if(r=t.el.getAttribute(a)){i="el_"+r;t.el.removeAttribute(a)}delete s[i]};this.trigger=function f(){l()}}var n=new i({throttleTimeout:350});return{add:function(t){n.add(t)},remove:function(t){n.remove(t)},trigger:function(){n.trigger()},create:function(t){return new i(t||{})}}}();function i(){a.call(this)}window.Template=window.Template||n();function n(){function t(t){var t=t.toString();this.evaluate=function(i){for(var n in i){if(i.hasOwnProperty(n)){t=t.replace("#{"+n+"}",i[n])}}return t}}return t}function a(){if(typeof EventManager!=="undefined")return;this.isEventManagerEmulated=true;EventManager={observe:this.EventManager.observe,observe_once:this.EventManager.observe_once,fire:this.EventManager.fire,stop_observing:this.EventManager.stop_observing}}i.call(this)};var bfjs=new BFJS;var addDraftPageClass=function(){if(document.location.href.match("/_draft")){if(typeof window.Prototype!="undefined")document.body.addClassName("DraftPage");else setTimeout(addDraftPageClass,100)}};bfjs.onPageLoad(addDraftPageClass);String.prototype.replaceAll=function(t,i){return this.split(t).join(i)};String.prototype.capitalize=function(){return this.replace(/\w+/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})};String.prototype.commafy=function(){return this.replace(/\B(?=(\d{3})+(?!\d))/g,",")};if(typeof String.prototype.trim!="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}Array.prototype.remove=function(){var t,i=arguments,n=i.length,a;while(n&&this.length){t=i[--n];while((a=this.indexOf(t))!==-1){this.splice(a,1)}}return this};function IsNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}function BF_cumulativeScrollOffset(t){var i=0,n=0;do{if(t===document.body){var a=document.documentElement||document.body.parentNode||document.body;i+=!Object.isUndefined(window.pageYOffset)?window.pageYOffset:a.scrollTop||0;n+=!Object.isUndefined(window.pageXOffset)?window.pageXOffset:a.scrollLeft||0;break}else{i+=t.scrollTop||0;n+=t.scrollLeft||0;t=t.parentNode}}while(t);return new Element.Offset(n,i)}var $s=function(t,i){var n=$$(t);if(n.length==0){if(/dev\./.test(window.location.href)&&!i&&(String.prototype.toQueryParams&&window.location.href.toQueryParams().debug)){console.error("No "+t+" in document!");console.trace()}return new Element("div")}else{return n[0]}};function isHTMLElement(e){if(typeof HTMLElement=="object"||typeof HTMLElement=="function"){return e&&e instanceof HTMLElement}else{return e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"}}function isNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}function clearTimer(t){if(objExists(t)){clearTimeout(t)}}function notEmptyStr(t){return"string"===typeof t&&0<t.length?!0:!1}function truncateStr(t,i){var n,a;if("string"!==typeof t){return""}n=t.split("");if(n.length>i){for(a=n.length-1;a>-1;--a){if(a>i){n.length=a}else if(" "===n[a]){n.length=a;break}}n.push("...")}return n.join("")}function hasLocalStorage(){var t;t="localStorage"in window&&window["localStorage"]!==null?true:false;if(t){try{localStorage.setItem("__test","data")}catch(e){t=false}}return t}function findMatchesExec(t,i){if(!(t instanceof RegExp)){if(BF_STATIC.env!="live"){throw new Error("Error: findMatchesExec() : pattern is not RegExp object")}return false}var n=t.global?true:false;var a=[];var r;t.lastIndex=0;while((r=t.exec(i))!=null){a.push(r);if(!n){break}}return a.length?a:null}function win8AdCall(){try{if(document.location.search.match(/win8me/)){return"os=win8;"}if(typeof navigator.appVersion!="undefined"){if(navigator.appVersion.toLowerCase().indexOf(/windows nt 6.2/)!=-1){return"os=win8;"}else{return""}}else{return""}}catch(e){return""}}function isIE9(){var t=false;if(navigator.appVersion.indexOf("MSIE")!=-1&&parseFloat(navigator.appVersion.split("MSIE")[1])==9){t=true}return t}function isIE10(){if(uagent.match("msie 10"))return true}function isIE11(){return!!(navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/))}function isMSIE(){return navigator.appVersion.indexOf("MSIE")!=-1||isIE11()}function isFirefox(){return navigator.userAgent.toLowerCase().indexOf("firefox")!=-1}function isMac(){return navigator.platform.toLowerCase().indexOf("mac")!=-1}function isSafari5(){if(uagent.match("safari")&&!uagent.match("chrome")&&!(uagent.match(/Version\/[6-9](?:\.[0-9])* Safari/i)||uagent.match(/Version\/[5-9](?:\.\d+)*\.\d+ Mobile\/\S*\sSafari/i)))return true}function getUrlVars(){var t={};var i=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(i,n,a){t[n]=a});return t}function is_touch(){var t;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){t=true}else{t=false}return t}function is_mobile(){var t=navigator.userAgent.toLowerCase();if(t.match(/iphone|ipod|android|ipad/)){return true}else{return false}}function BFWebPath(){var t=BF_STATIC.bf_env=="dev"?"dev.":BF_STATIC.bf_env=="stage"?"stage.":"www.";return t+"buzzfeed.com"+BF_STATIC.web_root}function getWidth(t){return $(t).getWidth()}function objExists(t){try{if(typeof t!="undefined"){return true}else{return false}}catch(i){return false}}function removeAllCssClasses(t){$w($(t).className).each(function(i){$(t).removeClassName(i)})}function trackPixel(t){var i=new Image;var n=Math.random()*1e17;t=t.replace("[timestamp]",n);if(BF_STATIC.bf_env=="dev"||BF_STATIC.bf_test_mode){console.log("Pixel Tracked: ",t)}else{i.src=t}}function ukBackground(){if(BF_STATIC.country=="uk"&&(acl.user_can("homepage_edit")||acl.user_can("uk_homepage_edit"))){$$("body")[0].addClassName("uk_edit")}}function fbSharePixel(){var t={};t.pixel_id="6009136439565";t.value="0.00";if(BF_STATIC.bf_env=="dev"||BF_STATIC.bf_test_mode){console.log("FB Share Pixel")}else{BF_UTIL.createScript({url:"//connect.facebook.net/en_US/fp.js"})}}function toggleGraphicImage(t,i){if(!isSafari5()&&!isIE10()){var n=t.getOffsetParent(),a=n.select(".graphic_image")[0],r=n.select(".graphic_image_warning")[0],s=n.select("reblur")[0];if(!i){if(a)a.removeClassName("graphic_image");if(r)r.addClassName("hidden");n.addClassName("no_blur")}else if(i){a=n.select("img")[0];if(a)a.addClassName("graphic_image");if(r)r.removeClassName("hidden");n.removeClassName("no_blur")}}}function gplusCallback(t){gplus.callback(t)}var clog=function(){if(BF_STATIC.bf_env=="dev"){console.log.apply(console,[].concat("%cLOG:","color: green",arguments))}};function getRandomInt(t,i){return Math.floor(Math.random()*(i-t))+t}if(Element.addMethods){Element.addMethods({cleanHeight:function(t){var i=Number(t.getStyle("padding-top").slice(0,-2))+Number(t.getStyle("padding-bottom").slice(0,-2));var n=Number(t.getStyle("margin-top").slice(0,-2))+Number(t.getStyle("margin-bottom").slice(0,-2));var a=Number(t.getStyle("border-top").slice(0,-2))+Number(t.getStyle("border-bottom").slice(0,-2));var r=Number(t.getHeight());if(isNaN(i))i=0;if(isNaN(n))n=0;if(isNaN(a))a=0;if(isNaN(r))r=0;var s=r-(i+n+a);return s},findParent:function(t,i){try{while(t!=document){var n=$(t).up(i);if(n!="undefined"){return n}else{t=n}}return null}catch(e){return null}},getSelectedOption:function(t){if(!(t=$(t)))return;var i=t.selectedIndex;return i>=0?t.options[i]:undefined}})}function shuffleArray(t){for(var i,n,a=t.length;a;i=parseInt(Math.random()*a),n=t[--a],t[a]=t[i],t[i]=n);return t}var BF_UTIL=function(){var t,i,n=document,a=window,r=n.body,s=n.documentElement,o={},l=function(t){bfjs.createScript(t)},u=function(t,i,n){var a;return function r(){var r=this,s=arguments;function o(){if(!n)t.apply(r,s);a=null}if(a)clearTimeout(a);else if(n)t.apply(r,s);a=setTimeout(o,i||100)}},d=function(t){if(BF_STATIC.env=="live"||typeof console!=="object"||typeof console.log!=="function")return;console.log(t)},c={dimensions:{width:function(){var t=0;if(typeof a.innerWidth=="number"){t=a.innerWidth}return t},height:function(){var t=0;if(typeof a.innerHeight=="number"){t=a.innerHeight}return t}},position:{top:function(){return typeof a.screenY=="number"?a.screenY:a.screenTop},left:function(){return typeof a.screenX=="number"?a.screenX:a.screenLeft}}},_={height:function(){var i=n.body,a=n.documentElement;if(typeof t==="undefined")t=Math.max(i.scrollHeight,i.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight);return t},width:function(){var t=n.body,a=n.documentElement;if(typeof i==="undefined")i=Math.max(t.scrollWidth,t.offsetWidth,a.clientWidth,a.scrollWidth,a.offsetWidth);return i}},f=function(){var t=document.body||document.documentElement,i=t.style,n="transition";if(typeof i[n]=="string"){return true}var a=["Moz","webkit","Webkit","Khtml","O","ms"];n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<a.length;r++){if(typeof i[a[r]+n]=="string"){return true}}return false};o.browser=c;o.document=_;o.debounce=u;o.log=d;o.createScript=l;o.supportsTransitions=f;return o}();var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,a=function(t,i){t=String(t);i=i||2;while(t.length<i)t="0"+t;return t};return function(r,s,o){var l=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(r)=="[object String]"&&!/\d/.test(r)){s=r;r=undefined}r=r?new Date(r):new Date;if(isNaN(r))throw SyntaxError("invalid date");s=String(l.masks[s]||s||l.masks["default"]);if(s.slice(0,4)=="UTC:"){s=s.slice(4);o=true}var u=o?"getUTC":"get",d=r[u+"Date"](),c=r[u+"Day"](),_=r[u+"Month"](),f=r[u+"FullYear"](),h=r[u+"Hours"](),p=r[u+"Minutes"](),m=r[u+"Seconds"](),g=r[u+"Milliseconds"](),b=o?0:r.getTimezoneOffset(),v={d:d,dd:a(d),ddd:l.i18n.dayNames[c],dddd:l.i18n.dayNames[c+7],m:_+1,mm:a(_+1),mmm:l.i18n.monthNames[_],mmmm:l.i18n.monthNames[_+12],yy:String(f).slice(2),yyyy:f,h:h%12||12,hh:a(h%12||12),H:h,HH:a(h),M:p,MM:a(p),s:m,ss:a(m),l:a(g,3),L:a(g>99?Math.round(g/10):g),t:h<12?"a":"p",tt:h<12?"am":"pm",T:h<12?"A":"P",TT:h<12?"AM":"PM",Z:o?"UTC":(String(r).match(i)||[""]).pop().replace(n,""),o:(b>0?"-":"+")+a(Math.floor(Math.abs(b)/60)*100+Math.abs(b)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return s.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(t,i){try{return dateFormat(this,t,i)}catch(n){console.error(n.message+": date_format.js line 159");return null}};function inject_rando_code(t){var i="/random";if(typeof t!="undefined"){i+="/"+t;$("random_"+t+"_button").hide();$("random_"+t+"_button_spinner").show()}else{$("random_button").hide();$("random_button_spinner").show()}i+=".js";BF_XSS.swift_injection(BF_STATIC.web_root+i)}Persist=function(){var t="0.1.0",n,a,r,s,o,l;l=function(){var t="Thu, 01-Jan-1970 00:00:01 GMT",n=1e3*60*60*24,a=["expires","path","domain"],r=escape,s=unescape,o=document,l;var u=function(){var t=new Date;t.setTime(t.getTime());return t};var d=function(t,i){var n,s,o,l=[],u=arguments.length>2?arguments[2]:{};l.push(r(t)+"="+r(i));for(n=0;n<a.length;n++){s=a[n];if(o=u[s])l.push(s+"="+o)}if(u.secure)l.push("secure");return l.join("; ")};var c=function(){var t="__EC_TEST__",i=new Date;i=i.toGMTString();this.set(t,i);this.enabled=this.remove(t)==i;return this.enabled};l={set:function(t,a){var r=arguments.length>2?arguments[2]:{},s=u(),l,c={};if(r.expires){r.expires*=n;c.expires=new Date(s.getTime()+r.expires);c.expires=c.expires.toGMTString()}var _=["path","domain","secure"];for(i=0;i<_.length;i++)if(r[_[i]])c[_[i]]=r[_[i]];var f=d(t,a,c);o.cookie=f;return a},has:function(t){t=r(t);var i=o.cookie,n=i.indexOf(t+"="),a=n+t.length+1,s=i.substring(0,t.length);return!n&&t!=s||n<0?false:true},get:function(t){t=r(t);var i=o.cookie,n=i.indexOf(t+"="),a=n+t.length+1,l=i.substring(0,t.length),u;if(!n&&t!=l||n<0)return null;u=i.indexOf(";",a);if(u<0)u=i.length;return s(i.substring(a,u))},remove:function(i){var n=l.get(i),a={expires:t};o.cookie=d(i,"",a);return n},keys:function(){var t=o.cookie,i=t.split("; "),n,a,r=[];for(n=0;n<i.length;n++){a=i[n].split("=");r.push(s(a[0]))}return r},all:function(){var t=o.cookie,i=t.split("; "),n,a,r=[];for(n=0;n<i.length;n++){a=i[n].split("=");r.push([s(a[0]),s(a[1])])}return r},version:"0.2.1",enabled:false};l.enabled=c.call(l);return l}();o=function(){};r=function(t){return"PS"+t.replace(/_/g,"__").replace(/ /g,"_s")};C={search_order:["localstorage","whatwg_db","globalstorage","ie","cookie"],name_re:/^[a-z][a-z0-9_ -]+$/i,methods:["init","get","set","remove","load","save"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?"}};a={whatwg_db:{size:200*1024,test:function(){var t="PersistJS Test",i="Persistent database test.";if(!window.openDatabase)return false;if(!window.openDatabase(t,C.sql.version,i,a.whatwg_db.size))return false;return true},methods:{transaction:function(t){if(!this.db_created){var i=C.sql.create;this.db.transaction(function(t){t.executeSql(i,[],function(){this.db_created=true})},o)}this.db.transaction(t)},init:function(){var t,i;t=this.o.about||"Persistent storage for "+this.name;i=this.o.size||a.whatwg_db.size;this.db=openDatabase(this.name,C.sql.version,t,i)},get:function(t,i,n){var a=C.sql.get;if(!i)return;n=n||this;this.transaction(function(r){r.executeSql(a,[t],function(t,a){if(a.rows.length>0)i.call(n,true,a.rows.item(0)["v"]);else i.call(n,false,null)})})},set:function(t,i,n,a){var r=C.sql.remove,s=C.sql.set;this.transaction(function(o){o.executeSql(r,[t],function(){o.executeSql(s,[t,i],function(t,r){if(n)n.call(a||this,true,i)})})});return i},remove:function(t,i,n){var a=C.sql.get;sql=C.sql.remove;this.transaction(function(r){if(i){r.executeSql(a,[t],function(a,r){if(r.rows.length>0){var s=r.rows.item(0)["v"];a.executeSql(sql,[t],function(t,a){i.call(n||this,true,s)})}else{i.call(n||this,false,null)}})}else{r.executeSql(sql,[t])}})}}},globalstorage:{size:5*1024*1024,test:function(){return window.globalStorage?true:false},methods:{key:function(t){return r(this.name)+r(t)},init:function(){this.store=globalStorage[this.o.domain]},get:function(t,i,n){t=this.key(t);if(i)i.call(n||this,true,this.store.getItem(t))},set:function(t,i,n,a){t=this.key(t);this.store.setItem(t,i);if(n)n.call(a||this,true,i)},remove:function(t,i,n){var a;t=this.key(t);a=this.store[t];this.store.removeItem(t);if(i)i.call(n||this,a!==null,a)}}},localstorage:{size:-1,test:function(){return window.localStorage?true:false},methods:{key:function(t){return r(this.name)+r(t)},init:function(){this.store=localStorage},get:function(t,i,n){t=this.key(t);if(i)i.call(n||this,true,this.store.getItem(t))},set:function(t,i,n,a){t=this.key(t);this.store.setItem(t,i);if(n)n.call(a||this,true,i)},remove:function(t,i,n){var a;t=this.key(t);a=this.store.getItem(t);this.store.removeItem(t);if(i)i.call(n||this,a!==null,a)}}},ie:{prefix:"_persist_data-",size:64*1024,test:function(){return window.ActiveXObject?true:false},make_userdata:function(t){var i=document.createElement("div");i.id=t;i.style.display="none";i.addBehavior("#default#userData");document.body.appendChild(i);return i},methods:{init:function(){var t=a.ie.prefix+r(this.name);this.el=a.ie.make_userdata(t);if(this.o.defer)this.load()},get:function(t,i,n){var a;t=r(t);if(!this.o.defer)this.load();a=this.el.getAttribute(t);if(i)i.call(n||this,a?true:false,a)},set:function(t,i,n,a){t=r(t);this.el.setAttribute(t,i);if(!this.o.defer)this.save();if(n)n.call(a||this,true,i)},load:function(){this.el.load(r(this.name))},save:function(){this.el.save(r(this.name))}}},cookie:{delim:":",size:4e3,test:function(){return n.Cookie.enabled?true:false},methods:{key:function(t){return this.name+a.cookie.delim+t},get:function(t,i,n,a){t=this.key(t);i=l.get(t);if(n)n.call(a||this,i!=null,i)},set:function(t,i,n,a){t=this.key(t);l.set(t,i,this.o);if(n)n.call(a||this,true,i)},remove:function(t,i,n,a){var i;t=this.key(t);i=l.remove(t);if(n)n.call(a||this,i!=null,i)}}}};var s=function(){var t,i,r,s,l=C.methods,u=C.search_order;for(t=0,i=l.length;t<i;t++)n.Store.prototype[l[t]]=o;n.type=null;n.size=-1;for(t=0,i=u.length;!n.type&&t<i;t++){r=a[u[t]];if(r.test()){n.type=u[t];n.size=r.size;for(s in r.methods)n.Store.prototype[s]=r.methods[s]}}n._init=true};n={VERSION:t,type:null,size:0,add:function(t){a[t.id]=t;C.search_order=[t.id].concat(C.search_order);s()},remove:function(t){var i=C.search_order.indexOf(t);if(i<0)return;C.search_order.splice(i,1);delete a[t];s()},Cookie:l,Store:function(t,i){if(!C.name_re.exec(t))throw new Error("Invalid name");if(!n.type)throw new Error("No suitable storage found");i=i||{};this.name=t;i.domain=i.domain||location.hostname||"localhost.localdomain";this.o=i;i.expires=i.expires||365*2;i.path=i.path||"/";this.init()}};s();return n}();function createCookie(t,i,n,a){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var s="; expires="+r.toGMTString()}else var s="";document.cookie=t+"="+i+s+"; path=/; domain=.buzzfeed.com"}function readCookie(t){var i=t+"=";var n=document.cookie.split(";");for(var a=0;a<n.length;a++){var r=n[a];while(r.charAt(0)==" ")r=r.substring(1,r.length);if(r.indexOf(i)==0)return r.substring(i.length,r.length)}return null}function eraseCookie(t,i){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain=.buzzfeed.com";if(typeof i!="undefined"){i()}}BF_Request=function(){this.id=(new Date).getTime()+Math.random().toString().substr(2,3);this.ajax=null;this.aborted=false;this._redirect=function(t){document.location.href=t};this.static_request=function(t,i){if(i.parameters){if(!i.delimiter)i.delimiter="-";var n=[];for(var a in i.parameters){n.push(a+i.delimiter+i.parameters[a])}delete i.parameters;t+="/"+n.join("/")}this.request(t,i)};this.request=function(t,i){var n=i.onSuccess;var a=function(t){try{var a=t.getResponseHeader("X-json");var r=null;if(a&&t.responseText){r=JSON.parse(t.responseText);if(r&&r["error"]&&r.error=="blacklist"){(new BF_Request).alert(local.t("An error has occurred. If it keeps happening contact error@buzzfeed.com."));return false}if(r&&typeof r.permission_key!="undefined"&&"BFW_Util"in window&&typeof i.parameters!="undefined"&&typeof i.parameters.update_permission_key!="undefined"){BFW_Util.updateInfoCookie({permission_key:r.permission_key})}}var s=t.getHeader("X-ajaxlocation");if(s){if(!s.match(/https?:\/\//)&&!s.match(/^\/buzzfeed\//)){s=BF_STATIC.web_root+s}document.location.href=s}else if(typeof n==="function"){n(t,r)}}catch(o){console.error(o)}}.bind(this);i.onSuccess=a;var r=i.on406||function(t,i){};var s=i.onCatcha||function(t,i){};i.on406=function(t,i){try{var n=JSON.parse(t.responseText);if(typeof n.service!="undefined"){if(typeof bf_catcha=="undefined"){console.warn("bf_catcha not available but request responded with catcha requirement; make sure the catcha template is in the form.")}else{bf_catcha.draw_catcha(n.service)}}}catch(e){console.warn("Cant handle 406 response");console.dir({e:e})}s(t,i);r(t,i)};if(!i.on401&&!/buzzfeed\/api/.test(t))i.on401=function(){if(i&&i.action&&i.action=="logout"||BF_STATIC&&BF_STATIC.bf_test_mode)return false;var t=new BF_User;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4&&n.status==200){t.logout({noreload:true});document.location.href=BF_STATIC.web_root+"/signin?badauth=true"}};n.open("GET","/buzzfeed/_admin_user?action=logout",true);n.send()};var o=i.on401||function(t,i){};i.on401=function(i,n){BF_Request.debug_log(t);o(i,n)};if(!i.onFailure){i.onFailure=function(t){(new BF_Request).alert(local.t("Sorry, there was a problem processing your request. If it persists please contact support at")+" "+BF_STATIC.web_root+"/about/contact")}}if(i.while_processing){if(i.while_processing.show)i.while_processing.show=$(i.while_processing.show);if(i.while_processing.hide)i.while_processing.hide=$(i.while_processing.hide);if(i.while_processing.show){i.while_processing.show.show();i.while_processing.show.removeClassName("hidden")}if(i.while_processing.hide){i.while_processing.hide.hide();i.while_processing.hide.addClassName("hidden")}var l=i.onSuccess;i.onSuccess=function(t,n){if(i.while_processing.show){i.while_processing.show.hide();i.while_processing.show.addClassName("hidden")}if(i.while_processing.hide){i.while_processing.hide.show();i.while_processing.hide.removeClassName("hidden")}l(t,n)};var u=i.onFailure;i.onFailure=function(t,n){if(i.while_processing.show){i.while_processing.show.hide();i.while_processing.show.addClassName("hidden")}if(i.while_processing.hide){i.while_processing.hide.show();i.while_processing.hide.removeClassName("hidden")}u(t,n)};var d=i.on401;i.on401=function(t,n){if(i.while_processing.show){i.while_processing.show.hide();i.while_processing.show.addClassName("hidden")}if(i.while_processing.hide){i.while_processing.hide.show();i.while_processing.hide.removeClassName("hidden")}d(t,n)}}if($("profile_session")){i.parameters.profile_session=$("profile_session").innerHTML}if(typeof bf_catcha!="undefined"&&bf_catcha.catcha_answer!="")i.parameters.catcha_answer=bf_catcha.catcha_answer;try{if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"&&BF_STATIC.bf_test_mode){BF_Request.request_stack.push(this);var c=this;$H(BF_Request.requestModifiers).each(function(n){var a=[];BF_Request.requestModifiers[n.key].each(function(r,s){if(r.filter(t,i)){a.push(r);if(n.key.match(/Once$/)){BF_Request.requestModifiers[n.key].splice(s,1)}}});if(i[n.key]){a.push({filter:function(){return true},fn:i[n.key]})}i[n.key]=function(){var t=this;return function(i){a.shift().fn(i,a,t)}}.call(c)})}}catch(e){console.error(e)}if(i.needsToken){if(typeof i.parameters.user_token!=undefined&&i.parameters.user_token){this.ajax=new Ajax.Request(t,i)}else{var _={method:"post",parameters:{action:"get_token",cb:(new Date).getMilliseconds()},onSuccess:function(n){var a=n.getResponseHeader("X-json");var r=null;if(a){r=JSON.parse(n.responseText)}if(typeof r!="undefined"&&typeof r.success!="undefined"&&r.success!=0&&typeof r.token!="undefined"){i.parameters.user_token=r.token;this.ajax=new Ajax.Request(t,i)}else{i.onFailure()}},onFailure:i.onFailure};this.ajax=new Ajax.Request("/buzzfeed/_admin_user",_)}}else{this.ajax=new Ajax.Request(t,i)}};this.abort=function(){if(this.ajax){this.aborted=true;this.ajax.transport.abort()}};this.alert=function(t){try{var i=$("bf_request_err");if(!i){i=document.createElement("div");i.id="bf_request_err";i.addClassName("default-alert");document.getElementsByTagName("BODY")[0].appendChild(i)}else{i.removeClassName("hidden")}var n=new Template('<div class="default-alert--header"><a onclick="$(\'bf_request_err\').addClassName(\'hidden\');return false;" href="javascript:return false;">&times;</a></div> 			<div class="default-alert--inner">#{msg}</div> 		');i.update(n.evaluate({msg:t}));var a=$(document).viewport.getHeight();var r=i.getLayout().get("margin-box-height");var s=$(document).viewport.getScrollOffsets().top;var o=a/2-r/2+s;if(o<=10)o=10;i.style.top=o+"px"}catch(e){if("console"in window)console.dir({e:e})}}};BF_Request.statsd=function(){return{increment:function(t,i){if(Object.isArray(t)){t=t.join(",")}var n="/buzzfeed/statsd_pixel?increment="+encodeURIComponent(t);if(i&&i.dd){n+="&dd=1"}(new Image).src=n},timer:function(t,i){(new Image).src="/buzzfeed/statsd_pixel?timer="+encodeURIComponent(t)+"&ms="+parseInt(i)+"&dd=1"}}}();BF_Request.location=function(t){if(!t){t={}}if(window["BF_LOCATION_DEBUG"]&&!t.debugged&&!t.reload_track){t["debugged"]=true;url=t.location;if(!url){url="window.location.href"}console.log("BF_Request: rediecting to "+url+" in "+window["BF_LOCATION_DEBUG"]+" seconds");console.log(t);setTimeout(function(){BF_Request.location(t)},window["BF_LOCATION_DEBUG"]);return}if(t.reload_track){BF_Request.statsd.increment("window.reload");window.location.reload();return}if(!t.location){BF_Request.location({reload_track:true})}else{if(t.new_tab){window.open(t.location,t.new_tab_name||"_blank")}else{if(t.replace){window.location.replace(t.location)}else{window.location.href=t.location}}}};BF_Request.debug_log=function(t){try{var i=default_username="";i=(new BF_User).getUserInfo().username;default_username=(new BF_User).getUserInfo().default_user.username;debug_data={page:window.location.href,ajax_url:t,time:(new Date).format("m-dd-yy hh:mm:ss"),username:i,d_username:default_username};var n=[];for(var a in debug_data){n.push(a+"="+encodeURIComponent(debug_data[a]))}(new Image).src=BF_STATIC.web_root+"/static/log_me.gif?"+n.join("&")}catch(e){}};try{if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"&&BF_STATIC.bf_test_mode){BF_RequestStack=function(){this.stack=[]};BF_RequestStack.prototype.push=function(t){this.stack.push(t)};BF_RequestStack.prototype.pop=function(){return this.stack.pop()};BF_RequestStack.prototype.peek=function(){return this.stack[this.stack.length-1]};BF_RequestStack.prototype.getRequest=function(t){try{var i=null;i=this.stack.find(function(i){if(i.id==t)return true;else return false});return i}catch(e){console.error(e)}};BF_Request.request_stack=new BF_RequestStack;var listeners=["onLoading","onLoaded","onInteractive","onSuccess","onFailure","onComplete"];BF_Request.requestModifiers={};for(var i=0;i<listeners.length;i++){BF_Request.requestModifiers[listeners[i]]=[{name:listeners[i],filter:function(t,i){return true},fn:function(t,i,n){if(i.length)i.shift().fn(t,i,n)}}];BF_Request.requestModifiers[listeners[i]+"Once"]=[]}BF_Request.requestListeners={};for(var i=0;i<listeners.length;i++){BF_Request.requestListeners[listeners[i]]=[]}BF_Request.addRequestListener=function(t){var i={id:(new Date).getTime()+Math.random().toString().substr(2,3),request:null,fulfilled:false,filter:t.filter?t.filter:function(){return true}};BF_Request.requestListeners[t.ev].push(i);BF_Request.requestModifiers[t.ev].push({name:t.ev,filter:t.filter,fn:function(){var t=i;return function(i,n,a){t.fulfilled=true;t.request=a;if(n.length)n.shift().fn(i,n,a)}}()});return i.id};BF_Request.getRequestListener=function(t){try{var i=null;$H(BF_Request.requestListeners).each(function(n){var a=BF_Request.requestListeners[n.key].find(function(i){if(i.fulfilled&&i.id==t)return true;else return false});if(a){try{i={id:a.request.id,aborted:a.request.aborted,fulfilled:true,parameters:a.request.ajax.parameters,response:a.request.ajax.transport.response};try{i.responseJSON=i.response.evalJSON()}catch(e){}}catch(e){console.error(e)}}});return i}catch(e){console.error(e)}}}}catch(e){console.error(e)}BF_Login=function(){this.AUTH_RETURN_PAGE_COOKE="auth_return_page_cookie";this.LOGIN_ERR=local.t("Please enter a username and a password");this.AUTH_ERR=local.t("Please enter a valid username and a password");this.ERR=local.t("Sorry, we&rsquo;re unable to process your request at this time.");this.PASSWORD_ERR=local.t("Please enter your email address");this.PASSWORD_SUCCESS=local.t("We&rsquo;ve sent you an email with a reset password link.");this.PASSWORD_SERVER_ERROR=local.t("There was a problem contacting the server and we were unable to reset your password. Please try again later.");this.NEED_VALIDATION_ERROR=local.t("Your account needs to be validated. Please check your email for a validation link.");this.initialized=false;this.initialization=false;this.init=function(t){if(bf_login.initialized){return false}if(bf_login.initialization){setTimeout(this.init.bind(this,t),300);return false}bf_login.initialization=true;try{this.already_sent=false;bf_login.ajax=new BF_Request;gplus=new BF_GplusSignin;bf_register=new BF_Register;var i=new BF_User;var n=$$(".logged-in");var a=$$(".not-logged-in");if(i.isLoggedIn()){n.each(function(t){t.show()});a.each(function(t){t.hide()});if(typeof localStorage!="undefined"&&localStorage.getItem("bf_login.delayedLoggedInCallbacks")){try{var r=localStorage.getItem("bf_login.delayedLoggedInCallbacks");if(r!=="undefined")r=r.evalJSON();else r=[];for(var s=0;s<r.length;s++){if(!Object.isArray(r[s].params))r[s].params=[r[s].params];if(typeof window[r[s].obj]!="undefined"){window[r[s].obj][r[s].fn].apply(window[r[s].obj],r[s].params)}else{new PeriodicalExecuter(function(t){return function(i){if(typeof window[t.obj]!="undefined"){i.stop();window[t.obj][t.fn].apply(window[t.obj],t.params)}}}(r[s]),.5)}}localStorage.removeItem("bf_login.delayedLoggedInCallbacks")}catch(e){console.log(e)}}}else{n.each(function(t){t.hide()});a.each(function(t){t.show()})}if(BF_STATIC.facebook_enabled){$$(".hide-unless-facebook-enabled").each(function(t){t.show()})}{var o=new BF_User;if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)&&o.isLoggedIn()&&document.location.search.indexOf("microsite")==-1){var l=o.getUserInfo();var u=BF_STATIC.web_root+"/"+l.username;document.location.href=u;return}if(!o.isLoggedIn()&&document.location.search.indexOf("microsite")!=-1){window.location.href=document.location.pathname}}if(t)this.args=t;var d=$("forgot-password-form");if(d){d.observe("submit",function(t){t.stop();bf_login.reset_password()}.bind(this))}var c=$("login-form");if(c){c.observe("submit",function(t){t.stop();bf_login.login()}.bind(this))}var _=$("link-accounts-form");if(_){_.observe("submit",function(e){e.stop();bf_login.link_accounts()}.bind(this))}var f=$("forgot-password-link");if(f){f.observe("click",function(t){t.stop();$("login-form").hide();$("forgot-password-form").show()}.bind(this))}var h=$("regsitration-form");if(h&&$("switch_to_register")){
$("switch_to_register").observe("click",function(e){e.stop();$("login-form").hide();$("regsitration-form").showOnScreen()})}else if($("switch_to_register")){$("switch_to_register").observe("click",function(e){e.stop();window.location.href=BF_STATIC.web_root+"/signup"})}var p=$("switch_to_login");if(p){p.observe("click",function(t){t.stop();bf_login.switch_registration_to_login()}.bind(this))}var m=$("forgot-password-cancel");if(m){m.observe("click",function(t){t.stop();bf_login.cancel_reset_password()}.bind(this))}if(document.location.search.indexOf("badauth=true")>-1){$("bad-cookie-message").show()}if(BF_STATIC&&BF_STATIC.facebook_enabled==true){if($("facebook-login")){$("login-form").addClassName("facebook-enabled");$("facebook-login").show()}}if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)){facebook.auto_register_enabled=false;facebook.link_accounts_enabled=true}bf_login.initialized=true}catch(e){console.error(e);bf_login.initialization=false}};this.switch_login_to_alias_registration=function(){$("login-form").hide();$("regsitration-form").hide();$("alias-registration-form").show();$("user_signin_message").hide();$("create_site_message").show()};this.switch_login_to_registration=function(){facebook.auto_register_enabled=false;facebook.observe("user_logged_in",function(){var t=BF_STATIC.tt_page=="Signup"?true:false;var i=t?"fb-register-button":"submit-button";var n="get_from_facebook@buzzfeed.com";var a=$("initial-registration-fieldset");var r=$("facebook-connected-div");var s=$("facebook-registration-fieldset");var o="";var l='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_!@#$%^&*(){}[]:";<>,./?|';try{n=facebook.user_data.email}catch(e){}if(s){s.hide()}if(a){a.hide()}if(r){r.show()}for(var u=0;u<10;u++){o+=l[Math.round(Math.random()*l.length-1)]}event_handler.HANDLERS["map_into"]({target:{value:o}},{target:i,field:"register.pw2"});event_handler.HANDLERS["map_into"]({target:{value:o}},{target:i,field:"register.pw"});event_handler.HANDLERS["map_into"]({target:{value:facebook.session.userID}},{target:i,field:"register.facebook_uid"});event_handler.HANDLERS["map_into"]({target:{value:n}},{target:i,field:"register.email"});if(t){signup_page.openDialog("fb")}});if($("login-form"))$("login-form").hide();if($("regsitration-form"))$("regsitration-form").show();if($("alias-registration-form"))$("alias-registration-form").hide();if($("new-registration-form"))$("new-registration-form").show();BF_UserSwitcher.count_aliases(function(t){if($("alias-sites-left")&&t.success){var i=(new BF_User).getUserInfo();var n=parseInt(i.max_aliases)-parseInt(t.count);$("alias-sites-left").update(n);if(n==1)$("alias-sites-left-plural").hide();if(t.unlimited==1)$("alias-count-message").hide();else $("alias-count-message").show();if(n<=0&&i.max_aliases!=0){$("alias-registration-fieldset").hide();$("alias-registration-hit-limit").show()}}})};this.switch_to_link_accounts=function(){if($("login-form"))$("login-form").hide();if($("regsitration-form"))$("regsitration-form").hide();if($("link-accounts-form"))$("link-accounts-form").show();if($("alias-registration-form"))$("alias-registration-form").hide()};this.switch_registration_to_login=function(){if($("link-accounts-form"))$("link-accounts-form").hide();$("login-form").show();$("regsitration-form").hide();if($("alias-registration-form"))$("alias-registration-form").hide()};this.cancel_reset_password=function(){$("login-form").show();$("forgot-password-form").hide();$("alias-registration-form").hide()};this.reset_password=function(){if(this.already_sent)return;this.already_sent=true;$("forgot-password-cancel").hide();var t=$("resetting-password-status");if(t)t.show();$("forgot-password-message").hide();var i;i=$F("login-email");if(!i){this.setError(this.PASSWORD_ERR,local.t("forgot-password"));if(t)t.hide();if($("forgot-password-cancel"))$("forgot-password-cancel").show();this.already_sent=false}else{$("forgot-password-submit").disabled=true;var n=function(t){this.passwordSent(t)}.bindAsEventListener(this);var a=function(t){if($("forgot-password-cancel"))$("forgot-password-cancel").show();this.err(t,"forgot-password")}.bindAsEventListener(this);var r={email:i};bf_login.ajax.request("/buzzfeed/_forgot_password",{method:"get",parameters:r,onSuccess:n,onFailure:a})}};this.link_accounts=function(){try{if($("link-accounts-status"))$("link-accounts-status").show();$("link-accounts-message").hide();var t=$F("link-accounts-username");var i=$F("link-accounts-password");if(!t||!i){if($("link-accounts-status")){$("link-accounts-status").hide()}this.setError(this.LOGIN_ERR,"link-accounts")}else{$("link-accounts-submit").disabled=true;var n=function(t){this.loggedIn(t,{link_accounts:1})}.bindAsEventListener(this);var a=function(t){$("link-accounts-status").hide();$("link-accounts-submit").enable();$("link-accounts-message").update(this.LOGIN_ERR)}.bindAsEventListener(this);var r={username:t,password:i,contribute:1};bf_login.ajax.request("/buzzfeed/_www_login",{method:"post",parameters:r,onSuccess:n,onFailure:a})}}catch(e){console.error(e)}};this.login=function(){try{if($("bad-cookie-message"))$("bad-cookie-message").hide();if($("logging-in-status"))$("logging-in-status").show();if($("login-message"))$("login-message").hide();var t;var i;try{t=$F("login-username");i=$F("login-password")}catch(e){}if(typeof arguments[0]!="undefined"&&typeof arguments[0]["username"]!="undefined"&&typeof arguments[0]["password"]!="undefined"){t=arguments[0]["username"];i=arguments[0]["password"]}if(!t||!i){if($("logging-in-status")){$("logging-in-status").hide()}this.setError(this.LOGIN_ERR)}else{if($("login-submit"))$("login-submit").disabled=true;var n=function(t){bf_login.loggedIn(t)}.bindAsEventListener(this);var a=function(t){this.err(t)}.bindAsEventListener(this);var r={username:t,password:i,contribute:1};bf_login.ajax.request("/buzzfeed/_www_login",{method:"post",parameters:r,onSuccess:n,onFailure:a})}}catch(e){console.error(e)}};this.cookieLogin=function(){var t=function(t){this.loggedIn(t)}.bindAsEventListener(this);var i=function(t){this.err(t)}.bindAsEventListener(this);new Ajax.Request("/buzzfeed/_www_login",{method:"post",onSuccess:t,onFailure:i})};this.passwordSent=function(t){if($("forgot-password-cancel"))$("forgot-password-cancel").show();var i=$("resetting-password-status");try{obj=JSON.parse(t.responseText);if(typeof obj.updated!="undefined"&&obj.updated=="true"){this.setError(this.PASSWORD_SUCCESS,"login");$("login-message").className="message success";if(i)i.hide();$("login-form").show();$("forgot-password-form").hide()}else if("User needs validation"==obj.error){this.setError(this.NEED_VALIDATION_ERROR,local.t("forgot-password"));if(i)i.hide()}else{this.setError(bfjs.escapeHTML(obj.error),local.t("forgot-password"));this.already_sent=false;if(i)i.hide()}}catch(e){console.dir({e:e});if(i)i.hide()}};this.loggedInCallbacks=[];this.delayedLoggedInCallbacks=[];this.loggedIn=function(t,i){if(!i)this.args?i=this.args:i={};if(document.location.search.indexOf("contribution=false")!=-1&&!this.args)this.args={action:"badge_vote"};obj=t.responseText?JSON.parse(t.responseText):t;obj.login=obj.login==true||obj.login=="true";try{if($("login-submit"))$("login-submit").disabled=false;if($("link-accounts-submit"))$("link-accounts-submit").disabled=false;if(obj.login){if(typeof return_tracker!="undefined")return_tracker.track_goal("signin");var n=i.current_page=="signin_anywhere"?window:window.parent;n.BFW_Util.saveEarnedReactions({value:obj});if("localStorage"in window&&window.localStorage!==null){localStorage.setItem("permission_key",obj.permission_key)}if(!!window.facebook)facebook.link_accounts();if(!!window.fb_app&&i.link_accounts)fb_app.link_accounts();if(typeof prepopulated_quickpost_manager!="undefined"&&prepopulated_quickpost_manager.onLogin){prepopulated_quickpost_manager.onLogin()}if(typeof picks_controller!="undefined"&&picks_controller!=null&&picks_controller.onLogin){picks_controller.onLogin()}if(i&&i.current_page=="home"&&!obj.test_mode&&window.location.href.indexOf("testmode=on")==-1){var a=BFW_Util.getCookie(this.AUTH_RETURN_PAGE_COOKE);if(a){BFW_Util.deleteCookie(this.AUTH_RETURN_PAGE_COOKE);window.location.href=a}else{var r=document.referrer.indexOf("/dashboard")<0?escape(obj.username):"dashboard";var s=BF_STATIC.web_root+"/"+r;BF_Request.location({location:s})}}else if(i&&i.action=="userdata"){var o=new BF_UserNav;o.init()}else if(i&&i.action=="bookmarklet"){bf_bm.showForm()}else if(i&&i.action=="badge_vote"){$("registration-div").hide();if($("contribute-preview"))$("contribute-preview").hide()}if($("usernav-signin"))$("usernav-signin").hide();if($("usernav-signup"))$("usernav-signup").hide();var o=new BF_UserNav;o.init();if(this.loggedInCallbacks){this.loggedInCallbacks.each(function(t){t()})}if(typeof localStorage!=="undefined"&&typeof bf_login.delayedLoggedInCallbacks!=="undefined"){localStorage.setItem("bf_login.delayedLoggedInCallbacks",Object.toJSON(bf_login.delayedLoggedInCallbacks))}var l=new BF_User;if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)&&l.isLoggedIn()&&document.location.search.indexOf("microsite")==-1){var u=l.getUserInfo();var d=BF_STATIC.web_root+"/"+u.username;document.location.href=d;return}else if(document.location.pathname.toString().match(/forgot_pass/)){return true}else{var c=!i||typeof i.no_reload!="undefined"&&i.no_reload==true;if(c)return false;BF_Request.location({reload_track:true});return true}}else{bf_login.clear_invalid_session(t);if(obj.requires_oauth){try{}catch(e){this.setError("Logging in with oauth; make sure you don't block the popup.")}window.location.href="/buzzfeed/oauth_signin?username="+obj.username+"&return_to="+window.location.href}else{if(i.link_accounts){this.setError(this.AUTH_ERR,"link-accounts")}else{this.setError(this.AUTH_ERR)}}if($("logging-in-status"))$("logging-in-status").hide();if($("link-accounts-status"))$("link-accounts-status").hide()}}catch(e){console.dir({e:e})}};this.clear_invalid_session=function(t){if(!t)t={};if((new BF_User).isLoggedIn()&&t.status!=0){if(!"user_nav"in window)setTimeout(bf_login.clear_invalid_session,250);if(!!window.facebook)facebook.logout(user_nav.signout);else user_nav.signout()}};this.err=function(t,i){bf_login.clear_invalid_session();this.setError(this.ERR,i);if($("logging-in-status"))$("logging-in-status").hide();if($("resetting-password-status"))$("resetting-password-status").hide()};this.setError=function(t,i){if(!i)i="login";try{$(i+"-message").update(t)}catch(e){if($(i+"-message"))$(i+"-message").innerText=t}$(i+"-message").className="message error";$(i+"-message").show();$(i+"-submit").disabled=false}};bf_login=new BF_Login;BuzzLoader.register(bf_login.init,1);var fadeOut=function(t,i){$(t).setOpacity(i/100);if(i>0){setTimeout("fadeOut('"+t+"',"+(i-2)+")",5)}else{$(t).hide()}};var BF_UserSwitcher={controller:"/buzzfeed/_switch",template:'<li><a href="" onclick="return false" class="switch-to-user" rel:id="#{id}"><div class="default_user #{default_div}"><svg width="25" height="25" viewbox="0 0 512 512"><use xlink:href="#icon-user-avatar"></use></svg></div><img src="#{root}#{image}" class="#{user_img}"/>#{display_name}</a></li>',template_bottom_div:'<li class="#{hl}"><a href="" onclick="return false" rel:username="#{username}"><span class="list-username" rel:username="#{username}">#{username}</span> #{display_name}</a><span class="hl chosen"></span></li>',latest_switch_list:[],latest_switch_list_loaded:false,was_ajax:false,switcher:null,bottom_warning_div:null,bottom_warning_select:null,is_user_switcher:false,selected_user:null,init:function(t){try{if(!acl.user_can("general_admin"))return false;if(t!=null)BF_UserSwitcher.selected_user=t;if(BF_UserSwitcher.is_user_switcher){BF_UserSwitcher.apply_visibility();return false}BF_UserSwitcher.switcher=$("quickpost-user-switcher");if(BF_UserSwitcher.switcher)BF_UserSwitcher.is_user_switcher=true;BF_UserSwitcher.apply_visibility();if(acl.user_can("general_admin")){BF_UserSwitcher._switch_list_ui([""],"bottom");universal_dom.get_bucket_elements("switch_users").each(function(t){var i=BF_UserSwitcher.switcher.select(".switch_user_list")[0];t.observe("click",function(){if(i.style.display=="block")return false;i.style.display="block";universal_dom.get_bucket_elements("switch_user_dialog").each(function(t){t.update("Loading...")});BF_UserSwitcher.getSwitchList(BF_UserSwitcher._switch_list_ui,"bottom",true)});Event.observe(window,"click",function(e){if(!$(e.target).childOf||!$(e.target).childOf(BF_UserSwitcher.switcher)){i.style.display="none"}})})}}catch(e){console.error(e)}},apply_visibility:function(){try{if(!BF_UserSwitcher.is_user_switcher)return false;var t=(new BF_User).getUserInfo();if(BF_UserSwitcher.selected_user==null){if(typeof edit_post!="undefined"){BF_UserSwitcher.selected_user=edit_post.buzz.username}else{BF_UserSwitcher.selected_user=t.username;$$(".switched-display_name").each(function(i){if(i.hasClassName("bottom_display_name"))i.update(t.display_name)})}}if(acl.user_can("general_admin")){var i;if(typeof edit_post!="undefined")i=edit_post.buzz.username;else i=t.default_user.username}else{BF_UserSwitcher.switcher.style.display="none"}}catch(e){console.error(e)}},sw_bottom_div:function(e){try{e.stop();var t=BF_UserSwitcher.switcher.select(".switch_user_list")[0];t.select("li a").each(function(t){if(e.target==t||e.target.parentNode==t){BF_UserSwitcher.selected_user=t.getAttribute("rel:username");t.parentNode.addClassName("hl");superlist_bylines.set_add_bylines(BF_UserSwitcher.selected_user,true);universal_dom.get_bucket_elements("switch_user_dialog")[0].hide()}else t.parentNode.removeClassName("hl")});BF_UserSwitcher.apply_visibility()}catch(e){console.error(e)}},fill_switch_div:function(t){try{if(!BF_UserSwitcher.is_user_switcher)return false;var i=new Template(BF_UserSwitcher.template_bottom_div);var n="<ul>";var a=(new BF_User).getUserInfo();u=a.default_user;t.unshift({display_name:decodeURIComponent(u.display_name.unescapeHTML()),username:u.username,image:u.image,userid:u.userid});if(typeof edit_post!="undefined")t.unshift({display_name:decodeURIComponent(edit_post.buzz.user_displayname.unescapeHTML()),not_user:true,username:edit_post.buzz.username,image:edit_post.buzz.user_image,userid:edit_post.buzz.userid});t.each(function(t){if(t.p_disable_quickpost=="1")return false;if(typeof edit_post!="undefined"&&t.username==edit_post.buzz.username&&!t.not_user)return false;var a=BF_UserSwitcher.selected_user==t.username?true:false;n+=i.evaluate({display_name:t.display_name,username:t.username,hl:a?"hl":""})});var t=BF_UserSwitcher.switcher.select(".switch_user_list")[0];t.update(n+"</ul>");t.select("ul a").each(function(t){t.observe("click",BF_UserSwitcher.sw_bottom_div)})}catch(e){console.error(e)}},switch_callback:function(){try{var t=(new BF_User).getUserInfo();if(typeof edit_post=="undefined"){if(BF_UserSwitcher.is_user_switcher)BF_UserSwitcher.selected_user=t.username;$$(".switched-display_name").each(function(i){i.update(t.display_name)})}else{$$(".switched-display_name").each(function(i){if(!i.hasClassName("bottom_display_name"))i.update(t.display_name)})}if(t.p_disable_quickpost=="true"){BF_Request.location({reload_track:true});return false}if(BF_UserSwitcher.is_user_switcher){var i=BF_UserSwitcher.switcher.select(".switch_user_list")[0];i.style.display="none";BF_UserSwitcher.apply_visibility()}}catch(e){console.error(e)}},swfunction:function(e){try{e.stop();var t=e.target.getAttribute("rel:id");BF_UserSwitcher.switchTo(t,BF_UserSwitcher.switch_callback)}catch(e){console.error(e)}},switch_list_ui:function(e){try{if(typeof e.stop!=="boolean")e.stop();if($("switch-list-spinner"))$("switch-list-spinner").show();this.getSwitchList(BF_UserSwitcher._switch_list_ui,"top")}catch(e){console.error(e)}},_switch_list_ui:function(t,i,n){if(!$("usernav-switch-list"))return;try{if(n&&BF_UserSwitcher.is_user_switcher){var a=t.slice(0);BF_UserSwitcher.fill_switch_div(a)}var r=(new BF_User).getUserInfo();var s=new Template(BF_UserSwitcher.template);var o='<a class="close_switch_list_ui" href="javascript:;" onclick="BF_UserSwitcher.hide_switch_list_ui();return false;"><div class="closeBtn">x</div></a><ul>';var l=typeof r.default_user.image=="undefined"||r.default_user_image==null?"":r.default_user.image;var u=l==null||l==""?"":"hidden";var d=l==null||l==""?"hidden":"";t.unshift({image:decodeURIComponent(l.unescapeHTML()),display_name:decodeURIComponent(r.default_user.display_name.unescapeHTML()),userid:r.default_user.userid});t.each(function(t){if(typeof t.image=="undefined"||t.image==""||t.image==null){u="";d="hidden"}else{u="hidden";d=""}o+=s.evaluate({image:t.image||trans_gif_1x1_base64,display_name:t.display_name,id:t.userid,root:BF_STATIC.image_root,default_div:u,user_img:d})});if(r.p_alias=="true"||typeof r.default_user!="undefined"&&r.default_user.p_alias=="true"){o+='<li><a href="'+BF_STATIC.web_root+'/signup"><span class="microsite-new logo">+ </br></span><span class="microsite-new text"><i>Create Another BuzzFeed</i></span></a></li>'}$("usernav-switch-list").update(o+"</ul>");if(i=="top"){$("usernav-switch-list").show();if($("switch-list-spinner"))$("switch-list-spinner").hide()}$$(".switch-to-user").each(function(t){t.observe("click",BF_UserSwitcher.swfunction)});$$(".switched-display_name").each(function(t){if(!t.hasClassName("bottom_display_name"))t.update(r.display_name)});BF_UserSwitcher.apply_visibility()}catch(e){console.error(e)}},hide_switch_list_ui:function(){$("usernav-switch-list").hide()},switchTo:function(t,i){try{var n=new BF_User;if(n.isLoggedIn()){var a=n.getUserInfo();if(typeof a.default_user!="undefined"){if(a.userid==t){$("usernav-switch-list").hide();if($("switch-list-spinner"))$("switch-list-spinner").hide()}else{$("usernav-switch-list").hide();if($("switch-list-spinner"))$("switch-list-spinner").show();var r=new BF_Request;r.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch",default_username:a.default_user.username,switch_id:t},onSuccess:function(t){BF_UserSwitcher._switchTo(t,i)}})}}}}catch(e){console.error(e)}},_switchTo:function(t,i){try{var n={};if(window.location.href.match("/signup")){n={no_reload:true}}bf_login.loggedIn(t,n);i();if($("switch-list-spinner"))$("switch-list-spinner").hide()}catch(e){console.error(e)}},getSwitchListFor:function(t,i){try{if(!acl.user_can("edit_user_accounts"))return;var n=new BF_Request;n.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch_list_for",username:t},onSuccess:function(t){BF_UserSwitcher._getSwitchList(t.responseText,i)}})}catch(e){console.error(e)}},getSwitchList:function(t,i,n){try{if(BF_UserSwitcher.was_ajax){var a=BF_UserSwitcher.latest_switch_list;a.shift();a=JSON.stringify(a);BF_UserSwitcher._getSwitchList('{"success" : 1, "switch_list" :'+a+"}",t,i,n)}else{if(typeof n=="undefined")n=false;var r=new BF_User;if(r.isLoggedIn()){var s=r.getUserInfo();if(typeof s.default_user!="undefined"){var o=new BF_Request;o.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch_list",default_username:s.default_user.username},onSuccess:function(a){BF_UserSwitcher._getSwitchList(a.responseText,t,i,n);BF_UserSwitcher.was_ajax=true},on401:function(){console.warn("Insufficient Permissions")}})}}}}catch(e){console.error(e)}},_getSwitchList:function(t,i,n,a){try{if(i==undefined)return false;var r=JSON.parse(t);if(r.success=="1"){BF_UserSwitcher.latest_switch_list=r.switch_list.slice(0);var s=(new BF_User).getUserInfo();u=s.default_user;BF_UserSwitcher.latest_switch_list.unshift({display_name:decodeURIComponent(u.display_name.unescapeHTML()),username:u.username,image:decodeURIComponent(u.image.unescapeHTML()),userid:u.userid});BF_UserSwitcher.latest_switch_list_loaded=true;i(r.switch_list,n,a)}}catch(e){console.error(e)}},show_warning:function(){try{var t=new BF_User;if(t.isLoggedIn()){var i=t.getUserInfo();if(!window.location.pathname.match("/dashboard$")&&typeof i.default_user!="undefined"&&i.default_user.username!=i.username){$$(".switched-display_name").each(function(t){t.update(i.display_name)});$$(".switch-warning").each(function(t){t.show()})}else{$$(".switch-warning").each(function(t){t.hide()})}}}catch(e){console.error(e)}},_getSwitchList:function(t,i,n,a){if(i==undefined)return false;var r=JSON.parse(t);if(r.success=="1"){if(typeof r.switch_list.users!=="undefined"){BF_UserSwitcher.latest_switch_list=r.switch_list.users.slice(0)}else{BF_UserSwitcher.latest_switch_list=r.switch_list.slice(0)}var s=(new BF_User).getUserInfo();u=s.default_user;BF_UserSwitcher.latest_switch_list.unshift({display_name:unescape(u.display_name),username:unescape(u.username),userid:unescape(u.userid)});BF_UserSwitcher.latest_switch_list_loaded=true;i(r.switch_list,n,a)}},disable_private_fields:function(){try{var t=new BF_User;if(t.isLoggedIn()){var i=t.getUserInfo();if(typeof i.default_user!="undefined"&&i.default_user.username!=i.username){var n=["user-settings-button"];n.each(function(t){if($(t))$(t).style.display="none"})}}}catch(e){console.error(e)}},create_alias_for:function(t,i){if(typeof t.username=="undefined"||typeof t.alias_username=="undefined"){BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Oops! You need to tell us your desired URL"})},i);return}if(!acl.user_can("edit_user_accounts"))return;(new BF_Request).request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias_for",username:t.username,alias_username:t.alias_username},onSuccess:function(t){BF_UserSwitcher._create_alias(t,i)},onFailure:function(t){BF_UserSwitcher._create_alias(t,i)}})},create_alias:function(t,i){if(typeof t.username=="undefined"||typeof t.display_name=="undefined"){BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Oops! You need to tell us your desired URL"})},i);return}var n=new BF_User;if(n.isLoggedIn()){var a=n.getUserInfo();if(typeof a.default_user!="undefined"){var r=new BF_Request;if(t.self_serve==1){r.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias",username:t.username,display_name:t.display_name,default_username:a.default_user.username,self_serve:1},onSuccess:function(n){BF_UserSwitcher._create_alias(n,t.username,i)},onFailure:function(n){BF_UserSwitcher._create_alias(n,t.username,i)}})}else{r.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias",username:t.username,display_name:t.display_name,default_username:a.default_user.username},onSuccess:function(t){BF_UserSwitcher._create_alias(t,i)},onFailure:function(t){BF_UserSwitcher._create_alias(t,i)}})}}else{BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Insufficient privileges"})},i)}}else{BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"User not logged in"})},i)}},_create_alias:function(t,i){var n=JSON.parse(t.responseText);n.status=t.status;i(n)},count_aliases:function(t){var i=new BF_User;if(i.isLoggedIn()){var n=i.getUserInfo();if(typeof n.default_user!="undefined"){var a=new BF_Request;a.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"count_aliases",default_username:n.default_user.username},onComplete:function(i){BF_UserSwitcher._count_aliases(i,t)}})}}},_count_aliases:function(t,i){var n=JSON.parse(t.responseText);n.status=t.status;i(n)}};if(typeof edit_post=="undefined")BuzzLoader.register(BF_UserSwitcher.init,1);BF_UserNav=function(){_bfuser=this;this.user;this.user_info;this.REFRESH_LOGIN_AFTER_N_SECONDS=6*60*60;this.els={};this.init=function(){universal_dom.assign_handler({bucket:"insert_url",handler:user_nav.insert_url});_bfuser.user=new BF_User;_bfuser.user_info=_bfuser.user.getUserInfo();_bfuser.scrapeDOM();if(_bfuser.user.isLoggedIn()){_bfuser.isLoggedIn()}else{_bfuser.showLoggedOutUI()}};this.scrapeDOM=function(){_bfuser.els["signin"]=$s("#usernav-signin");_bfuser.els["signout"]=$s("#usernav-signout");_bfuser.els["settings"]=$s("#usernav-settings");_bfuser.els["usernav-ul"]=$s("#usernav-ul",true);_bfuser.els["usernav-dashboard"]=$s("#usernav-dashboard");_bfuser.els["user-image-wrapper"]=$s("#usernav-image");_bfuser.els["user-image"]=$s("#usernav-image img");_bfuser.els["user-image-default"]=$s("#default-user-image");_bfuser.els["usernav-profile"]=$s("#usernav-profile");_bfuser.els["usernav-switch"]=$s("#usernav-switch")};this.isLoggedIn=function(){_bfuser.verifyUserInfo();_bfuser.triggerPicks();_bfuser.updateUserImage();_bfuser.els["signout"].observe("click",_bfuser.callSignout.bindAsEventListener(this));_bfuser.toggleSwitchUsers();_bfuser.triggerDashboard();_bfuser.showLoggedInUI()};this.verifyUserInfo=function(){if(!_bfuser.user_info||!_bfuser.user_info.username||_bfuser.user_info.username!=_bfuser.user.getUsernameFromSession()){BF_Request.statsd.increment("logout.bad_user_info");_bfuser.signout()}};this.triggerPicks=function(){picks_controller=null;if(typeof BF_PicksController!="undefined"){picks_controller=new BF_PicksController;picks_controller.init()}};this.updateUserImage=function(){if(_bfuser.user_info.image&&_bfuser.user_info.image!=null&&_bfuser.user_info.image!="null"){_bfuser.els["user-image"].src=BF_STATIC.image_root+_bfuser.user_info.image;_bfuser.els["user-image-wrapper"].show()}else{_bfuser.els["user-image-default"].show()}universal_dom.get_bucket_elements("usernav-profile-link").invoke("setAttribute","href",BF_STATIC.web_root+"/"+_bfuser.user_info.username);universal_dom.get_bucket_elements("usernav-my-drafts").invoke("setAttribute","href",BF_STATIC.web_root+"/drafts/"+_bfuser.user_info.username);if(acl&&acl.user_can("dashbird")){universal_dom.get_bucket_elements("usernav-dashboard-link").invoke("setAttribute","href","https://dashbird.buzzfeed.com/"+_bfuser.user_info.username)}else{universal_dom.get_bucket_elements("usernav-dashboard-link").invoke("setAttribute","href",BF_STATIC.web_root+"/dashboard")}};this.toggleSwitchUsers=function(){if(_bfuser.default_user!="undefined"){_bfuser.els["usernav-switch"].show();$$("#usernav-switch-link").each(function(t){$(t).stopObserving("click");$(t).observe("click",function(e){BF_UserSwitcher.switch_list_ui(e)})});BF_UserSwitcher.show_warning();BF_UserSwitcher.disable_private_fields()}else{_bfuser.els["usernav-switch"].hide()}};this.triggerDashboard=function(){var t=_bfuser.user_info.p_dashboard=="true"?true:false;_bfuser.els["usernav-dashboard"][t?"removeClassName":"addClassName"]("hidden")};this.showLoggedInUI=function(){_bfuser.els["signout"].show();_bfuser.els["settings"].show();_bfuser.els["usernav-ul"].show();_bfuser.els["usernav-profile"].show()};this.showLoggedOutUI=function(){_bfuser.els["signin"].show();_bfuser.els["settings"].hide()};this.callSignout=function(e){e.stop();BF_Request.statsd.increment("logout.button");if(!!window.facebook){facebook.logout(function(){user_nav.signout()})}else{user_nav.signout()}};this.signout=function(t){if(typeof t=="undefined")t={};if("localStorage"in window&&window["localStorage"]!==null){["permission_key","default_permission_key"].each(function(t){localStorage.removeItem(t)})}(new BF_Request).request("/buzzfeed/_admin_user",{method:"get",parameters:{action:"logout"},onComplete:function(){setTimeout(function(){_bfuser.signoutCb(t)},500)}})};this.signoutCb=function(t){BFW_Util.deleteCookie("extensive_user_data");if(typeof gapi!="undefined"&&typeof gapi.auth!="undefined"){gapi.auth.signOut()}if(typeof gtrack!="object"){gtrack.loggedInStatus()}if(!t.no_reload&&!window.location.href.match(/\/settings/)){BF_Request.location({reload_track:true})}if(window.location.href.match(/\/settings/)){window.location.href=BF_STATIC.web_root+"/signin"}};this.insert_url=function(t,i){for(x in i){try{d=i[x];if(d.url&&d.where){var n=new RegExp(d.where);var a=t.innerHTML;a=a.replace(n,'<a href="'+d.url+'">$1</a>');t.update(a)}}catch(e){console.dir({e:e})}}}};var user_nav=new BF_UserNav;BuzzLoader.register(function(){user_nav.init()},1);var bf_event_handler=function(){this.CLASS=".behavior";this.ACTION_ATTRIBUTE="rel:actions";this.DATA_ATTRIBUTE="rel:data";function _markAsEdited(t,i,n){var a=typeof i!="undefined"&&typeof i.remove_class!="undefined"?i.remove_class:"initial-field-state";var r=typeof i!="undefined"&&typeof i.set_value!="undefined"?i.set_value:"";var s=t.getAttribute("defaultValue")||"";if(s.length==0)t.setAttribute("defaultValue",t.value);if(t.className.match(new RegExp(a))){t.removeClassName(a);if(n){t.value=r}if(typeof i!="undefined"&&i.set_type){try{t.setAttribute("type",i.set_type)}catch(e){var o=t.cloneNode(true);o.setAttribute("type",i.set_type);t.parentNode.replaceChild(o,target)}}}}this.HANDLERS={call:function(e,data){var fn=eval(data.fn);if(typeof data.el==="string")data.el=$(data.el);fn(data.data?data.data:data)},share_email:function(e,t){var i,n=e.toElement?e.toElement:e.relatedTarget||e.target;i=n.findParent(".shareBtn");if(!i){i=n.findParent(".circle-email-share")}if(!i){i=n.findParent(".inlineShareBtn")}if(!i){i=n}shareEmail.locate_form_and_share_email(i,t.buzz_id,t.no_scroll)},register:function(e,t){var i=new BF_User;if(i.isLoggedIn()&&!(t.create_advertiser_account||t.create_contributor_account)){bf_register.register_alias(t)}else{bf_register.new_register(t)}},map_into:function(e,data){var target=e.target;var update_el=$(data.target);var value=target.value;if(data.value){var lfn=eval("("+data.value+")");value=lfn(target)}if(update_el){var json=JSON.parse(update_el.getAttribute("rel:data"));var field=data.field.split(".");var obj=json;var end_field=field.pop();while(field.length){var f=field.shift();if(typeof obj[f]!="undefined")obj=obj[f];else obj[f]={}}if(data.append)obj[end_field]=(typeof obj[end_field]=="undefined"?"":obj[end_field]+data.append)+value;else obj[end_field]=value;update_el.setAttribute("rel:data",Object.toJSON(json));if(data.hide&&$(data.hide))$(data.hide).hide()}},mark_as_edited:function(e,t){_markAsEdited(e.target,t,false)},clear_default_field:function(e,t){_markAsEdited(e.target,t,true)},restore_default_field:function(t){var i=t.target;if(i.value.length>0)return;i.type="text";i.value=i.getAttribute("defaultValue");i.addClassName("initial-field-state")},filter_chars:function(e,t){if(e.keyCode==37||e.keyCode==39)return;t.disallow=t.disallow.split("/");var i=new RegExp(t.disallow[1],t.disallow[2]);var n=e.target;var a=n.value.replace(i,"");if(n.value!=a)n.value=a},upload_image:function(e,data){this.upload_image_type=data.upload_image_type;BF_UI.showDialog("user-image-edit");event_handler.get_image_settings=function(){return data};$("user-image-edit-iframe").innerHTML="";var user_image=new BF_SETTINGS_CROPPER({container:$("user-image-edit-iframe"),controller:"/bfcgi/_edit_user_image",origin:data.iframe_src.match("action=(.*)_imageform")[1],callbacks:{save_image_callback:eval(data.save_image_callback)}})},show:function(e,t){if($(t.id))$(t.id).removeClassName("hidden")},hide:function(e,t){if($(t.id))$(t.id).addClassName("hidden")},show_placeholder:function(t){var i=t.target;if(i.value.length==0&&$(i.id+"-placeholder"))$(i.id+"-placeholder").removeClassName("invisible")},hide_placeholder:function(t){var i=t.target;if($(i.id+"-placeholder"))$(i.id+"-placeholder").addClassName("invisible")}};this.init_called=0;this.generic_handler=function(e){event_handler._event_handler(e)};this.init=function(){if(++event_handler.init_called>1){console.error("event_handler.init should not be called explicitly; use universal_dom.update(element) instead: "+console.trace())}else{universal_dom.assign_handler({bucket:"event_handler",handler:event_handler._assign_handlers})}};this._assign_handlers=function(t){var i=0;var n=1;var a=t.getAttribute(event_handler.ACTION_ATTRIBUTE);if(a){var r=a.split(" ");r.each(function(n){var a=n.split(":");t.stopObserving(a[i],event_handler.generic_handler);t.observe(a[i],event_handler.generic_handler)})}};this._event_handler=function(e){e.stop();var ACTION=0,HANDLER=1,event_type=e.type,ActAtt=event_handler.ACTION_ATTRIBUTE,target;
if(e.target.hasAttribute(ActAtt)){target=e.target}else{e.target.ancestors().each(function(t){if(t.hasAttribute(ActAtt))target=t});if(!target)return}var actions=target.getAttribute(ActAtt),action_list=actions.split(" ");action_list.each(function(t){var i=t.split(":");if(i[ACTION]==event_type)target.handler=i[HANDLER]});if(typeof target.handler!="undefined"){var data={};var json=target.getAttribute(event_handler.DATA_ATTRIBUTE);if(json)data=JSON.parse(json);if(typeof data.map_into!=="undefined"&&typeof data.map_into.target!=="undefined"&&data.map_into.target.substr(-2)=="()")data.map_into.target=eval(data.map_into.target.replace(/[^\w\d\(\)\_\.]/g,""));data=typeof data[target.handler]!="undefined"?data[target.handler]:data;if(typeof event_handler.HANDLERS[target.handler]!="undefined"){var fn=event_handler.HANDLERS[target.handler];if(fn)fn(e,data)}else{var fn=eval(target.handler);data.event=e;fn(data)}}}};var event_handler=new bf_event_handler;BuzzLoader.register(event_handler.init,1);var Facebook=function(){this.login_ok=false;this.FB_KEYWORDS_CONTROLLER="/buzzfeed/_facebook";this.fb_ad_kw_terms={};this.FACEBOOK_KW_SUGGESTION=new Template(" 		<li><a href=\"javascript:;\" onclick=\"facebook.updateKeywords('#{id}','#{keyword}',false);facebook.close_kw_dialog('#{id}');return false;\">#{keyword}</a></li> 	");this.FACEBOOK_KW_ITEM=new Template('		<li id="#{dom_id}">#{keyword} <a href="javascript:;" class="close" onclick="facebook.removeKeyword(\'#{id}\',\'#{dom_id}\', \'#{keyword}\');return false;">x</a> 	');this.FACEBOOK_BUZZ_AD=new Template(' 		<input type="hidden" name="image_file" value="https://s3-ak.buzzfed.com/#{image}" /> 		<input type="hidden" name="buzz_id" value="#{campaignid}" /> 		<input type="hidden" name="interests-#{unique_id}" value="" /> 		<p class="error-message" id="error-message-#{unique_id}" style="display:none;"></p> 		<div class="c"> 			<div class="photo"><img src="https://s3-ak.buzzfed.com/#{image}" /></div> 			<div class="info"> 				<fieldset> 					<input maxlength="35" type="text" name="title" value="#{name}" onkeyup="facebook.updateMaxLength(\'#{unique_id}\', \'title\', this.value);" /> 					<p class="note maxlength" id="keylength-title-#{unique_id}">25 characters</p> 				</fieldset> 				<fieldset> 					<textarea name="body" rows="2" onkeyup="facebook.updateMaxLength(\'#{unique_id}\', \'blurb\', this.value);">#{blurb}</textarea> 					<p class="note maxlength" id="keylength-blurb-#{unique_id}">25 characters</p> 				</fieldset> 				<fieldset><input type="text" name="link_url" value="#{link}" /></fieldset> 			</div> 			<div class="interests"> 				<div class="interest_field"> 					<label>Interests</label> 					<input class="keyword" onkeyup="facebook.updateKeywords(\'#{unique_id}\',this.value,true)" type="text" id="kw-#{unique_id}" /> 					<input id="search-#{unique_id}" onclick="var kw_val = $(\'kw-#{unique_id}\').value; if (kw_val && kw_val.strip() != \'\') {facebook.lookup_keywords(this.parentNode,$(\'kw-#{unique_id}\').value, \'#{unique_id}\');}" type="button" value="+" /> 					<img id="lookup-loading-#{unique_id}" style="display:none;" src="#{static_root}/images/public/spinners/small_on_white.gif" /> 					<p style="display:none;" id="users-reach-#{unique_id}">Keyword Reach: <span id="users-#{unique_id}">&hellip;</span></p> 				</div> 				<div style="display: none;" id="keywords-#{unique_id}" onmouseover="clearTimeout(this.hide_timeout);" onmouseout="facebook.keyword_suggest_mouseout(\'#{unique_id}\');" class="keywords_list"></div> 				<ul class="keywords" id="terms-#{unique_id}"></ul> 			</div> 		</div> 		<div class="reach" id="post-reach-#{unique_id}" style="display:none;"><strong>Estimated Reach:</strong> <span id="post-#{unique_id}">&hellip;</span></div> 		<a class="abs remove" title="Remove this Post" onclick="facebook.remove_ad_unit(\'#{uri}\'); return false;" href="javascript:;"></a> 	');this.SIGNIN_FOR_EXTRA_FEATURES=new Template('<div class="facebook-like-login-pane"> 		<h3>Add Your Reactions to BuzzFeed!</h3> 		<fb:login-button scope="publish_actions,email" length="long" autologoutlink="false"></fb:login-button> 		<a href="javascript:;" onclick="return false" class="bf_dom no-thanks" rel:bf_bucket="event_handler" rel:actions="click:facebook.squelch_extra_features_prompt">No Thanks</a> 		<a href="javascript:;" onclick="return false" class="bf_dom have-account" rel:bf_bucket="event_handler" rel:actions="click:facebook.show_signin_tab" rel:data=\'{"buzz_id":"#{buzz_id}"}\'>More Sign In Options</a>	</div>');this.social_element_key="facebook";this.auto_register_enabled=true;this.auto_register_enabled=true;this.link_accounts_enabled=false;this.cache={};this.liked_hrefs=[];this.unliked_hrefs=[];this.cancel_dialog=false;this.apiInit=false;this.languages={en:"en_US",es:"es_LA",zh:"zh_CN"};this.quiz_result=function(t){if(facebook.is_logged_in()&&facebook.has_perms("publish_actions")){facebook.publish_quiz_result(t)}else{bf_login.loggedInCallbacks.push(function(){facebook.publish_quiz_result(t)});facebook.FB_login("publish_actions")}};this.quickpost=function(t){if(t.draft)return;var i=$("facebook_post_contribution_checkbox");if(i&&i.checked){if(facebook.is_logged_in()&&facebook.has_perms("publish_actions")){facebook.publish_quickpost(t)}else{bf_login.loggedInCallbacks.push(function(){facebook.publish_quickpost(t)});facebook.FB_login("publish_actions")}}};this.contribute=function(t){var i=$("facebook_post_contribution_checkbox");if(i&&i.checked==false)return;if(facebook.is_logged_in()){facebook.publish_contribution(t)}};this.publish_quiz_result=function(t){FB.ui({method:"stream.publish",message:"I got "+unescape(t.result),attachment:{name:"took the "+unescape(t.quiz_name)+" quiz on BuzzFeed and got "+unescape(t.result),caption:"",description:t.quiz_description,href:t.uri},action_links:[{text:"Take The Quiz!",href:t.uri}],user_prompt_message:"What's on your mind"},function(t){if(t&&t.post_id){}else{}})};this._get_quickpost_base_data=function(t){if(!t.thumb&&t.image_src)t.thumb=t.image_src;if(t.thumb){if(!t.thumb.match(/https?:\/\//)){t.thumb=t.image_src}t.images=new Array({src:t.thumb,href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.username+"/"+t.uri});t.images.each(function(t){t.type="image"})}var i={message:"just posted "+t.title+" to BuzzFeed!",attachment:{name:t.title,caption:t.text,media:t.images,href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.username+"/"+t.uri},action_links:[{text:"Respond",href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.username+"/"+t.uri}]};return i};this.publish_quickpost=function(t){if(t.draft)return;var i=facebook._get_quickpost_base_data(t);i.method="stream.publish";i.user_prompt_message="(Promote Your Post)";FB.ui(i,function(t){if(t&&t.post_id){}else{}})};this._publish_to_fan_page=function(t){var i={};for(var n in t){i[n]=t[n]}delete i.action_links;i.attachment=FB.JSON.stringify(i.attachment);i.uid=facebook.cache.user_page_id;i.action="like_publish";if(!i.uid){facebook.cache_data=i;facebook._get_user_page_id()}else{facebook.request("/buzzfeed/_facebook",{method:"get",parameters:i,onComplete:function(){}})}};this.publish_to_stream=function(t,i){var n=function(t,i){FB.api("/me/feed","post",t,function(t){if(i&&typeof i=="function"){i()}if(!t||t.error){}else{}})};if(facebook.is_logged_in()&&facebook.has_perms("publish_actions")){n(t,i)}else{bf_login.loggedInCallbacks.push(function(){n(t,i)});facebook.FB_login("email,publish_actions")}};this._get_user_page_id=function(){var user_info=(new BF_User).getUserInfo();var url=BF_STATIC.base_url+BF_STATIC.web_root+"/"+user_info.username;facebook.user_page_id_handler=function(result){var obj=eval(result);if(typeof obj!="undefined"&&obj.length>0){facebook.cache.user_page_id=obj.shift().id;facebook._publish_to_fan_page(facebook.cache_data)}else{}};facebook.request("https://api.facebook.com/method/fql.query",{inject:true,method:"get",parameters:{query:"SELECT id FROM object_url WHERE url='"+url+"'",format:"JSON",callback:"facebook.user_page_id_handler"}})};this.publish_contribution=function(t){var i=(new BF_User).getUserInfo();var n=i.username;if(t.image_src){if(!t.image_src.match(/https:\/\//)){t.image_src=t.image_src}t.images=new Array({src:t.image_src,href:t.username?BF_STATIC.base_url+BF_STATIC.web_root+"/"+n+"/"+t.uri:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.uri});t.images.each(function(t){t.src=t.src.replace(BF_STATIC.base_url,"http://facebook-dev.buzzfeed.com:8080");t.type="image"})}FB.ui({method:"stream.publish",message:t.text,attachment:{name:t.parent_title,caption:"",description:t.parent_blurb,media:t.images,href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.buzz_username+"/"+t.buzz_uri+"?comment="+t.id},action_links:[{text:"Respond",href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.buzz_username+"/"+t.buzz_uri+"?comment="+t.id}],user_prompt_message:""},function(t){if(t&&t.post_id){}else{}})};this.has_liked=function(t){var i=facebook.liked_hrefs.indexOf(t);if(i!=-1)return true;facebook.liked_hrefs.push(t);return false};this.has_unliked=function(t){var i=facebook.unliked_hrefs.indexOf(t);if(i!=-1)return true;facebook.unliked_hrefs.push(t);return false};this.liked_something=function(t,i){if(!facebook.has_liked(t)){facebook._custom_track(i,"fb-like");var n=new BF_User;var a=typeof i.dom!="undefined"?i.dom.getAttribute("rel:buzz_id"):i.getAttribute("rel:buzz_id");var r=typeof i.dom!="undefined"?i.dom.getAttribute("href"):i.getAttribute("href")?i.getAttribute("href"):i.getAttribute("data-href");var s=r.lastIndexOf("/",r.lastIndexOf("/")-1);r=r.substring(s);(new BF_Targetting_Pixel).add("facebook");if(n.isLoggedIn()){if(a){badge_vote_manager.simple_love_vote(r,a)}}}if(typeof requestLike!="undefined")requestLike.sayThankYou();if(t.match('"^https?://www.facebook.com/buzzfeed$"')){localStorage.setItem("fb_like_fbbuzzfeed",1)}};this.unliked_something=function(t,i){if(!facebook.has_unliked(t)){facebook._custom_track(i,"fb-unlike")}};this.comment=function(t){var i=gtrack.tt_page+":contribute/facebook";facebook._track(i,"share/facebook/comment","")};this.track_like_ab_test=function(t,i){if(!i||i=="")i="click";try{var n=t.getAttribute("rel:gtrack_id");if(n){var a=$(t).ancestors().reject(function(t){return!t.getAttribute("rel:bf_bucket")||t.getAttribute("rel:bf_bucket")!="gtrack"}).first();if(a){var r=a.getAttribute("rel:unit"),s=a.getAttribute("rel:classes").split(" "),o="";for(var l=0;l<s.length;l++){var u=s[l].replace(/(\(\d+\))/m,"");if(a.hasClassName(u))o=u}}}}catch(e){}};this.gtrack_name=function(t){try{var i,n;while(t!=document){n=$(t).readAttribute("rel:bf_bucket");if(n&&n.match(/gtrack/)){i=$(t).readAttribute("rel:gt_cat");if(i&&i!="")return i}t=$(t).parentNode}return null}catch(e){return null}},this._track=function(t,i){var n=t?t:gtrack.tt_page;var i=i?i:"share/facebook";if(i.match("like")){gtrack.trackShares(20,"numSharesFacebook")}gtrack.track_events(n,i,"")};this._custom_track=function(t,i){var n=gtrack.findCatLabel(t)||"FBLikeBox";var a=gtrack.findActLabel(t)||i;var r=gtrack.findGtrackLabel(t)||null;gtrack.track_events(n,a,r,null,true)};this.squelch_extra_features_prompt=function(){createCookie("squelch_fb_features_prompt","true",30);facebook.squelch_extra_features_promo=true};this.show_signin_tab=function(t){var i=$("tab1-signin_special-"+t.buzz_id);if(i)i.addClassName("hidden");i=$("tab2-signin_special-"+t.buzz_id);if(i)i.removeClassName("hidden");$("login-submit").value="Sign In";$("register-submit").value="Register";if($("preview-again-from-registration"))$("preview-again-from-registration").hide();if($("preview-again-from-login"))$("preview-again-from-login").hide();bf_login.args={action:"fb_like"};var n=new BF_Register;n.register_handler(false,{action:"fb_like"});n.fb_register_handler(false,{action:"fb_like"});$("registration-div").show();i.parentNode.appendChild($("registered-success").cloneNode(true))};this.signin_for_extra_features_box=function(t){if(facebook.squelch_extra_features_promo)return;var i="signin_special-"+(t.buzz_id||(new Date).getTime());var n=t.uri||"/";var a=t.append_to||document.getElementsByTagName("BODY")[0];if($(i)){var r=$(i);$(i).parentNode.removeChild($(i));a.appendChild(r);r.removeClassName("hidden");o.removeClassName("hidden");l.addClassName("hidden")}else{var s=document.createElement("div");s.id=i;s.addClassName("signin_special");var o=document.createElement("div");o.id="tab1-"+i;var l=document.createElement("div");l.id="tab2-"+i;o.removeClassName("hidden");l.addClassName("hidden");s.appendChild(o);s.appendChild(l);o.innerHTML=facebook.SIGNIN_FOR_EXTRA_FEATURES.evaluate({buzz_id:t.buzz_id});var u=$("registration-div");if(u){u.parentNode.removeChild(u);l.appendChild(u)}a.appendChild(s);FB.XFBML.parse(a);universal_dom.update(a);if(t.buzz_id)bf_login.loggedInCallbacks.push(function(){try{$(i).addClassName("hidden")}catch(e){}badge_vote_manager.simple_love_vote(n,t.buzz_id)})}};this.load_friends=function(){if(facebook.access_token){if($("not-logged-in"))$("not-logged-in").addClassName("hidden");facebook.request("https://graph.facebook.com/me/friends",{inject:true,method:"get",parameters:{access_token:facebook.access_token,callback:"facebook._load_friends",format:"JSON"}})}else{if($("not-logged-in"))$("not-logged-in").removeClassName("hidden")}};this._load_friends=function(t){var i=[];t.data.each(function(t){i.push(t.id)});facebook.request("/buzzfeed/_facebook",{method:"post",parameters:{action:"follow_page",friends:i.join(",")},onSuccess:facebook._load_friends_ok})};this._load_friends_ok=function(t){$("content").update(t.responseText)};this.keyword_suggest_mouseout=function(t){var i=$("keywords-"+t);clearTimeout(i.hide_timeout);i.hide_timeout=setTimeout(function(){i.hide()},500)};this.removeKeyword=function(t,i,n){var a=$(i);if(a){var r=facebook.fb_ad_kw_terms[t].indexOf(n);if(r>=0)facebook.fb_ad_kw_terms[t].splice(r,1);a.remove();facebook.updateKeywordStats(t,facebook.fb_ad_kw_terms[t],true)}};this.updateKeywords=function(t,i,n){if(facebook.keyword_update_ps){window.clearTimeout(facebook.keyword_update_ps)}var a=50;if(n)a=1e3;facebook.keyword_update_ps=window.setTimeout(function(){if(!n){var a=facebook.fb_ad_kw_terms[t]||[];if(i&&i!="")a.push(i);facebook.updateKeywordStats(t,a,true);facebook.fb_ad_kw_terms[t]=a;var r=i.replace(" ","_"),s="keyword_"+t+"_"+r;$("terms-"+t).innerHTML+=facebook.FACEBOOK_KW_ITEM.evaluate({id:t,dom_id:s,keyword:i});$("kw-"+t).value=""}else if(i&&i.strip()!=""){facebook.updateKeywordStats(t,[i])}}.bind(t,i),a)};this.updateKeywordStats=function(t,i,n){if(i.length==0){$(n?"post-reach-"+t:"users-reach-"+t).hide();return false}if(n){var a=$("post-"+t);$("post-reach-"+t).show()}else{var a=$("users-"+t);$("users-reach-"+t).show()}a.update("Calculating&hellip;");facebook.request(facebook.FB_KEYWORDS_CONTROLLER,{method:"get",parameters:{action:"targeting_stats",keywords:i},onSuccess:function(t){var i=JSON.parse(t.responseText);if(i.stats.users){var n=new String(i.stats.users);a.innerHTML=facebook.add_commas(n)+" "+(i.stats.users==1?"person":"people")}else{a.innerHTML="Server too slow..."}},onFailure:function(){a.innerHTML="Server too slow&hellip;"}})};this.add_commas=function(t){var i=new RegExp("^([0-9]*)([0-9]{3,})(,?[0-9,?]*)$");while(t.match(i)){t=t.replace(i,"$1,$2$3")}if(t.substring(0,1)==",")t=t.substring(1);return t};this.lookup_keywords=function(t,i,n){$("search-"+n).hide();$("lookup-loading-"+n).show();if(i.strip().length>0){facebook.request(facebook.FB_KEYWORDS_CONTROLLER,{method:"get",parameters:{action:"autocomplete_interests",query_string:i},onSuccess:function(a){facebook._lookup_keywords(a,t,n,i)},onFailure:function(){alert("Sorry, but an error has occurred. Please try again.");$("search-"+n).show();$("lookup-loading-"+n).hide()}})}};this._lookup_keywords=function(t,i,n,a){$("lookup-loading-"+n).hide();$("search-"+n).show();var r=JSON.parse(t.responseText);if(r.keywords.length>0){var s="";if(r.keywords.indexOf(a)==-1)r.keywords.unshift(a);r.keywords.each(function(t){s+=facebook.FACEBOOK_KW_SUGGESTION.evaluate({keyword:t,id:n})});var o=$("search-"+n).positionedOffset()[1]+$("search-"+n).getHeight()+"px";$("keywords-"+n).setStyle({top:o}).update("<ul>"+s+"</ul>").show()}else{facebook.updateKeywords(n,a,false);facebook.close_kw_dialog(n)}};this.updateMaxLength=function(t,i,n){var a=i=="title"?25:135,r=a-n.length;if($("keylength-"+i+"-"+t)){$("keylength-"+i+"-"+t).update('<span class="'+(r<=5?"warning":"")+'">'+r+"</span> character"+(r==1?"":"s")+" remaining")}};this.close_kw_dialog=function(t){if($("keywords-"+t)){$("keywords-"+t).hide()}$("kw-"+t).value="";$("users-reach-"+t).hide()};this.remove_ad_unit=function(t){$(t).parentNode.removeChild($(t));if($("buzzes")){var i=$("buzzes").childElements().length;if(i>0){if($("username_search_posts_length"))$("username_search_posts_length").update(i+" post"+(i!=1?"s":""))}else{this.new_user_posts_search()}}};this.new_user_posts_search=function(){$("success-message").hide();$("error-message").hide();if($("username_search_posts"))$("username_search_posts").hide();if($("do-it"))$("do-it").hide();if($("username_search_box"))$("username_search_box").show();if($("username_search_input"))$("username_search_input").focus()};this.create_ad=function(t){$("success-message").hide();$("error-message").hide();var i=[];if(!t.elements["campaign_name"]||t.elements["campaign_name"].value.strip()=="")i.push("Please add a campaign name.");if(!t.elements["budget_in_dollars"]||t.elements["budget_in_dollars"].value.strip()=="")i.push("Please insert a budget amount (USD).");if($$(".fb_ad").length<1)i.push("Please include at least one buzz to advertise.");if(i.length>0){$("error-message").update("There were a few errors: <ul><li>"+i.join("</li><li>")+"</li></ul>").show();try{window.scrollTo(0,0)}catch(e){}return false}$("do-it-spinner").show();$("do-it-submit").addClassName("disable");t.setAttribute("action","/buzzfeed/_facebook");var n=["start","stop"];n.each(function(i){var n=new Date;var a=t.elements[i+"_date"].value.split("-");n.setYear(a[2]);n.setMonth(a[0]-1);n.setDate(a[1]);var r=t.elements[i+"_time"].value;if(r){r=r.split(":");n.setHours(r[0]);n.setMinutes(r[1])}t.elements["time_"+i].value=Math.round(n.getTime()/1e3)});for(var a in facebook.fb_ad_kw_terms){t.elements["interests-"+a].value=facebook.fb_ad_kw_terms[a].join(",")}t.request({timeout:12e3,onSuccess:facebook._create_ad,onFailure:function(){$("error-message").update("Unknown error, please try again.").show();try{window.scrollTo(0,0)}catch(e){}$("do-it-spinner").hide();$("do-it-submit").removeClassName("disable")}});return false};this._create_ad=function(t){try{var i=JSON.parse(t.responseText);if(i.success==1){var n=$$(".fb_ad"),a=0;for(var r=0;r<i.ad_groups.length;r++){if(i.ad_groups[r].updated_adgroups.length==1){n[r].remove()}else{a++;$("error-message-"+r.unique_id).update(i.ad_groups[r].failed_adgroups[0].errors[0]||"An unknown error occured.").show()}}if(a==0)facebook.new_user_posts_search();$("success-message").update("Successfully created Facebook ad campaign "+("however there "+(a>1?"were problems":"was a problem"))+" with the "+(a>1?"ads":"ad")+" below"+'.<br /><a href="javascript:;" onclick="facebook.new_user_posts_search(); return false;">Click here</a>to search for more buzzes to advertise.').show()}else{$("error-message").update(i.message||"An unknown error occurred; please try again later.").show()}}catch(e){$("error-message").update("An unknown error occurred; please try again later.").show()}try{window.scrollTo(0,0)}catch(e){}$("do-it-spinner").hide();$("do-it-submit").removeClassName("disable")};this.get_buzzes=function(t){$("success-message").hide();$("error-message").hide();if(!t||t.strip()==""){$("error-message").update("Please enter a username to search.").show();if($("username_search_input"))$("username_search_input").focus();return}$("error-message").hide();if($("username_search_loading"))$("username_search_loading").show();if($("username_search_box"))$("username_search_box").hide();new Ajax.Request("/buzzfeed/_public_admin",{method:"get",parameters:{action:"recent_buzz",usernames:t},onSuccess:function(i){var n=$("buzzes");n.update("");var a=JSON.parse(i.responseText);if(a.buzzes.length>0){if($("do-it"))$("do-it").show();if($("username_search_posts_length"))$("username_search_posts_length").update(a.buzzes.length+" "+"post"+(a.buzzes.length!=1?"s":""));if($("username_search_posts_query"))$("username_search_posts_query").update(t);if($("username_search_posts"))$("username_search_posts").show()}else{if($("do-it"))$("do-it").hide();if($("error-message"))$("error-message").update("No posts were found for your search. Please try again.").show();if($("username_search_box"))$("username_search_box").show();if($("username_search_input"))$("username_search_input").focus()}var r=new RegExp("(.*buzzfeed.com/)([^#|?]*)");a.buzzes.each(function(t){t.name=t.name.replace(/(<([^>]+)>)/gi,"");t.blurb=t.blurb.replace(/(<([^>]+)>)/gi,"");if(t.name.length>24)t.name=t.name.substring(0,24);if(t.blurb.length>134)t.blurb=t.blurb.substring(0,134);t.link=t.link_buzz?t.link_buzz:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t.username+"/"+t.uri;var i=t.link.match(r);if(i){t.link=t.link.replace(r,i[1]+"ht/"+i[2]+"/HFAA1")}t.unique_id=t.campaignid;t.static_root=BF_STATIC.static_root;var a=facebook.FACEBOOK_BUZZ_AD.evaluate(t);var s=document.createElement("li");s.id=t.uri;s.unique_id=t.unique_id;s.addClassName("fb_ad").addClassName("rel").addClassName("targeting");s.update(a);n.appendChild(s);facebook.updateMaxLength(t.campaignid,"title",t.name);facebook.updateMaxLength(t.campaignid,"blurb",t.blurb)});if($("username_search_loading"))$("username_search_loading").hide()}})};this.init=function(){FB.init({appId:BF_STATIC.fb_app_id,version:BF_STATIC.fb_api_version,xfbml:true,cookie:true,status:true,oauth:true});FB.getLoginStatus(facebook.handle_session_change);FB.Event.subscribe("auth.authResponseChange",facebook.handle_session_change);FB.Event.subscribe("edge.create",facebook.liked_something);FB.Event.subscribe("edge.remove",facebook.unliked_something);FB.Event.subscribe("comment.create",facebook.comment);FB.Event.subscribe("xfbml.render",facebook.loadedLike);FB.Event.subscribe("xfbml.ready",facebook.xfbmlReady);social.observe("contribute",facebook.contribute);social.observe("quickpost",facebook.quickpost);social.observe("quiz_result",facebook.quiz_result);facebook.squelch_extra_features_promo=readCookie("squelch_fb_features_prompt")=="true";if(typeof FB.Content!="undefined"){origPostTarget=FB.Content.postTarget}else{FB.Content={}}facebook.apiInit=true;FB.XFBML.parse(document.body);FB.Content.postTarget=function(t){t.params.action_links=FB.JSON.stringify(t.params.action_links);t.params.attachment=FB.JSON.stringify(t.params.attachment);origPostTarget(t)};universal_dom.assign_handler({bucket:"create_ad",event:"click",handler:function(e){facebook.create_ad(e.target.form)}});universal_dom.assign_handler({bucket:"get_buzzes",event:"click",handler:function(e){facebook.get_buzzes(e.target.form.elements.usernames.value)}});EventManager.observe("progressive-load-callback:fb_comments_control",function(t,i){var n=buzzDetails.uri,a=BF_STATIC.username;facebook.renderComments(a,n,t,i)});EventManager.observe("progressive-load-callback:fb_comments_nexton",function(t,i){var n=buzzDetails.uri,a=BF_STATIC.username;facebook.renderComments(a,n,t,i)});var t=new BF_User;if(window.location.href.match(/boost\/facebook/)){if(!t.isLoggedIn()||t.getUserInfo().p_admin!="true")window.location.href="/boost";else $("page_container").show()}};this.xfbmlReady=function(t){if(t.type=="video")facebook.videoPlayer(t)};this.videoPlayer=function(t){var i=t.instance;var n=$s("#"+t.id);var a=n.getAttribute("data-href");i.subscribe("startedPlaying",function(e){gtrack.track_events("","video-play",a)});i.subscribe("finishedPlaying",function(e){gtrack.track_events("","[nc]video:end",a)});gtrack.track_events("","[nc]video:load",a)};this.renderComments=function(t,i,n,a){var r=$s("#"+a),s=$s("#preFacebookComment"),o=$$("#"+a+" .fb_comments_wrapper")[0];var l=document.querySelector('link[rel="canonical"]');var u=l?l.href:BF_STATIC.base_url+BF_STATIC.web_root+"/"+t+"/"+i;if(typeof FB!="undefined"){if("fb_comments_control"==a&&$$(".buzz_superlist_item_quiz").length==0||"fb_comments_nexton"==a&&$$(".buzz_superlist_item_quiz").length>0){s.addClassName("hidden");r.removeClassName("hidden");o.innerHTML='<fb:comments width="625" href="'+u+'" mobile="false"></fb:comments>';FB.XFBML.parse(o);window.clearInterval(n)}else{window.clearInterval(n)}}};this.is_logged_in=function(){return typeof facebook.session!="undefined"};this.logout=function(t){facebook.logged_out();if(facebook.is_logged_in())FB.logout(t);else t()};this.logged_out=function(){facebook.hide_ui_elements("logged-in");facebook.show_ui_elements("logged-out")};this.logged_in=function(){facebook.show_ui_elements("logged-in");facebook.hide_ui_elements("logged-out");facebook.update_ui_elements();var t=new BF_User;if(!t.isLoggedIn()){facebook.auto_log_into_buzzfeed()}facebook.fire_event("user_logged_in")};this.handle_session_change=function(t,i){if(t.authResponse){facebook.session=t.authResponse;facebook.access_token=t.authResponse.accessToken;facebook.permissions={};FB.api("/me",function(t){facebook.user_data=t;facebook.logged_in();FB.api("/me/permissions",function(t){t.data.each(function(t){if(t.status=="granted"&&typeof t!="undefined"){facebook.permissions[t.permission]=1}});if(typeof i!="undefined"){try{i.each(function(t){t()})}catch(n){}}})})}else{delete facebook.session;facebook.logged_out()}};this.buzzfeed_login=function(t){if(t.authResponse){var i=t.authResponse;var n={method:"post",parameters:{access_token:i.accessToken,facebook_uid:i.userID,fb_username:facebook.user_data.name},onSuccess:function(t){console.log("Facebook login succeeded");if(document.location.search.match(/fbtest=true/)){return}var i=JSON.parse(t.responseText);if(i.login&&i.login!="false"){if(facebook.tried_to_register){bf_login.loggedIn(t,{no_reload:true})}else{bf_login.loggedIn(t)}facebook.block_login=false;if(!i.facebook_uid){facebook.link_accounts_enabled=true;facebook.link_accounts()}}else if(i.facebook_deleted!=1){if(!facebook.tried_to_register)facebook.auto_register(i)}},onFailure:function(){}};console.log("Facebook login started");if(facebook.user_data.email)n.parameters.email=facebook.user_data.email;facebook.request("/bfcgi/_www_login?cb="+(new Date).getTime(),n)}};this.auto_log_into_buzzfeed=function(){if(!facebook.login_ok)return;if(!facebook.is_logged_in()||facebook.block_login)return;facebook.block_login=true;if("session"in facebook){facebook.buzzfeed_login({authResponse:facebook.session})}else{FB.getLoginStatus(function(t){if(t.authResponse)facebook.buzzfeed_login(t);else{facebook.FB_login("email")}})}};this.FB_login=function(t,i){facebook.login_ok=true;var n=t?t:"email";FB.login(function(a){if((!a||!a.authResponse||a.status=="unknown")&&typeof i=="function"){i()}if(t=="user_photos"&&typeof fbphotos!="undefined"){fbphotos.load_response(a)}var r="fb_perms_"+n;localStorage.setItem(r,new Date);if(typeof a!="undefined"&&a.authResponse!=null){var s=new BF_User;if(s.isLoggedIn()){var o=s.getUserInfo();if(!o.facebook_uid){facebook.link_accounts_enabled=true;facebook.link_accounts(a.authResponse.userID)}facebook.handle_session_change(a,bf_login.loggedInCallbacks)}else{facebook.handle_session_change(a,[facebook.buzzfeed_login])}}},{scope:n})};this.has_perms=function(t){try{if(facebook.permissions[t]==1){return true}else{return false}}catch(i){return false}};this.perms_were_asked_recently=function(t){var i="fb_perms_"+t;if(localStorage.getItem(i)===null){return false}else{var n=new Date(localStorage.getItem(i));var a=new Date;days=Math.round((n-a)/(1e3*60*60*24));if(days<=5){return true}else{localStorage.removeItem(i);return false}}};this.link_accounts=function(t){if(!facebook.link_accounts_enabled)return;var i;if(typeof t!="undefined"){i=t}else if(typeof facebook.session!="undefined"){i=facebook.session.userID}else{return}try{new Ajax.Request("/buzzfeed/_edit_user",{method:"get",asynchronous:false,parameters:{action:"link_facebook_account",facebook_uid:facebook.session.userID,onSuccess:function(t){},onFailure:function(t){}}})}catch(e){}};this.__events={};this.observe=function(t,i){var n=facebook.__events[t]||[];n.push(i);facebook.__events[t]=n};this.fire_event=function(t){if(typeof facebook.__events[t]!="undefined"){facebook.__events[t].each(function(t){t()})}};this.auto_register=function(t){if(!facebook.auto_register_enabled)return;var i="get_from_facebook@buzzfeed.com";try{i=facebook.user_data.email}catch(e){}if(typeof i=="undefined"||i.length==0)i="get_from_facebook@buzzfeed.com";var n={name:t.username,username:t.username,pw:t.password,email:i,contribute:1,allow_email_updates:0,facebook_uid:facebook.session.userID,import_fb_profile:"true",language:BF_STATIC.language||"en"};facebook.request("/buzzfeed/_contribute_register",{method:"post",parameters:n,onSuccess:function(e){gtrack.track_events("","social/facebook","registered");facebook.block_login=false;facebook.tried_to_register=true;try{var t=JSON.parse(r.responseText);if(t.status=="failed"&&t.message=="duplicate email"){facebook.fire_event("registration:duplicate_email")}}catch(i){console.dir({err:i})}facebook.auto_log_into_buzzfeed()},onFailure:function(e){facebook.block_login=false}})};this.request=function(t,i){if(i.inject){var e=document.createElement("script");e.src=t;e.async=true;if(i.parameters){var n=[];for(var a in i.parameters){n.push(a+"="+escape(i.parameters[a]))}e.src+="?"+n.join("&")}document.getElementById("fb-root").appendChild(e)}else{var r=new BF_Request;r.request(t,i)}};this._add_fb_root=function(){if(!$("fb-root")){var t=document.createElement("div");t.id="fb-root";document.getElementsByTagName("BODY")[0].appendChild(t)}};this.get_ui_elements=function(t,i){return social._get_ui_elements(this.social_element_key,t,i)};this.hide_ui_elements=function(t){this.get_ui_elements(t).each(function(t){t.addClassName("hidden")})};this.show_ui_elements=function(t){this.get_ui_elements(t).each(function(t){t.removeClassName("hidden")})};this.update_ui_elements=function(){this.get_ui_elements("update",{with_data:true}).each(function(el){el.element.update(eval(el.data.value))})};this.ensure_init=function(t,i){if(!facebook.apiInit&&i<100){i++;setTimeout(function(){facebook.ensure_init(t)},50)}else if(i>=100){return false}else{if(t){t()}}}};var facebook=new Facebook;window.fbAsyncInit=facebook.init;if(typeof BuzzLoader!="undefined"){BuzzLoader.register(function(){if(!window["BF_STATIC"]||!BF_STATIC.bf_test_mode){facebook._add_fb_root();var t=BF_STATIC.fb_locale?BF_STATIC.fb_locale:"en_US";if("FB"in window)FB=null;var e=document.createElement("script");e.src=document.location.protocol+"//connect.facebook.net/"+t+"/sdk.js";e.async=true;if(!window["BF_STATIC"]||BF_STATIC.facebook_enabled&&BF_STATIC.facebook_enabled!=false){document.getElementById("fb-root").appendChild(e)}}else{console.info("disable load connect.facebook.net/en_US/sdk.js for test mode(facebook2.js)")}},2)}document.observe("dom:loaded",function(){$$(".facebook-share-button").each(function(t){$(t).observe("click",function(){gtrack.trackShares(20,"numSharesFacebook")})})});var FBTL=function(){var t;var i={};var n=false;var a;var r="publish_actions,email";this.init=function(){try{universal_dom.assign_handler({bucket:"add_to_timeline",event:"click",handler:fbtl_session.add_to_timeline_handler})}catch(t){console.error(t)}};this.add_to_timeline_handler=function(e){var t=$(e.target.getAttribute("id"));t.addClassName("grey");if(!e.action||!e.sb_id||!$("date-dropdown-"+e.sb_id)){if(BF_STATIC.bf_env!="live")console.error("action, date or sub_buzz_id missing!");return}var i=e.action;var n=e.sb_id;var r=$("date-dropdown-"+n).getValue();var s=new Date;s.setFullYear(parseInt(r),0,1);var o=parseInt(s.getTime()/1e3);var l=new Date;l.setFullYear(parseInt(r),11,31);var u=parseInt(l.getTime()/1e3);var d=typeof sub_links!="undefined"&&typeof e.link_id!="undefined"?sub_links.get_url(e.link_id):document.URL.include("?")?document.URL.split("?")[0]:document.URL;
d+=(d.include("?")?"&":"?")+"fbtl="+n;if(BF_STATIC.bf_env!="live"){d=d.replace(/\/\/(stage(\d+)?|dev)\./i,"//www.").replace("/bf2/","/")}var c={start_time:o,end_time:u,product:d,message:"Everyone's talkin' about the good old days..."};a=e.target;badge_vote_manager.reset_sharing_box();fbtl_session.trigger(i,c,true)};this.trigger=function(a,s,o){t=a;i=s;n=typeof o!="undefined"&&o?true:false;var l="fb_perms_"+r;if(document.location.search.match(/fbperms=show/)){var u=localStorage.getItem(l);console.log("localStorage canceled perms: "+l+" --> "+u)}if(document.location.search.match(/fbperms=clear/)){console.log("localStorage cleared: "+l);localStorage.removeItem(l)}if(facebook.is_logged_in()&&facebook.has_perms("publish_actions")){fbtl_session.post()}else{if(!n){if(facebook.perms_were_asked_recently(r)){if(BF_STATIC.bf_env!="live"){console.log("FBTL trigger failed. Canceled perms on "+localStorage.getItem(l))}return}var d=(new BF_User).getUserInfo();if(typeof d.facebook_uid=="undefined"||!d.facebook_uid||d.facebook_uid==""){return}}bf_login.loggedInCallbacks.push(fbtl_session.post);facebook.FB_login(r)}};this.nameSpace=function(){var t="";if(BF_STATIC.fb_app_id=="45075597673"){t="buzzfeed"}else if(BF_STATIC.fb_app_id=="212374995460808"){t="buzzfeedstage"}else if(BF_STATIC.fb_app_id=="54820841344"){t="buzzfeed-dev"}return t};this.post=function(){var r="/me/"+fbtl_session.nameSpace()+":"+t;if(BF_STATIC.bf_env!="live"){console.log("POST REQUEST TO FACEBOOK: "+r);console.log(i)}if(typeof i["badge"]!="undefined"){var s=" '"+i["badge"].replace("http://www.buzzfeed.com/badge/","")+"' "}else{s=""}FB.api(r,"post",i,function(t){if(!t||t.error){if(BF_STATIC.bf_env!="live"){console.error("Couldn't post to timeline!!!")}var i=$(a.getAttribute("id"));i.removeClassName("grey")}else{if(n)badge_vote_manager.show_sharing_box(a,"fbtl");if(BF_STATIC.bf_env!="live"){console.log("Post was successful!: Action ID : "+t.id)}fbtl_session.action_id=t.id;if($("share-reaction-box")){$("share-reaction-content-wrapper").insert({top:'					<div id="sharing-timeline-message">						<div class="success_icon"></div>						Your '+s+' reaction was added to your Timeline.						<a href="javascript:;" id="undo_timeline_action" gt_act="facebook-timeline/undo">undo</a>					</div>'})}if($("undo_timeline_action")){$("undo_timeline_action").observe("click",fbtl_session.delete_action)}}})};this.delete_action=function(){if(typeof fbtl_session.action_id=="undefined"){if(BF_STATIC.bf_env!="live"){console.error("No action to delete")}return}$("undo_timeline_action").update("...");FB.api("/"+fbtl_session.action_id,"delete",function(t){if(typeof t!="undefined"&&t==true){$("undo_timeline_action").update("deleted")}else{if(BF_STATIC.bf_env!="live"){console.error("Something went wrong deleting the action from Facebook.")}}});if(n){$("social-sharing-box").hide()}gtrack.track_events("Buzz:social-share-box","facebook-timeline/undo","")};this.add_message=function(){$("sharing-box-submit").stopObserving("click",fbtl_session.add_message);$("sharing-box-submit").value="Adding";if(typeof fbtl_session.action_id=="undefined"){if(BF_STATIC.bf_env!="live"){console.error("No action id")}return}if($("sharing-message")&&$("sharing-message").value!=""){var t=$("sharing-message").value;FB.api("/"+fbtl_session.action_id,"post",{message:t},function(t){if(typeof t!="undefined"&&t==true){$("sharing-box-submit").value="Added"}else{if(BF_STATIC.bf_env!="live"){console.error("Something went wrong adding the message to Facebook: "+t)}}});gtrack.track_events("Buzz:timeline-box","facebook-timeline/add-message","")}$("sharing-box-submit").value="Added"}};var fbtl_session=new FBTL;BuzzLoader.register(fbtl_session.init,5);var Social=function(){this.quickpost=function(t){};this.contribute=function(t){};this.vote=function(t){};this.quiz_result=function(t){};this._init=function(){var t=new RegExp("^_");for(var i in this){if(typeof this[i]=="function"&&i!="observe"&&!i.match(t)){this["_"+i]=this[i];this[i]=Function("obj","social._"+i+'(obj);social._fire_event("'+i+'",obj);')}}};this.observe=function(t,i){if(typeof this[t]=="function"){var n=typeof this._observers[t]=="undefined"?[]:this._observers[t];var a=true;n.each(function(t){if(i==t)a=false});if(a){n.push(i);this._observers[t]=n}}};this._fire_event=function(t,i){var n=typeof this._observers[t]=="undefined"?[]:this._observers[t];n.each(function(t){try{t(i)}catch(e){console.warn(e)}})};this._observers={};this._get_ui_elements=function(t,i,n){if(!n)n={};var a=[];if(typeof universal_dom!="undefined"&&typeof universal_dom._bucket[t+"-"+i]!="undefined"){universal_dom._bucket[t+"-"+i].elements.each(function(t){if(n.with_data){a.push(t)}else a.push(t.element)})}return a}};var social;if(typeof BuzzLoader!="undefined"){BuzzLoader.register(function(){social=new Social;social._init()},1)}var BF_MobilePromos=function(){this.agent=navigator.userAgent.toLowerCase();this.is_mobile=this.agent.match(/iphone|ipod|android|ipad/);this.is_iphone=this.agent.match(/iphone|ipod/);this.is_android=this.agent.match(/android/);this.is_ipad=this.agent.match(/ipad/);this.init=function(){if(mobile_promos.is_iphone){}else if(mobile_promos.is_android){}else{}if(readCookie("BF_NO_MOBILE")&&readCookie("BF_NO_MOBILE").search(/true/)>-1){var t='<div id="bar_mobile_announcement">							<div id="bar_mobile_announcement_area" class="c">								<a id="announcement_mobile_close" class="close" href="javascript:;">Back To The Mobile Version</a>								<p></p>							</div>						</div>';$$("body")[0].insert({top:t});$("bar_mobile_announcement").observe("click",function(){eraseCookie("BF_NO_MOBILE",function(){window.location.reload()})})}}};var mobile_promos=new BF_MobilePromos;BuzzLoader.register(function(){mobile_promos.init()},1);function isEmpty(t){for(var i in t){return false}return true}BF_Editor=function(){var t=Box.Application.getService("dom");var i=Box.Application.getService("template-engine");this.init=function(){this.poller=new cookie_poller;var t=$$(".editor-admin");var i=$$(".editor-delete_reaction");var n=$$(".editor-delete_related_links");var a=new BF_User;var r=false;if(acl.user_can("edit_user_posts")){r=true}var s=false;var o=false;var l=false;var u;var d=window.bf_ad;var c=window.bf_partner;if(a&&a.isLoggedIn()){u=a.getUserInfo();if(u&&u.terminal_user&&u.terminal_user=="true"){s=true}else{o=true}if(u&&u.username){var _=new RegExp("/"+u.username+"(/?|$)");if(acl.user_can("partners_manage")&&(d=="1"||c=="1"||window.location.href.match(_))){l=true}}}if(r||l){for(var f=0;f<t.length;f++){t[f].stopObserving("click");t[f].observe("click",bf_editor.load_editor);t[f].show()}i.each(function(t){t.stopObserving("click",bf_editor.delete_reaction);t.observe("click",bf_editor.delete_reaction);t.show()});n.each(function(t){t.stopObserving("click",bf_editor.delete_related_links);t.observe("click",bf_editor.delete_related_links);t.show()})}else if(s){var h=window.location.pathname;if(BF_STATIC.web_root.length>0)h=h.replace(BF_STATIC.web_root,"");var p=h.split("/");if(p.length>0)p=p[1];else p="";var m=a.getUserInfo().username;if(m==p){terminal_links=$$(".terminal-admin");for(var f=0;f<terminal_links.length;f++){var g=terminal_links[f];var b=g.getAttribute("rel:owner");if(b==m){g.stopObserving("click",bf_editor.load_editor);g.observe("click",bf_editor.load_editor);g.show()}}}}if(r||s||o){var v=$$(".basic-admin");var y=(new BF_User).getUserInfo().username;var _=new RegExp("/"+y+"(/?|$)");if(!window.location.href.match(_)&&!r)return;for(var f=0;f<v.length;f++){var w=$(v[f]);var b=w.getAttribute("rel:owner");var k=w.getAttribute("rel:data");var k=JSON.parse(k);var T=k.buzz_id;var M=k.type;if(b==y||r){w.setAttribute("editor-style","basic");w.stopObserving("click",bf_editor.load_editor_in_dialog);w.observe("click",bf_editor.load_editor_in_dialog);w.show();var S=w;while(S.parentNode&&S.tagName!="LI")S=S.parentNode;$(S).observe("mouseout",function(e){var t=(new BF_User).getUserInfo().username;var i=this.obj.getAttribute("rel:owner");if(t==i||r)if($(this.obj.parentNode))$(this.obj.parentNode).hide()}.bind({obj:w}));$(S).observe("mouseover",function(e){var t=(new BF_User).getUserInfo().username;var i=this.obj.getAttribute("rel:owner");if(t==i||r)if($(this.obj.parentNode))$(this.obj.parentNode).show()}.bind({obj:w}))}}var L=$$(".basic-admin-delete");for(var f=0;f<L.length;f++){L[f].observe("click",function(e){bf_editor.delete_quickpost(e)})}$$(".qe2").each(function(t){t.addClassName("with-stats")});var z=$$(".basic-admin-stats");for(var f=0;f<z.length;f++){z[f].observe("click",function(e){bf_editor.load_stats(e)})}}var y=(new BF_User).getUserInfo().username;var C=new RegExp("(/submissions)?/"+y);var A=new RegExp("with-stats");if(window.location.href.match(C)){$$(".qe3").each(function(t){if(t.className.match(A)){var i="";var n=t.getElementsByTagName("A");i=n[0].getAttribute("rel:owner");if(i!=y)t.parentNode.removeChild(t)}})}};this.do_delete_reaction=function(e){e.stop();var t={comment_id:e.target.getAttribute("rel:comment_id"),buzz_id:e.target.getAttribute("rel:buzz_id"),user_id:e.target.getAttribute("rel:user_id"),reactions:e.target.getAttribute("rel:reactions")};var i=$("user_post_delete_iframe");if(i){var n=i.parentNode;n.removeChild(i)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");if($("post-headline"))$("post-headline").update("these reactions");var a=$("cancel-delete-button");var r=$("delete-button");if(a){a.stopObserving("click");a.observe("click",function(){top.BF_UI.closeDialog("user_post_delete")})}if(r){r.stopObserving("click");r.observe("click",function(){bf_editor._delete_reaction(t)})}}BF_UI.showDialog("user_post_delete","Delete")};this.delete_reaction=function(e){var n=arguments;i.load({id:"user_post_delete",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_delete");bf_editor.do_delete_reaction.apply(bf_editor,n)}})};this._delete_reaction=function(t){var i={action:"delete_reaction",buzz_id:t.buzz_id,user_id:t.user_id,responses:t.reactions};var n=t.comment_id;var a=(new BF_Request).request;a("/buzzfeed/comments_moderation",{method:"post",parameters:i,onComplete:function(){if(parent.$(n)){parent.$(n).update('<span style="color:red;">Item Deleted!</span>')}top.BF_UI.closeDialog("user_post_delete")}})};this.do_delete_related_links=function(e){e.stop();var t=e.target.getAttribute("rel:campaignid");var i=e.target.getAttribute("rel:related_campaignid");var n=e.target.getAttribute("rel:buzz_name");BF_UI.showDialog("user_post_delete","Delete");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/delete_related_links?campaignid="+t+"&related_campaignid="+i+"&buzz_name="+n)};this.delete_related_links=function(e){var n=arguments;i.load({id:"user_post_delete",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_delete");bf_editor.do_delete_related_links.apply(bf_editor,n)}})};this.do_delete_quickpost=function(e){if(e.event)e=e.event;e.stop();var t=(new BF_User).getUserInfo().username;var i=e.target;var n=i.getAttribute("rel:owner");var a=i.getAttribute("rel:data");var a=JSON.parse(a);var r=JSON.parse(i.getAttribute("track"));var s=a.buzz_id;var o=new BF_User;var l=o.getUserInfo();var u=false;if(acl.user_can("edit_user_accounts")){u=true}if(t!=n&&!u)return;BF_UI.showDialog("user_post_delete","Delete");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/delete?id="+s)};this.delete_quickpost=function(e){var n=arguments;i.load({id:"user_post_delete",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_delete");bf_editor.do_delete_quickpost.apply(bf_editor,n)}})};this.load_stats=function(e){var t=(new BF_User).getUserInfo();var i=e.target.getAttribute("rel:data").evalJSON();var n=el.getAttribute("rel:owner");var a=JSON.parse(el.getAttribute("track"));window.location.href=BF_STATIC.dashboard_url+"/global/"+n+"/"+a.buzz};this.edit_from_stats=function(e){e.stop();BF_UI.closeDialog("user_post_stats",{onComplete:bf_editor.close_user_stats});bf_editor.load_editor_in_dialog(e)};this.do_fill_stats_panel_shell=function(t){var i=$$("#user_post_stats .bf_dialog_content").first();$$("#user_post_stats .bf_dialog_content").first().innerHTML=t.responseText;$("user-stats-cancel-button").observe("click",function(){BF_UI.closeDialog("user_post_stats",{onComplete:bf_editor.close_user_stats})});$("user-stats-snapshot-button").observe("click",function(){if(bf_editor.snapshot){Element.setStyle("user-stats-left-snapshot",{display:"none"});Element.setStyle("user-stats-left",{display:"block"});$("user-stats-snapshot-button").setAttribute("value","Snapshot");bf_editor.snapshot=0}else{Element.setStyle("user-stats-left",{display:"none"});Element.setStyle("user-stats-left-snapshot",{display:"block"});$("user-stats-snapshot-button").setAttribute("value","Current");bf_editor.snapshot=1}});$$(".edit-buzz-from-stats").each(function(t){t.observe("click",bf_editor.edit_from_stats)});$$("a.stats-loader").each(function(t){t.observe("click",bf_editor.load_stats)});bf_editor.stats_shell_loaded=true};this.fill_stats_panel_shell=function(n){var a=arguments;i.load({id:"user_post_stats",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_stats");bf_editor.do_fill_stats_panel_shell.apply(bf_editor,a)}})};this.pivot_stats=function(t){new_ar=[];t.each(function(t){new_ar[t.type]=t});$R(0,100).each(function(t){if(!new_ar[t]){new_ar[t]={total:0,totals:[0,0,0,0,0,0,0]}}});return new_ar};this.fill_stats_panel_stats=function(){index=this.index?this.index:"";if(arguments.length==1&&typeof arguments[0]=="object"){if(isEmpty(arguments[0])){return}if(arguments[0].snapshot){index="-snapshot"}bf_editor.stats_panel=bf_editor.stats_panel?bf_editor.stats_panel:{};bf_editor.stats_panel[index]=arguments[0];bf_editor.stats_panel[index].week_impressions=bf_editor.pivot_stats(bf_editor.stats_panel[index].week_impressions);if(bf_editor.stats_panel[index].all_impressions)bf_editor.stats_panel[index].all_impressions=bf_editor.pivot_stats(bf_editor.stats_panel[index].all_impressions)}if(!bf_editor.stats_shell_loaded&&!bf_editor.secret_stats){return setTimeout(bf_editor.fill_stats_panel_stats.bind({index:index}),100)}else{var t=new Template($F("referring-domain"));var i=bf_editor.stats_panel[index].domains.map(function(i){if(i&&i.total)return t.evaluate({total:bf_editor.add_commas(i.total),domain:i.domain})}).join("");$("domains-list"+index).update(i);var n=new Template($F("search-term"));var a=bf_editor.stats_panel[index].search.map(function(t){if(t&&t.total)return n.evaluate({total:bf_editor.add_commas(t.total),query:t.query})}).join("");$("search-terms-list"+index).update(a);var r={};r["direct-week"]=bf_editor.stats_panel[index].week_impressions["0"].total;r["internal-week"]=bf_editor.stats_panel[index].week_impressions["1"].total;r["link-week"]=bf_editor.stats_panel[index].week_impressions["2"].total;r["search-week"]=bf_editor.stats_panel[index].week_impressions["3"].total;r["network-week"]=bf_editor.stats_panel[index].week_impressions["4"].total;r["total-week"]=r["direct-week"]+r["internal-week"]+r["link-week"]+r["search-week"]+r["network-week"];r["viral-week"]=r["direct-week"]+r["link-week"]+r["search-week"];r["direct-today"]=bf_editor.stats_panel[index].week_impressions["0"].totals[6];r["internal-today"]=bf_editor.stats_panel[index].week_impressions["1"].totals[6];r["link-today"]=bf_editor.stats_panel[index].week_impressions["2"].totals[6];r["search-today"]=bf_editor.stats_panel[index].week_impressions["3"].totals[6];r["network-today"]=bf_editor.stats_panel[index].week_impressions["4"].totals[6];r["total-today"]=r["direct-today"]+r["internal-today"]+r["link-today"]+r["search-today"]+r["network-today"];r["viral-today"]=r["direct-today"]+r["link-today"]+r["search-today"];if(bf_editor.stats_panel[index].all_impressions){r["direct-all-time"]=bf_editor.stats_panel[index].all_impressions["0"].total;r["internal-all-time"]=bf_editor.stats_panel[index].all_impressions["1"].total;r["link-all-time"]=bf_editor.stats_panel[index].all_impressions["2"].total;r["search-all-time"]=bf_editor.stats_panel[index].all_impressions["3"].total;r["network-all-time"]=bf_editor.stats_panel[index].all_impressions["4"].total;r["total-all-time"]=r["direct-all-time"]+r["internal-all-time"]+r["link-all-time"]+r["search-all-time"]+r["network-all-time"];r["viral-all-time"]=r["direct-all-time"]+r["link-all-time"]+r["search-all-time"]}$("traffic-summary-body"+index).update(new Template($F("traffic-summary")).evaluate(r));$("traffic-breakdown-body"+index).update(new Template($F("traffic-breakdown")).evaluate(r));$("chart_image"+index).src=bf_editor.get_graph(bf_editor.stats_panel[index].week_impressions);if(bf_editor.stats_panel[index].snapshot){Element.setStyle("user-stats-snapshot-button",{display:"block"})}}};this.get_graph=function(t){var i=["1","4","2","3","0"];var n={};i.each(function(i){if(typeof t[i]=="undefined")t[i]={};if(!t[i].totals)t[i].totals=[0,0,0,0,0,0,0];if(!t[i].total)t[i].total=0});var a=[];var r=[];var s=[];var o=0;var l=0;var u=[0,0,0,0,0,0,0];i.each(function(i){l++;if(t[i].totals){var n=t[i].totals.map(function(t,i){u[i]+=t;t=u[i];if(t>o)o=t;return[t,t,t].join(",")});a.push(n.join(","))}else{empty_array=[];for(j=0;j<21;j++){empty_array.push(0)}a.push(empty_array.join(","))}});return"http://chart.apis.google.com/chart?cht=ls&chs=170x105&chds="+[0,o].join(",")+"&chd=t:0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0|"+a.join("|")+"&chco=ffffff,0077ee,44bbff,ee3322,ff5544,ff7777&chm=b,0077ee,0,1,0|b,44bbff,1,2,0|b,ee3322,2,3,0|b,ff5544,3,4,0|b,ff7777,4,5,0&chf=bg,s,ffffff"};this.add_commas=function(t){t+="";t=t.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");t=t.replace(/,{2,}/,",");return t};this.close_user_stats=function(){bf_editor.stats_shell_loaded=false;$$("#user_post_stats .bf_dialog_content").first().innerHTML='<img src="'+BF_STATIC.static_root+'/images/public/spinners/loading.gif" />'};this.do_load_editor_in_dialog=function(e){var t=e.target;var i=t.getAttribute("rel:data");var n=JSON.parse(i);var a=n.buzz_id;var r=n.type;BF_UI.showDialog("user_post_edit","Edit");if(/^super.*/.test(r)){r="super";window.location.href=BF_STATIC.web_root+"/post?id="+a}else{$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+r+"?id="+a+"&cb="+(new Date).getTime())}};this.load_editor_in_dialog=function(e){var n=arguments;i.load({id:"user_post_edit",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_edit");bf_editor.do_load_editor_in_dialog.apply(bf_editor,n)}})};this._do_load_editor_in_dialog=function(t){BF_UI.showDialog("user_post_edit","Edit");var i=t.type;if(/^super.*/.test(i))i="super";$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+i+"?id="+t.id+"&cb="+(new Date).getTime())};this._load_editor_in_dialog=function(n){var a=arguments;i.load({id:"user_post_edit",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_edit");bf_editor._do_load_editor_in_dialog.apply(bf_editor,a)}})};this.load_editor=function(e){if(bf_editor.poller.active){alert("Please close the existing dialog before opening another.");return}if(e.event)e=e.event;var t=e.target;var i=t.getAttribute("rel:data");var n=JSON.parse(i);var a=n.buzz_id;var r=n.type;var s=(new Date).getTime();BF_Editor.editor_div_id=""+s;var o=BF_Editor.editor_div_id;var l=$(o);if(!l){l=document.createElement("div");l.id=o;bf_editor.bodyTag().appendChild(l);l.className="qwik_edit";var u=document.createElement("a");u.className="close_editor";u.update('<img src="'+BF_STATIC.image_root+'/static/images/public/spinners/closebox.png" alt="x"/>');u.href="#";u.observe("click",function(e){e.stop();bf_editor.close_editor(e)});l.appendChild(u)}bf_editor.start_spinner();var d=e.target.getAttribute("editor-style");if(!d)d="terminal";bf_editor.load_iframe(a,{style:d,type:r});bf_editor.poller.add_poller_callback(a,bf_editor.close_window);var c=BF_STATIC.static_root+"/html/index.html";domain=c.replace(/(http:\/\/.*?)\/.*/,"$1");bf_editor.poller.start({callback_string:a,poll_url:domain+"/static/js/poller/cookie.js",pollid:s,arguments:{id:o}})};this.close_editor=function(e){e.stop();var t=$(BF_Editor.editor_div_id);if(t){t.parentNode.removeChild(t);bf_editor.poller.stop_polling()}};this.close_window=function(t){if($(t.pollid)){$(t.pollid).parentNode.removeChild($(t.pollid))}};this.load_iframe=function(t,i){if(!i){i={style:"terminal"}}var n=i.style?i.style:"terminal";var a=i.type?i.type:"link";var r=this.generate_id("iframe");var s=$(r);if(!s){s=document.createElement("iframe");s.id=r;$(BF_Editor.editor_div_id).appendChild(s);s.observe("load",bf_editor.iframe_loaded);s.className="qwik_edit"}s.style.display="none";if(n=="terminal"){s.setAttribute("src",BF_STATIC.static_root+"/html/index.html?editor=qwik_edit&buzz_id="+t+"&cb="+(new Date).getTime())}else{var o=a;if(/^super.*/.test(o))o="super";s.setAttribute("src","/bf2/editbuzz/"+o+"?id="+t+"&cb="+(new Date).getTime())}};this.iframe_loaded=function(){bf_editor.stop_spinner();$(bf_editor.generate_id("iframe")).show()};this.start_spinner=function(){var t=this.generate_id("spinner");var i=$(t);if(!i){var i=document.createElement("div");i.id=t;i.className="qwik_edit-spinner";i.appendChild(document.createTextNode("Loading..."));$(BF_Editor.editor_div_id).appendChild(i);i.style.display="none"}var n=$(this.generate_id("iframe"));if(n)n.hide();i.show()};this.stop_spinner=function(){$(this.generate_id("spinner")).hide()};this.bodyTag=function(){return document.getElementsByTagName("BODY")[0]};this.generate_id=function(t){return BF_Editor.editor_div_id+"_"+t}};BF_Editor.editor_div_id="_editor_div_"+Math.random()*1e5;bf_editor=new BF_Editor;BuzzLoader.register(function(){bf_editor.init()},1);window.setTimeout(function(){if(typeof bf_editor.poller=="undefined"){bf_editor.init()}},3e3);var JSON=JSON||{};if(typeof JSON.parse!=="function"){JSON.parse=function(t){return t.evalJSON()}}if(typeof JSON.stringify!=="function"){JSON.stringify=Object.toJSON}var BF_TWITTER2={PLACED:{},placement:function(t,i){try{var n=t.target;if(!i)n=n.parentNode;return $(n)[bfjs.read_attr]("rel:share_placement")}catch(e){return null}},url:function(t,i){try{var n=t.target;if(!i)n=n.parentNode;return $(n)[bfjs.read_attr]("rel:share_url")}catch(e){return null}},gtrack_name:function(t,i){try{var n=t.target,a,r;while(n!=document){r=$(n)[bfjs.read_attr]("rel:bf_bucket");if(r&&bfjs.match(/gtrack/,r)){a=$(n)[bfjs.read_attr]("rel:gt_cat");if(a&&a!="")return a}n=$(n).parentNode}return null}catch(e){return null}},clicked:function(t){var i=$(t.target)[bfjs.read_attr](bfjs.gtrack_act);if(i&&bfjs.match(/^tweet\//,i))return;var n=BF_TWITTER2.gtrack_name(t);var a="share/twitter/"+(t.region?t.region:"");if(t.region=="tweet"){gtrack.trackShares(21,"numSharesTwitter")}gtrack.track_events(n,a,"");try{var r=t.data.screen_name}catch(s){r=""}if(r=="buzzfeed"){localStorage.setItem("tw_follow_buzzfeed",1)}(new BF_Targetting_Pixel).add("twitter")},insert:function(){bfjs.createScript({url:document.location.protocol+"//platform.twitter.com/widgets.js"})},cache_button:function(t,e){$(t).addClassName("hidden");var i=false;return function(e){if(i)return false;i=true;var n;if(e)n=e.target.up(".tweet-btn");else n=t.up(".tweet-btn");bfjs.each(bfjs.$(".twitter-button-fixer a"),function(t){t.addClassName("twitter-share-button")});n.insert("<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script>");setTimeout(function(){bfjs.each(bfjs.$(".twitter-button-fixer"),function(t){t.style.display="block"})},800)}(e)},load_tweet:function(t){if(typeof twttr=="object"){twttr.widgets.createTweet(t.tweet_id,t.tweet_el,{conversation:t.tweet_parent}).then(function(i){if(i){i.onload=function(){try{var i=$(t.tweet_el);bfjs.setStyle(i,{"min-height":i[bfjs.get_height]()+"px"});i.update();BF_TWITTER2.load_tweet({tweet_id:t.tweet_id,tweet_el:t.tweet_el,tweet_parent:t.tweet_parent})}catch(n){console.dir(n)}}}if(i){var n=bfjs.children(t.tweet_el,".bf-tweet");if(n){$(n).remove()}}})}else{setTimeout(function(){BF_TWITTER2.load_tweet(t)},100)}},init:function(){EventManager.observe("progload:tweet",function(e){var t=$(e.el),i=t[bfjs.read_attr]("rel:bf_tweet_id"),n=$(t[bfjs.read_attr]("rel:bf_tweet_el")),a=t[bfjs.read_attr]("rel:bf_tweet_parent");if(BF_TWITTER2.PLACED[t.identify()])return true;else BF_TWITTER2.PLACED[t.identify()]=1;BF_TWITTER2.load_tweet({tweet_id:i,tweet_el:n,tweet_parent:a})});BF_TWITTER2.insert();bfjs.each(universal_dom.get_bucket_elements("twitter_hover"),function(t){if(BF_STATIC.tt_page=="Video"){BF_TWITTER2.cache_button(t);$(t).addClassName("hidden")}else{$(t).observe("mouseover",function(e){$(t).addClassName("hidden");BF_TWITTER2.cache_button(t,e)})}});var t=setInterval(function(){if(typeof twttr=="undefined"||!twttr)return false;clearInterval(t);if(twttr.events._handlers){twttr.events.unbind("click");twttr.events.unbind("tweet");twttr.events.unbind("follow")}twttr.events.bind("click",BF_TWITTER2.clicked);twttr.events.bind("follow",BF_TWITTER2.clicked);twttr.events.bind("tweet",BF_TWITTER2.clicked)},500)}};if(window.BuzzLoader){BuzzLoader.register(BF_TWITTER2.init,2)}sailthru_horizon_track=function(t){getCookie=function(t){var i=t+"=";var n=document.cookie.split(";");for(var a=0;a<n.length;a++){var r=n[a];while(r.charAt(0)==" ")r=r.substring(1,r.length);if(r.indexOf(i)==0)return r.substring(i.length,r.length)}return null};var i=getCookie("sailthru_hid");if(!i||!t.domain){return}var n="http://"+t.domain+"/horizon/track?r="+parseInt(Math.random()*1e4,10)+"&url="+encodeURIComponent(document.location);if(t.tag){t.tags=t.tag}if(t.tags){if(t.tags instanceof Array){n+="&tags="+encodeURIComponent(t.tags.join(","))}else if(t.tags instanceof Object){for(var a in t.tags){n+="&tags["+encodeURIComponent(a)+"]="+encodeURIComponent(t.tags[a])}}else{n+="&tags="+encodeURIComponent(t.tags)}n+="&spider=1"}if(t.set){for(var a in t.set){n+="&set["+encodeURIComponent(a)+"]="+encodeURIComponent(t.set[a])}}var r=new Image;r.src=n};sailthru_submit_email=function(t){var i={};var n={longform:"Great! You'll get your first email soon.",WKND:"Thanks! Keep an eye out for the newsletter next week."};var a="/buzzfeed/_email/";var r=$("sailthru_email_form-"+t.id).getValue().strip();var s=t.category?t.category:"";var o=i[s]?i[s]:local.t("Sorry! We weren't able to sign you up. Please try again.");var l=n[s]?n[s]:local.t("Great! You'll get your first email soon.");if($("sailthru_email_success-"+t.id))$("sailthru_email_success-"+t.id).addClassName("hidden");if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).addClassName("hidden");if($("sailthru_email_form-"+t.id))$("sailthru_email_form-"+t.id).removeClassName("error-border");if($("sailthru_email_signup-"+t.id))$("sailthru_email_signup-"+t.id).show();if($("sailthru_email_signup-"+t.id).select(".button2").first())$("sailthru_email_signup-"+t.id).select(".button2").first().disable();if(!r||r==local.t("your email address")){if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).removeClassName("hidden");if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).innerHTML=local.t("Please enter an email address.");if($("sailthru_email_form-"+t.id))$("sailthru_email_form-"+t.id).addClassName("error-border");if($("sailthru_email_signup-"+t.id).select(".button2").first())$("sailthru_email_signup-"+t.id).select(".button2").first().enable()}else{if($("sailthru_email_spinner-"+t.id))$("sailthru_email_spinner-"+t.id).removeClassName("hidden");new Ajax.Request(a,{method:"get",parameters:{email:r,category:s},onSuccess:function(i){EventManager.fire("sailthru:email_add",i.responseText);if(i.responseText.match(/Email added/)){if($("sailthru_email_success-"+t.id))$("sailthru_email_success-"+t.id).removeClassName("hidden");if($("sailthru_email_signup-"+t.id)){$("sailthru_email_signup-"+t.id).hide()}if($("sailthru_email_success-"+t.id))$("sailthru_email_success-"+t.id).innerHTML=l;if(typeof gtrack!="undefined"){gtrack.track_events("","signup/email-success","")}if($$(".js-newsletter-wrap").length){if($("sailthru_email_success-"+t.id))$("sailthru_email_success-"+t.id).innerHTML="<span>Great!</span> You'll get your first email soon.";setTimeout(function(){$s(".js-newsletter-wrap").removeClassName("hidden");$s(".js-newsletter-wrap #signup_"+s.toLowerCase()).setAttribute("checked","checked");$s(".js-newsletter-form__input").value=r;$s(".js-individual-newsletter-wrap").addClassName("hidden");$s(".js-individual-newsletter-header").addClassName("hidden")},1500)}}else{if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).removeClassName("hidden");if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).innerHTML=o;if($("sailthru_email_signup-"+t.id))$("sailthru_email_signup-"+t.id).show();if($("sailthru_email_form-"+t.id))$("sailthru_email_form-"+t.id).addClassName("error-border");if($("sailthru_email_signup-"+t.id).select(".button2").first())$("sailthru_email_signup-"+t.id).select(".button2").first().enable()}if($("sailthru_email_spinner-"+t.id))$("sailthru_email_spinner-"+t.id).addClassName("hidden")},onFailure:function(i){if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).removeClassName("hidden");if($("sailthru_email_failure-"+t.id))$("sailthru_email_failure-"+t.id).innerHTML=o;if($("sailthru_email_signup-"+t.id))$("sailthru_email_signup-"+t.id).show();if($("sailthru_email_form-"+t.id))$("sailthru_email_form-"+t.id).addClassName("error-border");if($("sailthru_email_spinner-"+t.id))$("sailthru_email_spinner-"+t.id).addClassName("hidden");if($("sailthru_email_signup-"+t.id).select(".button2").first())$("sailthru_email_signup-"+t.id).select(".button2").first().enable()}})}return false};var newsletter_email_signup=function(){var t,i={email:0,verticals:0,server:0},n,a;this.displayConfirmation=function(){bfjs.removeClass(document.getElementById("success-message"),"hidden")};this.displayErrors=function(){var t="";if(i.email>0){t+="<p>Please enter a valid email address</p>"}if(i.server>0||i.verticals>0){t+="<p>Sorry! Something went wrong. Please try again.</p>"}bfjs.updateHTML(document.getElementById("error-message"),t);bfjs.removeClass(document.getElementById("error-message"),"hidden")};this.resetConfirm=function(){bfjs.addClass(document.getElementById("success-message"),"hidden")};this.resetErrors=function(){bfjs.addClass(document.getElementById("error-message"),"hidden");i={email:0,verticals:0,server:0}};this.submitForm=function(e){e.preventDefault();var t={email:"",verticals:""};this.resetErrors();this.resetConfirm();t.email=document.getElementById("email-field").value;t.verticals=document.getElementById("newsletter-form").name;this.track("newsletters/signup");if(this.validates(t)){this.subscribe(t)}else{this.track("signup/validation-error");this.displayErrors()}};this.subscribe=function(n){t=document.getElementById("newsletter-spinner");bfjs.removeClass(t,"hidden");a=document.getElementById("bpage-email-signup__inputs");bfjs.addClass(a,"bpage-email-signup__spinner-on");var r=new XMLHttpRequest;var s="/buzzfeed/_email/";var o=JSON.stringify({email:n.email,category:n.verticals});r.onload=function(){if(r.responseText.indexOf("an error occurred")==-1){email_signup.track("signup/email-success");email_signup.displayConfirmation()}else{++i.server;email_signup.displayErrors()}bfjs.addClass(t,"hidden");bfjs.removeClass(a,"bpage-email-signup__spinner-on")};r.open("POST",s,true);r.send(o)};this.track=function(t,i){if(typeof gtrack!="undefined"){var a=n[0].getAttribute(bfjs.gtrack_cat);gtrack.track_events(a,t,i)}};this.validates=function(t){var n;if(!email_signup.validateEmail(t.email)){++i.email}if(t.verticals==""){
++i.verticals}if(i.email>0||i.verticals>0){n=false}else{n=true}return n};this.validateEmail=function(t){var i=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return i.test(t)};this.init=function(){n=document.getElementsByClassName("bpage-email-signup__form")}};var email_signup=new newsletter_email_signup;bfjs.onPageLoad(email_signup.init());var playing_animations=new Object;BFAnimatedGifPlayer=function(){this.load_count=0;this.play=function(t,i){this.overlay=i;var n=$(t.image_id).src.replace(/_preview\.gif$/,".gif");this.image=new Image;this.image.src=n;$(t.image_id).src=n;$(t.image_id).parentNode.className+=" animated-spinner";this.gifIsLoaded()};this.gifIsLoaded=function(){this.load_count++;var t=this.load_count*200;if(!this.image.complete&&t<1e4){var i=function(){this.gifIsLoaded()}.bind(this);setTimeout(i,200)}else{this.overlay.hide()}}};function RegisterAnimation(t){if(!t||!t.image_element_play_id){console.error("RegisterAnimation needs args: {image_element_play_id: 'animation-id-1234'}")}$(t.image_element_play_id).observe("click",function(e){e.stop();var t=e.element().getAttribute("gif_animation");var i=new BFAnimatedGifPlayer;i.play(JSON.parse(t),e.element())})}if(typeof deconcept=="undefined"){var deconcept=new Object}if(typeof deconcept.util=="undefined"){deconcept.util=new Object}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object}deconcept.SWFObject=function(t,i,n,a,r,s,o,l,u,d){if(!document.getElementById){return}this.DETECT_KEY=d?d:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object;this.variables=new Object;this.attributes=new Array;if(t){this.setAttribute("swf",t)}if(i){this.setAttribute("id",i)}if(n){this.setAttribute("width",n)}if(a){this.setAttribute("height",a)}if(r){this.setAttribute("version",new deconcept.PlayerVersion(r.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(s){this.addParam("bgcolor",s)}var c=o?o:"high";this.addParam("quality",c);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _=l?l:window.location;this.setAttribute("xiRedirectUrl",_);this.setAttribute("redirectUrl","");if(u){this.setAttribute("redirectUrl",u)}};deconcept.SWFObject.prototype={useExpressInstall:function(t){this.xiSWFPath=!t?"expressinstall.swf":t;this.setAttribute("useExpressInstall",true)},setAttribute:function(t,i){this.attributes[t]=i},getAttribute:function(t){return this.attributes[t]},addParam:function(t,i){this.params[t]=i},getParams:function(){return this.params},addVariable:function(t,i){this.variables[t]=i},getVariable:function(t){return this.variables[t]},getVariables:function(){return this.variables},getVariablePairs:function(){var t=new Array;var i;var n=this.getVariables();for(i in n){t[t.length]=i+"="+n[i]}return t},getSWFHTML:function(){var t="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}t='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';t+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var i=this.getParams();for(var n in i){t+=[n]+'="'+i[n]+'" '}var a=this.getVariablePairs().join("&");if(a.length>0){t+='flashvars="'+a+'"'}t+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}t='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';t+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var r=this.getParams();for(var n in r){t+='<param name="'+n+'" value="'+r[n]+'" />'}var s=this.getVariablePairs().join("&");if(s.length>0){t+='<param name="flashvars" value="'+s+'" />'}t+="</object>"}return t},write:function(t){if(this.getAttribute("useExpressInstall")){var i=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(i)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=typeof t=="string"?document.getElementById(t):t;n.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var t=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var i=navigator.plugins["Shockwave Flash"];if(i&&i.description){t=new deconcept.PlayerVersion(i.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var n=1;var a=3;while(n){try{a++;n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a);t=new deconcept.PlayerVersion([a,0,0])}catch(e){n=null}}}else{try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");t=new deconcept.PlayerVersion([6,0,21]);n.AllowScriptAccess="always"}catch(e){if(t.major==6){return t}}try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}}if(n!=null){t=new deconcept.PlayerVersion(n.GetVariable("$version").split(" ")[1].split(","))}}}return t};deconcept.PlayerVersion=function(t){this.major=t[0]!=null?parseInt(t[0]):0;this.minor=t[1]!=null?parseInt(t[1]):0;this.rev=t[2]!=null?parseInt(t[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(t){if(this.major<t.major){return false}if(this.major>t.major){return true}if(this.minor<t.minor){return false}if(this.minor>t.minor){return true}if(this.rev<t.rev){return false}return true};deconcept.util={getRequestParameter:function(t){var i=document.location.search||document.location.hash;if(t==null){return i}if(i){var n=i.substring(1).split("&");for(var a=0;a<n.length;a++){if(n[a].substring(0,n[a].indexOf("="))==t){return n[a].substring(n[a].indexOf("=")+1)}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var t=document.getElementsByTagName("OBJECT");for(var i=t.length-1;i>=0;i--){t[i].style.display="none";for(var n in t[i]){if(typeof t[i][n]=="function"){t[i][n]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(t){return document.all[t]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;BF_VIDEO_TYPES_STRING="YouTube, Vimeo, Soundcloud, Spotify, Facebook, Hulu, DailyMotion or MySpace Video";bf2_terminal_Video=function(){this.type=null;this.id=null;this.embed_link=null;this.detected=false;this.src_link=null;this.getting_thumbnail=false;this.detect_type=function(t){var i=[];if(!t){return}t=t[bfjs.trim]();this.detected=false;i[0]=t.match(/(http(s)?:\/\/)?(\w+\.)?youtube\.com\/((watch(\?|\#\!|\#)(.*\&)?v=)|(v\/|embed\/))([\w-]+)((#|&|&amp;)t=([\w-]+))?/);i[1]=t.match(/(http(s)?:\/\/)?(\w+\.)?youtube\.com\/user\/(.*)\#([\w\d\-\/]+\/)?([\w-]{3,})(\/[\w\d\-\/]+)?((#|&|&amp;)t=([\w-]+))?/);i[2]=t.match(/(http(s)?:\/\/)?(\w+\.)?youtu\.be\/([\w-]{3,})(?:\?t=([\w-]+))?/);if(i[0]||i[1]||i[2]){this.type="youtube";this.id=i[2]?i[2][4]:i[1]?i[1][6]:i[0][9];if(i[0]&&i[0][12])this.start_time=i[0][12];else if(i[1]&&i[1][8])this.start_time=i[1][8];else if(i[2]&&i[2][5])this.start_time=i[2][5];else this.start_time="";if(this.start_time!==""){var n=this.start_time.match(/(\d*)(\D)?(\d*)(\D)?/);this.start_time=0;if(n[2]&&n[2]==="m")this.start_time+=parseInt(n[1],10)*60;else if(n[2]&&n[2]==="s")this.start_time+=parseInt(n[1],10);else if(n[1])this.start_time+=parseInt(n[1],10);if(n[2]&&n[2]==="m"&&n[3])this.start_time+=parseInt(n[3],10)}this.embed_link="https://youtube.com/watch?v="+this.id;if(this.start_time)this.embed_link=this.embed_link+"&amp;t="+this.start_time;this.detected=(new Date).valueOf();this.src_link="https://www.youtube.com/"+(i[0]&&i[0][4]=="embed/"?"embed":"v")+"/"+this.id;if(this.start_time)this.src_link=this.src_link+"&amp;t="+this.start_time;this.img0="https://img.youtube.com/vi/"+this.id+"/0.jpg";this.img1="https://img.youtube.com/vi/"+this.id+"/1.jpg";this.img2="https://img.youtube.com/vi/"+this.id+"/2.jpg";this.img3="https://img.youtube.com/vi/"+this.id+"/3.jpg";this.thumbs=[this.img1,this.img0,this.img2,this.img3];this.thumbnail_available=true}if(!this.detected){i=t.match(/(http(s)?:\/\/)?(\w+\.)?vimeo\.com\/(video\/|moogaloop\.swf\?clip_id=)*(\d+)/);if(i){this.type="vimeo";this.id=i[5];this.embed_link="https://vimeo.com/"+this.id;this.detected=true;this.src_link="https://player.vimeo.com/"+"video/"+this.id;this.thumbnail_available=true}}if(!this.detected){var a=t.match(/^<iframe.*"(http(s)?:\/\/)?(\w+\.)?facebook\.com\/plugins\/(post|video)\.php\?href\=([^"]+)/);if(a&&a[5]){t=decodeURIComponent(a[5])}}if(!this.detected){i=[];i[0]=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/(video\/video\.php\?v\=|v\/)(\d+)/);i[1]=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/(video\.php\?v\=|v\/)(\d+)/);i[2]=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/videos\/(\d+)/);if(t.match(/class="fb-video"/)){i[3]=t.match(/data-href="\/([\w\.]+)\/([\w\.]+)\/([\w\.]+)\/(\d+)/);this.id=i[3]?i[3][4]:""}i[5]=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/videos\/.*\/(\d+)/);i=i[0]||i[1]||i[2]||i[3]||i[5];if(i){var r="https://www.facebook.com/video.php?v=";this.type="facebook";this.id=this.id||i[5];this.embed_link=r+this.id;this.detected=true;this.src_link="https://www.facebook.com/v/"+this.id;this.possible_privacy_restrictions=true;this.thumbnail_available=false}}if(!this.detected){i=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/posts\/([\w\d\.]+)/);if(i){this.type="facebook_post";this.id=i[4];this.post_id=i[5];this.embed_link="https://www.facebook.com/"+this.id+"/posts/"+this.post_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}if(!this.detected){i=t.match(/(http(s)?:\/\/)(\w+\.)facebook\.com\/photo\.php\?v=([\d]+)/);if(i){this.type="facebook_video_post";this.post_id=i[4];this.embed_link="https://www.facebook.com/photo.php?v="+this.post_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}if(!this.detected){if(i=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/photo.php\?fbid=(\w+)(?:&amp;|&)set=([\w\d\.\-]+)(?:&amp;|&)type=([\w\d\.]+)/)){this.type="facebook_photo";this.id=i[4];this.set_id=i[5];this.type_id=i[6];this.embed_link="https://www.facebook.com/photo.php?fbid="+this.id+"&amp;set="+this.set_id+"&amp;type="+this.type_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}else if(i=t.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/photos\/([\w\.\-]+)\/([\w\.]+)\/(?:.*type=([\w\d\.]+))?/)){this.type="facebook_photo";this.id=i[4];this.set_id=i[5];this.post_id=i[6];this.type_id=i[7];this.embed_link="https://www.facebook.com/photo.php?fbid="+this.post_id+"&amp;set="+this.set_id+"&amp;type="+(this.type_id?this.type_id:"1");this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}if(i=t.match(/https?:\/\/([\w\.\-\_]+\.)?facebook\b\.com\/(permalink\.php\?story_fbid|media\/set\/)[^\"]*/)){this.type="facebook_photo_set";this.embed_link=i[0];this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}if(!this.detected){var s=[RegExp(/(http(s)?:\/\/buzzfeed-video1.s3.amazonaws.com\/.*)/),RegExp(/(http(s)?:\/\/s\.video\.buzzfeed\.com\/.*)/),RegExp(/(http(s)?:\/\/s3.amazonaws.com\/buzzfeed-video1\/.*)/),RegExp(/(http(s)?:\/\/s3.amazonaws.com\/video-transcoder-stage\/.*)/),RegExp(/(http(s)?:\/\/video-cdn\.buzzfeed\.com\/.*)/)];for(var o=0;o<s.length;o++){i=t.match(s[o]);if(i){this.type="buzzfeed";if(o==3||o==4){this.subtype="transcoder"}this.id=i[1].replace(/http:/,"https:");this.embed_link=this.id;this.detected=true;this.src_link=this.id;this.thumbnail_available=false;if(t.match(/(\.mp4|\.flv)$/i)){this.thumbnail=t.replace(/(\.mp4|\.flv)$/i,".jpg")}break}}}if(!this.detected){i=t.match(/^https?:\/\/vids\.myspace\.com\/.*ideoID=(\d+)/i);if(i){this.type="myspace";this.id=i[1];this.embed_link="https://vids.myspace.com/index.cfm?fuseaction=vids.individual&VideoID="+this.id;this.detected=true;this.src_link="https://mediaservices.myspace.com/services/media/embed.aspx/m="+this.id+",t=1,mt=video"}}if(!this.detected){i=t.match(/https?:\/\/vids\.myspace\.com\/.*ideoID=(\d+)/i);if(i){this.type="myspace";this.id=i[1];this.embed_link="https://vids.myspace.com/index.cfm?fuseaction=vids.individual&VideoID="+this.id;this.detected=true;this.src_link="https://mediaservices.myspace.com/services/media/embed.aspx/m="+this.id+",t=1,mt=video"}}if(!this.detected){i=t.match(/hulu\.com\/embed(?:\.html)?(?:\?eid=|\/)([\w\d]+)/i);if(i){this.type="hulu";this.id=i[1];this.embed_link="https://secure.hulu.com/embed.html?eid="+this.id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){if(/http(s)?:\/\/(w\.)?soundcloud.com\/player/i.test(t)){i=t.match(/http(s)?:\/\/(w\.)?soundcloud.com\/player\/\?([\/\d\w=%\.;:\-_&]*)/i);var l=i[3].replace(/&amp;/g,"&");var u=bfjs.toQueryParamsSafe(l);var d=u.url.indexOf("/playlists/")!==-1;this.id=u.hasOwnProperty("url")?u.url:"";this.soundcloud_artwork=u.hasOwnProperty("show_artwork")?u.show_artwork:"true";if(d){this.soundcloud_visual="true"}else{this.soundcloud_visual=u.hasOwnProperty("visual")?u.visual:"false"}this.type="soundcloud";this.tag="iframe";this.detected=true;this.embed_link="https://w.soundcloud.com/player/?url="+encodeURIComponent(this.id)+"&color=ff5500&auto_play=false&hide_related=false"+"&visual="+this.soundcloud_visual+"&show_artwork="+this.soundcloud_artwork;this.src_link=this.embed_link}}if(!this.detected&&t.match(/spotify/)){if(t.match(/open\.spotify/)){t=t.replace(/https?:\/\/open\.spotify\.com/,"spotify");t=t.replace(/\//g,":")}i=t.match(/(spotify:.*:[0-9a-zA-Z]{22})/i);if(i){this.type="spotify";this.tag="iframe";this.id=i[1];this.embed_link="https://embed.spotify.com/?uri="+this.id;var c=t.match(/utm_[source|medium|campaign|content|term]+=[^&"]+/gi);if(c){this.embed_link+="&"+c.join("&")}this.detected=true;this.src_link=i[1]}}if(acl.user_can("general_admin")&&!this.detected&&t.match(/polldaddy/)){i=t.match(/polldaddy.com\/poll\/(\d+)(\/)?/i);if(i){this.type="polldaddy";this.tag="script";this.id=i[1];this.embed_link="https://polldaddy.com/poll/"+this.id+"/";this.detected=true;this.src_link="https://polldaddy.com/poll/"+this.id+"/";this.thumbs=[BF_STATIC.image_root+"/static/images/public/contrib/poll-daddy.gif"];this.thumbnail_available=true}}if(acl.user_can("general_admin")&&!this.detected&&t.match(/storify/)){i=t.match(/storify.com\/([^\/]+\/[^\/.]+)/i);if(i){this.type="storify";this.tag="script";this.id=i[1];this.embed_link="https://storify.com/"+this.id;this.detected=true;this.thumbnail_available=false;this.src_link="https://storify.com/"+this.id}}if(!this.detected){i=t.match(/(https?:\/\/(www\.)?dailymotion\.com\/swf\/(\w+))/i);if(i){this.type="daily motion";this.id=i[3];this.embed_link="https://www.dailymotion.com/swf/"+this.id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){i=t.match(/https?:\/\/(www\.)?dailymotion\.com\/.*(related|video)\/([\w-]+)/i);if(i){this.type="daily motion";this.id=i[3];this.embed_link="https://www.dailymotion.com/swf/"+this.id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){i=t.match(/https?:\/\/(embed|pshared)\.5min\.com\/(?:.*\/?)PlayerSeed(?:.*\/?)sid=(\d*)(?:.*|&amp;|&)(?:.*|&amp;|&)playList=(\d*)/i);if(i){this.type="aol";this.id=i[2];this.playlist_id=i[3];this.embed_link="https://embed.5min.com/PlayerSeed/?sid="+this.id+"&playList="+this.playlist_id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){i=t.match(/instagram.com\/p\/([^\/]+)(\/)?/i);matches_user=t.match(/instagram.com\/(\w+)\/p\/([^\/]+)(\/)?/i);if(i||matches_user){this.type="instagram";this.id=i?i[1]:matches_user[2];this.embed_link="https://instagram.com/p/"+this.id+"/";this.detected=true;this.thumbnail_available=false;this.src_link=this.embed_link}}if(!this.detected){i=t.match(/vine.co\/v\/([^\/]+)/i);if(i){this.type="vine";this.id=i[1];this.embed_link="https://vine.co/v/"+this.id;this.detected=true;this.thumbnail_available=false;this.src_link=this.embed_link}}if(!this.detected){i=t.match(/<iframe src=["'](https:\/\/(.*)\.eventfarm.com)["']><\/iframe>/);if(i){this.type="eventfarm";this.id=i[2];this.embed_link=i[1];this.detected=true;this.thumbnail_available=false;this.src_link=i[1]}}if(!this.detected){i=t.match(/((?:http(?:s)?:\/\/)?(?:\w+\.)?whisper\.sh\/whisper\/(\w+)(?:\?[^'"]+)?)/i);if(i){var _=i[2],f=bfjs.toQueryParamsSafe(i[1]),h=f.alt_text;if(!h&&(alt_matches=t.match(/alt=['"]([^'"]+)/))){h=alt_matches[1]}this.type="whisper";this.id=_;this.alt_text=h?encodeURIComponent(h):"";this.src_link="https://whisper.sh/whisper/"+this.id;this.embed_link=this.src_link+"?alt_text="+this.alt_text;this.thumbnail_available=false;this.detected=true}}if(acl.user_can("upload_audio_files")&&!this.detected){i=t.match(/.*\/([^\/]+)\.mp3/i);if(i){this.type="audio";this.id=i[1];this.embed_link=t;this.detected=true;this.thumbnail_available=false}}if(BF_STATIC.bf_test_mode){var p=BF_STATIC.test_thumb?BF_STATIC.test_thumb:BF_STATIC.base_url+"/static/images/public/t/640x480.jpg";this.thumbs=BF_STATIC.test_thumbs?BF_STATIC.test_thumbs:[p,p,p,p]}};this.detect_thumbnail_url=function(t,i){if(this.getting_thumbnail)return;else this.getting_thumbnail=true;if(typeof t==="function"){i=t;t=this.embed_link}if(!t)return false;t=t[bfjs.trim]();if(t.match("youtube"))t=t.replace(/#.*$/,"");var n="/buzzfeed/_rservice/?uri="+encodeURIComponent(t)+"&thumbnail_url",a=this;if(this.thumbs&&this.thumbs.length){if(typeof i==="function"){i.call(a);return false}}if(BF_STATIC.bf_test_mode&&BF_STATIC.test_thumbs){a.getting_thumbnail=false;a.thumbs=BF_STATIC.test_thumbs;if(typeof i==="function")i.call(a)}else{new Ajax.Request(n,{method:"get",onComplete:function(t){a.getting_thumbnail=false;a.thumbs=[t.responseText];if(typeof i==="function")i.call(a)}})}};this.detect_duration=function(t,i){if(this.getting_duration)return;else this.getting_duration=true;if(typeof t==="function"){i=t;t=this.embed_link}if(!t)return false;t=t[bfjs.trim]();t=t.replace(/&amp;t=([\w-]+)/,"");var n="/buzzfeed/_rservice/?uri="+encodeURIComponent(t)+"&video_duration",a=this;if(this.duration){if(typeof i==="function"){i.call(a);return false}}if(BF_STATIC.bf_test_mode){a.getting_duration=false;a.duration=666;if(typeof i==="function")i.call(a)}else{new Ajax.Request(n,{method:"get",onComplete:function(t){a.getting_duration=false;a.duration=t.responseText;if(typeof i==="function")i.call(a)}})}};this.isVideo=function(){return this.type?true:false}};BF_initSwfObject=function(t,i){try{if(typeof t!="string")return null;t=t[bfjs.trim]();var n=new bf2_terminal_Video,a=null,r=425,s=355,o=(new Date).getTime(),l=0,u="",d="",c="",_="";if(i&&i.width)r=i.width;if(i&&i.height)s=i.height;if(i&&i.id)o=i.id;if(i&&i.dfp&&i.dfp==true)_="&dfp=true";if(i&&i.autoplay){l=i.autoplay}if(i&&i.hideYouTubeInfo||BF_STATIC.tt_page=="Videos"){u="&autohide=2&showinfo=0"}if(i&&i.modestBranding||BF_STATIC.tt_page=="Videos"){c="&modestbranding=1"}n.detect_type(t);if(n.detected)t=n.src_link;if(t.match(/vimeo\.com/)){a={addParam:function(){},write:function(i){$(i).insert('<iframe src="'+t+'" frameborder="0" width="'+r+'" height="'+s+'"></iframe>')},getSWFHTML:function(){return'<iframe src="'+t+'" frameborder="0" width="'+r+'" height="'+s+'"></iframe>'}}}else if(t&&t.match(/(hulu|myspace|flickr)\.com/)){a=new SWFObject(t,o,r,s,"6","#000")}else if(t.match(/youtube\.com/)){if(n.start_time)d="&start="+n.start_time;if(t.match(/embed/)){a={getId:function(){return n.id},getEmbedCode:function(){return'<div style="position:relative;" id="video_wrapper_'+n.id+'"><iframe id="yt_'+n.id+'" type="text/html" allowscriptaccess="always" allowfullscreen="true" width="'+r+'" height="'+s+'" src="'+t+"?version=3&fs=1&hl=en&origin="+window.location.protocol+"//"+window.location.host+"&playerapiid=embed_"+n.id+"&autoplay="+l+u+_+c+d+'&enablejsapi=1&wmode=opaque" bgcolor="#000" class="ytvideo"></iframe></div>'}}}else{a=new SWFObject(t+"?version=3&fs=1&hl=en&playerapiid="+o+"&autoplay="+l+u+_+c+d+"&enablejsapi=1",o,r,s,"6","#000");a.addParam("wmode","transparent");a.addParam("allowscriptaccess","always")}}else if(n.isVideo()&&n.type=="buzzfeed"){a=new FlowVid(i);a.width=r;a.height=s;if(n.subtype&&n.subtype=="transcoder"){a.vid_id=t.replace(/^(https?:\/\/)(video-cdn.buzzfeed\.com\/|s3\.amazonaws\.com\/video-transcoder-stage\/)(.*)(\.[A-Z0-9]+)$/i,"$3")}else{a.vid_id=t.replace(/^(https?:\/\/)(s\.video\.buzzfeed\.com\/|s3\.amazonaws\.com\/buzzfeed\-video1\/|buzzfeed-video1\.s3\.amazonaws\.com\/)(.*)(\.[A-Z0-9]+)$/i,"$3")}a.url=t;if(window.autoplay!="undefined"&&window.autoplay==true)l=true;a.vid_autoplay=l}else if(t.match(/whisper\.sh/i)){a=new SWFObject(t+(!t.match(/\?/)?"?":"")+"&amp;autostart=false&amp;autoplay="+l+"&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;border=0",o,r,s,"6","#000");a.addVariable("whisper_id",n.id);a.addVariable("alt_text",n.alt_text)}else{a=new SWFObject(t+(!t.match(/\?/)?"?":"")+"&amp;autostart=false&amp;autoplay="+l+"&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;border=0",o,r,s,"6","#000")}return a}catch(e){console.dir(e);return false}};var FlowVid=function(t){this.use_html5=false;this.width="100%";this.height="100%";this.debug=false;this.track_ga=true;this.track_formula=false;this.vid_id="unknown-video";this.url=null;this.vid_player="flowplayer";this.vid_onloadstart=null;this.vid_onplay=null;this.vid_onended=null;this.vid_cuepoints={25:null,50:null,75:null};this.vid_onclick=null;this.vid_autoplay=false;this.vid_scaling="fit";this.hide_controls=false;this.timestamp=(new Date).getTime();this.html5_support=function(){var t=document.createElement("video"),i=false;try{if(i=!!t.canPlayType){i=new Boolean(i);i.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");i.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");i.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(e){}return i};this.default_onloadstart=function(){if($(this.player_div)&&!$(this.player_div).tracked.impression){$(this.player_div).tracked.impression=true;this._video_track(this.vid_id,"[nc]video:load","",null,true);if(this.vid_onloadstart){if(this.debug)console.log("Video Track (Custom, onloadstart): [...]");try{this.vid_onloadstart()}catch(e){console.log("ERROR: Video Track (Custom, onloadstart): "+e)}}}};this.default_onplay=function(){if($(this.player_div)&&!$(this.player_div).tracked.start){$(this.player_div).tracked.start=true;this._video_track(this.vid_id,"video-play");this.bfaVideoTrack($(this.player_div),this.url?this.url:"","play");if(this.vid_onplay){if(this.debug)console.log("Video Track (Custom, onplay): [...]");try{this.vid_onplay()}catch(e){console.log("ERROR: Video Track (Custom, onplay): "+e)}}}};this.default_onended=function(){if($(this.player_div)&&!$(this.player_div).tracked.finish){$(this.player_div).tracked.finish=true;this._video_track(this.vid_id,"[nc]video:end");if(this.vid_onended){if(this.debug)console.log("Video Track (Custom, onended): [...]");try{this.vid_onended()}catch(e){console.log("ERROR: Video Track (Custom, onended): "+e)}}}};this.default_timeupdate=function(){var t=$(this.player_div);for(var i in this.vid_cuepoints){if(!t.tracked.reach[i]){if(t.currentTime*1e3>Math.floor(t.duration*i*10-(i==100?100:0))){t.tracked.reach[i]=true;this._video_track(this.vid_id,"[nc]video:reached",i+"%")}}}};this.bfaVideoTrack=function(t,i,n){if(!window.bfa||!(window.bfa instanceof Function)||!window.bfaBinder||n!=="play"){return}var a=t?bfaBinder.parser.findLocation(t):"";bfa("track","click","Video-Play",a,"",{videoUrl:i})};this._video_track=function(i,n,a){var r=n+(a?"/"+a:"");if(this.debug)console.log("Video Track: "+r+"/"+i);if(this.track_ga&&typeof _gaq!="undefined"&&_gaq!=null){try{var s=gtrack.tt_page;if(t.dfp){var o="dfp/"+n}else{var o=n}var l=this.vid_id;var u=a?":"+a:"";var d=o.match(/load/)?true:false;gtrack.track_events(s,o+u,l,"",d)}catch(e){console.log("ERROR: Video Track")}}};this.addParam=function(t,i){};this.write=function(t){var i,n=BF_STATIC.static_root+"/js/public/video/flowplayer-3.2.8.min.js?v="+BF_STATIC.version;if(!this.url){console.error("Video URL must be specified!");return}try{this.player_div="player_"+this.timestamp;var a=this.url,r=navigator.userAgent.toLowerCase(),s=$(t);if(!this.vid_thumbnail&&this.url.match(/^(.*)(\.)([A-Z0-9]+)$/i))this.vid_thumbnail=this.url.replace(/^(.*)(\.)([A-Z0-9]+)$/i,"$1.jpg");if(this.use_html5||r.match(/iphone|ipad|android/i)||false&&r.match(/chrome|safari/i)){var o=document.createElement("video");o.id=this.player_div;o.tracked={impression:false,start:false,finish:false,reach:[]};o.style.width=this.width+((this.width+"").match(/%/)?"":"px");o.style.height=this.height+((this.height+"").match(/%/)?"":"px");o.setAttribute("src",a.replace(/(\.flv)$/i,".mp4"));o.addClassName("bf_video");o.binding=this;if(this.vid_thumbnail)o.setAttribute("poster",this.vid_thumbnail);if(r.match(/android/)){o.setAttribute("onclick","this.play();")}else{o.setAttribute("controls","controls")}if(this.default_timeupdate)o.setAttribute("ontimeupdate","this.binding.default_timeupdate()");if(this.default_onended)o.setAttribute("onended","this.binding.default_onended()");if(this.default_onplay)o.setAttribute("onplay","this.binding.default_onplay()");if(this.default_onloadstart)o.setAttribute("onloadstart","this.binding.default_onloadstart()");$(t).insert(o)}else if(this.vid_player=="flowplayer"){var o=document.createElement("div"),l=this;this.controls_height=this.hide_controls?0:24;o.id=this.player_div;o.tracked={impression:false,start:false,finish:false,reach:[]};o.style.width=this.width+((this.width+"").match(/%/)?"":"px");o.style.height=(this.height+"").match(/%/)?this.height:parseInt(this.height)+this.controls_height+"px";$(t).insert(o);var u={playlist:[],screen:{width:"100%",height:"100%",top:0,left:0},canvas:{backgroundGradient:"none",background:"rgba(34,34,34,1)"},plugins:{controls:{playlist:false,autoHide:this.hide_controls?"auto":"never",buttonOverColor:"rgba(255,255,255,1)",progressGradient:"none",timeBgColor:"rgb(0,0,0,0)",durationColor:"rgba(255,255,255,1)",timeBorder:"0px solid rgba(0,0,0,0)",sliderGradient:"none",buttonColor:"rgba(255,255,255,.82)",backgroundGradient:"none",timeColor:"rgba(255,255,255,1)",borderRadius:"0px",tooltipTextColor:"rgba(255,255,255,1)",timeSeparator:" ",bufferGradient:"none",volumeBorder:"1px solid rgba(255,255,255,.36)",volumeSliderColor:"rgba(255,255,255,.09)",volumeColor:"rgba(255,255,255,1)",sliderBorder:"1px solid rgba(255,255,255,.36)",volumeSliderGradient:"none",tooltipColor:"rgba(0,0,0,1)",sliderColor:"rgba(255,255,255,.09)",buttonOffColor:"rgba(130,130,130,1)",progressColor:"rgba(0,119,238,1)",bufferColor:"rgba(255,255,255,.18)",backgroundColor:"rgba(34,34,34,1)",height:24,opacity:1}},onLoad:function(){if(l.default_onloadstart)l.default_onloadstart()},key:"#$6f5e940abb368c2a4e2"};if(!this.vid_autoplay&&this.vid_thumbnail)u.playlist.push({url:this.vid_thumbnail,duration:0,scaling:this.vid_scaling});u.playlist.push({url:a,autoPlay:this.vid_autoplay,scaling:this.vid_scaling,onStart:function(t){if(l.default_onplay)l.default_onplay();if(t.fullDuration>0){for(var i in l.vid_cuepoints){t.onCuepoint(Math.floor(t.fullDuration*i*10-(i==100?100:0)),function(t){if($(l.player_div)&&!$(l.player_div).tracked.reach[this]){$(l.player_div).tracked.reach[this]=true;l._video_track(l.vid_id,"[nc]video:reached",this+"%");if(l.vid_cuepoints[this]){if(l.debug)console.log("Video Track (Custom, reached/"+this+"%): [...]");try{l.vid_cuepoints[this](l)}catch(e){console.log("ERROR: Video Track (Custom, reached/"+this+"%): "+e)}}}}.bind(i))}}},onFinish:function(t){if(l.default_onended)l.default_onended()}});i=function(){flowplayer(l.player_div,{src:"https://s3.amazonaws.com/buzzfeed-video1/flowplayer.commercial-3.2.7.swf",onFail:function(){$(l.player_div).up(".video-embed-area").addClassName("video-embed-noflash")},wmode:"opaque"},u)};if(typeof flowplayer=="undefined"){bfjs.createScript({url:n,onSuccess:i,onError:function(){console.error("Error loading script "+n)}})}else{i()}}else{console.error("FlowVid Error: Video player type not specified.")}}catch(e){console.error("FlowVid Error: "+e)}}};ga_cv_map={1:"template",2:"postCategory",3:"pageType",4:"postAuthor",5:"postBadges",6:"isRegistered",7:"signupDate",8:"facebookConnected",9:"registrationPath",10:"userFlags",11:"allowsEmailUpdates",12:"adBlocked",14:"origReferrer",15:"origPageType",16:"origSegment",17:"username",18:"lastVisit",23:"numReactions",24:"reactionCounts",25:"numComments",26:"numPosts",27:"country",28:"categoryCounts",29:"categoryShareCounts",30:"logged-in",31:"facebookConnected",32:"numShares",33:"numReactions",34:"time_since_last_visit",35:"intlEdition",36:"geofreshRank",37:"postTags1",38:"postTags2",39:"postTags3",40:"numEvents",41:"sinceFV_d",42:"sinceFDHPV_d",43:"nDHPV",44:"postFlags",45:"postPublished",46:"language",47:"campaignID",48:"ReactGifImpression",49:"postForm",50:"mobileVariation"};var BF_GTrack=function(){var t=this;this.trackable_tags=["a","input","button","i","textarea"];this.tt_page=typeof BF_STATIC.tt_page!="undefined"?BF_STATIC.tt_page:"NA";this.scrollDepth=0;this.UserCVIDs=[6,8,9,10,11,14,15],this.VistCVIDs=[27,30,31,32,33,34],this.ShareCVs=[];this.postEvents=[];this.click_event_storage=[],this.comscore_url=(document.location.protocol=="https:"?"https://sb":"http://b")+".scorecardresearch.com/b?";this.trackedScrollShare=false;this.hasBottomShare;this.shareBottom=0;this.shareTop=0;this.scrollBottom=0;if(BF_STATIC.bf_env==="dev"){bfa("setSettings",{develop:true})}this.ga_status=function(){return typeof _gaq!="undefined"&&typeof _gat!="undefined"&&!gtrack.checkTestMode()?true:false};this.ga_debug=function(){return document.location.search.match(/debug=ga/)?true:false};this.track_timing=function(t,i,n,a,r){if(BF_STATIC.bf_env=="live"&&!BF_STATIC.bf_test_mode){_gaq.push(["_trackTiming",t,i,n,a,r])}else{console.log("TrackTiming: ['"+t+"','"+i+"', "+n+", '"+a+"', "+r+"]")}};this.is_homepage=function(){var t=BF_STATIC&&BF_STATIC.hasOwnProperty("tt_page")?BF_STATIC["tt_page"]:"";return t.match("Home|France|Espanol|Brasil")?true:false};this.init=function(){bfjs.universal_each(gtrack.trackable_tags,function(t){var i=bfjs.isMobile()?"click":"mousedown";$(document.body).on(i,t,function(i){var n=bfjs.eventFindEl(i,t);gtrack.click(n)})})};this.cleanLink=function(t){if(typeof t=="string"){return t.replace("http://","").replace("https://","").replace("www.","")}else{return null}};this.click=function(t){
var i=$(t)[bfjs.read_attr](bfjs.gtrack_act);var n=$(t)[bfjs.read_attr](bfjs.gtrack_label);var a=gtrack.findCatLabel(t);var r=t.tagName.toUpperCase();if(typeof i!="string"){i="link";n=gtrack.cleanLink(t.href)}if(i.indexOf("dfp")>=0){var s=t.href.match(/doubleclick/)&&t.href.match(/http/)&&t.href.split("http://").length>2?true:false;n=(n?n+"/":"")+(s?gtrack.cleanLink(t.href.split("http://")[2]):gtrack.cleanLink(t.href))}gtrack.track_events(a,i,n)};this.findCatLabel=function(t){try{var i=0,n=99;while(t!=document&&i<n){var a=$(t)[bfjs.up]();if(a[bfjs.read_attr](bfjs.gtrack_cat)){return a[bfjs.read_attr](bfjs.gtrack_cat)}else{t=a;i++}}return null}catch(e){return null}};this.findActLabel=function(t){try{var i=0,n=99;while(t!=document&&i<n){var a=$(t)[bfjs.up]();if(a[bfjs.read_attr](bfjs.gtrack_act)){return a[bfjs.read_attr](bfjs.gtrack_act)}else{t=a;i++}}return null}catch(e){return null}};this.findGtrackLabel=function(t){try{var i=0,n=99;while(t!=document&&i<n){var a=$(t)[bfjs.up]();if(a[bfjs.read_attr](bfjs.gtrack_label)){return a[bfjs.read_attr](bfjs.gtrack_label)}else{t=a;i++}}return null}catch(e){return null}};this.track_events=function(t,i,n,a,r){if(i=="ignore"){return}r=typeof r!="undefined"?r:false;if(typeof t=="undefined"||!t)t=gtrack.tt_page;if(typeof i=="undefined"||!i)i="";if(n&&typeof n!="string"&&n!=null)n=n.toString();if(typeof n=="undefined"||!n)n="(no label)";i=i.indexOf("[nc]")<0?"click:"+i:i.replace("[nc]","");t=t.indexOf("[ttp]")<0?t:t.replace("[ttp]",gtrack.tt_page);try{if(BF_STATIC.bf_env!="live"){if(hasLocalStorage()&&(i.match("click")||i.match("page-exit"))&&!i.match("ab:")){localStorage.setItem("custom_events",window.JSON.stringify({category:t,action:i,label:n}))}console.log("Event: ['"+t+"','"+i+"','"+n+"','"+a+"','"+r+"']")}else{if(gtrack.ga_status()){_gaq.push(["_trackEvent",t,i,n,,r])}}if(gtrack.postEvents.length>0&&!i.match("impab")&&!i.match("page-exit")&&!i.match("video:load")){var s=i.match(":")?i.replace(":","ab:"):"ab:"+i;var o=gtrack.postEvents.toString()+(n?";ol:"+n:""),r=true;if(BF_STATIC.bf_env!="live"){if(hasLocalStorage()&&s.match("click")&&!s.match("ab:")){localStorage.setItem("custom_events",window.JSON.stringify({category:t,action:s,label:o}))}console.log("Event: ['"+t+"','"+s+"','"+o+"','"+a+"','"+r+"']")}else{if(gtrack.ga_status()){_gaq.push(["_trackEvent",t,s,o,,r])}}}if(gtrack.tt_page=="Buzz"&&objExists(buzzDetails)&&buzzDetails.ad=="1"&&!t.match("header")&&!t.match("bottom")){bfjs.universal_each(["share/","video-play"],function(t){if(i.match(t)){var n=objExists(hashtrack)&&objExists(hashtrack.tracked_hash_tag)?tracker.types.HASH_CLICK:tracker.types.SITE_CLICK;tracker.add({type:n});tracker.run()}})}if(i.match("share/")&&!bfjs.isMobile()){gtrack.comscore_events({cat:t,act:i,label:n})}}catch(l){if(BF_STATIC.bf_env!="live"){console.log(l)}}};this.comscore_events=function(t){if(typeof t!="object")return false;var i=Object.clone(_cs)[0],n;Object.extend(i,t);Object.extend(i,{ns_type:"hidden"});i=JSON.parse(JSON.stringify(i));n=gtrack.comscore_url+Object.toQueryString(i);if(typeof udm_!="undefined"){udm_(n,null)}if(BF_STATIC.bf_env!="live"){console.log("csParms",i);console.log("csUrl",n)}};this.checkTestMode=function(){if(BF_STATIC.bf_test_mode&&document.cookie.match("sel2_external_pound_analytics")===null&&document.cookie.match("sel2_gtrack")===null&&!bfjs.isMobile()){return true}else{return false}};this.abTracking=function(){if(gtrack.checkTestMode())return;if(typeof abtest=="undefined")return;if(!gtrack.ga_status()||typeof abtest.abLive=="undefined"){setTimeout("gtrack.abTracking()",500);return false}if(abtest.abLive){var t=abtest.abTests.split(","),i=abtest.abVariations.split(",");for(var n=0;n<t.length;n++){if(localStorage.getItem("add-abtest--"+t[n])==null){gtrack.postEvents.push(t[n]+":"+i[n])}}gtrack.postEvents.sort();gtrack.fireABImp()}};this.fireABImp=function(){if(gtrack.postEvents.length>0){gtrack.track_events("[ttp]","[nc]impab",gtrack.postEvents.toString(),"",true)}};this.trackShares=function(t,i){if(!gtrack.ga_status())return;_gaq.push(function(){var n=_gat._getTrackerByName();var a=gtrack.getCustomVars(t,0);var r={};if(t==23){var s=i.split("_")[1];i=i.split("_")[0]}if(!isNaN(parseFloat(Number(a)))){a++}r[t]=a;if(t>=20&&t<=22){var o=isNaN(gtrack.getCustomVars(32,0))?0:gtrack.getCustomVars(32,0);o=Number(o)+1;gtrack.setCustomVars(2,{32:o});var l=BF_STATIC.bf_category;if(Number(l)){var u=gtrack.getCustomVars(29,"").split("");var d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(l);if(u.length>=50){u.shift()}u.push(d);r[29]=u.join("")}}if(t==23){var c="";var _=gtrack.getCustomVars(24,"L-0_WI-0_OM-0_WT-0_C-0_F-0_G-0_T-0_OL-0_E-0").split("_");for(badge=0;badge<_.length;badge++){var f=_[badge].split("-")[0];var h=_[badge].split("-")[1];if(s.substring(0,f.length).toLowerCase()==f.toLowerCase()&&h<999){h++}c+=f+"-"+h+"_"}c=escape(c.substring(0,c.length-1));r[24]=c;var p=Number(gtrack.getCustomVars(33,0))+1;gtrack.setCustomVars(2,{33:p})}gtrack.setCustomVars(1,r)})};this.getCustomVars=function(t,i){var n=_gat._getTrackerByName();if(gtrack.VistCVIDs.indexOf(t)>=0&&window.sessionStorage&&typeof sessionStorage["CV_"+t]!="undefined"){return sessionStorage["CV_"+t]}else if(!n._getVisitorCustomVar(t)){var a=i}else{var a=n._getVisitorCustomVar(t)}return a};this.CVsExist=function(t,i){for(var n=0;n<t.length;n++){if(i==2&&window.sessionStorage){if(typeof sessionStorage["CV_"+t[n]]=="undefined"){return false}}else{if(gtrack.getCustomVars(t[n],null)==null){return false}}}return true};this.setVisitCVs=function(){if(gtrack.checkTestMode())return;if(!gtrack.ga_status()){setTimeout("gtrack.setVisitCVs()",500);return false}var t=Math.round((new Date).getTime()/1e3);if(typeof bf_login!="undefined"){bf_login.loggedInCallbacks.push(gtrack.loggedInStatus)}gtrack.loggedInStatus();if(!gtrack.CVsExist([41],2)||gtrack.getCustomVars(41,null)==null||gtrack.ga_debug()){var i=bfjs.read_cookie("__utma");var n=0;if(i&&i.split(".").length>=2){var a=i.split(".")[2];n=Math.floor((t-a)/86400)}gtrack.setCustomVars(2,{41:n})}if(!gtrack.CVsExist([42],2)||gtrack.getCustomVars(42,null)==null||gtrack.ga_debug()){var r=bfjs.read_cookie("firstHPVisit");var s="NA";if(document.referrer==""){if(r&&typeof r!="undefined"){s=Math.floor((t-r)/86400)}else if(gtrack.is_homepage()||gtrack.ga_debug()){s=0;bfjs.write_cookie("firstHPVisit",t.toString())}}if(typeof s=="number"){gtrack.setCustomVars(2,{42:s})}}var o=parseInt(gtrack.getCustomVars(43,0));if(gtrack.is_homepage()&&(document.referrer==""||gtrack.ga_debug())){o+=1}gtrack.setCustomVars(1,{43:o});var l="";if(bfjs.isMobile()){l=readCookie("country")!=null&&readCookie("country")!="us"?readCookie("country"):"us"}else if(typeof BFW_Util=="object"){l=BFW_Util.getCookie("country")!=null&&BFW_Util.getCookie("country")!="us"?BFW_Util.getCookie("country"):"us"}gtrack.setCustomVars(1,{35:l})};this.loggedInStatus=function(){var t=new BF_User;var i=t.getUserInfo();var n=typeof t.isLoggedIn()!=="undefined"?t.isLoggedIn():"false";var a=i&&typeof i.is_facebook_user!=="undefined"?i.is_facebook_user:"false";var r={30:n,31:a};if(n&&i){r[17]=(i.p_editor_admin?"editor":"user")+"/"+parseInt(i.userid).toString(36)}gtrack.setCustomVars(2,r)};this.setBuzzCVs=function(){if(gtrack.checkTestMode())return;var t=buzzDetails.hasOwnProperty("ad")?buzzDetails.ad:"",i=buzzDetails.hasOwnProperty("raw")?buzzDetails.raw:"",n=buzzDetails.hasOwnProperty("nsfw")?buzzDetails.nsfw:"",a=buzzDetails.hasOwnProperty("login")?buzzDetails.login:"",r=buzzDetails.hasOwnProperty("editor")?buzzDetails.editor:"",s=BF_STATIC.hasOwnProperty("f_ad")?BF_STATIC.f_ad:"",o=buzzDetails.hasOwnProperty("f_partner")?buzzDetails.f_partner:"",l=buzzDetails.hasOwnProperty("user")?buzzDetails.user:"",u=buzzDetails.hasOwnProperty("trigger")?buzzDetails.trigger:"",d=buzzDetails.hasOwnProperty("postBadges")?buzzDetails.postBadges:"",c=buzzDetails.hasOwnProperty("postTags")?buzzDetails.postTags:"",_=buzzDetails.hasOwnProperty("published")?buzzDetails.published.split(" ")[0]:"",f=BF_STATIC.hasOwnProperty("username")?BF_STATIC.username:"",h=buzzDetails.hasOwnProperty("category_name")?buzzDetails.category_name:"",p=buzzDetails.hasOwnProperty("form")?buzzDetails.form:"",m=BF_STATIC.hasOwnProperty("campaignid")?BF_STATIC.campaignid:"",g=buzzDetails.hasOwnProperty("language")?buzzDetails.language:"";var b=c.split(","),v=["","",""],y=0;for(var w=0;w<b.length;w++){if(y>2){continue}var k=b[w].substring(0,63);if(v[y].length+k.length>=127){y++}v[y]+=k+","}var T={44:escape("raw-"+i+"_nsfw-"+n+"_ad-"+s+"_partner-"+o+"_editor-"+r+"_user-"+l+"_trigger-"+u),45:_,4:f,5:d.substring(0,d.length-1),2:h,37:v[0].substring(0,Math.min(v[0].length-1,127)),38:v[1].substring(0,Math.min(v[1].length-1,127)),39:v[2].substring(0,Math.min(v[2].length-1,127)),49:p,47:m,46:g};gtrack.setCustomVars(3,T)};this.setAdBlockCV=function(){if(!gtrack.ga_status()){setTimeout("gtrack.setAdBlockCV()",500);return false}if(window.BF_Scout&&(gtrack.getCustomVars(12,null)!==window.BF_Scout.adBlocked.toString()||gtrack.ga_debug())){gtrack.setCustomVars(3,{12:(window.BF_Scout.adBlocked===true).toString()})}};this.setUserCVs=function(){if(!gtrack.ga_status()){setTimeout("gtrack.setUserCVs()",500);return false}for(var t=0;t<gtrack.ShareCVs.length;t++){var i=gtrack.ShareCVs[t],n={};if(gtrack.getCustomVars(i,null)==null){n[i]="0";gtrack.setCustomVars(1,n)}}var a=BF_STATIC.bf_category;if(Number(a)){var r=gtrack.getCustomVars(28,"").split(",");if(r.length==1&&r[0]=="")r=[];if(r.length>=20)r.shift();r.push(a);gtrack.setCustomVars(1,{28:r.join(",")})}if(gtrack.getCustomVars(14,null)==null||gtrack.ga_debug()){var s=document.referrer?document.referrer.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0]:"(direct)";if(s.indexOf("buzzfeed.com",s.toLowerCase())>=0){s="(direct)"}gtrack.setCustomVars(1,{14:s})}if(gtrack.getCustomVars(15,null)==null||gtrack.ga_debug()){var o=typeof BF_STATIC.tt_page!="undefined"?BF_STATIC.tt_page:false;gtrack.setCustomVars(1,{15:o})}if((gtrack.getCustomVars(16,null)==null||gtrack.ga_debug())&&typeof hashtrack!="undefined"){if(typeof hashtrack.tracked_hash_tag!="undefined"){var l=hashtrack.tracked_hash_tag;var u=l.charAt(0)+l.charAt(l.length-1);var d=l.substring(1,l.length-1);gtrack.setCustomVars(1,{16:u+"/"+d})}}if(gtrack.getCustomVars(34,null)==null||gtrack.ga_debug()){var c=Number(gtrack.getCustomVars(18,null));var _=(new Date).getTime()/1e3;var f=(new Date).setDate((new Date).getDate()-365)/1e3;if(!isNaN(c)&&typeof c=="number"){if(f<c&&c<_){var h=_-c;var p=h/3600;c=isNaN(p)?null:Math.round(p)}}else{c=null}gtrack.setCustomVars(2,{34:c});gtrack.setCustomVars(1,{18:Math.round(_)})}var m=new BF_User;var g=m.isLoggedIn();if(!gtrack.CVsExist(gtrack.UserCVIDs,1)||g==true&&gtrack.getCustomVars(6,null)=="false"||gtrack.ga_debug()){if(g){var b=m.getUserInfo();settings_call=(new BF_Request).request;settings_call("/buzzfeed/_edit_user",{method:"get",parameters:{action:"settings"},onSuccess:function(t){var i=JSON.parse(t.responseText);var n=b.is_facebook_user;var a=b.registration_path;var r=i.user.gender==null?"false":i.user.gender.toLowerCase()=="male"||i.user.gender.toLowerCase()=="female"?i.user.gender.toLowerCase():"false";var s=b.p_admin=="true"?"admin":b.moderated=="1"?"moderated":b.f_raw=="1"?"raw":false;var o=i.user.allow_email_updates==1?"true":"false";var l=typeof b.date_created_unix!=undefined?b.date_created_unix:null;var u={6:g,7:l,8:n,9:a,10:s,11:o};gtrack.setCustomVars(1,u);GAPageLoad()},onFailure:function(){console.error("unable to fetch user data for gtrack.setUserCVs()");GAPageLoad()}})}else{var v={6:false,8:false,9:false,10:false,11:false,7:false};gtrack.setCustomVars(1,v);GAPageLoad()}}else{GAPageLoad()}};this.setCustomVars=function(t,i){if(gtrack.checkTestMode())return;if(!gtrack.ga_status()){setTimeout(function(){gtrack.setCustomVars(t,i)},500);return false}if(typeof t!="number"||typeof i!="object"){return false}for(cv in i){if(typeof cv=="undefined"||typeof i[cv]=="undefined"){continue}var n=Number(cv),a=i[cv],r=ga_cv_map[n];if(n>=1&&n<=5){if(typeof _gat._getTrackerByName()._getVisitorCustomVar(n)!="undefined"){_gaq.push(["_deleteCustomVar",n])}}if(gtrack.ga_status()){_gaq.push(["_setCustomVar",n,r,a+"",t])}if(t==2&&hasLocalStorage()){sessionStorage.setItem("CV_"+n,a)}if(BF_STATIC.bf_env!="live"){console.log("CustomVar: ['"+n+"','"+r+"','"+a+"']")}}};this.DOB2Age=function(t){var i;var n=new Date;if(/\d{4}\-\d{2}\-\d{2}/.test(t)){t=t.split("-");if(n.getMonth()+1>t[1]){i=n.getFullYear()-t[0]}else if(n.getMonth()+1==t[1]){if(n.getDate()>=t[2]){i=n.getFullYear()-t[0]}else{i=n.getFullYear()-t[0]-1}}else{i=n.getFullYear()-t[0]-1}if(i>150){return null}else{return i}}return t};this.trackScrollMobile=function(){var t=".js-action-bar--sharing.position-lower";if(gtrack.tt_page!="MobileBuzz")return false;if(typeof gtrack.hasBottomShare=="undefined"){gtrack.hasBottomShare=$(t).length>0?true:false}if(!gtrack.hasBottomShare)return false;gtrack.shareBottom=$(t).offset().top+$(t).height();gtrack.scrollBottom=$(window).scrollTop()+$(window).height();if(gtrack.scrollBottom>gtrack.shareBottom&&!gtrack.trackedScrollShare){gtrack.track_events("[ttp]","[nc]bottom-share-visible",null,null,true);gtrack.trackedScrollShare=true}};this.trackScrollDesktop=function(){if(gtrack.tt_page=="Home"){var t=document.getElementById("page_flow")?document.getElementById("page_flow"):document.getElementById("feed")?document.getElementById("feed"):null;if(!t){return}var i=$(t)?$(t)[bfjs.selector]("li:not(.scrolled_past)"):[],n=document.documentElement.clientHeight+document.viewport.getScrollOffsets()[1];bfjs.universal_each(i,function(t){var i=bfjs.getOffset(t)[1]+$(t)[bfjs.get_height]();if(i<=n){$(t)[bfjs.add_class]("scrolled_past");if(gtrack.ga_debug()){bfjs.setStyle(t,{border:"solid green 1px"})}}else{if(gtrack.ga_debug()){bfjs.setStyle(t,{border:"solid blue 1px"})}}});gtrack.scrollDepth=$(t)[bfjs.selector]("li.scrolled_past").length}else{var a=document.documentElement.scrollHeight-document.documentElement.clientHeight,r=typeof document.documentElement.scrollTop!="undefined"?document.documentElement.scrollTop:0,s=r+document.body.scrollTop,o=s/a*100;if(typeof gtrack.hasBottomShare=="undefined"){gtrack.hasBottomShare=$$("div.bottom-share-buttons").length>0?true:false}if(!gtrack.trackedScrollShare&&gtrack.hasBottomShare){var l=s+window.innerHeight;if(!gtrack.shareTop)gtrack.shareTop=$s(".bottom-share-buttons").cumulativeOffset().top;if(l>gtrack.shareTop&&gtrack.shareTop!=0){gtrack.track_events("[ttp]","[nc]bottom-share-visible",null,null,true);gtrack.trackedScrollShare=true}}if(!isNaN(parseFloat(o))&&isFinite(o)&&o>0&&o<=100){o=o%5>=1?parseInt(o/5)*5+5:parseInt(o/5)*5;gtrack.scrollDepth=Math.max(gtrack.scrollDepth,o)}}};this.pageUnload=function(){var t;if(!bfjs.isMobile()){t=gtrack.scrollDepth}else{var i=$(window).scrollTop(),n=$(document).height(),a=$(window).height();t=Math.round(i/(n-a)*100)}t=t.toString();if(gtrack.tt_page!="Home"){t+="%"}if(!bfjs.isMobile()||bfjs.isMobile()&&BF_STATIC.os!=="android"&&BF_STATIC.in_app!=="facebook"){gtrack.track_events("","[nc]page-exit",t,null,true)}}};var gtrack=new BF_GTrack;bfjs.onPageLoad(gtrack.init);bfjs.windowEvent("unload",function(){gtrack.pageUnload()});if(!bfjs.isMobile()){bfjs.windowEvent("scroll",function(){gtrack.trackScrollDesktop()})}var FlexProTracker=function(){var t={HIT:"impression",CLICK:"click"};var i={B_PAGE:"b_page",FEED:"feed",HOME:"home",VERTICAL:"vertical"};var n={LINUX:"Linux",MAC_OS:"MacOs",UNIX:"Unix",UNKNOWN:"Unknown",WINDOWS:"Windows"};var a=null;var r=BF_STATIC.bf_env=="dev";var s="ctr";var o="unit_";var l=5;var u={CAMPAIGN_ID:"campaign-id",VARIATIONS:"variations",VARIATION_ID:"variation-id",SOURCE:"source",OS:"os",PAGE_TYPE:"page-type",UNIT:"unit",MODE:"mode",POSITION:"position",POST_CATEGORY:"post-category",UNIT_CLIENT_ID:"unit-client-id"};var d={};var c=function(t){defaults={};$H(t).each(function(t){defaults[t.key]=t.value});f()};var _=function(t,i){var n=y(t,u.CAMPAIGN_ID);var a=BF_STATIC.ctr_tracking[n];if(typeof a.variations!="undefined"&&Array.isArray(a.variations)&&a.variations.length>0){v(t,u.VARIATIONS,JSON.stringify(a.variations));v(t,u.VARIATION_ID,a.selectedVariationId)}v(t,u.UNIT,a.unit);v(t,u.POSITION,a.position);v(t,u.POST_CATEGORY,a.post_category);v(t,u.UNIT_CLIENT_ID,a.unitClientId);if(g(a.source)){v(t,u.SOURCE,a.source)}if(g(a.pageType)){v(t,u.PAGE_TYPE,a.pageType)}if(g(a.mode)){v(t,u.MODE,a.mode)}if(g(a.objectType)){v(t,u.OBJECT_TYPE,a.objectType)}};var f=function(){universal_dom.assign_handler({bucket:"ctr-track",handler:_})};var h=function(){universal_dom.assign_handler({bucket:"ctr-track",handler:p})};var p=function(i,n){if(y(i,"attached")==null){m(t.HIT,i);Event.observe(i,"mousedown",function(){m(t.CLICK,i)});v(i,"attached","true")}};var m=function(t,i){if(M(t)){var n={type:o+t,source:y(i,u.SOURCE)||defaults.source,os:T(),mode:y(i,u.MODE)||defaults.mode,page_url:window.location.pathname,page_type:y(i,u.PAGE_TYPE)||defaults.pageType,unit:y(i,u.UNIT),position:y(i,u.POSITION),post_category:y(i,u.POST_CATEGORY),artifact_location_uid:y(i,u.CAMPAIGN_ID),artifact_type:y(i,u.OBJECT_TYPE)||defaults.objectType,artifact_id:null,artifact_location_id:null,unit_client_id:y(i,u.UNIT_CLIENT_ID),variation_id:y(i,u.VARIATION_ID),client_id:bf_visit.unique.unhashed(bf_visit.unique.hashed())};w("ctr event: ",n);pixiedust.push(n)}else{w("ctr - skipping tracking")}};var g=function(t){return typeof t!="undefined"&&t!=null};var b=function(t){return"data-"+s+"-"+t};var v=function(t,i,n){i=b(i);var a=t.readAttribute(i);if(a==null&&g(n)){t.setAttribute(i,n)}};var y=function(t,i){i=b(i);return t.readAttribute(i)};var w=function(){if(r){console.log.apply(console,arguments)}};var k=function(t){switch(t.toLowerCase()){case"index":return i.HOME;case"buzz":return i.B_PAGE;default:return null}};var T=function(){if(a!=null){return a}if(navigator.appVersion.indexOf("Win")!=-1)a=n.WINDOWS;else if(navigator.appVersion.indexOf("Mac")!=-1)a=n.MAC_OS;else if(navigator.appVersion.indexOf("X11")!=-1)a=n.UNIX;else if(navigator.appVersion.indexOf("Linux")!=-1)a=n.LINUX;else a=n.UNKNOWN;return a};var M=function(t){var i=bf_visit.unique.unhashed(bf_visit.unique.hashed());return t=="click"||t=="impression"&&(r||i%(1/(l/100))==l)};return{init:c,attach:h,normalizePageType:k}};EventManager.observe_once("abtest:ecommerce_link_desktop",function(t,i){gtrack.track_events("[ttp]","[nc]ecommerce_impab",t,"",true)});EventManager.observe_once("abtest:ecommerce_link_mobile",function(t,i){gtrack.track_events("[ttp]","[nc]ecommerce_impab",t,"",true)});EventManager.observe_once("abtest:geico_thumbstrip",function(t,i){gtrack.track_events("[ttp]","[nc]geicothumbstrip_impab",t,"",true);var n=$$(".shareBtn");function a(){gtrack.track_events("Buzz","[nc]geicothumbstrip_shareab",t,"",true)}bfjs.universal_each(n,function(t){t.setAttribute("rel:bf_bucket","abtest:geico_thumbstrip");universal_dom.update(t)});universal_dom.assign_handler({bucket:"abtest:geico_thumbstrip",event:"click",handler:a})});EventManager.observe_once("abtest:discovercard_thumbstrip",function(t,i){gtrack.track_events("[ttp]","[nc]discovercardthumbstrip_impab",t,"",true);var n=$$(".shareBtn");function a(){gtrack.track_events("Buzz","[nc]discovercardthumbstrip_shareab",t,"",true)}bfjs.universal_each(n,function(t){t.setAttribute("rel:bf_bucket","abtest:discovercard_thumbstrip");universal_dom.update(t)});universal_dom.assign_handler({bucket:"abtest:discovercard_thumbstrip",event:"click",handler:a})});EventManager.observe_once("abtest:floating-share-bar",function(t,i){gtrack.track_events("[ttp]","[nc]floatingsharebar_impab",t,"",true);var n=$(".action-bar.action-bar--fixed.js-action-bar--fixed .js-action-bar__btn");function a(){gtrack.track_events("MobileBuzz","[nc]floatingsharebar_shareab",t,"",true)}n.each(function(t){$(this).attr("rel:bf_bucket","abtest:floating-share-bar")});n.click(a)});EventManager.observe_once("abtest:tasty-mobile-bpage-badges",function(t,i){var n="tasty-mobile-bpage-badges";gtrack.track_events("ABTestRegister","[nc]"+n,t,"",true);pixiedust.push({type:"experiment_validation",source:"buzz_web",experiment_name:n,variant_name:t});pixiedust.flush()});EventManager.observe_once("abtest:tasty-mobile-bpage-comments",function(t,i){var n="tasty-mobile-bpage-comments";gtrack.track_events("ABTestRegister","[nc]"+n,t,"",true);pixiedust.push({type:"experiment_validation",source:"buzz_web",experiment_name:n,variant_name:t});pixiedust.flush()});EventManager.observe_once("abtest:tasty-mobile-bpage-bylines-round2",function(t,i){var n="tasty-mobile-bpage-bylines-round2";gtrack.track_events("ABTestRegister","[nc]"+n,t,"",true);pixiedust.push({type:"experiment_validation",source:"buzz_web",experiment_name:n,variant_name:t});pixiedust.flush()});EventManager.observe_once("abtest:new-mobile-bpage-feed",function(t,i){var n="new-mobile-bpage-feed";var a=document.querySelector(".new-mobile-bpage-feed");var r=document.querySelector(".partner-area .bf-mobile-image");var s;var o;gtrack.track_events("ABTestRegister","[nc]"+n,t,"",true);pixiedust.push({type:"experiment_validation",source:"buzz_web",experiment_name:n,variant_name:t});pixiedust.flush();if(t==="control"){return false}s=function(t){var i=document.createElement("div");i.className="new-mobile-bpage-feed__thumb";t.forEach(function(t){if(a.contains(t)){var n=i.cloneNode();var r=t.parentElement;r.insertBefore(n,t)}})};o=function(t){if(a.contains(t)){t.previousElementSibling.style.cssText='background-image: url("'+t.src+'")';t.parentElement.removeChild(t)}};s([r]);r.addEventListener("load",function(e){o(e.target)},false);Core.createModule("new-mobile-bpage-feed",function(t){return{init:function(){t.listen({"lazyload-start":function(e){s(e.images)},"lazyload-loaded":function(e){o(e.target)}})},destroy:function(){t.ignore(["lazyload-start","lazyload-loaded"])}}});Core.start("new-mobile-bpage-feed")});var BF_ABTest=function(){this.tt_page=typeof BF_STATIC.tt_page!="undefined"?BF_STATIC.tt_page:"NA";this.vertical=typeof BF_STATIC.vertical!="undefined"?BF_STATIC.vertical:"NA";this.country=typeof BF_STATIC.country!="undefined"?BF_STATIC.country:"NA";this.abTests="",this.abVariations="",this.abLive,this.abTestIds="",this.abVariationIds="";this.abConfig=ab_config;this.init=function(){abtest.abLoadConfig();if(!bfjs.isMobile()){universal_dom.assign_handler({bucket:"abtest",handler:abtest._init})}else{var t=bfjs.getElsByAttr("[rel\\:bf_bucket]");bfjs.universal_each(t,function(t){if($(t)[bfjs.read_attr]("rel:bf_bucket")=="abtest"){abtest._init(t)}})}if(typeof EventManager=="object"){EventManager.fire("abtests_loaded")}};this._init=function(t){if(t.hasAttribute("rel:ab_test")){var i=$(t)[bfjs.read_attr]("rel:ab_test").split(",");for(var n=0;n<i.length;n++){var a=i[n];if(abtest.abTests.search(a)>-1){abtest.abTest(t)}}}};this.abTimeCheck=function(t){var i=abtest.abConfig[t].start;var n=abtest.abConfig[t].stop;var a=Math.round((new Date).getTime()/1e3);if(i==""||n==""){return true}else if(isNaN(i)||isNaN(n)){return true}else if(a>=i&&a<=n){return true}else{return false}};this.abLoadConfig=function(){for(x in this.abConfig){var t=false,i=bfjs.getElsByAttr("[rel\\:ab_test]");bfjs.universal_each(i,function(i){var n=$(i)[bfjs.read_attr]("rel:ab_test").split(",");for(var a=0;a<n.length;a++){if(n[a]==x)t=true}});if(localStorage.getItem("add-abtest--"+x)&&!(BF_STATIC.tt_page=="MobileHome"||BF_STATIC.hp_type=="index")){t=true;gtrack.postEvents.push(x+":"+localStorage.getItem("add-abtest--"+x))}if(t&&abtest.abTimeCheck(x)){var n=this.abConfig[x],a=n.page,r=n.vertical,s=n.country;if((a.match(abtest.tt_page)||a=="*")&&(!r||r&&r.match(abtest.vertical))&&(!s||s&&s.match(abtest.country))){var o=[],l=[],u;for(y=0;y<n.variations.length;y++){var d=n.variations[y].weight;for(var c=0;c<d;c++){o.push(n.variations[y].name)}l.push(n.variations[y].name)}var _=false;if(document.location.search.match(/abdebug/)){var u=prompt("Please select a variation for test '"+x+"':\n"+l.toString().replace(/,/g,"\n"),l[0]);if(u==null||u=="")u=l[0]}else if(!bfjs.isMobile()&&objExists(getUrlVars()[x])){u=getUrlVars()[x]}else if(typeof BF_STATIC!="undefined"&&BF_STATIC.bf_test_mode){_=true}else if(n.freeze_variation&&typeof Storage!=="undefined"&&localStorage&&(localStorage.getItem(x)&&localStorage.getItem(x)!==null||localStorage.getItem("add-ab--"+x)!==null)){if(localStorage.getItem("add-ab--"+x)){u=localStorage.getItem("add-ab--"+x)}else{u=localStorage.getItem(x)}}else{o=o.sort(function(){return.5-Math.random()});u=o[Math.floor(Math.random()*o.length)]}if(!_){abtest.addTest(x,u,n)}}}}if(typeof abtest.abLive=="undefined"){abtest.abLive==false}};this.addTest=function(t,i,n){abtest.abTests=abtest.abTests?abtest.abTests+=","+t:t;abtest.abVariations=abtest.abVariations?abtest.abVariations+=","+i:i;abtest.abLive=true;if(typeof n!="undefined"){abtest.abTestIds=abtest.abTestIds?abtest.abTestIds+=","+n.id:n.id;for(var a=0;a<n.variations.length;a++){if(n.variations[a].name==i){if(n.variations[a].id){var r=n.variations[a].id.toString();abtest.abVariationIds=abtest.abVariationIds?abtest.abVariationIds+=","+r:r;break}}}}};this.getBucket=function(t){var i=this.abTests.split(","),n=this.abVariations.split(","),a=bfjs.indexOf(t,i);return a<0||typeof n[a]==="undefined"?null:n[a]};this.abTest=function(t){var i=abtest.abTests.split(",");var n=abtest.abVariations.split(",");var a=$(t)[bfjs.read_attr]("rel:ab_test").split(",");for(var r=0;r<a.length;r++){var s=a[r];var o=this.abConfig.hasOwnProperty(s)?this.abConfig[s]:new Object;var l=o.hasOwnProperty("type")?o["type"]:null;var u=o.hasOwnProperty("freeze_variation")?o["freeze_variation"]:false;for(x=0;x<i.length;x++){if(i[x]==s){break}}var d=n[x];var c=document.location.search.match(/variation=([a-zA-Z_-]*)/);if(BF_STATIC.env!="live"&&c!==null&&c.length>1){d=c[1]}if(l=="css"){$(t)[bfjs.add_class](d)}else if(l=="html"){$($(t)[bfjs.selector]("#"+d)[0])[bfjs.remove_class]("hidden")}if(u&&hasLocalStorage()){localStorage.setItem(i[x],d)}if(typeof EventManager=="object"){EventManager.fire("abtest:"+i[x],d,t)}}};this.abTestsToString=function(){if(this.abVariationIds!=""&&this.abTestIds!=""){var t=this.abTestIds.split(",");var i=this.abVariationIds.split(",");var n=[];for(var a=0;a<t.length;a++){n.push(t[a]+":"+i[a])}return n.join(",")}return""}};var abtest=new BF_ABTest;bfjs.onPageLoad(abtest.init);BF_Targetting_Pixel=function(){this.pixels={comment:[],email:[],badge_reaction:[],facebook:[],google_plus:[],stumbleupon:[],twitter:[]};this.hashtrack_pixels=[{url_regex:/peggy\/some-uri/g,pixel_seed:'<iframe width="0" height="0" frameborder="0" scrolling="no" src="abcd"></iframe>',pixel_viral:'<iframe width="0" height="0" frameborder="0" scrolling="no" src="wxyz"></iframe>'}];this.add=function(t,i){if(!!window.fb_app)return;var n;if(t=="hashtrack"){n=i.pixel}else{n=this.pixels[t+""]}if(typeof n=="undefined"||!n)return;var a=/<([a-z]+)\b.*src="([^"]*)".*\/?>/;for(var r=0;r<n.length;r++){var s=n[r];var o=a.exec(s);if(!o||typeof o[1]=="undefined"||o[1]!="img"&&o[1]!="iframe"&&o[1]!="script")return false;var l=o[1],u=o[2];if(!$("third-party-tracking-pixel")){var d=document.createElement("div");d.id="third-party-tracking-pixel";document.getElementsByTagName("BODY")[0].appendChild(d)}if(!window["BF_STATIC"]||!BF_STATIC.bf_test_mode){var c;try{c=document.createElement(s)}catch(e){c=document.createElement(l)}if(l=="img"){c.src=u;c.height=1;c.width=1;c.setAttribute("style","width:1px;height:1px;position:absolute;")}else if(l=="iframe"){c.src=u;c.height=0;c.width=0;c.setAttribute("frameborder",0);c.setAttribute("scrolling","no")}else if(l=="script"){c.src=u;c.setAttribute("type","text/javascript")}}else{console.info("disable "+u+" for sel tests")}if(BF_STATIC.bf_env!="live"||!window["BF_STATIC"]||BF_STATIC.bf_test_mode){console.info("track px ("+t+") >> "+u)}else{document.getElementById("third-party-tracking-pixel").appendChild(c)}}};this.hashtrack_pixel=function(t,i){for(var n=0;n<this.hashtrack_pixels.length;n++){if(this.hashtrack_pixels[n].url_regex.exec(t)){var a={};if(i==1){a={pixel:[this.hashtrack_pixels[n].pixel_seed]}}else if(i==2){a={pixel:[this.hashtrack_pixels[n].pixel_viral]}}if(typeof a.pixel!="undefined"){document.observe("dom:loaded",function(t){return function(){(new BF_Targetting_Pixel).add("hashtrack",t)}}(a))}}}}};!function(t){"use strict";var i=t.ForkDraft;function n(t){var i=this;this.options=t||{};this.initialized=false;this.init=function(){i.$body=$s("body");i.initialized=true;universal_dom.assign_handler({bucket:"fork_draft",event:"click",handler:function(t){t.stop();i.fork_draft().then(i.edit_draft)}});universal_dom.assign_handler({bucket:"edit_post",event:"click",handler:function(t){t.stop();i.edit_published()}});universal_dom.assign_handler({bucket:"unlock",event:"click",handler:function(t){t.stop();i.break_lock().then(i.show_modal.bind(i,i.templates.fork_modal))}});return i};this.pop_overlay=function(){var t=new Element("div",{id:"fork_draft_overlay","class":"editor-modal-wrapper"});i.$body.insert(t);i.$overlay=t;i.$body.on("keyup",i.esc_checker);i.spin();return i};this.esc_checker=function(e){if(e.which==27)i.close_modals()};this.spin=function(t){if(!(i.$spin_el&&i.$spin_el.parentNode)&&!t){i.$spin_el=new Element("div",{"class":"white_popup_spinner_bg"});i.$spinner=new Element("div",{"class":"loader"});i.$spin_el.insert(i.$spinner);i.$overlay.insert(i.$spin_el);if(i.$modal)i.$modal.hide()}else if(!t){if(i.$modal)i.$modal.hide();i.$spin_el.show()}else if(t&&i.$spin_el){i.$spin_el.hide()}};this.enter_bpage_flow=function(t){if(!i.initialized)i.init();i.buzz_info=t;if(i.$overlay){i.$overlay.remove()}i.pop_overlay();i.check_for_drafts().then(function(){if(i.buzz_info.draft_id){i.edit_draft()}else if(i.buzz_info.locked){i.show_modal(i.templates.lock_modal)}else{i.show_modal(i.templates.fork_modal)}});return i};this.edit_draft=function(){i.close_modals();BF_Request.location({location:i.buzz_info.link_prefix+i.buzz_info.draft_id,new_tab:true,new_tab_name:"_new_"+(new Date).getTime()})};this.edit_published=function(){i.close_modals();BF_Request.location({location:i.buzz_info.link_prefix+i.buzz_info.buzz_id+i.buzz_info.link_suffix,new_tab:true,new_tab_name:"_new_"+(new Date).getTime()})};this.check_for_drafts=function(){return new Promise(function(t,n){(new BF_Request).request("/buzzfeed/fork_draft",{method:"get",parameters:{buzz_id:i.buzz_info.buzz_id},onSuccess:function(n){var a=JSON.parse(n.responseText);i.buzz_info.draft_id=a.data.draft_id;i.buzz_info.locked=a.data.locked;i.templates=a.templates;t(n)},onError:function(t){n(t)}})})};this.fork_draft=function(){i.spin();return new Promise(function(t,n){(new BF_Request).request("/buzzfeed/api/DraftCopyMerge/copy/"+i.buzz_info.buzz_id,{method:"post",parameters:{},onSuccess:function(n){var a=JSON.parse(n.responseText);i.buzz_info.draft_id=a.draft_id;t(n)},onError:n})})};this.break_lock=function(){i.spin();return new Promise(function(t,n){(new BF_Request).request("/buzzfeed/api/BuzzLocks/break/"+i.buzz_info.buzz_id,{method:"post",parameters:{},onSuccess:t,onError:n})})};this.close_modals=function(){i.$overlay.remove();delete i.$overlay;i.$body.stopObserving("keyup",i.esc_checker)};this.show_modal=function(t){i.$overlay.update(t);i.$modal=i.$overlay.down(".js-modal",0);var n=i.$modal.identify();$s("#"+n+" .js-modal-cancel").on("click",i.close_modals);if(i.$spin_el)i.$spin_el.hide();universal_dom.update(i.$modal);return i}}n.noConflict=function a(){t.ForkDraft=i;return n};t.ForkDraft=n}(this);var Internal_Tools_Navigation_Config=function(){this.ACL_to_URL_MAP={mobile:"us/mobile",lifestyle:"life",indepth:"bigstories"};this.ACL_TITLE_MAP={lifestyle:"life",indepth:"Big Stories",us:"US",usnews:"USNews",tvandmovies:"TVAndMovies",uk:"UK"};this.excluded=["lists_homepage_edit","queue_edit_aunews","queue_edit_canada","queue_edit_canadanews","queue_edit_germany","queue_edit_franch","queue_edit_francenews","queue_edit_japan","queue_edit_japannews","queue_edit_uk","queue_edit_uknews"];this.MENU_CATEGORIES={
cms:{title:"New Post",link:BF_STATIC.web_root+"/post",id:"cms"},mc:{title:"Mission Control",link:"",id:"global-nav-mc"},data:{title:"Data ",link:"",id:""},community:{title:"Community ",link:"",id:""},ads:{title:"Ads ",link:"",id:""},admin:{id:"more_tools",title:"More Tools ",link:""}};this.CMS=[{title:"Article",link:BF_STATIC.web_root+"/post?type=article",acls:["longform_access","longform_basic","longform_pro"]},{title:"List",link:BF_STATIC.web_root+"/post?type=list"},{title:"Breaking",link:BF_STATIC.web_root+"/post?type=breaking",acls:["breaking_post"]}];this.DATA=[{title:"My Dashboard",link:BF_STATIC.web_root+"/dashboard",acl_link:"https://dashbird.buzzfeed.com/global/{username}",acls:["dashbird"]},{title:"My Dashboard",link:BF_STATIC.web_root+"/dashboard",exclude_if_acls:["dashbird"]},{title:"El Dashboard (Beta)",link:"https://dashboard.buzzfeed.com"},{title:"Leaderboard",link:"/buzzfeed/leaderboard"},{title:"Geofresh",link:"https://geofresh.buzzfeed.com/"},{title:"Distributed Dashboard",link:"https://distributed.buzzfeed.com/airport/",permission:"p_developer_admin"}];this.COMMMUNITY=[{title:"Post moderation",link:"/buzzfeed/community_moderation"},{title:"Comment moderation",link:"/buzzfeed/comments_moderation"},{title:"User panel",link:"/buzzfeed/user_panel"}];this.ADS=[{title:"SodaShop",link:"http://prosocial.buzzfeed.com/pmanager"},{title:"Discotech",link:"http://discotech.buzzfeed.com/"},{title:"Giraffe",link:"https://giraffe.buzzfeed.com/"}];this.MORE_MENU=[{title:"ACL Management",link:"/buzzfeed/_acl",acls:["acl_view"]},{title:"Timestamp & Unpublish",link:"/buzzfeed/buzz_timestamp/form",permission:"p_admin"},{title:"Embed whitelist",link:"/buzzfeed/embed_whitelist",acls:["embed_whitelist"]},{title:"Badge config",link:"/buzzfeed/badge_config",acls:["badge_config_admin"]},{title:"Ad Sponsorship Unit config",link:"/buzzfeed/ad_sponsorship_unit_config",acls:["ad_sponsorship_unit_config_admin"]},{title:"String translation",link:"/buzzfeed/string_translation#.",acls:["string_translation_moderator"]},{title:"WAFFLE",link:BF_STATIC.web_root+"/waffle",acls:["team_developer"]},{title:"Masthead Editor",link:"/buzzfeed/user_contacts",acls:["manage_user_contacts"]},{title:"SuperDuper (NEW!)",acls:["duplicator_international"],module:"superduper",className:"hidden"},{title:"Post Duplicator (Old)",link:"/buzzfeed/duplicate",acls:["duplicate_post"]},{title:"Translation Moderation",link:"/buzzfeed/translation_moderation_ui",acls:["translation_moderator"]},{title:"User Byline Moderation",link:"/buzzfeed//user_byline_moderation",acls:["user_byline_description"]},{title:"A/B Tests Dashboard",link:"/buzzfeed/ab_test",acls:["edit_ab_tests"]},{title:"SuperSearch",link:"/buzzfeed/supersearch"},{id:"gameToyBox",title:"Format Builders",link:"https://toybox.buzzfeed.com",className:"has-sub-menu",members:[{title:"Text Roulette Generator",link:"https://toybox.buzzfeed.com/generators-and-roulettes/2015/04/07/text_roulette_builder.html",label:"Format Builders"},{title:"Caption Generator",link:"https://toybox.buzzfeed.com/make-your-own/formats/2015/04/07/caption-generator.html",label:"Format Builders"},{title:"CYOA",link:"https://toybox.buzzfeed.com/cyoa/2015/04/06/cyoa.html",label:"Format Builders"},{title:"Brainteaser Builder",link:"https://toybox.buzzfeed.com/generators-and-roulettes/2015/05/29/brainteaser_builder.html",label:"Format Builders"}]}];this.init=function(){var t=BF_STATIC.all_countries;var i={};Object.keys(t).each(function(i){var n=t[i];if(n.country_categories){Object.keys(n.country_categories).each(function(t){var a=n.country_categories[t];if(n.cookie_bar_vertical_bpage_message.name===a)internal_tools_navigation_config.ACL_to_URL_MAP[a.toLowerCase()]=i;else internal_tools_navigation_config.ACL_to_URL_MAP[a.toLowerCase()]=a.toLowerCase()})}})}};internal_tools_navigation_config=new Internal_Tools_Navigation_Config;var BF_GLOBAL_NAV=function(){this.DROPDOWN_MENU_CLASS="global-nav__menu-list";this.TITLE_MENU_CLASS="global-nav__menu-title";this.TITLE_MENU_EXPAND_CLASS="global-nav__menu-title--expanded";this.EVENT_TRACK_CAT="Internal Navigation";this.MENU_RENDERED=false;this.CONFIG=null;this.getDisplayName=function(t){return bf_global_nav.CONFIG.ACL_TITLE_MAP[t]||t};this.getUrl=function(t){return bf_global_nav.CONFIG.ACL_to_URL_MAP[t]||t};this.init=function(){if(internal_tools_navigation_config){internal_tools_navigation_config.init();bf_global_nav.CONFIG=internal_tools_navigation_config}else return false;var t=document.location.pathname.match(/\/_draft|_breaking_preview\//)?true:false;if(BF_STATIC.tt_page=="StandAloneQP"){bf_global_nav.renderMenuForSuperposter()}else if(BF_STATIC.tt_page=="Buzz"&&!t){bf_global_nav.prepareMenu($s(".ptools"))}else bf_global_nav.renderMenuForFrontPages()};this.prepareMenu=function(t){if(bf_global_nav.MENU_RENDERED)return false;var i=new BF_User;var n=i.getUserInfo();var a=[];var r=bf_global_nav._getNewPostMenu(n,"cms");var s=bf_global_nav._getMissionControlMenu("mc");var o=bf_global_nav._getDataMenu(n,"data");var l=bf_global_nav._getCommunityMenu(n,"community");var u=bf_global_nav._getAdsMenu(n,"ads");var d=bf_global_nav._getMoreToolsMenu(n,"admin");var c=n.p_admin=="true"||n.p_editor_admin=="true"||n.p_partner_admin=="true"||n.p_developer_admin=="true";var _=n.p_admin=="true"||n.p_partner_admin=="true"||n.p_developer_admin=="true";if(c){a.push(r);a.push(s);a.push(o)}if(acl.switch_user_can("queue_edit_community")&&acl.switch_user_can("community_manage"))a.push(l);if(_)a.push(u);a.push(d);var f=new Template(' 			<li class="#{className} list-item" ref="#{link}" id="#{id}" rel:gt_label="#{label}" #{module} rel:gt_act="#{title}">#{title}</li>');var h=new Element("nav");var p=document.createElement("ul");p.setAttribute("rel:gt_cat",bf_global_nav.EVENT_TRACK_CAT);p.addClassName("global-nav__main-menu");p.update("");h.appendChild(p);bf_global_nav._prependBFLogo(p);a.each(function(t){var i=document.createElement("li");i.addClassName(t.className);i.setAttribute("ref",t.link);i.setAttribute("id",t.id);i.setAttribute("rel:gt_act",t.title);i.update(t.title);if(t.members.length>0){p.appendChild(i);var n=document.createElement("ul");n.addClassName(bf_global_nav.DROPDOWN_MENU_CLASS);n.addClassName(t.id);t.members.each(function(t){if(t.module){t.module="data-module="+t.module}var i=f.evaluate(t);var a=t.id;n.innerHTML+=i;if(t.className==="has-sub-menu"&&t.members&&t.members.length>0){var r=document.createElement("ul");r.setAttribute("rel:gt_cat",bf_global_nav.EVENT_TRACK_CAT);r.addClassName("global-nav__sub-menu  "+bf_global_nav.DROPDOWN_MENU_CLASS+" "+t.id);t.members.each(function(t){var i=f.evaluate(t);r.innerHTML+=i});n.select("#"+t.id)[0].appendChild(r);r.hide()}});n.select("li").each(function(t){bf_global_nav.clickEventHandler(t);t.observe("mouseover",bf_global_nav.showSubMenu)});i.appendChild(n);n.hide()}});p.select("li."+bf_global_nav.TITLE_MENU_CLASS).each(function(t){t.observe("mouseover",bf_global_nav.openMenu);t.observe("mouseout",bf_global_nav.hideMenu)});bf_global_nav._appendFeedback(p);bf_global_nav.MENU_RENDERED=true;t.appendChild(h);return t};this._prependBFLogo=function(t){var i=document.createElement("li");i.addClassName("viral-logo");i.update("&nbsp;");if(acl.switch_user_can("general_admin")){i.setAttribute("ref",BF_STATIC.web_root+"/index");bf_global_nav.clickEventHandler(i)}t.appendChild(i)};this._appendFeedback=function(t){if(acl.switch_user_can("feedback_tool")){var i=document.createElement("li");i.addClassName("js-usernav-feedback global-nav__title");i.setAttribute("id","usernav-feedback");i.update('<a rel:gt_act="user/feedback" class="global-nav-button global-nav-link" data-bfa="@a:Main-Nav;@d:Feedback;"  '+'href="javascript:void(0)" data-uv-lightbox="classic_widget" data-uv-mode="support" data-uv-primary-color="#ffffff" '+'data-uv-link-color="#0077ee" id="usernav-feedback-link" data-type="link">Report an Issue</a>');t.appendChild(i)}};this._getMissionControlMenu=function(t){var i=bf_global_nav.CONFIG.MENU_CATEGORIES[t];var n={title:i.title,link:i.link,id:i.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav.populateMissionControlForUser()};return n};this.populateMissionControlForUser=function(){var t=[],i=[],n=[];var a={};if("ACL"in window)a=ACL;else if("acls"in window)a=acls;for(var r in a){if(acl.switch_user_can(r)&&(r.match("queue_edit")||r.match("_homepage_edit")||r.match("homepage_edit"))){if(r.match("queue_edit")){n.push(r)}else if(r.match("_homepage_edit")){i.push(r)}else if(r.match("homepage_edit")){i.push("us_homepage_edit")}}}n.sort();i.sort();i.forEach(function(i){var n=/(\w*)_homepage_edit/g,a,r;a=n.exec(i);r=bf_global_nav._constructEachMissionControlItem(a," HP","/buzzfeed/mc/homepage/");if(r)t.push(r)});n.forEach(function(i){var n=/queue_edit_(\w*)/g,a,r;a=n.exec(i);r=bf_global_nav._constructEachMissionControlItem(a,"","/buzzfeed/mc/");if(r)t.push(r)});return t};this._getNewPostMenu=function(t,i){var n=bf_global_nav.CONFIG.MENU_CATEGORIES[i];return{title:n.title,link:n.link,id:n.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav._populateMenuListObject(internal_tools_navigation_config.CMS,t)}};this._getDataMenu=function(t,i){var n=bf_global_nav.CONFIG.MENU_CATEGORIES[i];return{title:n.title,link:n.link,id:n.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav._populateMenuListObject(internal_tools_navigation_config.DATA,t)}};this._getCommunityMenu=function(t,i){var n=bf_global_nav.CONFIG.MENU_CATEGORIES[i];return{title:n.title,link:n.link,id:n.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav._populateMenuListObject(internal_tools_navigation_config.COMMMUNITY,t)}};this._getAdsMenu=function(t,i){var n=bf_global_nav.CONFIG.MENU_CATEGORIES[i];return{title:n.title,link:n.link,id:n.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav._populateMenuListObject(internal_tools_navigation_config.ADS,t)}};this._getMoreToolsMenu=function(t,i){var n=bf_global_nav.CONFIG.MENU_CATEGORIES[i];return{title:n.title,link:n.link,id:n.id,className:bf_global_nav.TITLE_MENU_CLASS,members:bf_global_nav._populateMenuListObject(internal_tools_navigation_config.MORE_MENU,t)}};this._populateMenuListObject=function(t,i){var n=[];t.each(function(t){var a=false;var t=t;if(t.acl_link){t.acl_link=t.acl_link.replace("{username}",i.username);t.link=t.acl_link}if(t.module==="superduper"){if(window.BF_STATIC&&BF_STATIC.page==="Buzz"){t.className=t.className.replace("hidden","")}}if(t.acls){t.acls.each(function(t){if(acl.switch_user_can(t)){a=true;return}})}else if(t.exclude_if_acls){t.exclude_if_acls.each(function(t){if(!acl.switch_user_can(t)){a=true;return}})}else if(t.permission){if(i[t.permission]=="true")a=true}else a=true;if(a)n.push(t)});return n};this._constructEachMissionControlItem=function(t,i,n){if(bf_global_nav.CONFIG.excluded.indexOf(t[0])>-1)return;var a=bf_global_nav.getUrl(t[1]),r=n+a,s=bf_global_nav.getDisplayName(t[1])+i;s=s.charAt(0).toUpperCase()+s.substr(1);return{title:s,link:r,label:"Mission Control"}};this.clickEventHandler=function(t){t.observe("click",function(e){e.stopPropagation();var i=e.target.getAttribute("ref");if(i){var n=$(t)[bfjs.read_attr](bfjs.gtrack_act);var a=$(t)[bfjs.read_attr](bfjs.gtrack_label);var r=gtrack.findCatLabel(t);window.open(i);if(typeof gtrack!="undefined")gtrack.track_events(r,n,a)}return false})};this.openMenu=function(e){var t=this.select("."+bf_global_nav.DROPDOWN_MENU_CLASS)[0];this.addClassName(bf_global_nav.TITLE_MENU_EXPAND_CLASS);if(t&&!t.visible()){var i=this.getBoundingClientRect().left-12;t.setStyle({left:i+"px"});t.show();if(e.target.hasClassName(bf_global_nav.TITLE_MENU_CLASS)){var n=$(this)[bfjs.read_attr](bfjs.gtrack_cat);var a=$(this)[bfjs.read_attr](bfjs.gtrack_act);if(typeof gtrack!="undefined")gtrack.track_events(n,a,"")}}};this.hideMenu=function(){this.removeClassName(bf_global_nav.TITLE_MENU_EXPAND_CLASS);this.select("."+bf_global_nav.DROPDOWN_MENU_CLASS)[0].hide()};this.showSubMenu=function(e){var t=e.target;if(t.hasClassName("has-sub-menu")){var i=$s("ul."+t.id);if(i)i.show()}else if(!t.closest(".has-sub-menu")){bf_global_nav.hideAllSubmenu()}};this.hideAllSubmenu=function(){$$(".global-nav__sub-menu ").each(function(t){t.hide()})};this.renderMenuForSuperposter=function(){$("qp_superlist").addClassName("suplist_is_p_admin");$s(".global-nav-superposter").addClassName("bf-internal");$s(".header-wrapper").addClassName("bf-internal");$s("div#logo").addClassName("bf-internal");bf_global_nav.prepareMenu($s(".global-nav-superposter"))};this.renderMenuForFrontPages=function(){if(BF_STATIC.tt_page!="Buzz"&&BF_STATIC.tt_page!="StandAloneQP"){var t=new BF_User;if(t.isLoggedIn()&&acl.switch_user_can("general_admin")){$s(".internal-navigation_hidden").addClassName("internal-navigation");$s(".internal-navigation").removeClassName("internal-navigation_hidden");$s(".blank-placeholder_hidden").addClassName("blank-placeholder");$s(".blank-placeholder").removeClassName("blank-placeholder_hidden");bf_global_nav.prepareMenu($s(".internal-navigation"))}}}};bf_global_nav=new BF_GLOBAL_NAV;BuzzLoader.register(function(){if(acl.switch_user_can("general_admin"))bf_global_nav.init()},5);BF_Post_Tools=function(){var t=Box.Application.getService("dom");var i=Box.Application.getService("template-engine");this.cache={};this.is_draft_page=false;this.is_viewdraft_page=false;this.is_preview_page=false;this.page_name=null;this.supertag_cache=[];this.languages=["fr","pt","es","uk","ja"];this.buzz_edit_permissions_decoder=function(t){var i=t.split(".");return{p_admin:i[0],user_ad:i[1],p_editor_admin:i[2],user_byline_description_id:i[3],alias_parent_id:i[4],p_partner_admin:i[5]}};this.ck_acl_for_this_buzz={edit_user_posts:function(t){return 1},edit_editor_posts:function(t){return t.p_admin==0&&t.user_ad==0&&t.p_partner_admin==0&&(t.p_editor_admin==1||t.user_byline_description_id==3)},edit_community_posts:function(t){return t.p_admin==0&&t.user_ad==0&&t.p_editor_admin==0&&t.p_partner_admin==0&&t.user_byline_description_id!=3},edit_partner_posts:function(t){return t.p_admin==0&&(t.user_ad==1||t.p_partner_admin==1)&&t.p_editor_admin==0&&t.user_byline_description_id!=3}};this.has_permission=function(t){for(var i in bf_post_tools.ck_acl_for_this_buzz){if(bf_post_tools.ck_acl_for_this_buzz[i](t)&&acl.user_can(i))return true}return false};this.init=function(){if(typeof legit_switch_users=="undefined")legit_switch_users=[];try{$s("#page_container").show();$s("#page-header").show();var t=new BF_User;var i=t.getUserInfo();var n=t.isLoggedIn()?i.username:"not_logged_in";var a={isa:false,edit_editor_posts:false,edit_community_posts:false,edit_partner_posts:false,basic_edit_functionality:false,edit_comments:false,pound:false,freelancer:false};var r=["australia","aunews","brasil","canada","canadanews","japannews","espanol","france","francenews","germany","india","japan","mexico","uknews","uk"];if(t&&t.isLoggedIn()){a.basic_edit_functionality=true;a.isa=acl.user_can("general_admin")||acl.user_can("edit_editor_posts")||acl.user_can("edit_community_posts");a.edit_editor_posts=acl.user_can("edit_editor_posts");a.edit_community_posts=acl.user_can("edit_community_posts");a.edit_partner_posts=acl.user_can("edit_partner_posts");a.edit_comments=acl.user_can("general_admin")||acl.user_can("edit_editor_posts")||acl.user_can("edit_community_posts")||acl.user_can("edit_partner_posts")&&(BF_STATIC.f_partner||BF_STATIC.f_ad)||acl.user_can("partners_manage")&&BF_STATIC.f_ad;a.pound=acl.user_can("pound");a.geodash=false;for(var s=0;s<r.length;s++){if(acl.user_can("team_"+r[s])){a.geodash=true;break}}a.freelancer=acl.user_can("restrict_freelancer")&&!acl.user_can("general_admin")}var o=location.href.match(n);["isa","edit_editor_posts","edit_community_posts","edit_partner_posts"].each(function(t){o=o||a[t]});o=o&&!a.freelancer;var l=(o||a.edit_comments)&&!a.freelancer;this.page_name=bf_post_tools.identify_page_type();if(this.is_viewdraft_page){o=true}if(!o&&!l){return false}var u=i.isa=="true"||"acl"in window&&acl.user_can("general_admin");universal_dom.assign_handler({bucket:"open-queue-schedule",event:"change",handler:function(t){var i=t.target.value=="queue-at"&&t.element.checked;var n=t.name;if(universal_dom._bucket&&universal_dom._bucket["queue-schedule"]){universal_dom._bucket["queue-schedule"].elements.each(function(t){if(typeof t.data!="undefined"&&t.data.name==n){if(i)t.element.removeClassName("hidden");else t.element.addClassName("hidden")}})}}});universal_dom.assign_handler({bucket:"open-queue-dialog",event:"change",handler:function(t,i){var n=t.element.checked;if(t.force_closed=="true")n=false;var a=t.name;if(universal_dom._bucket&&universal_dom._bucket["queue-dialog"]){universal_dom._bucket["queue-dialog"].elements.each(function(t){if(typeof t.data!="undefined"&&t.data.name==a){if(n)t.element.removeClassName("hidden");else t.element.addClassName("hidden")}})}}});universal_dom.assign_handler({bucket:"open-vertical-dialog",event:"change",handler:function(t,i){var n=t.element.checked;if(universal_dom._bucket&&universal_dom._bucket["vertical-dialog"]){universal_dom._bucket["vertical-dialog"].elements.each(function(t){if(n){if(t.data==1)t.element.removeClassName("hidden");else t.element.addClassName("hidden")}else{if(t.data==1)t.element.addClassName("hidden");else t.element.removeClassName("hidden")}})}}});universal_dom.assign_handler({bucket:"mimic-radio",event:"change",handler:function(t){var i=t.target;var n=i.getAttribute("name");var a=i.getAttribute("value");var r=i.getAttribute("id");if(r=="queue-this"&&i.getAttribute("rel:clicked")==0){i.setAttribute("rel:clicked",1);$$('input[type="checkbox"][name="promotion"][value="queue-at"]')[0].checked=true;$("queue-calendar").removeClassName("hidden");var s=new Date;if(s.getMinutes()>=0&&s.getMinutes()<10)s.setMinutes(15);else if(s.getMinutes()>=10&&s.getMinutes()<25)s.setMinutes(30);else if(s.getMinutes()>=25&&s.getMinutes()<40)s.setMinutes(45);else if(s.getMinutes()>=40&&s.getMinutes()<55)s.setMinutes(60);else s.setMinutes(75);var o=$$('#queue-calendar [name="queue-on-day"]')[0],l=$$('#queue-calendar [name="queue-on-hour"]')[0],u=dateFormat(s,"yyyy-mm-dd"),d=dateFormat(s,"H:MM");for(var c=0;c<o.options.length;c++){if(o.options[c].value==u)o.selectedIndex=c}for(var c=0;c<l.options.length;c++){if(l.options[c].value==d)l.selectedIndex=c}}universal_dom.get_bucket_elements("mimic-radio").each(function(i){if(i.getAttribute("name")==n&&i!=t.target)i.checked=false})}});universal_dom.assign_handler({bucket:"switch_promo_std",event:"click",handler:bf_post_tools.promo.switch_promo_std});universal_dom.assign_handler({bucket:"switch_promo_fp",event:"click",handler:bf_post_tools.promo.switch_promo_fp});universal_dom.assign_handler({bucket:"switch_promo_fpuk",event:"click",handler:bf_post_tools.promo.switch_promo_fpuk});this.poller=new cookie_poller;var d=$("editForm")&&$("editForm").getStyle("display")!="none",c=$$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block";bf_post_tools.buzz_opened=d||c;var _=[];var f=$$(".post",".post2","div.contrib");var h=$$("li.contrib");for(var s=0;s<f.length;s++){var p=f[s].select(".ptools");if(p.length){if(!p[0].up(".ptools-buzzpage")&&f[s].childElements().indexOf(p[0])!=-1){f[s].removeChild(p[0])}}}var m=(new BF_User).getUserInfo().userid;var g=i.username;for(var s=0;s<f.length;s++){var b=f[s].getAttribute("rel:ptool");if(!!b&&b!=="false"&&!f[s].select(".ptools").length){if(!(f[s].nodeName=="HEADER"&&f[s].up(".buzz")&&$$(".ptools-buzzpage").length)){var v,y;var w=f[s].getAttribute("rel:data");if(w){try{v=JSON.parse(w);y=v.buzz_id}catch(e){console.warn("error parsing rel:data")}}var k=BF_STATIC.tt_page=="User"&&legit_switch_users.indexOf((new BF_User).getUserInfo().username)>-1;var T=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==n){T=true}var M=f[s].getAttribute("rel:owner");if(!!M&&M==g){_.push(f[s])}var S=bf_post_tools.buzz_edit_permissions_decoder(f[s].getAttribute("rel:ptool_code")||"");if(S.alias_parent_id==m)_.push(f[s]);else if(bf_post_tools.has_permission(S))_.push(f[s]);else if(M!=n&&"picks_controller"in window&&(T||k)&&$(y+"-delete_pick-spinner")){_.push(f[s]);v.just_pick=1;f[s].setAttribute("rel:data",Object.toJSON(v))}else if(this.is_viewdraft_page&&!t.isLoggedIn()){_.push(f[s])}}}}if(o||l){var L=document.createElement("link");L.rel="stylesheet";L.href=BF_STATIC.static_root+"/css/post-tools.css?v="+BF_STATIC.version;L.type="text/css";bf_post_tools.load_link(L);if(typeof user_post=="undefined"){var z=document.createElement("script");z.src=BF_STATIC.static_root+"/js/public/contribute/user_post.js?v="+BF_STATIC.version;z.type="text/javascript";bf_post_tools.load_link(z)}$$(".pinned").each(function(t,i){var n=t.getAttribute("rel:data");var a="homepage_edit";if((BF_STATIC.page||"")=="VerticalFront")a="queue_edit_"+BF_STATIC.tt_page.toLowerCase();if((BF_STATIC.page||"")=="Buzz"&&typeof buzz_profile!="undefined")a="queue_edit_"+buzz_profile.category.toLowerCase();if(!n)t.remove()});if(this.page_name!=="bookmarks"){this.create_tools(_,bf_post_tools.create_ptool,a)}if(a.edit_comments){this.create_tools(h,bf_post_tools.create_ctool,a)}var C=$$(".ptools a",".ctools a",".mobile-preview a",".version-bar__restore");for(var s=0;s<C.length;s++){$(C[s]).stopObserving("click");$(C[s]).observe("click",this.click_buttons.bind(this))}}if(f.length&&!$$(".ptools-buzzpage").length){var L=document.createElement("link");L.rel="stylesheet";L.href=BF_STATIC.static_root+"/css/post-tools.css?v="+BF_STATIC.version;L.type="text/css";bf_post_tools.load_link(L);for(var s=0;s<f.length;s++){var b=f[s].getAttribute("rel:ptool");if(b&&b!=="false"){_.push(f[s])}}this.create_tools(_,bf_post_tools.create_stats,a)}var A=this;if(typeof BF_STATIC!=="undefined"&&BF_STATIC.page==="Buzz"&&acl.user_can("megaphone")){var B=document.createElement("link");B.rel="stylesheet";B.href=BF_STATIC.static_root+"/css/amd-editor-megaphone-ondemand.css?v="+BF_STATIC.version;B.type="text/css";bf_post_tools.load_link(B);var E=document.createElement("script");E.src=BF_STATIC.static_root+"/js/public/amd-common.js?v="+BF_STATIC.version;E.type="text/javascript";E.onload=function(){var t=document.createElement("script");t.src=BF_STATIC.static_root+"/js/public/amd-editor-megaphone-ondemand.js?v="+BF_STATIC.version;t.type="text/javascript";bf_post_tools.load_link(t)};bf_post_tools.load_link(E)}}catch(e){console.error(e)}};this.show_translation_status=function(e){try{if(bf_post_tools.cache.language=="en"){universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"ui"}).each(function(t){t.removeClassName("hidden")})}}catch(e){console.warn("bf_post_tools.cache is not loaded yet")}};this.handle_translation_status=function(e){if(e.my_type=="mark as candidate"){bf_post_tools.supertag_cache.push("translatethis");universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"mark as candidate"}).each(function(t){t.addClassName("hidden")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"marked as candidate"}).each(function(t){t.removeClassName("hidden")})}};this.click_buttons=function(e){var t=e.target;if(t.className.indexOf("pt-wrench")!=-1){if($("editForm")&&$("editForm").getStyle("display")!="none"||$$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block"){$("editForm")?$("editForm").scrollTo():$$("div.qwik_edit")[0].scrollTo();return false}var i=t.getAttribute("rel:data").evalJSON();bf_post_tools.cancel_inline_editor();bf_post_tools.load_inline_editor(i)}else if(t.className.indexOf("c-wrench")!=-1){var i=t.getAttribute("rel:comment_id").evalJSON();bf_post_tools.cancel_inline_editor();bf_post_tools.load_inline_editor({comment_id:i,type:"contribution"})}else if(t.className.indexOf("pt-stats")!=-1)bf_post_tools.load_stats(e);else if(t.className.indexOf("pt-flexpro")!=-1)bf_post_tools.load_flexpro(e);else if(t.className.indexOf("pt-edit")!=-1)bf_post_tools.load_editor_in_dialog(e);else if(t.className.indexOf("pt-t-edit")!=-1)bf_post_tools.load_t_editor(e);else if(t.className.indexOf("pt-remove")!=-1)bf_post_tools.delete_quickpost(e);else if(t.className.indexOf("pt-geodash")!=-1)bf_post_tools.load_geodash(e);else if(t.className.indexOf("pt-hide")!=-1)bf_post_tools.hide_post(e);else if(t.className.indexOf("pt-show")!=-1)bf_post_tools.show_post(e);else if(t.className.indexOf("pt-preview-mobile")!=-1)mobile_preview.toggle_preview();else if(t.className.indexOf("sleep-button")!=-1&&mobile_preview.default_draft)mobile_preview.toggle_preview();else if(t.className.indexOf("home-button")!=-1)mobile_preview.launch_app("home");else if(t.className.indexOf("version-bar__restore")!=-1)bf_post_tools.restore_version(e)};this.load_link=function(t){var i=false;if(t.tagName=="LINK"){var n=document.getElementsByTagName("LINK");for(var a=0;a<n.length;a++){if(n[a].rel==t.rel&&n[a].href==t.href)i=true}}if(t.tagName=="SCRIPT"){var n=document.getElementsByTagName("SCRIPT");for(var a=0;a<n.length;a++){if(n[a].src==t.src)i=true}}if(!i)document.getElementsByTagName("HEAD")[0].appendChild(t)};this.create_tools=function(t,i,n){if(typeof n=="undefined"){n=null}for(var a=0;a<t.length;a++){if(t[a].select(".ptools").length)continue;var r=i(t[a],n);if(!!r){t[a].appendChild(r);t[a].appendChild(bf_post_tools.create_spinner());$(t[a]).stopObserving("mouseout");$(t[a]).stopObserving("mouseover");$(t[a]).observe("mouseout",function(e){var t=this.obj.hasClassName("ptools")?this.obj:this.obj.select(".ptools")[0];t=t?t:this.obj;t.hide()}.bind({obj:r}));$(t[a]).observe("mouseover",function(e){var t=this.obj.hasClassName("ptools")?this.obj:this.obj.select(".ptools")[0];t=t?t:this.obj;t.show()}.bind({obj:r}))}}};this.create_spinner=function(){var t=document.createElement("div");t.hide();t.className="ptool_spinner";t.style.textAlign="center";var i=document.createElement("div");i.className=" loader";t.appendChild(i);return t};this.do_load_editor_in_dialog=function(e){var t=e.target;var i=t.getAttribute("rel:data");var n=JSON.parse(i);var a=n.buzz_id;var r=n.type;var s=new BF_Request;var o=false;s.request("/buzzfeed/_public_admin",{parameters:{action:"check_edit_permissions",id:a},onSuccess:function(e){if(JSON.parse(e.responseText).success==false){BF_UI.showDialog("user_post_promoted_edit")}else{if(typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("breaking")&&buzzDetails["breaking"]){BF_Request.location({location:BF_STATIC.web_root+"/breaking_post?id="+a})}else if(/^super.*/.test(r)){r="super";BF_Request.location({location:BF_STATIC.web_root+"/post?id="+a})}else{BF_UI.showDialog("user_post_edit","Edit");$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+r+"?id="+a+"&cb="+(new Date).getTime())}}}})};this.load_editor_in_dialog=function(e){var n=arguments;i.load({id:"user_post_edit",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_edit");bf_post_tools.do_load_editor_in_dialog.apply(bf_post_tools,n)}})};this.buttons_actions=function(){if($("quickpost-tags")&&typeof user_post!="undefined"){$("quickpost-tags").stopObserving();$("quickpost-tags").observe("keydown",user_post.auto_complete_special);$("quickpost-tags").observe("keyup",user_post.auto_complete);$("quickpost-tags").observe("blur",function(){window.setTimeout(function(){$("tag_suggestions").hide()},1e3)})}if($("save_edited_buzz")){$("save_edited_buzz").stopObserving("click",bf_post_tools.save_edited_buzz);$("save_edited_buzz").observe("click",bf_post_tools.save_edited_buzz)}if($("edit_buzz_image")){$("edit_buzz_image").stopObserving("click",bf_post_tools.edit_image);$("edit_buzz_image").observe("click",bf_post_tools.edit_image);user_setting={save_image:bf_post_tools.save_image};parent.user_post.save_quickpost_image=function(){BF_UI.closeDialog("super-image-edit")}}if($("delete_contribution")){$("delete_contribution").stopObserving("click",function(e){bf_post_tools.delete_quickpost(e,"contrib")});$("delete_contribution").observe("click",function(e){bf_post_tools.delete_quickpost(e,"contrib")})}if($("remove_contribution_from_raw")){$("remove_contribution_from_raw").stopObserving("click",function(e){bf_post_tools.update_contribution_raw_flag(e,0)});$("remove_contribution_from_raw").observe("click",function(e){bf_post_tools.update_contribution_raw_flag(e,0)})}if($("restore_contribution_to_raw")){$("restore_contribution_to_raw").stopObserving("click",function(e){bf_post_tools.update_contribution_raw_flag(e,1)});$("restore_contribution_to_raw").observe("click",function(e){bf_post_tools.update_contribution_raw_flag(e,1)})}};this.put_in_vertical=function(t,i){var n=bf_post_tools.cache;var a={};n.verticals.each(function(i){if(i.category_name==t)a=i});if(i=="publish"){if(typeof n.delete_this_category_if_another_is_added!="undefined"){var r={};n.verticals.each(function(t){if(t.category_name==n.delete_this_category_if_another_is_added)r=t});if(r.action=="publish")r.action="delete"}n.delete_this_category_if_another_is_added=t}if(typeof a.category_name=="undefined"){n.verticals.push(a);a.category_name=t;a.campaign_id=n.campaignid}if(i==a.action)return;else a.action=i};this.save_edited_buzz=function(e){var t=[];var i=["name","blurb"];var n=bf_post_tools.cache;if(bf_post_tools.contrib!=1){var a=bf_post_tools.edit_form;i.each(function(i){if(a.elements[i].value=="")t.push("Missing required field ("+i+")")});var r=$$(".supertag");var s=false;for(var o=0;o<r.length;o++){if(r[o].checked){s=true;break}}if(!(a.elements["nsfw-btn"].hasClassName("selected")||a.elements["tame-btn"].hasClassName("selected"))){t.push("Please specify if it's NSFW or not")}if(!(a.elements["nbs-btn"].hasClassName("selected")||a.elements["bs-btn"].hasClassName("selected"))){t.push("Please specify if it's Brand-Safe or NBS")}if(t.length){alert("Cannot save. Please address the following error"+(t.length>1?"s":"")+":\n"+t.join("\n"));return}for(var l in bf_post_tools.buzz_fields_to_text_fields){if(a.elements[bf_post_tools.buzz_fields_to_text_fields[l]].disabled==false){n[l]=a.elements[bf_post_tools.buzz_fields_to_text_fields[l]].value}else{delete n[l]}}n.language=a.elements["language"].options[a.elements["language"].selectedIndex].value}else{var a=bf_post_tools.edit_form_contrib}var u=a.select('[id="badges_list"]')[0].getElementsByTagName("INPUT");n.badges=[];for(var o=0;o<u.length;o++){var d=u[o];if(d.checked)n.badges.push(d.value)}var c=new BF_Request;if(bf_post_tools.contrib==1){if(n.badges&&n.badges.length>0){var _={action:"update_contribution",comment_id:n.id,badges:n.badges.join(",")};c.request("/buzzfeed/comments_moderation",{method:"post",parameters:_,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})}else{return}}else{var f=a.elements["responses-on-btn"].hasClassName("selected")?1:0;var h=a.select('[id="responses-options"]')[0].getElementsByTagName("INPUT");for(var o=0;o<h.length;o++){n[h[o].name]=h[o].checked?f:0}var p=a.elements.namedItem("tags").value.split(",");p.each(function(t){n.tags.push(t)});var r=$$(".supertag");var m=[];n.supertags=[];for(var o=0;o<r.length;o++){if(r[o].checked){n.supertags.push("--supertag-"+r[o].value)}}bf_post_tools.supertag_cache.each(function(t){n.supertags.push("--"+t)});n.nsfw=a.elements["nsfw-btn"].hasClassName("selected")?"true":"false";n.brand_safe=a.elements["nbs-btn"].hasClassName("selected")?0:1;var g=a.elements["category"].options[a.elements["category"].selectedIndex];n.category_name=g.text;n.category_id=g.value;var _={action:"update_buzz",buzz:Object.toJSON(n),update_html:1};if(bf_post_tools.buzz_template)_.template=bf_post_tools.buzz_template;var b=[];if($("queue-this")&&$("queue-this").checked){var v;for(var o=0;o<a.elements.promotion.length;o++){if(a.elements.promotion[o].checked)v=a.elements.promotion[o].value}if(b&&b!="none"){_.action="update_and_promote"}if(v=="queue-at"){_["queue-on-day"]=a.elements["queue-on-day"].options[a.elements["queue-on-day"].selectedIndex].value;
_["queue-on-hour"]=a.elements["queue-on-hour"].options[a.elements["queue-on-hour"].selectedIndex].value}if(v)b.push(v)}if($("uk_queue-this")&&$("uk_queue-this").checked){var v;for(var o=0;o<a.elements.uk_promotion.length;o++){if(a.elements.uk_promotion[o].checked)v=a.elements.uk_promotion[o].value}if(b&&b!="none"){_.action="update_and_promote"}if(v=="uk_queue-at"){_["uk_queue-on-day"]=a.elements["uk_queue-on-day"].options[a.elements["uk_queue-on-day"].selectedIndex].value;_["uk_queue-on-hour"]=a.elements["uk_queue-on-hour"].options[a.elements["uk_queue-on-hour"].selectedIndex].value}if(v)b.push(v)}if($("au_queue-this")&&$("au_queue-this").checked){var v;for(var o=0;o<a.elements.au_promotion.length;o++){if(a.elements.au_promotion[o].checked)v=a.elements.au_promotion[o].value}if(b&&b!="none"){_.action="update_and_promote"}if(v=="au_queue-at"){_["au_queue-on-day"]=a.elements["au_queue-on-day"].options[a.elements["au_queue-on-day"].selectedIndex].value;_["au_queue-on-hour"]=a.elements["au_queue-on-hour"].options[a.elements["au_queue-on-hour"].selectedIndex].value}if(v)b.push(v)}if($("suggest-this")&&$("suggest-this").checked){_.fq_suggest=1}var y=new RegExp("boost-|add-");["boost","add","remove"].each(function(t){var i=["raw","thumbnails","network","homepage","homepage_now","homepage_uk","homepage_uk_now","homepage_au","homepage_au_now"];bf_post_tools.languages.each(function(t){i.push("thumbnails-"+t);i.push("thumbnails-"+t)});i.each(function(i){var n=t+"-"+i;var a=$(n);if(a&&a.checked&&!a.disabled){if(n!="add-homepage"||acl.user_can("homepage_edit")){b.push(n.replace(y,""));_.action="update_and_promote"}}})});if(b.length)_.promotion=b.join(",");c.request("/buzzfeed/_admin",{method:"post",parameters:_,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})}};this._save_edited_buzz=function(t){if(bf_post_tools.contrib==1){bf_post_tools.cancel_inline_editor()}else if(BF_STATIC.page=="Buzz"){BF_Request.location();return}var i=JSON.parse(t.responseText);if(i.success==1){try{var n=bf_post_tools.cache;if(bf_post_tools.edit_form){var a=bf_post_tools.edit_form;a.addClassName("hidden");a.parentNode.removeChild(a);document.getElementsByTagName("BODY")[0].appendChild(a)}if(bf_post_tools.current_buzz){var r=$("post-"+bf_post_tools.current_buzz);r.show();if(r.up("#queue")){r.scrollTo();r.insert("<span class='edit_success'>Edit successfully saved!</span>");window.setTimeout(function(){var t=r.select(".edit_success")[0];if(t)t.remove()},5e3)}else{r.replace(i.html)}$("post-"+bf_post_tools.current_buzz).className=r.className;universal_dom.update($("post-"+bf_post_tools.current_buzz));bf_post_tools.init()}else if(bf_post_tools.current_contrib){var a=bf_post_tools.edit_form_contrib;$("contribwhat_"+bf_post_tools.current_contrib).parentNode.show()}delete bf_post_tools.cache;bf_post_tools.supertag_cache=[]}catch(e){console.dir({e:e})}}};this.save_image=function(t,i,n,a){var r=bf_post_tools.cache;var s=n;s.type=r.form+"buzz";if($("user-loading"))$("user-loading").show();$("user-image-edit").hide();s.image=t.replace(/\.(jpg|gif)$/,"");s.action="imagecrop";var o=bf_post_tools.image_saved;var l=bf_post_tools.image_errored;var u=new BF_Request;u.request(a,{method:"post",parameters:s,onSuccess:o,onFailure:l})};this.image_errored=function(){alert("There was an error trying to save your image")};this.image_saved=function(t){var i=bf_post_tools.cache;if($("user-loading"))$("user-loading").hide();var n=JSON.parse(t.responseText);if(n.saved){if(bf_post_tools.promo.editing=="std"&&$("img_preview")){i.oldimage=i.image;i.image=n.thumb_image;$("img_preview").src=BF_STATIC.image_root+n.thumb_image}else if(bf_post_tools.promo.editing=="fp"&&$("img_fp_preview")){i["frontpage-image"]=n.thumb_image;$("img_fp_preview").src=BF_STATIC.image_root+n.thumb_image}else if(bf_post_tools.promo.editing=="fpuk"&&$("img_fpuk_preview")){i["frontpage_uk-image"]=n.thumb_image;$("img_fpuk_preview").src=BF_STATIC.image_root+n.thumb_image}}else{this.image_errored()}};this.edit_image=function(e){var t=bf_post_tools.cache;$("super-image-edit-iframe").src="/static/images/public/spinners/big_on_eee.gif";BF_UI.showDialog("super-image-edit","","page_container");$("super-image-edit-iframe").src="/buzzfeed/_edit_user_contribution_image?action=imageform&template=public/user/cropper_form.tt&wide_cropper=1";var i="link";if(t.form=="image")i="image";else if(t.form=="video")i="video";$("super-image-edit-iframe").stopObserving("load");$("super-image-edit-iframe").observe("load",function(t){try{t.target.contentWindow.user_image.setBuzzType(i)}catch(e){console.warn("unable to set buzz type")}})};this.cancel_inline_editor=function(){if(bf_post_tools.buzz_opened){bf_post_tools.clean_badges_list();var t;if(bf_post_tools.current_buzz){var i=bf_post_tools.edit_form;var n=$("post-"+bf_post_tools.current_buzz);if(bf_post_tools.show_at)n=bf_post_tools.show_at;n.show()}else if(bf_post_tools.current_contrib){var i=bf_post_tools.edit_form_contrib;$("contribwhat_"+bf_post_tools.current_contrib).parentNode.show()}else{t=1}if(!bf_post_tools.cancel_button){delete bf_post_tools.current_contrib;delete bf_post_tools.current_buzz}else{delete bf_post_tools.cancel_button}if(!t){if(i.select('[id="fav_badges"]')[0]){i.select('[id="fav_badges"]')[0].hide()}else if(i.select('[id="all_badges"]')[0]){i.select('[id="all_badges"]')[0].hide()}i.addClassName("hidden");document.getElementsByTagName("BODY")[0].appendChild(i)}delete t;bf_post_tools.cache={};bf_post_tools.contrib=0;bf_post_tools.fav_badges=0;bf_post_tools.buzz_opened=0}};this.clean_badges_list=function(){var t=$("fav_badges").getElementsByTagName("INPUT");var i=$("all_badges").getElementsByTagName("INPUT");for(var n=0;n<t.length;n++)t[n].checked=false;for(var n=0;n<i.length;n++)i[n].checked=false};this.toggle_badges=function(){var t=bf_post_tools.cache;bf_post_tools.clean_badges_list();var i=bf_post_tools.edit_form;if(bf_post_tools.current_contrib){i=bf_post_tools.edit_form_contrib}if(bf_post_tools.fav_badges){i.select('[id="fav_badges"]')[0].hide();t.badges.each(function(t){if(typeof i.elements[t]!="undefined")if(typeof i.elements[t][1]!="undefined")i.elements[t][1].checked=true;else i.elements[t].checked=true});i.select('[id="all_badges"]')[0].show();bf_post_tools.fav_badges=0}else{i.select('[id="all_badges"]')[0].hide();t.badges.each(function(t){if(typeof i.elements[t]!="undefined")if(typeof i.elements[t][0]!="undefined")i.elements[t][0].checked=true;else i.elements[t].checked=true});i.select('[id="fav_badges"]')[0].show();bf_post_tools.fav_badges=1}};this.buzz_fields_to_text_fields={name:"name",blurb:"blurb","frontpage-description":"frontpage-description","frontpage-title":"frontpage-title","frontpage_uk-description":"frontpage_uk-description","frontpage_uk-title":"frontpage_uk-title"};this.process_inline_editor=function(t){var i=JSON.parse(t.responseText);if(i.success==1){if(i.html){var n=document.createElement("div");n.innerHTML=i.html;n.id="ptools_form";n.hide();document.getElementsByTagName("BODY")[0].appendChild(n)}bf_post_tools.cache=i.buzz_data.evalJSON();var a=bf_post_tools.cache;bf_post_tools.supertag_cache=[];if(i.contribution!=1){var r=$("_converter");if(!r){r=document.createElement("div");r.id="_converter";r.addClassName("hidden");document.getElementsByTagName("BODY")[0].appendChild(r)}bf_post_tools.edit_form=$("editForm");var s=bf_post_tools.edit_form}else{bf_post_tools.edit_form_contrib=$("editFormContrib");var s=bf_post_tools.edit_form_contrib}try{var o=s.getElementsByTagName("INPUT");for(var l=0;l<o.length;l++){o[l].checked=false}var u;if(i.contribution!=1){try{$$("#post-"+bf_post_tools.current_buzz+" .ptool_spinner")[0].hide()}catch(e){console.warn("no spinner")}u=$("post-"+bf_post_tools.current_buzz)}else{$$("#contribwhat_"+bf_post_tools.current_contrib)[0].parentNode.getElementsByClassName("ptool_spinner")[0].hide();u=$("contribwhat_"+bf_post_tools.current_contrib).parentNode}if(bf_post_tools.show_at)u=bf_post_tools.show_at;bf_post_tools.cache.owner=u.getAttribute("rel:owner");bf_post_tools.buzz_opened=1}catch(e){console.dir({e:e})}if(bf_post_tools.cache.published){var d=bf_post_tools.cache.published;var c=d.split(" ");var _=c[0].split("-");var f=c[1].split(":");var h=new Date(_[0],_[1]-1,_[2],f[0],f[1],f[2],0);var p=h.format("mmm d, h:MM tt");if($("published_datetime"))$("published_datetime").update(p)}else{if($("published_datetime"))$("published_datetime").update("N/A")}if($("quickpost-public-draft")){$("quickpost-public-draft").checked=a.draft_public=="1"}s.parentNode.removeChild(s);u.hide();u.parentNode.insertBefore(s,u);s.removeClassName("hidden");s.show();a.badges.each(function(t){if(typeof s.elements[t]!="undefined"){if(typeof s.elements[t][0]!="undefined")s.elements[t][0].checked=true;else s.elements[t].checked=true}});bf_post_tools.fav_badges=1;var m=s.select('[id="all_badges"]');var g=s.select('[id="fav_badges"]');try{if(m)m[0].hide();if(g)g[0].show()}catch(e){console.dir({e:e})}if(i.contribution!=1){$H(bf_post_tools.buzz_fields_to_text_fields).each(function(t){var i=t[0];var n=t[1];r.update(unescape(a[i]));if(s.elements[n])s.elements[n].value=r.innerHTML});if(a.language&&s.elements["language"]){var b=s.elements["language"].options;for(var l=0;l<b.length;l++){if(b[l].value==a.language)b[l].selected=true}}var v=$("tag_list");if(v){v.update("");a.tags.each(function(t,i){if(i>0&&t!="")v.appendChild(document.createTextNode(", "));v.appendChild(document.createTextNode(t))})}if(a.supertags){var y=[];a.supertags.each(function(t){if($(t)){$(t).checked=true;y.push("--supertag-"+$(t).value)}else{bf_post_tools.supertag_cache.push(t)}if(t=="no-badge"){$("badges_list").addClassName("hidden")}})}if(a.contributions&&a.contributions.length){$("responses-on-btn").addClassName("selected");$("responses-off-btn").removeClassName("selected");$("responses-options").show();a.contributions.each(function(t){if($("c_"+t))$("c_"+t).checked=true})}else{$("responses-off-btn").addClassName("selected");$("responses-on-btn").removeClassName("selected");$("responses-options").hide()}if(a.verticals){var w=$("section-placeholder");if(w){var k=new Template(' 							<li> 								<input type="checkbox" checked="true" disabled="true" /> 								Added to #{category_display_name} #{time}								<input class="bf_dom" rel:bf_bucket="mimic-radio" type="checkbox" name="vertical-#{category_name}" onclick="bf_post_tools.put_in_vertical(\'#{category_name}\',this.checked?\'delete\':\'\')">Remove</input>								<input class="bf_dom" rel:bf_bucket="mimic-radio" type="checkbox" name="vertical-#{category_name}" onclick="bf_post_tools.put_in_vertical(\'#{category_name}\',this.checked?\'boost\':\'\')">Boost</input>							</li> 						');var T=document.createElement("ul");a.verticals.each(function(t){t.category_display_name=t.category_name==="Ukpolitics"?"UK Politics":t.category_name;var i=k.evaluate(t);T.innerHTML+=i;var n=$("select-publish-to-"+t.category_id);if(n)n.disabled=true});w.appendChild(T)}}if(!acl.user_can("homepage_edit")){var M=$("not-yet-queued");var S=$("not-yet-suggested");var L=$("already-suggested");if(M&&S&&L){M.addClassName("hidden");if(a.suggestion==1){S.addClassName("hidden");L.removeClassName("hidden");var z=$("suggested");if(z)z.checked=z.disabled=true}else{S.removeClassName("hidden");L.addClassName("hidden")}}var C=$("uk_not-yet-queued");if(C){C.addClassName("hidden")}}if(a.run_at&&a.already_ran!=""){var A=$("already-queued");var M=$("not-yet-queued");var S=$("not-yet-suggested");var L=$("already-suggested");var B=$("run_at");if(A&&M&&S&&L&&B){A.removeClassName("hidden");M.addClassName("hidden");S.addClassName("hidden");L.addClassName("hidden");B.update(a.run_at);$("already-queued-cbox").checked=true;$("already-queued-cbox").disabled=true}}if(a.uk_run_at&&a.uk_already_ran!=""){var E=$("uk_already-queued");var C=$("uk_not-yet-queued");var I=$("uk_run_at");if(E&&C&&I){E.removeClassName("hidden");C.addClassName("hidden");I.update(a.uk_run_at);$("uk_already-queued-cbox").checked=true;$("uk_already-queued-cbox").disabled=true}}if(a.au_run_at&&a.au_already_ran!=""){var F=$("au_already-queued");var D=$("au_not-yet-queued");var Y=$("au_run_at");if(F&&D&&Y){F.removeClassName("hidden");D.addClassName("hidden");Y.update(a.au_run_at);$("au_already-queued-cbox").checked=true;$("au_already-queued-cbox").disabled=true}}if(a.homepage){var x=$("already-added");var j=$("already-added-cbox");var N=$("already-added-on");if(x&&j&&N){x.removeClassName("hidden");j.checked=j.disabled=true;N.update(a.homepage)}else{console.warn("missing expected HTML id[s] already-added, already-added-cbox, and/or already-added-on")}}if(a.uk_homepage){var O=$("uk_already-added");var U=$("uk_already-added-cbox");var P=$("uk_already-added-on");if(O&&U&&P){O.removeClassName("hidden");U.checked=U.disabled=true;P.update(a.uk_homepage)}else{console.warn("missing expected HTML id[s] uk_already-added, uk_already-added-cbox, and/or uk_already-added-on")}}if(a.australia_homepage){var R=$("au_already-added");var q=$("au_already-added-cbox");var H=$("au_already-added-on");if(R&&q&&H){R.removeClassName("hidden");q.checked=q.disabled=true;H.update(a.australia_homepage)}else{console.warn("missing expected HTML id[s] au_already-added, au_already-added-cbox, and/or au_already-added-on")}}if(a.network){var i=$("add-network");if(i)i.checked=i.disabled=true;i=$("added-network");if(i)i.removeClassName("hidden");i=$("added-network-on");if(i)i.update("ed: "+a.network)}}if(a.raw&&$("add-raw")){var W=$("add-raw");W.checked=W.disabled=true;W=$("added-raw");if(W)W.removeClassName("hidden");W=$("added-raw-on");if(W)W.update("ed: "+a.raw)}if(a.raw&&$("remove_contribution_from_raw")){if(a.raw=="0000-00-00 00:00:00"){$("remove_contribution_from_raw").hide();$("restore_contribution_to_raw").show()}else{$("remove_contribution_from_raw").show();$("restore_contribution_to_raw").hide()}}if(i.contribution!=1){if(a.thumbnails&&a.thumbnails!="0"){var i=$("add-thumbnails");i.checked=i.disabled=true;i=$("added-thumbnails");if(i)i.removeClassName("hidden");i=$("added-thumbnails-on");if(i)i.update("ed: "+a.thumbnails)}bf_post_tools.languages.each(function(t){if(a["f_promoted-"+t]&&a["f_promoted-"+t]!="0"){var i=$("add-thumbnails-"+t);i.checked=i.disabled=true;i=$("added-thumbnails-"+t);if(i)i.removeClassName("hidden");i=$("added-thumbnails-"+t+"-on");if(i)i.update("ed: "+a["f_promoted-"+t])}});if(a.nsfw=="true"){s.elements["nsfw-btn"].addClassName("selected");s.elements["tame-btn"].removeClassName("selected")}else{s.elements["tame-btn"].addClassName("selected");s.elements["nsfw-btn"].removeClassName("selected")}if(a.brand_safe){s.elements["bs-btn"].addClassName("selected");s.elements["nbs-btn"].removeClassName("selected")}else{s.elements["nbs-btn"].addClassName("selected");s.elements["bs-btn"].removeClassName("selected")}if($("img_preview"))$("img_preview").setAttribute("src",BF_STATIC.image_root+a.image);if($("img_fp_preview")&&a["frontpage-image"])$("img_fp_preview").setAttribute("src",BF_STATIC.image_root+a["frontpage-image"]);if($("img_fpuk_preview")&&a["frontpage_uk-image"])$("img_fpuk_preview").setAttribute("src",BF_STATIC.image_root+a["frontpage_uk-image"]);if(a.category_id){var V=s.elements.category.options;for(var l=0;l<V.length;l++){if(V[l].value==a.category_id){V[l].selected=true}}}universal_dom.update(s);if(typeof a.translation_records!="undefined"){var G;var J;var Q;universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"pending"}).each(function(t){G=t;G.update("")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"translated"}).each(function(t){J=t;J.update("")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"deleted"}).each(function(t){Q=t;Q.update("")});if(a.translation_records.length==0||a.translation_records==null){universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"not requested"}).each(function(t){t.removeClassName("hidden")})}else{a.translation_records.each(function(t){if(t.status==5){if(G.childNodes.length==0){G.removeClassName("hidden");G.appendChild(document.createTextNode("Candidate"))}}if(t.status==1){G.removeClassName("hidden");G.appendChild(document.createTextNode("Awaiting "+t.language+" translation "))}if(t.status==2){J.removeClassName("hidden");var i=new Template('Translated <a target="_blank" href="/#{uri}">#{language}</a> ');var n=document.createElement("span");n.update(i.evaluate(t));J.appendChild(n)}if(t.status==6){Q.removeClassName("hidden");var i=new Template("Removed #{language} ");var n=document.createElement("span");n.update(i.evaluate(t));Q.appendChild(n)}});if(!Q.hasClassName("hidden")){var K=document.createElement("a");K.observe("click",function(){bf_post_tools.supertag_cache.push("translatethis");this.parentNode.removeChild(this);return false});K.appendChild(document.createTextNode("Restore"));Q.appendChild(K)}}}}bf_post_tools.buttons_actions();if($("editForm"))user_post.limit_categories_by_acl($("editForm").elements["category"])}};this.load_inline_editor=function(t){if(t.buzz_id||t.comment_id){if(t.type=="contribution"){bf_post_tools.current_contrib=t.comment_id;$$("#contribwhat_"+bf_post_tools.current_contrib)[0].parentNode.getElementsByClassName("ptool_spinner")[0].show();if(typeof bf_post_tools.edit_form_contrib=="undefined"){var i={action:"get_form_contrib"}}else{var i={action:"get_contrib_data"}}bf_post_tools.contrib=1;i["comment_id"]=t.comment_id;acl.load_limited_acls(["^team_",".*homepage_edit$","^queue_add.*","^queue_edit.*$"],function(){var t=new BF_Request;t.request("/buzzfeed/comments_moderation",{method:"post",parameters:i,onSuccess:bf_post_tools.process_inline_editor})})}else{bf_post_tools.current_buzz=t.buzz_id;try{$$("#post-"+bf_post_tools.current_buzz+" .ptool_spinner")[0].show();$$(".buzz header")[0].scrollTo()}catch(e){console.warn("no spinner")}if(typeof bf_post_tools.edit_form=="undefined"){var i={action:"get_form"}}else{try{bf_post_tools.edit_form.parentNode.removeChild(bf_post_tools.edit_form);delete bf_post_tools.edit_form}catch(e){console.warn("cannot find parent")}var i={action:"get_form"}}i["buzz_id"]=t.buzz_id;acl.load_limited_acls(["^team_",".*homepage_edit$"],function(){var t=new BF_Request;t.request("/buzzfeed/_admin",{method:"post",parameters:i,onSuccess:bf_post_tools.process_inline_editor})})}}else{alert("Invalid ID ("+t.buzz_id+")")}};this.load_flexpro=function(e){var t=e.target.getAttribute("rel:data").evalJSON();var i=e.target.getAttribute("rel:owner");var n=(new Date).getTime();if(t.buzz_id&&acl.user_can("auto_flex")){window.open("/buzzfeed/_optimize/"+i+"/"+t.uri,"_new_"+n)}else{alert("Invalid ID ("+t.buzz_id+")")}};this.load_rebuzz_button=function(e){picks_controller.launch_pick(e)};this.load_boost_button=function(e){var t=(new Date).getTime();if(acl.user_can("boost_button")){window.open("http://sodashop.buzzfeed.com/#/boost/?buzz_url="+encodeURIComponent(location.href),"_new_"+t)}};this.load_megaphone=function(e){var t={id:BF_STATIC.campaignid,vertical_name:typeof buzzDetails!=="undefined"?buzzDetails.category_name:"",language:typeof buzzDetails!=="undefined"?buzzDetails.language:""};this.megaphone=new window.MegaphoneModal({vertical_name:t.vertical_name,buzz_id:t.id,is_published:true,published_post:null,from_publish:false,from_bpage:true,language:t.language,enable_categorization:acl.user_can("megaphone")});this.megaphone.process_and_render()};this.load_stats=function(e){var t=e.target.getAttribute("rel:data").evalJSON();var i=e.target.getAttribute("rel:owner");var n=(new Date).getTime();if(t.buzz_id){window.open(BF_STATIC.dashboard_url+"/global/"+i+"/"+t.uri)}else{alert("Invalid ID ("+t.buzz_id+")")}};this.load_geodash=function(e){var t=e.target.getAttribute("rel:data").evalJSON();var i=e.target.getAttribute("rel:owner");var n=(new Date).getTime();if(t.buzz_id){window.open("https://geodash.buzzfeed.com/#global/"+i+"/"+t.uri,"_new_"+n)}else{alert("Invalid ID ("+t.buzz_id+")")}};this.update_contribution_raw_flag=function(e,t){if(e.event)e=e.event;e.stop();var i=t?1:0;var n={action:"update_contribution",comment_id:bf_post_tools.cache.id,f_raw:t};var a=new BF_Request;a.request("/buzzfeed/comments_moderation",{method:"post",parameters:n,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})};var n=function(t){var i=t=="hide"?1:-1;var n=$$("#posts-count")[0];if(n){var a=JSON.parse(n.getAttribute("rel:data"));a.posts_count-=i;n.setAttribute("rel:data",JSON.stringify(a));n.childNodes[0].nodeValue=a.posts_count}var r=$$("#hidden-count")[0];if(r){var s=JSON.parse(r.getAttribute("rel:data"));s.hidden_count+=i;r.setAttribute("rel:data",JSON.stringify(s));r.childNodes[0].nodeValue=s.hidden_count}};this.show_post=function(e){if(e.event)e=e.event;e.stop();var t=new BF_User;var i=t.getUserInfo();var a=i.username;var r=e.target;var s=r.getAttribute("rel:owner");var o=r.getAttribute("rel:data");var o=JSON.parse(o);var l=o.buzz_id;if("acl"in window&&acl.user_can("edit_partner_posts")){r.setAttribute("rel:buzz_id",l);return picks_controller.show_pick({stop:function(){},target:r},function(){n("show")})}};this.mark_for_translation=function(e,t){if(e.event)e=e.event;e.stop();var i=t.getAttribute("rel:data").evalJSON();var n=false;var a=document.getElementsByClassName("pt-translate");if(a[0].className.indexOf("translate-active")!=-1){n=true}if(!n){var r={action:"queue_translation",buzz_id:i.buzz_id};ajax=new BF_Request;ajax.request("/buzzfeed/translation_moderation",{method:"get",parameters:r,onSuccess:function(e){var t=document.getElementsByClassName("pt-translate");t[0].className=t[0].className+" translate-active";document.getElementsByClassName("pt-translate-check")[0].checked=true;return false}})}else{var r={action:"unqueue_translation",buzz_id:i.buzz_id};ajax=new BF_Request;ajax.request("/buzzfeed/translation_moderation",{method:"get",parameters:r,onSuccess:function(e){var t=document.getElementsByClassName("pt-translate");t[0].className=t[0].className.replace(" translate-active","");document.getElementsByClassName("pt-translate-check")[0].checked=false;return false}})}};this.hide_post=function(e){if(e.event)e=e.event;e.stop();var t=new BF_User;var i=t.getUserInfo();var a=i.username;var r=e.target;var s=r.getAttribute("rel:owner");var o=r.getAttribute("rel:data");var o=JSON.parse(o);var l=o.buzz_id;if("acl"in window&&acl.user_can("edit_partner_posts")){r.setAttribute("rel:buzz_id",l);return picks_controller.hide_pick({stop:function(){},target:r},function(){n("hide")})}};this.do_delete_quickpost=function(e,t){if(t=="contrib"){var i=bf_post_tools.current_contrib;var n=$("user_post_delete_iframe");if(n){var a=n.parentNode;a.removeChild(n)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");if($("post-headline"))$("post-headline").update("this contribution");var r=$("cancel-delete-button");var s=$("delete-button");if(r){r.stopObserving("click");r.observe("click",bf_post_tools._cancel_delete_quickpost)}if(s){s.stopObserving("click");s.observe("click",function(){bf_post_tools._delete_contribution({comment_id:i})})}}BF_UI.showDialog("user_post_delete","Delete")}else{var o=new BF_User;var l=o.getUserInfo();var u=l.username;var d=e.target;var c=d.getAttribute("rel:owner");var _=d.getAttribute("rel:data");var _=JSON.parse(_);var f=_.buzz_id;if(BF_STATIC.tt_page=="Home"&&"acl"in window&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){BF_UI.showDialog("user_post_delete","Remove from the "+BF_STATIC.country.toUpperCase()+" frontpage");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/remove?id="+f+"&country="+BF_STATIC.country);return}var h=false;if("acl"in window&&acl.user_can("delete_user_posts")){h=true}if(!h&&acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner))h=true;var p=BF_STATIC.tt_page=="User"&&legit_switch_users.indexOf((new BF_User).getUserInfo().username)>-1;var m=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==u){m=true}if(u!=c&&!h&&!m&&!p)return;if(c!=u&&"picks_controller"in window&&"acl"in window&&(acl.user_can("picks_delete_from_anywhere")||m||p)&&$(f+"-delete_pick-spinner")){d.setAttribute("rel:buzz_id",f);var g=$("posts-count");if(g&&g.up("li").hasClassName("selected")){var b=g.getAttribute("rel:data");b=JSON.parse(b);b.posts_count--;g.setAttribute("rel:data",Object.toJSON(b));g.update(b.posts_count)}return picks_controller.delete_pick({stop:function(){},target:d})}else{var n=$("user_post_delete_iframe");if(n){var a=n.parentNode;a.removeChild(n)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");var v="this contribution";if(_!=null&&typeof _.name!=="undefined"&&_.name){v=_.name}else if(typeof BF_STATIC.buzz_name!=="undefined"&&BF_STATIC.buzz_name){v=BF_STATIC.buzz_name}if($("post-headline"))$("post-headline").update(v);var r=$("cancel-delete-button");var s=$("delete-button");if(r){r.stopObserving("click");r.observe("click",bf_post_tools._cancel_delete_quickpost)}if(s){s.stopObserving("click");s.observe("click",function(){bf_post_tools._delete_quickpost({buzz_id:f})})}}BF_UI.showDialog("user_post_delete","Delete")}}},this.delete_quickpost=function(e,n){var a=arguments;if(e.event){e=e.event}e.stop();i.load({id:"user_post_delete",returnType:"fragment",callback:function(i){t.appendOnce(i,".js-page-container",".js-user_post_delete");bf_post_tools.do_delete_quickpost.apply(bf_post_tools,a)}})};this._cancel_delete_quickpost=function(t){top.BF_UI.closeDialog("user_post_delete")};this._delete_quickpost=function(t){var i={action:"delete",id:t.buzz_id};var n="/buzzfeed/_public_admin";if("reranked_id"in window){delete i.id;i.reranked_id=reranked_id;n="/buzzfeed/rerank_subbuzz"}var a=(new BF_Request).request;a(n,{method:"post",needsToken:true,parameters:i,while_processing:{show:"delete-button-spinner",hide:"delete-button"},onSuccess:function(i){var n=JSON.parse(i.responseText);if(n.success!=1){var a=n.error;if(a==="You cannot delete once the buzz has appeared on the homepage or has been promoted."){a="Sorry, this post has been promoted by BuzzFeed editors so it can no longer be edited or deleted. Contact community@buzzfeed.com for more info."}$("delete-quickpost-form").innerHTML='<div class="bf_dialog_content_area"><div class="bf_dialog_pad">'+a+'</div></div><div id="user_post_preview_footer" class="bf_dialog_footer"></div>';return}if(BF_STATIC.page=="Buzz"){top.BF_UI.closeDialog("user_post_delete");if(document.cookie.indexOf("testmode")==-1)BF_Request.location({reload_track:true})}else{top.BF_UI.closeDialog("user_post_delete");parent.$("post-"+t.buzz_id).hide();var r=parent.$("draft-count");var s=parent.$("posts-count");if(r&&r.up("li").hasClassName("selected")){var o=r.getAttribute("rel:data");o=JSON.parse(o);o.draft_count--;r.setAttribute("rel:data",Object.toJSON(o));r.update(o.draft_count)}if(s&&s.up("li").hasClassName("selected")){var l=s.getAttribute("rel:data");l=JSON.parse(l);l.posts_count--;s.setAttribute("rel:data",Object.toJSON(l));s.update(l.posts_count)}}}})};this._delete_contribution=function(t){var i={action:"update_contribution",f_deleted:1,comment_id:t.comment_id};var n=(new BF_Request).request;n("/buzzfeed/comments_moderation",{method:"post",needsToken:true,parameters:i,while_processing:{show:"delete-button-spinner",hide:"delete-button"},onSuccess:function(){top.BF_UI.closeDialog("user_post_delete");bf_post_tools.cancel_inline_editor()}})};this.remove_from_parent=function(){var t={};t.action="moderate";t.id=bf_post_tools.current_contrib;var i=function(t){var i=JSON.parse(t.responseText);alert("Remove from parent cintribution id"+i.id+": "+i.updated)};var n=function(t){var i=JSON.parse(t.responseText);console.error(i);alert("Error! Remove from parent")};var a=new BF_Request;a.request("/buzzfeed/_contribution_moderator",{method:"get",parameters:t,onSuccess:i,onFailure:n})};this.create_element=function(t,i){var n=document.createElement("A");var a=t.getAttribute("rel:owner");var r=t.getAttribute("rel:data").evalJSON();var s=t.getAttribute("rel:buzz_id");n.className=i;n.href="#";n.innerHTML=i;n.setAttribute("onclick","return false");n.setAttribute("rel:data",JSON.stringify(r));n.setAttribute("rel:buzz_id",s);if(i=="pt-wrench"){n.setAttribute("rel:actions","click:bf_post_tools.load_inline_editor");n.setAttribute("rel:bf_bucket","event_handler")}if(i=="pt-remove"){var o=(new BF_User).getUserInfo().username;var l=t.getAttribute("rel:owner");var u=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==o){u=true}var d=BF_STATIC.tt_page=="User"&&legit_switch_users.indexOf((new BF_User).getUserInfo().username)>-1;if(l!=o&&"picks_controller"in window&&"acl"in window&&(acl.user_can("picks_delete_from_anywhere")||u||d)&&$(s+"-delete_pick-spinner")||BF_STATIC.tt_page=="Home"&&"acl"in window&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){n.addClassName("pt-remove-picks")}}n.setAttribute("rel:owner",a);return n};this.create_stats=function(t,i){try{if(!"acl"in window){throw new Error("acl is not available")}if(t.nodeName=="HEADER"&&t.up(".buzz")&&$$(".ptools-buzzpage").length||t.nodeName!="HEADER"||!t.up(".buzz")||!acl.user_can("general_admin")){return""}bf_post_tools_stats.init(t);var n=document.createElement("DIV"),a=document.createElement("DIV"),r=document.createElement("DIV"),s=t.getAttribute("rel:data");n.className="ptools-buzzpage";a.className="ptools";r.className="solid ptools-stats-wrapper";var o=bf_post_tools_stats.create_stats(t,i);r.appendChild(o);a.appendChild(r);n.appendChild(a);window.setTimeout(function(){var t=document.createElement("div");t.style.width="100%";t.style.height="40px";if($("header_wrapper")){$("header_wrapper").insert({before:t})}else if($("page-header")){$("page-header").insert({before:t})}$($$(".ptools a.pt-stats")[0]).observe("click",bf_post_tools.click_buttons)},200);return n}catch(e){console.error(e)}};this.create_ptool=function(t,i){try{if(!"acl"in window)throw new Error("acl is not available");bf_post_tools_stats.init(t);bf_post_tools_editbuzz.init(t);var n=document.createElement("DIV");n.className="ptools";n.setAttribute("style","display:none");if(BF_STATIC.tt_page=="Home"&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}var a,r=bf_post_tools.create_element(t,"pt-t-edit");r.setAttribute("rel:gt_act","open-post");r.setAttribute("rel:gt_cat","[ttp]:omni-box");if(bf_post_tools.is_viewdraft_page){var s;s=document.createElement("DIV");s.className="ptools-draftpage";s.appendChild(n);if(acl.user_can("general_admin"))n.appendChild(r);n.appendChild(bf_post_tools.create_element(t,"pt-preview-mobile"));return s}else if(bf_post_tools.is_draft_page){if(acl.user_can("general_admin"))n.appendChild(bf_post_tools.create_element(t,"pt-wrench"));n.appendChild(r);n.appendChild(bf_post_tools.create_element(t,"pt-remove"));return n}else{var s;if(acl.user_can("general_admin")){if(t.nodeName=="HEADER"&&t.up(".buzz")&&$$(".ptools-buzzpage").length)return false;if(t.nodeName=="HEADER"&&t.up(".buzz")){s=document.createElement("DIV");s.className="ptools-buzzpage";var a=bf_post_tools_stats.create_stats(t,i);var o=document.createElement("DIV");o.className="solid ptools-stats-wrapper";o.appendChild(a);n.appendChild(o);s.appendChild(n);var l=new BF_User;if(acl.user_can("creative_byline_in_toolbar")){var u=t.getAttribute("rel:data");u=JSON.parse(u);var d=new BF_Request;d.request("/buzzfeed/api/buzz/original_owner",{method:"get",parameters:{id:u.buzz_id},onSuccess:function(e){var t=e.responseText.evalJSON();if(t.success&&t.user){var i=document.createElement("DIV");i.className="user-info";var n=BF_STATIC.web_root+"/"+t.user.username;var r=t.user.image?t.user.image:"/static/images/public/defaults/user_large.jpg";
i.innerHTML='<img class="user-avatar circle" src="'+BF_STATIC.image_root+r+'" width="26" height="26" />';i.innerHTML+='<a class="user-display-name link-gray text-5 bold" target="_blank" href="'+n+'">'+t.user.display_name+"</a>";if(BF_STATIC.f_ad==1&&t.user.p_partner_admin==1){a.insertBefore(i,a.firstChild)}}},onFailure:function(){}})}bf_post_tools.ptools_buzzpage=window.setInterval(function(){var t=null,i=null,n=null,a=null;var r=$("back_to_top");return function(){if(t==null){t=$$(".ptools")[0];i=t.up();n=document.createElement("div");n.addClassName("ptools_wrench_popup");n.addClassName("hidden");i.appendChild(n);if(i.select(".pt-wrench").length>0)i.select(".pt-wrench")[0].style.zIndex=101;$("page_container").insert({before:i});$(document.body).addClassName("post-tools")}if(!r){r=$("back_to_top")}if(t){if(document&&(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop)&&40<=(document.documentElement.scrollTop||document.body.scrollTop)){i.style.position="fixed"}else if(a==null){a=document.createElement("div");a.style.width="100%";a.style.height=i.getHeight()+"px";a.addClassName("ptools_fixer");if($("header_wrapper")){$("header_wrapper").insert({before:a})}else if($("page-header")){$("page-header").insert({before:a})}}}var s=$("editForm")&&$("editForm").getStyle("display")!="none",o=$$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block";if(bf_post_tools.buzz_opened||s||o)n.removeClassName("hidden");else n.addClassName("hidden")}}(),200)}}var l=new BF_User;var c=l.getUserInfo();var _=c.username;var f=t.getAttribute("rel:owner");var u=t.getAttribute("rel:data");u=JSON.parse(u);var h=u.buzz_id;var p=acl.user_can("delete_user_posts")||acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner)||_==f;t.setAttribute("rel:buzz_id",h);var m=bf_post_tools.buzz_edit_permissions_decoder(t.getAttribute("rel:ptool_code")||"");if(p&&(parseInt(m.p_editor_admin)==1||parseInt(m.user_byline_description_id)==3)){p=acl.user_can("delete_user_posts")}var g=BF_STATIC.tt_page=="User"&&legit_switch_users.indexOf((new BF_User).getUserInfo().username)>-1;if(i.geodash){if(!a){n.appendChild(bf_post_tools.create_element(t,"pt-geodash"))}}var b=bf_post_tools_editbuzz.create_post_tools(t,i,n,a);if(b)n.appendChild(b);var v=$("username_of_page_owner")?$("username_of_page_owner").value:_;if(v==f&&BF_STATIC.tt_page=="User"&&BF_STATIC.user_is_f_ad==1&&acl.user_can("partners_manage")){if(bf_post_tools.page_name=="posts"){n.appendChild(bf_post_tools.create_element(t,"pt-hide"))}if(bf_post_tools.page_name=="hidden"){n.appendChild(bf_post_tools.create_element(t,"pt-show"))}}return s?s:n}}catch(e){console.error(e)}};this.create_ctool=function(t,i){try{if(t.getAttribute("rel:comment_id")=="")return false;var n=document.createElement("DIV");n.className="ctools";n.setAttribute("style","display:none");var a=document.createElement("A");a.className="c-wrench";a.href="#";a.innerHTML="c-wrench";a.setAttribute("onclick","return false");n.appendChild(a);var r=t.getAttribute("rel:comment_id").evalJSON();a.setAttribute("rel:comment_id",JSON.stringify(r));t.appendChild(n);return n}catch(e){if(!t.getAttribute("track")||!t.getAttribute("track").evalJSON()||t.getAttribute("track").evalJSON().user!="You")console.error(e)}};this.load_t_editor=function(e){var t={};var i;if(/\/_draft\//.test(window.location.href)&&window.opener&&/\/post/.test(window.opener.location.href)){e.stop();return window.close()}if(typeof e=="undefined"&&bf_post_tools.cache!={}&&bf_post_tools.buzz_opened){t.buzz_id=bf_post_tools.cache.campaignid;t.form_id=bf_post_tools.cache.form_id;t.type=bf_post_tools.cache.form;t.uri=bf_post_tools.cache.uri;i=bf_post_tools.cache.owner}else{t=e.target.getAttribute("rel:data").evalJSON();i=e.target.getAttribute("rel:owner")}var n="",a={};if($$(".ptools-buzzpage").length&&(!$$(".ptools_wrench_popup").length||$$(".ptools_wrench_popup")[0].getStyle("display")=="none")){var r=window.getSelection();if(r.focusNode&&r.toString()){var s=r.focusNode.parentNode.hasClassName("buzz_superlist_item")?r.focusNode.parentNode:r.focusNode.parentNode.up(".buzz_superlist_item");if(s&&s.id){a["id"]="suplist_item_"+s.id.replace("superlist_"+t.buzz_id+"_","");a["meta"]=false;var o=r.focusNode.nodeName;var l=o=="#text"?r.focusNode.parentNode:r.focusNode;if(o=="#text"||o=="P"||o=="H2"){var u=r.focusNode.parentNode.up(".buzz_superlist_item");if(l.nodeName=="H2")a["meta"]="title";else if(l.nodeName=="A"&&l.up(".sub_buzz_source_via")||l.nodeName=="DIV"&&l.hasClassName("sub_buzz_source_via"))a["meta"]="via";if(r.focusNode.nodeName=="#text"){a["start"]=r.anchorOffset;a["end"]=r.focusOffset;var l=r.focusNode.parentNode}else{a["start"]=0;a["end"]=r.focusNode.textContent.length;var l=r.focusNode}var d=0;var c=$A(s.children);for(var _=0;_<=c.length;_++){if(c[_]!=l&&c[_]&&c[_].textContent)d+=c[_].textContent.length;else break}a["offset"]=d}if(r.focusNode&&r.focusNode.nodeName=="#text"||r.focusNode.nodeName=="P")a["text"]=r.toString().substr(0,20).strip()}else r=null;n="#"+Object.toJSON(a)}if(!r||!r.focusNode||!r.toString()){a["scrollonly"]="true";var f=document.documentElement.scrollTop||document.body.scrollTop,h=document.viewport.getHeight(),p,m=[];if($$(".buzz header")[0].cumulativeOffset().top+100<f){h=h-h*.2;p=f+h;var g=25;$$("#buzz_sub_buzz .buzz_superlist_item").each(function(t){var i=t.cumulativeOffset().top,n=parseInt(t.getStyle("height")),a=i+n;if(i<f&&f<a||f<i&&i<p){var r=0;if(i<f||f+document.viewport.getHeight()<a){r=-5}if(g>0&&f<i&&a<f+document.viewport.getHeight()){r+=g;g-=15}var s=n-(f-i>0?f-i:0)-(a-p>0?a-p:0);m.push({id:t.id,per:s/(h/100)+r})}});var b=0,v;m.map(function(t){if(t.per>b){b=t.per;v=t.id}});if(!m.length)v=$$("#buzz_sub_buzz .buzz_superlist_item").last().id;a["id"]="suplist_item_"+v.replace("superlist_"+t.buzz_id+"_","");n="#"+Object.toJSON(a)}}}var y=(new Date).getTime();t.link_prefix=BF_STATIC.web_root+"/post?id=";t.link_suffix=n;var w=t.link_prefix+t.buzz_id+t.link_suffix;if(typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("breaking")&&buzzDetails["breaking"]||typeof t.list_format_visual!="undefined"&&t.list_format_visual=="breaking"){window.open(BF_STATIC.web_root+"/breaking_post?id="+t.buzz_id)}else if(t.form_id>=20&&acl.user_can("fork_draft",acl.MUST_BE_DEFINED)){if(!bf_post_tools.fork_draft)bf_post_tools.fork_draft=new ForkDraft;return bf_post_tools.fork_draft.enter_bpage_flow(t)}else if(t.form_id>=20||is_queue_suggestions_page){window.open(w,"_new_"+y)}if(t.type=="quick post")window.open(BF_STATIC.web_root+"/buzzfeed/edit/"+i+"/"+t.uri+n,"_new_"+y)};this.restore_version=function(e){var t=e.target.getAttribute("data-epoch-millis");var i=new Date(t*1);if(confirm("Are you sure you want to revert this article to the version saved on "+i.toLocaleString()+"?")){$s("#suplist-modal-spinner").addClassName("suplist-modal-show");var n=BF_STATIC.campaignid;(new BF_Request).request("/buzzfeed/buzz_versions",{method:"post",parameters:{action:"import",buzz_id:n,epoch_millis:t},onSuccess:function(t){var i=JSON.parse(t.responseText);if(i.success){if(window.opener){window.opener.bf_modal.show_spinner();window.opener.location.reload()}else{window.open(BF_STATIC.web_root+"/post?id="+n)}window.close()}else{$s("#suplist-modal-spinner").removeClassName("suplist-modal-show");alert("Couldn't restore version")}},onError:function(t){$s("#suplist-modal-spinner").removeClassName("suplist-modal-show")},onFailure:function(t){$s("#suplist-modal-spinner").removeClassName("suplist-modal-show")}})}};this.promo={container:"promo_fields",fp_class:"fp_promo",std_class:"std_promo",fpuk_class:"fpuk_promo",editing:"std",switch_promo_std:function(e){if(typeof superlist!="undefined")return true;bf_post_tools.promo.editing="std";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fp_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fpuk_class)},switch_promo_fp:function(e){if(typeof superlist!="undefined")return true;bf_post_tools.promo.editing="fp";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.fp_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fpuk_class)},switch_promo_fpuk:function(e){if(typeof superlist!="undefined")return true;bf_post_tools.promo.editing="fpuk";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.fpuk_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fp_class)}};this.set_buzz_template=function(t){this.buzz_template=t};this.identify_page_type=function(t){var i=t||document.location.pathname;var n={drafts:/\/drafts\//i,_drafts:/\/_draft\//i,responses:/\/responses($|\/)/i,activity:/\/activity($|\/)/i,hidden:/\/hidden_posts($|\/)/i,bookmarks:/\/bookmarks\//i};var a="posts";for(var r in n){if(i.match(n[r])){a=r}}this.is_draft_page=a==="drafts";this.is_viewdraft_page=document.location.pathname.match(/\/_draft|_breaking_preview\//)?true:false;return a};this.load_pound=function(e){var e=e||window.event;var t=e.target||e.srcElement;var i=(new Date).getTime();var n="";var a=encodeURI(BF_STATIC.buzz_name);var r=window.location.pathname.split("/");if(r.length>0){r=r[r.length-1]||""}window.open("https://catalyst.buzzfeed.com/?buzzids="+BF_STATIC.campaignid+"&username="+BF_STATIC.username+"&uri="+r+"&title="+a,"_new_"+i)}};BF_Post_Tools.editor_div_id="_editor_div_"+Math.random()*1e5;bf_post_tools=new BF_Post_Tools;BuzzLoader.register(function(){if(BF_STATIC.tt_page!=="StandAloneQP"){bf_post_tools.init()}},1);BF_Post_Tools_Stats=function(){this.pt_owner;this.buzz_info;this.buzz_id;this.stats_data;this.default_link;this.STAT_TEMPLATE_ID="_post_tool_stat";this.TEMPLATE_URL=BF_STATIC.static_root+"/js/mustache/compiled/post_tool_stat.js";this.el={tooltip:".post-tool--tooltip"};this.init=function(t){bf_post_tools_stats.pt_owner=t.getAttribute("rel:owner");bf_post_tools_stats.buzz_info=t.getAttribute("rel:data").evalJSON();bf_post_tools_stats.buzz_id=t.getAttribute("rel:buzz_id");bf_post_tools_stats.create_link_for_dashboard();var i=t.getAttribute("rel:ptool_stats");if(i)i=JSON.parse(i);else i={};bf_post_tools_stats.stats_data=i};this.create_link_for_dashboard=function(){var t=(new Date).getTime();bf_post_tools_stats.default_link=BF_STATIC.dashboard_url+"/global/"+bf_post_tools_stats.pt_owner+"/"+bf_post_tools_stats.buzz_info.uri};this.create_stats=function(t,i){var n=document.createElement("DIV");n.className="ptools-stats xs-col-12 sm-col-12 md-col-12 lg-col-12";var a=[{icon:"icon-eye",link:bf_post_tools_stats.default_link,name:"impressions",stat_data:bf_post_tools_stats.stats_data["impressions"]}];for(var r=0;r<a.length;r++){var s=a[r];if(s.stat_data=="")a.splice(r,1)}Box.Application.getService("template-engine").load({id:bf_post_tools_stats.STAT_TEMPLATE_ID,templateUrl:bf_post_tools_stats.TEMPLATE_URL,returnType:"fragment",callback:function(t){n.appendChild(t)},data:{stat_icons_map:a}});n.observe("mouseover",function(e){if(n.select(bf_post_tools_stats.el["tooltip"]).length==0){bf_post_tools_stats.create_social_stats(n,t,i)}else{var a=$s(bf_post_tools_stats.el["tooltip"]);a.show()}});n.observe("mouseleave",function(e){var t=$s(bf_post_tools_stats.el["tooltip"]);t.hide()});return n};this.create_buttons=function(t,i,n,a){var r=bf_post_tools.create_element(t,"social stats xs-mt1 button button--small button--secondary xs-col-12");r.update(i);r.href=n?bf_post_tools_stats.default_link:"#";r.target="_blank";if(n)r.setAttribute("onclick","");var s=document.createElement("DIV");s.className="social stats";s.appendChild(r);if(a){s.observe("click",function(e){a(e)})}return s};this.create_social_stats=function(t,i,n){var a=document.createElement("DIV");a.className="ptools-stats ptools-stats--share post-tool--tooltip rounded xs-border-lighter xs-p3 fill-white";var r=bf_post_tools_stats.create_buttons(i,"Post dashboard",true,null);var s=t.getBoundingClientRect().width;var o=-(140-s/2);a.setStyle({left:o+"px"});bf_post_tools_stats.templateRenderDone(n,r,t,a)};this.templateRenderDone=function(t,i,n,a){if(t.isa||t.edit_partner_posts)a.appendChild(i);bf_post_tools_stats.attachEvents(n,a)};this.attachEvents=function(t,i){i.observe("mouseover",function(e){var t=$s(bf_post_tools_stats.el["tooltip"]);t.show()});i.observe("mouseout",function(e){var t=$s(bf_post_tools_stats.el["tooltip"]);t.hide()});t.appendChild(i)}};bf_post_tools_stats=new BF_Post_Tools_Stats;BF_Post_Tools_EditBuzz=function(){this.own_switch_user;this.pt_owner;this.buzz_info;this.buzz_id;this.stats_data;this.default_link;this.is_marked_for_translation=false;this.TEMPLATE_ID_MAIN="_post_tool_editbuzz";this.TEMPLATE_ID_MORE="_post_tool_editbuzz_more";this.TEMPLATE_URL=BF_STATIC.static_root+"/js/mustache/compiled/post-tool-editbuzz.js";this.classes={buttonCommonClasses:" button button--icon js-post-tools ",mainbar_icon_class:" button--small xs-float-left xs-mr1",moreButtonCommonClasses:" button button--secondary xs-p1 xs-block rounded text-5 xs-text-center more-tooltip__button",tooltip_sectionHeader:" col xs-col-12 text-6 text-gray-lightest bold xs-mb1 ",quick_edit:"pt-wrench ",optimizer:"pt-flexpro ",pound:"pt-pound__button ",rebuzz:"pt-rebuzz__button ",boost:"pt-boost__button ",promote:"pt-megaphone__button ",edit_dialog:"pt-edit ",edit:"pt-t-edit ",delete_btn:"pt-remove delete-link xs-mb1 xs-mt2 col xs-col-12 text-5 bold js-post-tools",translate:"pt-translate ",bento:"pt-bento",buzzId:"pt-buzzId__button ",audit_log:"pt-audit-log__button ",area_audit:"pt-area-audit__button ",more:"button pt-more xs-float-left ",tooltip_icons:"xs-m0"};this.el={tooltip:".post-tool-edit--tooltip"};this.icon_paths={edit:"edit_pen",quick_edit:"quick_edit",optimizer:"optimizer",boost:"boost",promote:"promote",rebuzz:"rebuzz",pound:"pound",buzz_id:"buzz_id",audit_log:"audit_log",area_audit:"area_audit"};this.can_user_translate=function(){return acl.user_can("team_brasil")||acl.user_can("team_france")||acl.user_can("team_espanol")||acl.user_can("team_germany")||acl.user_can("team_mexico")||acl.user_can("team_spain")||acl.user_can("team_japan")||acl.user_can("team_russia")||acl.user_can("gengo_english_queue")};this.can_user_bento_moderate=function(){return acl.user_can("bento_user")||acl.user_can("bento_suggest_all")||acl.user_can("bento_suggest_edition")};this.init=function(t){bf_post_tools_editbuzz.pt_owner=t.getAttribute("rel:owner");bf_post_tools_editbuzz.buzz_info=t.getAttribute("rel:data");var i=JSON.parse(bf_post_tools_editbuzz.buzz_info);bf_post_tools_editbuzz.buzz_id=t.getAttribute("rel:buzz_id")?t.getAttribute("rel:buzz_id"):i.buzz_id;bf_post_tools_editbuzz.own_switch_user=BF_STATIC.tt_page=="User"&&legit_switch_users.indexOf((new BF_User).getUserInfo().username)>-1;bf_post_tools_editbuzz.set_is_marked_for_translation()};this.addBuzzInfoInData=function(t){for(var i=0;i<t.length;i++){var n=t[i];n.rel_data=bf_post_tools_editbuzz.buzz_info;n.buzz_id=bf_post_tools_editbuzz.buzz_id;n.rel_owner=bf_post_tools_editbuzz.pt_owner}};this.attachEventForMainBar=function(t,i,n){var a=t.select(".pt-t-edit")[0];a.setAttribute("rel:gt_act","open-post");a.setAttribute("rel:gt_cat","[ttp]:omni-box");var r=t.select(".pt-bento")[0];if(r){r.observe("click",function(e){if(t.select(".popup__wrapper").length==0){bf_post_tools_editbuzz.openBentoStatusPopup(t)}})}var s=t.select(".pt-more")[0];var o=bf_post_tools_editbuzz.create_more_tooltip(i,n);if(o.length>0){s.observe("mouseover",function(e){if(t.select(bf_post_tools_editbuzz.el["tooltip"]).length==0){bf_post_tools_editbuzz.openMoreMenu(t,i,n,o)}else{var a=$s(bf_post_tools_editbuzz.el["tooltip"]);a.show()}});s.observe("mouseleave",function(e){var t=$s(bf_post_tools_editbuzz.el["tooltip"]);t.hide()})}else{t.removeChild(s)}t.select(".js-post-tools").each(function(t){t.observe("click",bf_post_tools_editbuzz.clickEventHandlers)})};this.set_is_marked_for_translation=function(){if(typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("postTags")){var t=buzzDetails.postTags;if(t.indexOf("translatethis")!=-1){bf_post_tools_editbuzz.is_marked_for_translation=true}else{bf_post_tools_editbuzz.is_marked_for_translation=false}}};this.create_post_tools=function(t,i,n,a){var r=i.isa||i.edit_partner_posts;var s=acl.user_can("delete_user_posts")||acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner)||u==d;if(BF_STATIC.page=="User"){var o=new BF_User;var l=o.getUserInfo();var u=l.username;var d=bf_post_tools_editbuzz.pt_owner;var c=JSON.parse(bf_post_tools_editbuzz.buzz_info);var _=bf_post_tools_editbuzz.buzz_id;var f=bf_post_tools_editbuzz.own_switch_user;var h=false;if($("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==u){h=true}var p=bf_post_tools.create_element(t,"pt-t-edit");p.setAttribute("rel:gt_act","open-post");p.setAttribute("rel:gt_cat","[ttp]:omni-box");if(r){n.appendChild(p);if(!a){n.appendChild(bf_post_tools.create_element(t,"pt-stats"))}n.appendChild(bf_post_tools.create_element(t,"pt-flexpro"));n.appendChild(bf_post_tools.create_element(t,"pt-wrench"));if(s&&!$(document.body).hasClassName("HomeSection")&&BF_STATIC.tt_page!="User"){n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}else if(d!=u&&"picks_controller"in window&&(f||h||acl.user_can("picks_delete_from_anywhere"))&&$(_+"-delete_pick-spinner")){n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}else if(d!=u&&f&&$(_+"-delete_pick-spinner")){n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}}else if(i.basic_edit_functionality){if(c.just_pick&&c.just_pick==1||f){n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}else{n.appendChild(bf_post_tools.create_element(t,"pt-edit"));if(!a){n.appendChild(bf_post_tools.create_element(t,"pt-stats"))}if(s)n.appendChild(bf_post_tools.create_element(t,"pt-remove"))}}}else if(BF_STATIC.page=="Buzz"){var n=document.createElement("DIV");n.className="solid ptools-editbuzz";var m=[];if(r){m=[{icon:bf_post_tools_editbuzz.icon_paths.edit,text:"Edit",classes:bf_post_tools_editbuzz.classes.edit+bf_post_tools_editbuzz.classes.buttonCommonClasses+bf_post_tools_editbuzz.classes.mainbar_icon_class},{icon:bf_post_tools_editbuzz.icon_paths.optimizer,text:"Post Optimizer",classes:bf_post_tools_editbuzz.classes.optimizer+bf_post_tools_editbuzz.classes.buttonCommonClasses+bf_post_tools_editbuzz.classes.mainbar_icon_class}];if(bf_post_tools_editbuzz.can_user_translate()&&!bf_post_tools_editbuzz.can_user_bento_moderate()){var g=bf_post_tools_editbuzz.classes.translate+"  button ";var b={text:"Translate",classes:g+bf_post_tools_editbuzz.classes.buttonCommonClasses+bf_post_tools_editbuzz.classes.mainbar_icon_class,customHTML:true,isTranslate:true};if(bf_post_tools_editbuzz.is_marked_for_translation){b.classes+=" translate-active";b.checked="checked"}m.push(b)}if(bf_post_tools_editbuzz.can_user_bento_moderate()){var g=bf_post_tools_editbuzz.classes.bento;var v={text:"Bento",classes:g+bf_post_tools_editbuzz.classes.buttonCommonClasses+bf_post_tools_editbuzz.classes.mainbar_icon_class};m.push(v)}}else if(i.basic_edit_functionality){if(!(c.just_pick==1||f))m.push({path:bf_post_tools_editbuzz.icon_paths.edit,text:"Edit",classes:bf_post_tools_editbuzz.classes.edit+bf_post_tools_editbuzz.classes.buttonCommonClasses+bf_post_tools_editbuzz.classes.mainbar_icon_class,has_icon:true})}m.push({text:"More",classes:bf_post_tools_editbuzz.classes.more+" button--small button--secondary"});bf_post_tools_editbuzz.addBuzzInfoInData(m);bf_post_tools_editbuzz.renderTemplate(bf_post_tools_editbuzz.TEMPLATE_ID_MAIN,n,t,i,m,null);return n}};this.create_more_tooltip=function(i,n){var a=new BF_User;var r=a.getUserInfo();var s=r.username;var o=bf_post_tools_editbuzz.pt_owner;var l=JSON.parse(bf_post_tools_editbuzz.buzz_info);var u=bf_post_tools_editbuzz.buzz_id;var d=acl.user_can("delete_user_posts")||acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner)||s==o;var c=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==s){c=true}var _=[];var f=n.isa||n.edit_partner_posts;var h=bf_post_tools.buzz_edit_permissions_decoder(i.getAttribute("rel:ptool_code")||"");if(d&&(parseInt(h.p_editor_admin)==1||parseInt(h.user_byline_description_id)==3)){d=acl.user_can("delete_user_posts")}if(f){if(acl.user_can("boost_button")||acl.user_can("megaphone")||acl.user_can("general_admin")||acl.user_can("pound")){_.push({section_header:"POST ACTIONS",classes:bf_post_tools_editbuzz.classes.tooltip_sectionHeader})}var p=bf_post_tools_editbuzz.classes.moreButtonCommonClasses+bf_post_tools_editbuzz.classes.buttonCommonClasses;if(acl.user_can("boost_button"))_.push({icon:bf_post_tools_editbuzz.icon_paths.boost,text:"Boost",classes:bf_post_tools_editbuzz.classes.boost+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});if(acl.user_can("megaphone"))_.push({icon:bf_post_tools_editbuzz.icon_paths.promote,text:"Promote",classes:bf_post_tools_editbuzz.classes.promote+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});if(acl.user_can("general_admin"))_.push({icon:bf_post_tools_editbuzz.icon_paths.rebuzz,text:"Rebuzz",classes:bf_post_tools_editbuzz.classes.rebuzz+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});_.push({icon:bf_post_tools_editbuzz.icon_paths.quick_edit,text:"Post Tools",classes:bf_post_tools_editbuzz.classes.quick_edit+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});if(acl.user_can("general_admin")){_.push({section_header:"POST INFO & REPORTS",classes:bf_post_tools_editbuzz.classes.tooltip_sectionHeader+"xs-mt2"});if(acl.user_can("pound"))_.push({icon:bf_post_tools_editbuzz.icon_paths.pound,text:"Pound",classes:bf_post_tools_editbuzz.classes.pound+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});_.push({icon:bf_post_tools_editbuzz.icon_paths.buzz_id,text:"Get Buzz ID",classes:bf_post_tools_editbuzz.classes.buzzId+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});_.push({icon:bf_post_tools_editbuzz.icon_paths.area_audit,text:"Area Audit",classes:bf_post_tools_editbuzz.classes.area_audit+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons});_.push({icon:bf_post_tools_editbuzz.icon_paths.audit_log,text:"Audit Log",classes:bf_post_tools_editbuzz.classes.audit_log+p,icon_class:bf_post_tools_editbuzz.classes.tooltip_icons})}var m=false;if(d&&!$(document.body).hasClassName("HomeSection")&&BF_STATIC.tt_page!="User"){m=true}else if(o!=s&&"picks_controller"in window&&(bf_post_tools_editbuzz.own_switch_user||c||acl.user_can("picks_delete_from_anywhere"))&&$(u+"-delete_pick-spinner")){m=true;t}else if(o!=s&&bf_post_tools_editbuzz.own_switch_user&&$(u+"-delete_pick-spinner")){m=true}else if(l.just_pick==1||bf_post_tools_editbuzz.own_switch_user){m=true}if(m)_.push({text:"Delete post",isLink:"1",classes:bf_post_tools_editbuzz.classes.delete_btn})}else if(n.basic_edit_functionality){if(bf_post_tools_editbuzz.buzz_info.just_pick==1||bf_post_tools_editbuzz.own_switch_user||d){_.push({text:"Delete post",isLink:"1",classes:bf_post_tools_editbuzz.classes.delete_btn})}}bf_post_tools_editbuzz.addBuzzInfoInData(_);return _};this.openMoreMenu=function(t,i,n,a){var r=document.createElement("DIV");r.className="ptools-editbuzz post-tool-edit--tooltip post-tool--tooltip rounded xs-border-lighter xs-p3 fill-white clearfix";r.setAttribute("rel:buzz_id",bf_post_tools_editbuzz.buzz_id);t.appendChild(r);bf_post_tools_editbuzz.renderTemplate(bf_post_tools_editbuzz.TEMPLATE_ID_MORE,r,i,n,a,t)};this.attachEventForTooltip=function(t,i){i.select(".js-post-tools").each(function(t){t.observe("click",bf_post_tools_editbuzz.clickEventHandlers)});i.observe("mouseover",function(e){var t=$s(bf_post_tools_editbuzz.el["tooltip"]);t.show()});i.observe("mouseout",function(e){var t=$s(bf_post_tools_editbuzz.el["tooltip"]);t.hide()})};this.clickEventHandlers=function(e){var t=e.target;if(!t.hasClassName("js-post-tools")){t=t.closest("div.js-post-tools");if(!t)return false}if(t.hasClassName(bf_post_tools_editbuzz.classes.quick_edit)){if($("editForm")&&$("editForm").getStyle("display")!="none"||$$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block"){$("editForm")?$("editForm").scrollTo():$$("div.qwik_edit")[0].scrollTo();return false}var i=t.getAttribute("rel:data").evalJSON();bf_post_tools.cancel_inline_editor();bf_post_tools.load_inline_editor(i)}else if(t.hasClassName(bf_post_tools_editbuzz.classes.optimizer))bf_post_tools.load_flexpro(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.pound))bf_post_tools.load_pound(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.rebuzz))bf_post_tools.load_rebuzz_button(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.boost))bf_post_tools.load_boost_button(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.promote))bf_post_tools.load_megaphone(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.edit_dialog))bf_post_tools.load_editor_in_dialog(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.edit))bf_post_tools.load_t_editor(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.delete_btn))bf_post_tools.delete_quickpost(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.translate))bf_post_tools.mark_for_translation(e,t);else if(t.hasClassName(bf_post_tools_editbuzz.classes.buzzId))bf_post_tools_editbuzz.copy_buzz_id(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.audit_log))bf_post_tools_editbuzz.show_audit_log(e);else if(t.hasClassName(bf_post_tools_editbuzz.classes.area_audit))bf_post_tools_editbuzz.open_area_audit(e)};this.openBentoStatusPopup=function(t){var i=document.createElement("IFRAME");i.setAttribute("id","bento_status_page");i.setAttribute("height","430px");i.setAttribute("src",BF_STATIC.bento_url+"/post/"+bf_post_tools_editbuzz.buzz_id);document.domain="buzzfeed.com";bf_post_tools_editbuzz.renderBentoTemplate(t,i)};this.copy_buzz_id=function(e){alert("Buzz Id="+$$("head meta").find(function(t){return t.getAttribute("property")=="bf:buzzid"}).getAttribute("content"))};this.show_audit_log=function(e){window.open("/buzzfeed/_audit_viewer?action=view","audit_viewer","width=650,height=550")};this.open_area_audit=function(e){var t=BF_STATIC.campaignid;window.open("/buzzfeed/area_audit/"+t)};this.renderBentoTemplate=function(t,i){Box.Application.getService("template-engine").load({id:"popup_base",returnType:"fragment",callback:function(n){t.appendChild(n);var a=Box.Application.getService("dom");a.updateHTML(a.find(t,".popup__body").first(),i);a.addClass(a.find(t,".popup__content").first(),"modal__wrapper--open");var r=t.select(".popup__wrapper")[0];if(typeof r!="undefined"){r.observe("click",function(e){if(e.target.closest(".popup__close")){r.remove()}})}}})};this.renderTemplate=function(t,i,n,a,r,s){Box.Application.getService("template-engine").load({id:t,templateUrl:bf_post_tools_editbuzz.TEMPLATE_URL,returnType:"fragment",callback:function(t){i.appendChild(t);if(s)bf_post_tools_editbuzz.attachEventForTooltip(s,i);else bf_post_tools_editbuzz.attachEventForMainBar(i,n,a)},data:{buzz_icons_map:r}})}};bf_post_tools_editbuzz=new BF_Post_Tools_EditBuzz;document.observe("dom:loaded",function(){var t=new Date;var i=Math.floor(t.getTime()/1e3);var n=Math.floor(Math.random()*i);var a=Math.floor(Math.random()*i);if(i>=1334808059&&i<=1334894399){if($("pepsi-header")!=null)$("pepsi-header").show();if($("pepsi-hot-module")!=null)$("pepsi-hot-module").show();$("pepsi-hot-module").insert('<IMG SRC="https://ad.doubleclick.net/ad/N5371.244372.BUZZFEED/B6445150.2;sz=1x1;ord='+n+'?" BORDER=0 WIDTH=1 HEIGHT=1 ALT="">');$("pepsi-header").insert('<IMG SRC="https://ad.doubleclick.net/ad/N5371.244372.BUZZFEED/B6445150.9;sz=1x1;ord='+a+'?" BORDER=0 WIDTH=1 HEIGHT=1 ALT="">')}if($("prius-stats")){$("prius-stats").observe("click",function(){var t=new Image;if(BF_STATIC.tt_page=="Home"){t.src="https://ad.doubleclick.net/clk;254412577;78956947;f;pc=;"}else{t.src="https://ad.doubleclick.net/clk;254412577;78956999;m;pc=;"}})}});var BF_ACL=function(){this.loading={};this.loaded={};this.dynamic_rules={};this.MUST_BE_DEFINED=true;this.init=function(){this.GROUP_REGEX=new RegExp("^group:");if("ACL"in window){for(var t in ACL){acl.manage_visibility(t)}}else if("acls"in window){for(var t in acls){acl.manage_visibility(t)}}if(typeof EventManager!=="undefined"){EventManager.fire("acl:load:done")}};this.load_limited_acls=function(t,i,n){if(!n)n=0;if(!i)i=function(t){console.dir(t)};if(typeof t=="string")t=[t];var a=t.join(",");if(this.loaded[a]){return i({success:1,message:"Already loaded those"})}if(this.loading[a]){if(n<20)return setTimeout(function(){acl.load_limited_acls(t,i,n+1)},250);else return i({success:0,message:"previous request to load these ACLs didnt respond in time"})}this.loading[a]=1;if(!(new BF_User).isLoggedIn()){console.warn("Must be logged in to load additional ACLs");i({success:0,message:"user is not logged in"});return}var r=function(t){var n;try{var r=document.createElement("style");r.setAttribute("type","text/css");r.appendChild(document.createTextNode(""));document.getElementsByTagName("HEAD")[0].appendChild(r);n=document.styleSheets[document.styleSheets.length-1]}catch(e){console.warn("Having problems creating a new stylesheet via JS")}var s=function(t,i,n,a){if(i in acl.dynamic_rules)return;acl.dynamic_rules[i]=1;try{if("insertRule"in t)t.insertRule(i+" {"+n+"}",a);else if("addRule"in t)t.addRule(i,n,a);else console.warn("Don't know mechanism for adding rules in this browser")}catch(e){console.warn("Failed horribly in an attempt to add CSS rule: "+i+" {"+n+"}")}};var o=function(t){s(n,"."+t,"display:none");s(n,".can_"+t+" .acl_control."+t,"display:inherit");s(n,".can_"+t+" ."+t,"display:inherit")};var l=JSON.parse(t.responseText);if(l.success&&"acls"in window){for(var u in l.acls){acls[u]=l.acls[u].split(",");o(u);acl.manage_visibility(u)}i({success:1,message:"ACLs loaded"});acl.loaded[a]=1}else{i({success:0,message:"server issue"})}}.bind(a);var s=function(){(new BF_Request).request("/buzzfeed/_acl",{method:"get",parameters:{action:"load_limited_acls",rules:t},onSuccess:r,onFailure:function(){i({success:0,message:"something really bad happened"})}})};s()};this.manage_visibility=function(t){if("Buzz"!=(BF_STATIC.page||"")){if(acl.user_can(t)&&!bfjs.match(acl.GROUP_REGEX,t)){bfjs.addClass(document.getElementsByTagName("BODY")[0],"can_"+t)}}};this.test_user=function(t,i){bfjs.each(["p_admin","p_developer_admin","p_other_admin","p_editor_admin","p_partner_admin","cat_power_>=_1","cat_power_>=_2","cat_power_>=_3","cat_power_>=_4","cat_power_>=_5","byline_buzzfeed_creative","byline_buzzfeed_contributor","byline_publishing_partner","byline_buzzfeed_staff","byline_community_brand_publisher","byline_community_contributor","byline_freeform_input","byline_brand_publisher"],function(i){if(t[i]==1)t[i]="true";else t[i]="false"});return acl._check(t,i)?"pass":"fail"};this.user_can=function(t,i){if(typeof i=="undefined")i=false;if(i&&typeof ACL[t]=="undefined")return false;return acl.switch_user_can(t)||acl.default_user_can(t)};this.switch_user_can=function(t){var i=new BF_User;if(i.isLoggedIn()){i=i.getUserInfo();i.id=i.userid;return acl._check(i,t)}else{return false}};this.default_user_can=function(t){var i=new BF_User;if(i.isLoggedIn()){return acl._check(i.getUserInfo().default_user,t)}else{return false}};this._check=function(t,i){var n=false;var a;if(typeof t.permission_key!="undefined"&&t.permission_key!=null){a=acl._check_permission_key(t.permission_key,i,t.p_admin=="true");if(!acl.debug)return a}if("acls"in window){this.explode_groups(i);var r=acls[i]||["p_admin"];for(var s=0;s<r.length;s++){var o=r[s];
if(o=="anyone")return true;var l=o.replace(/^!/,"");var u=l!=o;var d=l.match(/^[0-9]+$/)?true:false;if(u&&d&&parseInt(t.id)==parseInt(l)){return false}if(!u&&d&&parseInt(t.id)==parseInt(l)){return true}if(!u&&!d&&(t[l]=="true"||t[l]==1)){n=true}var c=/cat_power_>=_(\d)/i;var _=0;_=o.match(c);if(_){var f=_[1];if(t.community_tier>=f)n=true}if(/^byline_\d+$/.test(o)&&o=="byline_"+t.byline_description_id){n=true}}}else{console.warn("No ACLs loaded")}if(acl.debug){if(n!=a&&!acl.skip_debug_msg){console.warn("Error running user_can for "+i+" ( got "+a+"; expected "+n+" )")}}return n};this._check_permission_key=function(t,i,n){var a=0;var r=1;if(typeof ACL=="undefined"){console.warn("ACL variable is not set");return false}if(!ACL[i]){if(!i.match("^group:"))console.warn("ACL not defined ("+i+")");return n}var s=ACL[i][a];var o=ACL[i][r];var l=t.substr(t.length-(s+1),1);var u=parseInt(l,16)&1<<o;return u>0};this.explode_groups=function(t){if("acl_manager"in window)return;group_regex=new RegExp("^group:");if(!acls[t])return;var i={};bfjs.each(acls[t],function(t){if(bfjs.match(group_regex,t)&&acls[t]){bfjs.each(acls[t],function(t){i[t]=1})}else{i[t]=1}});acls[t]=[];for(var n in i)acls[t].push(n)}};acl=new BF_ACL;if(window.BuzzLoader){BuzzLoader.register(function(){acl.init()},10)}var FlexProSplash=function(){this.draw_overlay=function(t,i){var n=document.createElement("div");n.addClassName(i.position);n.addClassName("splash-overlay");if($$("#"+t.id+" .splash-overlay").length>0){$(t.id).removeChild($$("#"+t.id+" .splash-overlay")[0])}n.id="splash-overlay";if(i.label.name!="none"){var a=document.createElement("div");a.addClassName("label");a.update(i.label.value);if(i.is_video){var r=document.createElement("div");var s=document.createElement("span");r.addClassName("label-wrap");s.addClassName("splash-video-icon");s.update("&nbsp;");r.insert(a);r.insert(s);n.appendChild(r)}else{n.appendChild(a)}}["title"].each(function(t){if(i.promo[t]){try{var a=document.createElement("div");a.addClassName(t);a.addClassName(i.color);a.style.fontSize=i.size+"px";a.style.lineHeight=i.size+"px";var r=document.createElement("div");r.addClassName("splash-desc");r.innerHTML=i.promo[t];a.appendChild(r);n.appendChild(a)}catch(e){console.error(e)}}});t.appendChild(n);if($$(".splash-overlay")&&$$("#edit-flex-pro-form")!=""){var o=$$(".splash-overlay")[0];var l=$$("#splash-container1")[0].getHeight();var u=$$(".splash-size-warning")[0];if(o){if(o.getHeight()>l*.94){u.addClassName("visible")}else if(u.hasClassName("visible")){u.removeClassName("visible")}}}}};var BF_header=function(){var t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=this;this.els={};this.init=function(){universal_dom.assign_handler({bucket:"signin",event:"click",handler:function(){BF_LOGIN_SIGNUP.show({locationName:"header",onSuccessLoginCb:function(){BF_LOGIN_SIGNUP.updateUserNav();location.reload()}.bind(this)})}});try{if($$(".page-search").length>0){i.els["button_search_toggle"]=$s(".page-search__search-button");i.els["el_search"]=$s(".page-search");i.els["el_search_input"]=$s(".page-search__input");i.els["shares"]=$$(".page-nav__action--fb-share").length?$s(".page-nav__action--fb-share"):null;i.els["app_promo_old"]=$$(".new-vertical-callout").length?$s(".new-vertical-callout"):null;i.els["app_promo"]=$$(".page-nav__action--app").length?$s(".page-nav__action--app"):null;i.els["button_search_toggle"].observe("click",function(t){if($s(".page-search").hasClassName("inactive")){header.showSearchBox();Event.stop(t)}});document.observe("click",function(e){header.closeSearchBar(e)})}header.bf_community_submit();setTimeout("header.youtube_dfp()",1500);if(BF_STATIC.tt_page!="Video")header.ipad_promo()}catch(t){console.dir(t)}};this.showSearchBox=function(){if(i.els["shares"]!==null){i.els["shares"].addClassName("page-nav__action--hidden")}else if(i.els["app_promo_old"]!==null){i.els["app_promo_old"].addClassName("page-nav__action--hidden")}else if(i.els["app_promo"]!==null){i.els["app_promo"].addClassName("page-nav__action--hidden")}else{}i.els["el_search"].removeClassName("inactive").addClassName("active");i.els["el_search_input"].focus()};this.closeSearchBar=function(e){var t=e.target||false;if($s(".page-search")&&!(t instanceof SVGElement)){if(t&&t.up(".page-search")){return}}if(i.els["shares"]!==null){i.els["shares"].removeClassName("page-nav__action--hidden")}else if(i.els["app_promo_old"]!==null){i.els["app_promo_old"].removeClassName("page-nav__action--hidden")}else if(i.els["app_promo"]!==null){i.els["app_promo"].removeClassName("page-nav__action--hidden")}i.els["el_search"].addClassName("inactive").removeClassName("active")};this.bf_community_submit=function(){var t=$("community-submit-btn");if(t){var i=new BF_User;if(i.isLoggedIn()){t.innerHTML="Make A Post!"}bf_login.loggedInCallbacks.push(function(){t.innerHTML="Make A Post!"})}};this.fix_length=function(t){var i=t.currentTarget?$(t.currentTarget):$(t.srcElement),n=i.hasClassName("unit")?i:i.up(".unit"),a=n.getDimensions().height,r=n.select(".title")[0],s=r.getDimensions().height;var o=r.select(".bf-name")[0]||r;if(!o.innerHTML.length){return}var l=" ";var u=5;if(BF_STATIC.language&&BF_STATIC.language=="ja"){l="";u=15}if(s>a-u){r.addClassName("invisible");var d=o.innerHTML.split(l),c=0;o.innerHTML="";while(r.getDimensions().height<n.getDimensions().height-u){o.innerHTML=d.slice(0,++c).join(l)+"&hellip;"}o.innerHTML=d.slice(0,c-1).join(l)+"&hellip;";r.removeClassName("invisible")}n.onmouseover=null};this.youtube_dfp=function(){$$(".bf-widget.partner-area").each(function(t){if(t){var i=t.select(".bf-user-url").first();if(i){var n=i.getAttribute("href");if(n&&n!=undefined){if(n.search("youtubecomedyweek")!=-1){if(t.hasClassName("current")||!t.hasClassName("variation")){t.addClassName("variation")}}}}}})};this.ipad_promo=function(){var t=this.agent=navigator.userAgent.toLowerCase();var i=' 			<div id="ipad-promo" class="bf_dom" style="display:none;" rel:gt_cat="[ttp]:ipad_promo">  				<a id="promo-content" rel:gt_act="download-app"> 					<div id="ipad-image"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/ipad.png?v=="+BF_STATIC.version+'" /></div> 					<div id="promo-text">Download The New, Personalized App For iPad!</div> 					<div id="itunes-image"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/app_store.png?v="+BF_STATIC.version+'" /></div> 					<div id="close"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/x.png?v="+BF_STATIC.version+'" id="close-img"/></div> 				</a> 			</div> 			<div style="clear:both;"></div> 			';function n(e){if(e.srcElement.identify()==="close"||e.srcElement.identify()==="close-img"){setTimeout(function(){$("ipad-promo").hide()},400);BFW_Util.setCookie({name:"no_ipad_promo",value:"1",seconds:2592e3})}else{window.open("http://itunes.apple.com/us/app/buzzfeed/id352969997?mt=8&at=10l3HP&ct="+BF_STATIC.tt_page)}}if(t.match(/ipad/)&&(t.match(/os (\d)/)[1]<6||new Date<new Date(13732416e5))){var a=BFW_Util.getCookie("no_ipad_promo");if(!a){$("header_wrapper").insert({before:i});$("ipad-promo").show();$("ipad-promo").observe("click",n)}}}};var header=new BF_header;BuzzLoader.register(header.init,1);var BF_switch_country=function(){this.els={};this.init=function(){universal_dom.assign_handler({bucket:"country_switch",event:"click",handler:switch_country.country_switch});universal_dom.assign_handler({bucket:"country_switch_menu",event:"click",handler:switch_country.country_switch_menu})};this.menu;this.hideMenuObserver=function(e){if(!e.target.hasClassName("js_country_switch")&&!e.target.up(".js_country_switch"))switch_country.menu.hide()};this.country_switch_menu=function(t){var i=$(Event.element(t)).hasClassName("js_country_switch")?Event.element(t):$(Event.element(t)).findParent(".js_country_switch");var n=$(i).down(".js_country_switch_menu");if(i&&n){if(n.visible()){n.hide()}else{n.show();switch_country.menu=n;document.stopObserving("mouseup",switch_country.hideMenuObserver);document.observe("mouseup",switch_country.hideMenuObserver)}}};this.country_switch=function(t){var i=t.r;if(i){document.location.href=i}}};var switch_country=new BF_switch_country;BuzzLoader.register(switch_country.init,1);var BF_InfiniteScrollManager=new function(){var t={};var i=this;t.DefaultScrollPlugin=Class.create({name:"test",container:"#container",enabled:false,ulr:BF_STATIC.web_root+"/plugin/pluginname/v:1.0/p:",pages:[],bottom_offset:0,bottom:null,bottom_element:"#elem li",bottom_margin:function(){},update_bottom:function(){this.bottom=$$(this.bottom_element).last().cumulativeOffset()[1]},init:function(){if($$(this.container).length){this.enabled=true;return true}else{return false}},onscroll:function(t){if(!t)t=document.viewport.getHeight()+document.viewport.getScrollOffsets()[1];if(this.bottom<t+this.bottom_offset){this.loadPage()}},isLoadPageRequired:function(){return true},getNextPage:function(){},reportGTrack:function(t){},load_iframe_ads:function(){},loadPage:function(){if(!this.enabled||!this.isLoadPageRequired())return false;this.enabled=false;var t=this.getNextPage();this.reportGTrack(t);var i=this;var n;if(typeof this.url=="function")n=this.url(t);else n=this.url+t;new Ajax.Request(n,{method:"get",onSuccess:function(n){try{i.enabled=true;i.onSuccess(n);i.update_bottom(i);i.pages.push(t);if(i.enabled)i.onscroll()}catch(e){console.error(e)}},onError:function(t){i.onError(t)},onFailure:function(t){i.onFailure(t)}})},processResponse:function(t){var i=document.createElement("div");i.innerHTML=t;return i},processListItems:function(t){t.show()},onSuccess:function(t){var i=this;var n=$$(this.container)[0];var a=this.processResponse(t.responseText);$(a).childElements().each(function(t){n.insert({bottom:t})});var r;r=$$(i.container+" li");r.each(function(t){i.processListItems.call(i,t)});universal_dom.update(n.up());this.load_iframe_ads()},onError:function(t){},onFailure:function(t){}});t.NowBuzzingScrollPlugin=Class.create(t.DefaultScrollPlugin,{});t.HPScrollPlugin=Class.create(t.DefaultScrollPlugin,{bottom_element:".col1 .grid-posts li",country:"",reported_pages:[],init:function($super){if(!$super())return false;if(!$$(this.container).length){return}if(typeof BF_STATIC!=="undefined"&&BF_STATIC.country!=="undefined"&&BF_STATIC.country!="us"){this.country=BF_STATIC.country}this.update_bottom();this.pages.push(1);EventManager.observe("HPScrollPlugin:showBottomVideo",this.showBottomVideo);EventManager.observe("HPScrollPlugin:hideLoadButton",this.hideLoadButton);return true},hideLoadButton:function(){if($$(".feed__load-button").length){$$(".feed__load-button")[0].hide()}},showBottomVideo:function(){if(!$("the_bottom_of_the_internet").hasClassName("hidden")){if($$(".feed__load-button").length)$$(".feed__load-button")[0].hide();$("the_bottom_of_the_internet").removeClassName("hidden");$("the_bottom_of_the_internet").show();var t=$("the_bottom_of_the_internet").getAttribute("rel:video");if(t){var i=document.createElement("iframe");i.width="990";i.height="720";i.frameborder=0;i.src=t;$("the_bottom_of_the_internet").appendChild(i)}}},isLoadPageRequired:function(){if(this.pages.length==10){EventManager.fire("HPScrollPlugin:done");this.enabled=false;return false}return true},getNextPage:function(){return this.pages.max()+1},reportGTrack:function(t){if(!this.reported_pages.include(t)&&gtrack.ga_status()){this.reported_pages.push(t);var i=BF_STATIC.custom_ga_url!=false?BF_STATIC.custom_ga_url:"/";_gaq.push(["_trackPageview",i+"?p="+t]);_gaq.push(["_set","page",i+"?p="+t]);COMSCORE.beacon({c1:"2",c2:"6768151"});_qevents.push({qacct:"p-3aud4J6uA4Z6Y",event:"refresh"})}},load_iframe_ads:function(){var t=this;var i=$$(".BF_IFRAME[bf_src]");for(var n=0;n<i.length;n++){var a=i[n];if(a.hasAttribute("bf_src")&&a.getAttribute("bf_src").length>0){a.src=a.getAttribute("bf_src");a.removeAttribute("bf_src");setTimeout(function(){t.load_iframe_ads()},250);break}}}});t.HPMidScrollPlugin=Class.create(t.HPScrollPlugin,{name:"hp_mid",bottom_element:".col1 .grid-posts li",container:".col2 .js-midcolumn .grid-posts:last",pages:[],url:function(t){var i=BF_STATIC.web_root+"/plugin/midcolumn/v:1.1";if(this.country&&(this.country=="br"||this.country=="uk")){if(this.country=="br")i+="/lang:pt";if(this.country=="uk")i+="/lang:uk"}i+="/p:"+t;return i},init:function($super){if(!$super())return false;this.enabled=true;this.onscroll();var t=this;EventManager.observe("HPLeftScrollPlugin:loaded",function(){t.update_bottom();var i;i=$$(t.container+" li");i.each(function(i){t.processListItems.call(t,i)})});return true}});t.HPBetaMidScrollPlugin=Class.create(t.HPMidScrollPlugin,{bottom_element:".col1 .grid-posts li",container:".col2 .js-midcolumn .grid-posts:last",url:function(t){var i=BF_STATIC.web_root+"/plugin/midcolumn/v:1.1";if(this.country&&(this.country=="br"||this.country=="uk")){if(this.country=="br")i+="/lang:pt";if(this.country=="uk")i+="/lang:uk"}i+="/beta/p:"+t;return i}});t.HPLeftScrollPlugin=Class.create(t.HPScrollPlugin,{name:"hp_left",bottom_element:".col1 .grid-posts li",container:".col1 .grid-posts:last",pages:[],z:null,adtest:getUrlVars()["test_date"]?true:false,url:function(t){return BF_STATIC.web_root+"/index/paging"+"?p="+t+"&r=1&z="+this.z+(this.adtest?"&test_date=adtest":"")+(this.country?"&country="+this.country:"")},buzzes:0,onscroll:function($super,t){$super(t);var i=$$("#page_flow li").filter(function(t){if(t.visible())return true}).length;if(i!=this.buzzes){this.buzzes=i;this.update_bottom();EventManager.fire("HPLeftScrollPlugin:loaded")}},init:function($super){if(!$super())return false;this.z=BF_STATIC.z;this.enabled=true;this.onscroll();EventManager.fire("HPLeftScrollPlugin:loaded");return true},processListItems:function(t){},onSuccess:function($super,t){$super(t);EventManager.fire("HPLeftScrollPlugin:loaded");i.insertVideoBuzzes()}});t.HPBetaLeftScrollPlugin=Class.create(t.HPLeftScrollPlugin,{bottom_element:".col1 .grid-posts li",container:".col1 .grid-posts:last",url:function(t){return BF_STATIC.web_root+"/indexbeta"+"?p="+t+"&r=1&z="+this.z+(this.adtest?"&test_date=adtest":"")+(this.country?"&country="+this.country:"")},onscroll:function($super,t){if(!t)t=document.viewport.getHeight()+document.viewport.getScrollOffsets()[1];if(this.bottom<t+this.bottom_offset){this.loadPage()}var i=$$(".col1 .grid-posts li").filter(function(t){if(t.visible())return true}).length;if(i!=this.buzzes){this.buzzes=i;this.update_bottom();EventManager.fire("HPLeftScrollPlugin:loaded")}}});t.HPLeftScrollPluginSoba=Class.create(t.HPLeftScrollPlugin,{bottom_element:".col1 .grid-posts li",container:".col1 .grid-posts:last",url:function(t){var i=BF_STATIC.web_root+"/api/v2.1/optimization/soba/"+(this.country?this.country:"us")+"/"+t;return i},onscroll:function($super,t){if(!t)t=document.viewport.getHeight()+document.viewport.getScrollOffsets()[1];if(this.bottom<t+this.bottom_offset){this.loadPage()}var i=$$(".col1 .grid-posts li").filter(function(t){if(t.visible())return true}).length;if(i!=this.buzzes){this.buzzes=i;this.update_bottom();EventManager.fire("HPLeftScrollPlugin:loaded")}},onSuccess:function(t){var i=JSON.parse(t.responseText);var n=Box.Application.getService("template-engine");var a=30;var r=(this.pages.length-1)*a;var s=r+a;this.soba_buzzes=i.buzzes;n.load({id:"lede.homepage",partials:{"lede/homepage/_badge.lede":n.getTemplate("_badge.lede"),"lede/homepage/_small-meta":n.getTemplate("_small-meta"),"lede/homepage/_post-tools-buttons":n.getTemplate("_post-tools-buttons")}});n.load({id:"ad-default"});var o=[7,14,21,28,35,42,49,56,63,70,77,84,91,98,105,112];var l=0;$(this.soba_buzzes).each(function(t,i){var a={buzz:t,site:BF_STATIC.image_service_root,thumbnail_src:t.images.standard,display_name:t.bylines[0]["display_name"],username:t.bylines[0]["username"],buzz_href:BF_STATIC.web_root+"/"+t.bylines[0]["username"]+"/"+t.uri+(t.user_ad?"?b=1":""),blurb:t.description,show_user:1,show_advertiser:0,list_item:1,no_progload:1,badge:t.badges.length>=1?1:0,first_badge:t.badges.length>=1?t.badges[0]:0,comments:t.comment_count>=1?1:0,dashboard_url:BF_STATIC.dashboard_url,bfa_extra_data:"{obj_id:"+t.id+",obj_type:post,post_category:"+t.category+",p:"+BF_STATIC.tracking.regions.flow.items+"}"};var r=false;if(typeof story_unit_wids!="undefined"&&o.indexOf(i)!=-1)r=story_unit_wids.shift();var s=n.render("lede.homepage",a,{"lede/homepage/_badge.lede":n.getTemplate("_badge.lede"),"lede/homepage/_small-meta":n.getTemplate("_small-meta"),"lede/homepage/_post-tools-buttons":n.getTemplate("_post-tools-buttons")});BF_STATIC.tracking.regions.flow.items++;if(r){s+=n.render("ad-default",{ad:{wid:r,ad_pos:26},omit:{partner_sash:true}});BF_STATIC.tracking.regions.flow.items++}$s(".col1 .grid-posts:last").insert({bottom:s});if(r)loadGPTAd({wid:r,infinite_scroll:1});l++});if(l==0){EventManager.fire("HPScrollPlugin:done");this.enabled=false;return false}this.update_bottom(this)},onError:function(t){EventManager.fire("HPScrollPlugin:hideLoadButton")},onFailure:function(t){EventManager.fire("HPScrollPlugin:hideLoadButton")}});t.HPLeftScrollPluginDarwin=Class.create(t.HPLeftScrollPlugin,{bottom_element:".col1 .grid-posts li",container:".col1 .grid-posts:last",isLoadPageRequired:function(){return true},getNextPage:function(){var t=this.pages.length;if(t<6){return 2}else if(t>=6&&t<11){return 3}else{return 4}},url:function(t){var i;if(BF_STATIC.hp_beta){i=BF_STATIC.web_root+"/api/v2.1/optimization/darwin/"+BF_STATIC.country+"/"+t+"/with_badges"}if(BF_STATIC.hp_five){i=BF_STATIC.web_root+"/api/v2.1/optimization/finch/"+BF_STATIC.country+"/"+t+"/with_badges"}if(BF_STATIC.hp_six){i=BF_STATIC.web_root+"/api/v2.1/optimization/tortoise/"+BF_STATIC.country+"/"+t+"/with_badges"}return i},onscroll:function($super,t){if(!t)t=document.viewport.getHeight()+document.viewport.getScrollOffsets()[1];if(this.bottom<t+this.bottom_offset){this.loadPage()}var i=$$(".col1 .grid-posts li").filter(function(t){if(t.visible())return true}).length;if(i!=this.buzzes){this.buzzes=i;this.update_bottom();EventManager.fire("HPLeftScrollPlugin:loaded")}},onSuccess:function(t){var n=JSON.parse(t.responseText);var a=Box.Application.getService("template-engine");var r=30;var s=(this.pages.length-1)*r;if(s>=150&&s<300){s=s-150}else if(s>=300){s=s-300}var o=s+r;this.darwin_buzzes=n.buzzes;a.load({id:"lede.homepage",partials:{"lede/homepage/_badge.lede":a.getTemplate("_badge.lede"),"lede/homepage/_small-meta":a.getTemplate("_small-meta"),"lede/homepage/_post-tools-buttons":a.getTemplate("_post-tools-buttons")}});a.load({id:"ad-default"});var l=[7,14,21,28,35,42,49,56,63,70,77,84,91,98,105,112];var u=0;$(this.darwin_buzzes).each(function(t,i){var n={buzz:t,site:BF_STATIC.image_service_root,thumbnail_src:t.images.standard,display_name:t.bylines[0]["display_name"],username:t.bylines[0]["username"],buzz_href:BF_STATIC.web_root+"/"+t.bylines[0]["username"]+"/"+t.uri+(t.user_ad?"?b=1":""),blurb:t.description,show_user:1,show_advertiser:0,list_item:1,no_progload:1,badge:t.badges.length>=1?1:0,first_badge:t.badges.length>=1?t.badges[0]:0,comments:t.comment_count>=1?1:0,dashboard_url:BF_STATIC.dashboard_url};if(i>=s&&i<o){var r=false;if(typeof story_unit_wids!="undefined"&&l.indexOf(i)!=-1)r=story_unit_wids.shift();var d=a.render("lede.homepage",n,{"lede/homepage/_badge.lede":a.getTemplate("_badge.lede"),"lede/homepage/_small-meta":a.getTemplate("_small-meta"),"lede/homepage/_post-tools-buttons":a.getTemplate("_post-tools-buttons")});if(r)d+=a.render("ad-default",{ad:{wid:r,ad_pos:26},omit:{partner_sash:true}});$s(".col1 .grid-posts:last").insert({bottom:d});if(r)loadGPTAd({wid:r,infinite_scroll:1});u++}});if(u<r){EventManager.fire("HPScrollPlugin:done");this.enabled=false;return false}this.update_bottom(this);i.insertVideoBuzzes()},onError:function(t){EventManager.fire("HPScrollPlugin:hideLoadButton")},onFailure:function(t){EventManager.fire("HPScrollPlugin:hideLoadButton")}});var n=[];this.add_plugin=function(i){try{var a=new t[i];if(a.init()){n.push(a)}}catch(e){console.error(e)}};this.init=function(){Event.observe(window,"scroll",function(){var t=document.viewport.getHeight()+document.viewport.getScrollOffsets()[1];for(var i=0;i<n.length;i++){if(n[i].enabled)n[i].onscroll(t)}});if(BF_STATIC.Features.feedx_native_video_player){this.getVideoBuzzes()}};this.getVideoBuzzes=function(){var t="/static/native-video-source.js";if(!document.location.href.match(/native_video_flow_test/)||this.videoBuzzes){return}new Ajax.Request(t,{method:"get",evalJSON:"force",onSuccess:function(t){try{i.videoBuzzes=t.responseJSON.data.videos;i.insertVideoBuzzes()}catch(n){console.error(n)}}})};this.insertVideoBuzzes=function(){var t;var n;var a;var r;var s;if(!document.location.href.match(/native_video_flow_test/)||!this.videoBuzzes){return}t=[];$$(".col1 .grid-posts").each(function(e){if(!$(e).up(".homepage-video")){$(e).childElements().each(function(i){t.push(i)})}});a=$$(".native-video").length;if(a>=this.videoBuzzes.length){return}s=[];n=0;t.each(function(e,t){if(!$(e).hasClassName("grid-posts__item")&&!$(e).hasClassName("grid-posts__item--native-video")||a>=i.videoBuzzes.length){return}else if(n==4&&$(e).hasClassName("grid-posts__item--native-video")){n=0;return}else if(n==4&&!$(e).hasClassName("grid-posts__item--native-video")){i.videoBuzzes[a]["video_url"]="http://www.w3schools.com/html/mov_bbb.mp4";r=new Element("li",{"class":"grid-posts__item grid-posts__item--native-video","rel:gt_cat":"[ttp]:feed"}).update(new Element("div",{"class":"native-video","data-module":"native-video"}).update(new Element("script",{type:"text/x-config"}).update('{"thumb-src": "'+i.videoBuzzes[a]["thumbnail_url"]+'", "video-src": "'+i.videoBuzzes[a]["video_url"]+'"}'))).insert('<h2 class="lede__title "><a class="lede__link" href="#">'+i.videoBuzzes[a]["title"]+"</a></h2>").insert('<p class="lede__kicker">'+i.videoBuzzes[a]["description"]+"</p>");$(e).insert({before:r});s.push(r);n=1;a++}else if($(e).hasClassName("grid-posts__item")){n++}});if(Box&&Box.Application){s.each(function(e,t){Box.Application.start($(e).select(".native-video")[0])})}}};BuzzLoader.register(function(){try{BF_InfiniteScrollManager.init();if(typeof homepage!="undefined"&&homepage.politics_hidden){homepage.politics_hidden=false;homepage.de_politics(true)}var t=function(){var t=$("updated_splash").getValue();if($("splash_01")){$("splash_01").update(t);$("splash_01").show();if($("splash_big_story"))$("splash_big_story").show();if($("splash_msu_story"))$("splash_msu_story").show()}};var i=function(){if($("splash_01"))$("splash_01").hide();if($("splash_big_story"))$("splash_big_story").hide();if($("splash_msu_story"))$("splash_msu_story").hide()};universal_dom.assign_handler({bucket:"update_splash",event:"immediate",handler:t});universal_dom.assign_handler({bucket:"hide_splash",event:"immediate",handler:i});if($$(".js-indexbeta").length>0){BF_InfiniteScrollManager.add_plugin("HPBetaMidScrollPlugin");BF_InfiniteScrollManager.add_plugin("HPLeftScrollPluginDarwin")}else if($$(".js-indexfour").length>0){BF_InfiniteScrollManager.add_plugin("HPBetaMidScrollPlugin");BF_InfiniteScrollManager.add_plugin("HPLeftScrollPluginSoba")}else{BF_InfiniteScrollManager.add_plugin("HPMidScrollPlugin");BF_InfiniteScrollManager.add_plugin("HPLeftScrollPlugin")}BF_InfiniteScrollManager.plugins_finished=0;EventManager.observe("HPScrollPlugin:done",function(){if(typeof BF_STATIC!=="undefined"&&(BF_STATIC.hp_beta||BF_STATIC.hp_five||BF_STATIC.hp_six)){EventManager.fire("HPScrollPlugin:hideLoadButton")}BF_InfiniteScrollManager.plugins_finished++;if(BF_InfiniteScrollManager.plugins_finished==2)EventManager.fire("HPScrollPlugin:showBottomVideo")})}catch(e){console.error(e)}},5);(function(e){function t(){try{return a in e&&e[a]}catch(t){return!1}}var i={},n=e.document,a="localStorage",r="script",s;i.disabled=!1,i.set=function(e,t){},i.get=function(e){},i.remove=function(e){},i.clear=function(){},i.transact=function(e,t,n){var a=i.get(e);n==null&&(n=t,t=null),typeof a=="undefined"&&(a=t||{}),n(a),i.set(e,a)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(e){return JSON.stringify(e)},i.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(t())s=e[a],i.set=function(e,t){return t===undefined?i.remove(e):(s.setItem(e,i.serialize(t)),t)},i.get=function(e){return i.deserialize(s.getItem(e))},i.remove=function(e){s.removeItem(e)},i.clear=function(){s.clear()},i.getAll=function(){var e={};return i.forEach(function(t,i){e[t]=i}),e},i.forEach=function(e){for(var t=0;t<s.length;t++){var n=s.key(t);e(n,i.get(n))}};else if(n.documentElement.addBehavior){var o,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),l.close(),o=l.w.frames[0].document,s=o.createElement("div")}catch(u){s=n.createElement("div"),o=n.body}function d(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(s),o.appendChild(s),s.addBehavior("#default#userData"),s.load(a);var n=e.apply(i,t);return o.removeChild(s),n}}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function _(e){return e.replace(/^d/,"___$&").replace(c,"___")}i.set=d(function(e,t,n){return t=_(t),n===undefined?i.remove(t):(e.setAttribute(t,i.serialize(n)),e.save(a),n)}),i.get=d(function(e,t){return t=_(t),i.deserialize(e.getAttribute(t))}),i.remove=d(function(e,t){t=_(t),e.removeAttribute(t),e.save(a)}),i.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var i=0,n;n=t[i];i++)e.removeAttribute(n.name);e.save(a)}),i.getAll=function(e){var t={};return i.forEach(function(e,i){t[e]=i}),t},i.forEach=d(function(e,t){var n=e.XMLDocument.documentElement.attributes;for(var a=0,r;r=n[a];++a)t(r.name,i.deserialize(e.getAttribute(r.name)))})}try{var f="__storejs__";i.set(f,f),i.get(f)!=f&&(i.disabled=!0),i.remove(f)}catch(u){i.disabled=!0}i.enabled=!i.disabled,typeof module!="undefined"&&module.exports&&this.module!==module?module.exports=i:typeof define=="function"&&define.amd?define(i,[]):e.store=i})(Function("return this")());if(!Object.values)Object.values=function(t){var i=[];for(var n in t){if(t.hasOwnProperty(n)){i.push(t[n])}}return i};shareProfile=function(){var t=this;this._init=function(){t.share_profile=store.get("share_profile")||{shares:{},total_shares:0,weighted_shares:{},most_used:"",most_recent:""};EventManager.observe("share:user_shared",t.listeners.user_shared)};this.init=function(){if(window.store){t._init()}else setTimeout(t.init,100)};this.utils={set_share_value:function(i){if(t.share_profile){if(t.share_profile.shares[i])t.share_profile.shares[i]++;else t.share_profile.shares[i]=1}else{t.share_profile={shares:{},most_used:"",most_recent:""};t.share_profile.shares[i]=1;t.share_profile.most_used=i}t.share_profile.most_recent=i;t.share_profile.total_shares++;t.utils.get_most_used()},get_most_used:function(){if(t.share_profile){var i=10;var n,a;if(t.share_profile.total_shares<=i){var r=Object.values(t.share_profile.shares);var s=r.reduce(function(t,i){return t+i},0);for(var o in t.share_profile.shares){n=t.share_profile.shares[o];a=Math.round(100*(n/s));t.share_profile.weighted_shares[o]=a}}else{var r=Object.values(t.share_profile.weighted_shares);var s=r.reduce(function(t,i){return t+i},0);for(var o in t.share_profile.weighted_shares){n=t.share_profile.weighted_shares[o];a=Math.round(n*(100-100/i)/s);t.share_profile.weighted_shares[o]=a}if(!t.share_profile.weighted_shares[t.share_profile.most_recent])t.share_profile.weighted_shares[t.share_profile.most_recent]=1;t.share_profile.weighted_shares[t.share_profile.most_recent]+=100/i}var l=-Infinity;for(var u in t.share_profile.weighted_shares){if(t.share_profile.weighted_shares[u]>l){l=t.share_profile.weighted_shares[u];t.share_profile.most_used=u}}}t.utils.set_share_profile()},set_share_profile:function(){store.set("share_profile",t.share_profile)}},this.listeners={user_shared:function(i){if(i&&i.type){t.utils.set_share_value(i.type)}}}};bf_share_profile=new shareProfile;bf_share_profile.init();var BF_SHARES_ORDER=function(){var t=this;var i={fb:"facebook",tweet:"twitter"};this.init=function(){try{function i(){var t=100;if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--4")){t=4}else if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--5")){t=5}var i=function(t){var i=0;return function(n,a){var r=$(a);if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--control")&&$("button",r).data("popup-visibility")){r.removeClass("visibility-hidden")}else if(i<t&&$("button",r).data("popup-visibility")){i++;r.removeClass("visibility-hidden")}else{r.addClass("hidden")}if(typeof abtest!=="undefined"&&!abtest.abVariations.match("js-mobile-sharing--control")&&r.hasClass("action-bar__btn-container--more")){r.removeClass("hidden")}}};$(".action-bar--position-upper li").each(i(t-1));$(".action-bar--position-lower li").each(i(t-1));$(".js-action-bar--sharing").removeClass("hidden")}EventManager.observe("share_buttons:loaded",t.reorder_shares);t._init()}catch(e){console.error(e)}};this._init=function(){t.referrer=typeof bpage!=="undefined"?bpage.referrer:t.utils.referrer;var n=t.referrer();if(n&&i[n])n=i[n];t.referrer=n;var a="";if(BF_STATIC&&BF_STATIC.vertical){a=BF_STATIC.vertical}else if(bfjs.$(".Business").length){a="business"}t.userCountryPref=bfjs.read_cookie("country")||"us";var r=["facebook",bf_share_profile.share_profile.most_used,bf_share_profile.share_profile.most_recent,n,"email",BF_STATIC.os!=="ios"||BF_STATIC.os==="ios"&&BF_STATIC.os_version[0]===8?"sms":"","whatsapp","pinterest","twitter",a=="business"?"linkedin":"","tumblr","stumbleupon","reddit","gplus",a=="business"?"":"linkedin",BF_STATIC.os!=="ios"||BF_STATIC.os==="ios"&&BF_STATIC.os_version[0]===8?"":"sms"];t.new_order=r;if((t.userCountryPref.match("jp")||typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--control"))&&BF_STATIC.bf_category.match(/135|142/))t.new_order.splice(1,0,"lineapp");t.new_order=t.new_order.filter(function(i,n){return i&&t.new_order.indexOf(i)==n});this.initialized=true;if(BF_STATIC.tt_page=="Buzz"){$$(".js-share-bar").invoke("removeClassName","hidden")}if(BF_STATIC.tt_page=="MobileBuzz"){$(".js-action-bar--sharing").map(function(t,i){EventManager.fire("share_buttons:loaded",{},i)})}};this.utils={waitForGlobal:function n(t,i){if(typeof window[t]!=="undefined"){i()}else setTimeout(n,100)},waitForABTest:function a(i,n){t.utils.waitForGlobal("EventManager",function(){if(typeof abtest!=="undefined"&&abtest.abTests&&abtest.abTests.match(i)){var t=abtest.abVariations.match(new RegExp("(js-"+i+"--[^,]+),"));if(t)t=t[1];try{n(t)}catch(e){console.error(e)}}else{EventManager.observe_once("abtest:"+i,function(t){try{n(t)}catch(e){console.error(e)}})}})},referrer:function(){var t=null;if(BF_STATIC.bf_test_mode){if(window.location.href.match("referrer=pinterest")){t="pinterest"}else if(window.location.href.match("referrer=twitter")){t="tweet"}else if(window.location.href.match("referrer=tumblr")){t="tumblr"}else if(window.location.href.match("referrer=stumbleupon")){t="stumbleupon"}else if(window.location.href.match("referrer=reddit")){t="reddit"}else if(window.location.href.match("referrer=linkedin")){t="linkedin"}}else{if(document.referrer.match("pinterest")){t="pinterest"}else if(document.referrer.match("t.co")){t="tweet"}else if(document.referrer.match("tumblr")){t="tumblr"}else if(document.referrer.match("stumbleupon")){t="stumbleupon"}else if(document.referrer.match("reddit")){t="reddit"}else if(document.referrer.match("linkedin")){t="linkedin"}}return t},container:{MobileBuzz:function(t){return $(t).closest("ul")[0]},Buzz:function(t){return t.up(".js-share-bar")}},els:{MobileBuzz:function(t,i){return $(t).find("li")},Buzz:function(t,i){var n=t.select("img").filter(function(t){if(t==i)return false;else return true});if(n.length==0){
n=t.select("div").filter(function(t){if(t.className.match("_share"))return true;else return false})}return n}},compareButtons:{compare:function(n,a){var n=i[n]?i[n]:n;var a=i[a]?i[a]:a;var r=t.new_order.indexOf(n);var s=t.new_order.indexOf(a);if(r==-1&&s==-1)return 0;if(r!=-1&&s==-1)return-1;if(r==-1&&s!=-1)return 1;if(r!=-1&&s!=-1){if(r<s)return-1;if(r>s)return 1}},MobileBuzz:function(i,n){var a=i.firstElementChild.getAttribute("data-type");var r=n.firstElementChild.getAttribute("data-type");return t.utils.compareButtons.compare(a,r)},Buzz:function(i,n){var a,r;if(i.tagName.toUpperCase()=="IMG"){a=i.getAttribute("onload").toString().match("'service': '(.+)'")[1];r=n.getAttribute("onload").toString().match("'service': '(.+)'")[1]}else{a=i.className.match("(.*)_share")[1];r=n.className.match("(.*)_share")[1]}return t.utils.compareButtons.compare(a,r)}},update_container:{MobileBuzz:function(i,n){var a=100;if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--4")){a=4}else if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--5")){a=5}var r;r=a-1;var s=$(n).filter(function(t,i){return!$("button",i).data("popup-visibility")==0}).length;var o=0;n.each(function(i,n){var a=$(n);a.addClass("js-flex-order--"+i);a.find("button").data("order",i);if(typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--control")){if($("button",a).data("popup-visibility")||i<=o){o++;a.removeClass("visibility-hidden");if(o>s)a.addClass("hidden")}}else if(a.hasClass("action-bar__btn-container--lineapp")){if(t.userCountryPref.match("jp")||typeof abtest!=="undefined"&&abtest.abVariations.match("js-mobile-sharing--control")){a.removeClass("visibility-hidden")}else{$("button",n).attr("data-popup-visibility",0);a.addClass("hidden");$(".dialog__section--shares .action-bar__btn-container--lineapp button").attr("data-popup-visibility",0);$(".dialog__section--shares .action-bar__btn-container--lineapp").addClass("hidden")}}else if(i<r){a.removeClass("visibility-hidden")}else a.addClass("hidden");if(typeof abtest!=="undefined"&&!abtest.abVariations.match("js-mobile-sharing--control")){if(a.hasClass("action-bar__btn-container--more")){a.removeClass("hidden")}if(i==0){a.addClass("action-bar__btn-container--wide")}}});$(".js-action-bar--sharing").removeClass("hidden")},Buzz:function(n,a){var r=5;if($$(".wide-content").length&&n.hasClassName("upper-share-buttons")&&$$("#share_control.square_shares.custom_header_shares").length==0){r=6}var s=a.length-r;a.reverse().each(function(r,o){r.writeAttribute("data-order",a.length-o);n.insertBefore(r,n.firstElementChild);if(r.nodeName.toUpperCase()=="IMG"){var l=r.getAttribute("onload").toString().match("'service': '(.+)'")[1];l=i[l]?i[l]:l;if(l==t.referrer){EventManager.observe("sharing:load_button:done",function(t){return function(i){if(i.replace===t){i.container.style.display="block"}}}(r))}}else{if(r.className.match(t.referrer)){r.style.display="block"}}if(s>0&&o<s){if(r.nodeName.toUpperCase()=="IMG"){EventManager.observe("sharing:load_button:done",function(t){return function(i){if(i.replace===t){if(!i.container.className.match("bookmark-share")){i.container.style.display="none"}}}}(r))}else{if(!r.className.match("bookmark-share")){r.style.display="none"}}}else{if(r.nodeName.toUpperCase()=="IMG"){EventManager.observe("sharing:load_button:done",function(t){return function(i){if(i.replace===t){i.container.style.display="block"}}}(r))}else{r.style.display="block"}}});if(n.up()==$s(".shares_order")){setTimeout(function o(){var t=$$(".bottom_shares #more_shares_box .shareBtn");var i=$$(".shares_order [class*=_share]").filter(function(t){return t.visible()}).map(function(t){return t.className});if(i.length){bpage.remove_dupe_shares(t,i);$("more_shares_box").addClassName("js-dupes-removed")}else setTimeout(o,100)},100)}$$(".js-share-bar").invoke("removeClassName","hidden")}}};this.reorder_shares=function(i,n){try{var a=BF_STATIC.tt_page=="Videos"||BF_STATIC.tt_page=="Buzz"?"Buzz":"MobileBuzz";var r=t.utils.container[a](n);if(a=="Buzz"){if(!r.visible()||!r.up().visible()||r.up().hasClassName("hidden")){return}}var s=t.utils.els[a](r,n);s.sort(t.utils.compareButtons[a]);if(!$(r.parentNode)[bfjs.has_class]("answer_shares_buttons")){t.utils.update_container[a](r,s)}EventManager.fire("share_buttons:reordered")}catch(e){console.error(e)}};this.buttons_loaded=function(i){if(typeof EventManager!=="undefined"&&EventManager.fire&&bf_shares_order.initialized)setTimeout(function(){EventManager.fire("share_buttons:loaded",{},i)},200);else setTimeout(t.buttons_loaded.bind(this,i),100)}};try{bf_shares_order=new BF_SHARES_ORDER;if(typeof BF_STATIC!=="undefined"){if(BF_STATIC.tt_page=="Buzz"||BF_STATIC.tt_page=="Videos"){document.observe("dom:loaded",bf_shares_order.init)}else if(BF_STATIC.tt_page=="MobileBuzz"){if(!BF_STATIC.mobile_app){$(document).ready(function(){var t=function(){if(typeof EventManager!=="undefined"&&EventManager.fire){bf_shares_order.init()}else setTimeout(t,100)};t();bf_shares_order.utils.waitForGlobal("EventManager",function(){bf_shares_order.init()})})}}}else{throw new Error("BF_STATIC is not defined or current page is not supported")}}catch(e){console.error(e)}var BF_Shares=function(){this.fixedEncodeURIComponent=function(t){return encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};this.email_link=function(t){if(!objExists(t.el)){return false}if(!objExists(t.words)){t.words="Email"}if(!objExists(t.size)){t.size="big"}if(!objExists(t.subject)){t.subject=""}if(!objExists(t.body)){t.body=""}if(!objExists(t.onclick)){t.onclick=""}if(!objExists(t.color)){t.color=""}if(!objExists(t.wrapper)){t.wrapper=false}var i=objExists(t.tracking_action)?"rel:gt_act='"+t.tracking_action+"'":"";var n=objExists(t.tracking_label)?"rel:gt_label='"+t.tracking_label+"'":"";t.subject=bf_shares.fixedEncodeURIComponent(t.subject);t.body=bf_shares.fixedEncodeURIComponent(t.body);var a="";var a="			"+(t.wrapper?'<div class="email_share">':"")+"			<a class='shareBtn big "+t.color+"'			onclick=\""+t.onclick+'"			href="mailto:?body='+t.body+"			&subject="+t.subject+'			" '+i+" "+n+"><div class='email_icon'></div>			<div class='label'>"+local.t(t.words)+"</div></a>			"+(t.wrapper?"</div>":"");$(t.el).insert(a)};this.fb_share=function(t){if(!objExists(t.el)||!objExists(t.uri)){return false}if(!objExists(t.words)){t.words="Share On Facebook"}if(!objExists(t.picture)){t.picture=""}if(!objExists(t.title)){t.title=""}if(!objExists(t.description)){t.description=""}if(!objExists(t.size)){t.size="big"}if(!objExists(t.color)){t.color="darkblue"}if(!objExists(t.onclick)){t.onclick=""}if(!objExists(t.wrapper)){t.wrapper=false}var i=objExists(t.tracking_action)?"rel:gt_act='"+t.tracking_action+"'":"";var n=objExists(t.tracking_label)?"rel:gt_label='"+t.tracking_label+"'":"";t.description=bf_shares.fixedEncodeURIComponent(t.description);t.title=bf_shares.fixedEncodeURIComponent(t.title);var a="			"+(t.wrapper?'<div class="fb_share">':"")+"			<a class='shareBtn "+t.size+" "+t.color+"'			type='box_count'			onclick=\"var sTop=window.screen.height/2-(218);var sLeft=window.screen.width/2-(313);window.open('https://www.facebook.com/dialog/feed?display=popup&			app_id="+BF_STATIC.fb_app_id+"			&link="+t.uri+"			&picture="+t.picture+"			&name="+t.title+"			&description="+t.description+"			&redirect_uri="+BF_STATIC.base_url+"/static/html/timemachine_share.html			','sharer','toolbar=0,status=0,width=580,height=400,top='+sTop+',left='+sLeft);			"+t.onclick+'			;return false"			 '+i+" "+n+'><div class="fb_icon">&nbsp;</div>			<div class="label">'+local.t(t.words)+"</div></a>			"+(t.wrapper?"</div>":"");$(t.el).insert(a)};this.tw_tweet=function(t){if(!objExists(t.el)||!objExists(t.uri)){return false}if(!objExists(t.words)){t.words="Tweet"}if(!objExists(t.via)||!t.via){t.via="buzzfeed"}if(!objExists(t.size)){t.size="big"}if(!objExists(t.description)){t.description=""}if(!objExists(t.onclick)){t.onclick=""}if(!objExists(t.hashtags)){t.hashtags=""}if(!objExists(t.color)){t.color=""}if(!objExists(t.wrapper)){t.wrapper=false}var i=objExists(t.tracking_action)?"rel:gt_act='"+t.tracking_action+"'":"";var n=objExists(t.tracking_label)?"rel:gt_label='"+t.tracking_label+"'":"";t.description=bf_shares.fixedEncodeURIComponent(t.description);var a=t.wrapper?'<div class="tweet_share">':"";a+="<a class='shareBtn "+t.size+" "+t.color+"'"+i+" "+n+" ";a+="onClick=\"window.open('https://twitter.com/intent/tweet?url="+t.uri;if(t.description)a+="&text="+t.description;if(t.hashtags)a+="&hashtags="+t.hashtags;if(t.via)a+="&via="+t.via;a+="', 'twitterwindow', 'height=450, width=550, top='+((BF_UTIL.browser.dimensions.height()/2) - 225 + BF_UTIL.browser.position.top()) +', left='+((BF_UTIL.browser.dimensions.width()/2) - 275 + BF_UTIL.browser.position.left()) +', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0');"+t.onclick+";return false;\">			<div class='twitter_icon'></div>			<div class='label'>"+local.t(t.words)+"</div></a>			"+(t.wrapper?"</div>":"");$(t.el).insert(a)}};var bf_shares=new BF_Shares;sharing={};sharing.lib={};sharing.types={};sharing.lib.use_pound=function(t){return typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&!BF_STATIC.mobile_app&&(typeof t["pound_no_track"]=="undefined"||!t["pound_no_track"])};sharing.lib.button_init=function(t){Box.Application.getService("template-engine").load({id:"_share_button",returnType:"fragment",callback:function(i){var n;var a=Box.Application.getService("dom");a.appendOnce(i,".js-page-container",".js-share-btn-template");n=$$(".js-share-btn-template")[0];sharing.lib.load_button(n.innerHTML,t)},data:t})};sharing.lib.load_button=function(t,i){var n={};var a=i.replace;var r=document.createElement("div");r.className+=i.service+"_share";r.innerHTML=t;var s=r.getElementsByClassName("share-btn")[0];var o=document.createElement("i");var l=document.createElement("span");s.appendChild(o);s.appendChild(l);n.container=r;n.anchor=s;n.icon=o;n.label=l;n.network=i.service;s.setAttribute("class","bf_dom shareBtn square");a.parentNode.insertBefore(r,a);a.parentNode.removeChild(a);if(i.service=="fb"){sharing.buttons._facebook_share_default(n,i)}else if(i.service=="tweet"){sharing.buttons._twitter_default(n,i)}else if(i.service=="gplus"){sharing.buttons._googleplus_default(n,i)}else if(i.service=="email"){sharing.buttons._email_default(n,i)}else if(i.service=="pinterest"){sharing.buttons._pinterest_default(n,i)}else if(i.service=="stumbleupon"){i.network="stumbleupon";sharing.buttons._stumbleupon_default(n,i)}else if(i.service=="linkedin"){sharing.buttons._linkedin_default(n,i)}else if(i.service=="tumblr"){sharing.buttons._tumblr_default(n,i)}else if(i.service=="rebuzz"){sharing.buttons._rebuzz_default(n,i)}else if(i.service=="link"){i.network="buzzfeed-link";sharing.buttons._link_default(n,i)}else if(i.service=="reddit"){sharing.buttons._reddit_default(n,i)}if(i.display)n.container.style.display=i.display;EventManager.fire("sharing:load_button:done",{service:i.service,container:r,replace:a})};sharing.lib.get_url=function(t){if(sharing.lib.use_pound(t)){try{if(t.network=="stumbleupon"){return encodeURIComponent(pound.urls.queryStringOnly(["fb_ref"]))}if(t.network=="buzzfeed-link"){return pound.urls.unescaped.queryStringOnly()}if(t.additional_param){return pound.urls.unescaped.queryStringOnly([],t.additional_param)}return pound.urls.queryStringOnly()}catch(e){}}else if(t["url"]){return encodeURIComponent(t["url"])}return encodeURIComponent(document.URL)};sharing.lib.bind=function(t,i,n){if(window.addEventListener){t.addEventListener(i,n,false)}else if(window.attachEvent){t.attachEvent("on"+i,n)}else{t["on"+i]=n}};sharing.lib.unbind=function(t,i,n){if(!t){return}if(t.removeEventListener){t.removeEventListener(i,n,false)}else if(t.detachEvent){t.detachEvent("on"+i,n)}else{t["on"+i]=function(e){return false}}};sharing.lib.endEvent=function(t){if(t){t.cancelBubble=true;t.returnValue=false;if(t.stopPropagation){t.stopPropagation()}if(typeof t.preventDefault!="undefined"){t.preventDefault()}}return false};sharing.lib.apply_attrs=function(t,i,n){for(var a in i){if(i.hasOwnProperty(a)&&i[a]!=null&&i[a]!=""){t.setAttribute(a,i[a])}}if(typeof n=="function")n()};sharing.types.Buzz=function(){var t=this;this.build=function(i){var n=i["parentNode"];var a=i["replace"];var r=document.createElement("div");if(typeof a!="undefined"){a.parentNode.insertBefore(r,a);a.parentNode.removeChild(a)}var s=document.createElement("a");var o=document.createElement("div");var l=document.createElement("div");r.appendChild(s);s.appendChild(o);s.appendChild(l);sharing.lib.apply_attrs(s,{"class":"bf_dom shareBtn big square"});sharing.lib.apply_attrs(l,{"class":"label"});o.innerHTML="&nbsp;";l.innerHTML="Share";if(typeof n!="undefined"){n.appendChild(r)}t.container=r;t.anchor=s;t.icon=o;t.label=l;return r};this.type=function(){return"buzz"};this.elements=function(){return{container:t.container,anchor:t.anchor,icon:t.icon,label:t.label}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[sharing.types.Buzz]"}};sharing.types.SubBuzz=function(){var t=this;this.build=function(i){var n=document.createElement("a");var a=i["replace"];if(typeof a!="undefined"){a.parentNode.insertBefore(n,a);a.parentNode.removeChild(a)}sharing.lib.apply_attrs(n,{"class":"share-icon bf_dom",href:"javascript:;"});if(typeof i.parentNode!="undefined"){i.parentNode.appendChild(n)}t.anchor=n;return n};this.type=function(){return"subbuzz"};this.elements=function(){return{anchor:t.anchor}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[object sharing.types.SubBuzz]"}};sharing.types.Longform=function(){var t=this;this.build=function(i){var n=document.createElement("a");var a=i["replace"];if(typeof a!="undefined"){a.parentNode.insertBefore(n,a);a.parentNode.removeChild(a)}sharing.lib.apply_attrs(n,{href:"javascript:;"});if(typeof i.parentNode!="undefined"){i.parentNode.appendChild(n)}t.anchor=n;return n};this.type=function(){return"longform"};this.elements=function(){return{anchor:t.anchor}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[object sharing.types.Longform]"}};sharing.types.CircleShare=function(){var t=this;this.build=function(i){var n=document.createElement("div");var a=document.createElement("a");var r=i["replace"];if(typeof r!="undefined"){r.parentNode.insertBefore(a,r);r.parentNode.removeChild(r)}sharing.lib.apply_attrs(a,{href:"javascript:;"});a.appendChild(n);if(typeof i.parentNode!="undefined"){i.parentNode.appendChild(a)}t.anchor=a;t.icon=n;return a};this.type=function(){return"circleshare"};this.elements=function(){return{anchor:t.anchor,icon:t.icon}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[object sharing.types.CircleShare]"}};sharing.types.PinterestImage=function(){var t=this;this.build=function(i){var n=document.createElement("a");var a=i["replace"];if(typeof a!="undefined"){a.parentNode.insertBefore(n,a);a.parentNode.removeChild(a)}sharing.lib.apply_attrs(n,{href:"javascript:;"});if(typeof i.parentNode!="undefined"){i.parentNode.appendChild(n)}t.anchor=n;return n};this.type=function(){return"pinterest_image"};this.elements=function(){return{anchor:t.anchor}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[object sharing.types.PinterestImage]"}};sharing.types.IcWithTxt=function(){var t=this;this.build=function(i){var n=i["parentNode"];var a=i["replace"];var r=document.createElement("div");if(typeof a!="undefined"){a.parentNode.insertBefore(r,a);a.parentNode.removeChild(a)}var s=document.createElement("a");var o=document.createElement("i");var l=document.createElement("span");r.appendChild(s);s.appendChild(o);s.appendChild(l);s.setAttribute("class","bf_dom shareBtn ic-with-txt");l.setAttribute("class","label");l.innerHTML="Share on "+i["network"].charAt(0).toUpperCase()+i["network"].slice(1);if(typeof n!="undefined"){n.appendChild(r)}t.container=r;t.anchor=s;t.icon=o;t.label=l;return r};this.type=function(){return"buzz"};this.elements=function(){return{container:t.container,anchor:t.anchor,icon:t.icon,label:t.label}};this.addClickEvent=function(i){if(typeof i!="undefined"){sharing.lib.bind(t.anchor,"click",i)}};this.toString=function(){return"[sharing.HeaderButton]"}};sharing.buttons=new function(){var t=this;this._build=function(t){if(t["type"]=="undefined"){button=new sharing.types.Buzz}else if(t["type"]=="subbuzz"){button=new sharing.types.SubBuzz}else if(t["type"]=="longform"){button=new sharing.types.Longform}else if(t["type"]=="circleshare"){button=new sharing.types.CircleShare}else if(t["type"]=="pin_image"){button=new sharing.types.PinterestImage}else if(t["type"]=="ic_with_txt"){button=new sharing.types.IcWithTxt}else{button=new sharing.types.Buzz}button.build(t);if(t.icon&&button.anchor){button.anchor.update('<svg viewBox="0 0 512 512" class="svg-icon"><use xlink:href="#'+t.icon+'"></use<></svg>')}return button};this._window=function(t){var i=window.screen.height/2-t.height/2;var n=window.screen.width/2-t.width/2;var a="scrollbars=yes, toolbar=0, status=0, width="+t.width+", height="+t.height+", top="+i+", left="+n;window.open(t.url,t.name,a)};this.facebook_share=function(i){if(!i){i=new Object}i.network="facebook";var n=t._build(i);if(n.type()=="subbuzz"){t._facebook_share_subbuzz(n,i)}else if(n.type()=="longform"){t._facebook_share_longform(n,i)}else if(n.type()=="circleshare"){t._facebook_share_circleshare(n,i)}else{t._facebook_share_default(n,i)}n.network="facebook";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._facebook_share_default=function(t,i){var n=$$('meta[property="author"]'),a=document.domain;if(document.getElementById("buzz_header")&&document.getElementById("buzz_header").parentNode){var r=document.getElementById("buzz_header").parentNode.getAttribute("rel:no_author")}if(n.length>0&&n[0].attributes["content"].value&&!r){a+=" | By "+n[0].attributes["content"].value}var s=function(e){EventManager.fire("share:user_shared",{type:"facebook"});var t=typeof BF_STATIC!="undefined"&&BF_STATIC["fb_app_id"]?BF_STATIC["fb_app_id"]:null;var n=document.getElementsByTagName("meta");for(var r=0,s=n.length;r<s;r++){if(n[r].getAttribute("property")=="og:image"){i["picture"]=i["picture"]?i["picture"]:n[r].getAttribute("content");break}}data={method:"feed",app_id:t,display:"popup",link:unescape(sharing.lib.get_url(i)),caption:a,name:i["title"]||BF_STATIC.buzz_name||document.title,description:i["blurb"]||BF_STATIC.buzz_blurb.unescapeHTML(),picture:i["picture"],ref:"click_share"};FB.ui(data);if(typeof fbSharePixel!="undefined"){fbSharePixel()}if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(t.anchor,"click",s);if(i["type"]=="ic_with_txt"){if(i["divider"]==true){t.container.setAttribute("class","fb_share fa_ic br_bt")}else{t.container.setAttribute("class","fb_share fa_ic")}t.icon.setAttribute("class","fa fa-facebook-square fb_icon")}else{sharing.lib.apply_attrs(t.container,{"class":"fb_share"});sharing.lib.apply_attrs(t.icon,{"class":"fb_icon fa"})}sharing.lib.apply_attrs(t.anchor,{href:"javascript:;","rel:gt_act":i["gt_act"]?i["gt_act"]:"share/facebook/share","rel:gt_label":i["gt_label"]?i["gt_label"]:null,"data-bfa":"@a:Share; @d:Facebook;"})};this._facebook_share_longform=function(t,i){var n=$$('meta[property="author"]'),a=document.domain,r=i["no-author"];if(n.length>0&&n[0].attributes["content"].value&&!r){a+=" | By "+n[0].attributes["content"].value}var s=function(e){var t=typeof BF_STATIC!="undefined"&&BF_STATIC["fb_app_id"]?BF_STATIC["fb_app_id"]:null;FB.ui({method:"feed",app_id:t,display:"popup",link:unescape(sharing.lib.get_url(i)),caption:a,description:BF_STATIC.buzz_blurb,name:BF_STATIC.buzz_name||document.title,picture:i["picture"],ref:"click_share"});if(typeof fbSharePixel!="undefined"){fbSharePixel()}if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(t.anchor,"click",s);sharing.lib.apply_attrs(t.anchor,{"class":"fb_icon inlineShareBtn",href:"javascript:;","rel:gt_act":i["gt_act"]?i["gt_act"]:"share/facebook/share","rel:gt_label":i["gt_label"]?i["gt_label"]:null})};this._facebook_share_subbuzz=function(t,i){var n=i.subbuzz_no?"@a:Share; @d:Facebook; @e:{idx:"+i.subbuzz_no+"};":"@a:Share; @d:Link;";sharing.lib.apply_attrs(t.anchor,{"class":"share-icon bf_dom sub-buzz-facebook-share fa-facebook fa",id:"facebook"+i["subbuzz"],"rel:bf_bucket_data":JSON.stringify({"fb-share":{id:i["subbuzz"]}}),"rel:description":unescape(encodeURIComponent(i["description"])),"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/facebook/list-item:"+i["subbuzz_no"],"rel:gt_label":i["gt_label"]?i["gt_label"]:i["image"],"data-bfa":n})};this._facebook_share_circleshare=function(t,i){var n=function(e){var t=typeof BF_STATIC!="undefined"&&BF_STATIC["fb_app_id"]?BF_STATIC["fb_app_id"]:null;FB.ui({method:"feed",app_id:t,display:"popup",link:unescape(sharing.lib.get_url(i)),caption:BF_STATIC.buzz_blurb,description:BF_STATIC.buzz_name||document.title,name:BF_STATIC.buzz_name||document.title,picture:i["picture"],ref:"click_share"});if(typeof fbSharePixel!="undefined"){fbSharePixel()}if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(t.anchor,"click",n);sharing.lib.apply_attrs(t.icon,{"class":"fa fa-facebook","rel:gt_act":"ignore"});sharing.lib.apply_attrs(t.anchor,{"class":"bf_dom circle-share circle-facebook-share",href:"javascript:;","rel:gt_act":i["gt_act"]?i["gt_act"]:"share/facebook/share","rel:gt_label":i["gt_label"]?i["gt_label"]:null})};this.email=function(i){if(!i){i=new Object}i.network="email";var n=t._build(i);i["body"]=encodeURIComponent(i["body"]).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");i["subject"]=encodeURIComponent(i["subject"]).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");if(n.type()=="subbuzz"){t._email_subbuzz(n,i)}else if(n.type()=="longform"){t._email_longform(n,i)}else if(n.type()=="circleshare"){t._email_circleshare(n,i)}else{if(i["method"]&&i["method"]=="mailto"){t._email_mailto_link(n,i)}else{t._email_default(n,i)}}n.network="email";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._email_subbuzz=function(t,i){var n=i.subbuzz_no?"@a:Share; @d:Email; @e:{idx:"+i.subbuzz_no+"};":"@a:Share; @d:Link;";sharing.lib.apply_attrs(t.anchor,{"class":"share-icon bf_dom sub-buzz-email-share fa-envelope fa",id:"emailShare"+i["subbuzz"],"rel:bf_bucket_data":JSON.stringify({"email-share":{id:i["subbuzz"]}}),"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/email/list-item:"+i["subbuzz_no"],"rel:gt_label":i["gt_label"]?i["gt_label"]:i["image"],"data-bfa":n})};this._email_longform=function(t,i){var n=function(e){return sharing.lib.endEvent(e);if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}};var a=function(e){var i=t.anchor.parentNode.parentNode.getElementsByClassName("bookmark-tooltip")[0];if(i!==undefined){i.style.display="none"}if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(t.anchor,"click",n);sharing.lib.bind(t.anchor,"mousedown",a);sharing.lib.apply_attrs(t.anchor,{"class":"bf_dom email_icon inlineShareBtn","rel:gt_act":"share/email","rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:i["buzzid"]}}),href:"javascript:;"})};this._email_default=function(t,i){var n=function(e){EventManager.fire("share:user_shared",{type:"email"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};var a=function(e){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(t.anchor,"click",n);sharing.lib.bind(t.anchor,"mousedown",a);sharing.lib.apply_attrs(t.container,{"class":"email_share"});sharing.lib.apply_attrs(t.icon,{"class":"email_icon fa"});sharing.lib.apply_attrs(t.anchor,{"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/email","rel:gt_label":i["gt_label"]?i["gt_label"]:null,"rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:i["buzzid"]}}),href:"javascript:;","data-bfa":"@a:Share; @d:Email;"});if(typeof universal_dom!="undefined")universal_dom.update(t.anchor)};this._email_mailto_link=function(t,i){sharing.lib.apply_attrs(t.container,{"class":"email_share"});sharing.lib.apply_attrs(t.icon,{"class":"email_icon"});sharing.lib.apply_attrs(t.anchor,{"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/email","rel:gt_label":i["gt_label"]?i["gt_label"]:null,"rel:actions":"click:share_email",href:"mailto:?body="+(i["body"]?i["body"]:"")+"&subject="+(i["subject"]?i["subject"]:""),target:"_self","data-bfa":"@a:Share; @d:Email;"})};this._email_circleshare=function(t,i){var n=function(e){if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};var a=function(e){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(t.anchor,"click",n);sharing.lib.bind(t.anchor,"mousedown",a);sharing.lib.apply_attrs(t.icon,{"class":"fa fa-envelope email_icon","rel:gt_act":"ignore"});sharing.lib.apply_attrs(t.anchor,{"class":"bf_dom circle-share circle-email-share","rel:gt_act":i["gt_act"]?i["gt_act"]:"share/email","rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:i["buzzid"]}}),href:"javascript:;"})};this.link=function(i){if(!i){i=new Object}i.network="buzzfeed-link";var n=t._build(i);if(n.type()=="subbuzz"){t._link_subbuzz(n,i)}else{t._link_default(n,i)}n.network="link";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._link_default=function(t,i){sharing.lib.apply_attrs(t.container,{"class":"link_share"});sharing.lib.apply_attrs(t.icon,{"class":"copy_icon fa"});sharing.lib.apply_attrs(t.anchor,{"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/link","rel:gt_label":i["gt_label"]?i["gt_label"]:null,href:"javascript:;","rel:bf_bucket":"share_link sticky_popup_button","rel:link":decodeURIComponent(sharing.lib.get_url(i)),"data-bfa":"@a:Share; @d:Link;"});if(typeof universal_dom!="undefined")universal_dom.update(t.container)};this._link_subbuzz=function(t,i){var n=i.subbuzz_no?"@a:Share; @d:Link; @e:{idx:"+i.subbuzz_no+"};":"@a:Share; @d:Link;";sharing.lib.apply_attrs(t.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-link-share fa-link fa",id:"link"+i["subbuzz"],"rel:bf_bucket_data":JSON.stringify({"link-share":{id:i["subbuzz"]}}),"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/link/list-item:"+i["subbuzz_no"],"rel:gt_label":i["gt_label"]?i["gt_label"]:i["image"],"data-bfa":n})};this.pinterest=function(i){if(!i){i=new Object}i.network="pinterest";var n=t._build(i);if(n.type()=="subbuzz"){t._pinterest_subbuzz(n,i)}else if(n.type()=="longform"){t._pinterest_longform(n,i)}else if(n.type()=="pinterest_image"){t.pinterest_pin_image(n,i)}else if(n.type()=="buzz"&&typeof i["quiz_result"]!="undefined"){t.pinterest_quiz_result(n,i)}else{t._pinterest_default(n,i)}n.network="pinterest";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._pinterest_default=function(t,i){var n=function(e){EventManager.fire("share:user_shared",{type:"pinterest"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};if(i["optimized"]&&i["media"]){if(!document.getElementById("optimized_image_wrapper")){var a=document.createElement("div");a.id="optimized_image_wrapper";a.style.display="none";var r=new Image;r.src=i["media"];r.setAttribute("rel:bf_image_src",i["media"]);r.setAttribute("rel:bf_image_desc",i["description"]);a.appendChild(r);document.documentElement.firstChild.appendChild(a)}}sharing.lib.bind(t.anchor,"click",n);sharing.lib.apply_attrs(t.container,{"class":"pinterest_share"});sharing.lib.apply_attrs(t.icon,{"class":"pi_icon fa"});sharing.lib.apply_attrs(t.anchor,{"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/pinterest","rel:gt_label":i["gt_label"]?i["gt_label"]:null,"rel:bf_bucket":"pinterest",href:"javascript:;","data-bfa":"@a:Share; @d:Pinterest;"});if(typeof universal_dom!="undefined")universal_dom.update(t.anchor)};this._pinterest_longform=function(t,i){sharing.lib.apply_attrs(t.anchor,{"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/pinterest","rel:gt_label":i["gt_label"]?i["gt_label"]:null,"rel:bf_bucket":"pinterest",href:"javascript:;","class":"bf_dom inlineShareBtn pi_icon"})};this._pinterest_subbuzz=function(t,i){var n=i.subbuzz_no?"@a:Share; @d:Pinterest; @e:{idx:"+i.subbuzz_no+"};":"@a:Share; @d:Link;";sharing.lib.apply_attrs(t.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-pinterest-share fa-pinterest fa",id:"pinterest"+i["subbuzz"],"rel:bf_bucket_data":JSON.stringify({"pin-share":{id:i["subbuzz"]}}),"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/pinterest/list-item:"+i["subbuzz_no"],"rel:gt_label":i["gt_label"]?i["gt_label"]:"row_image","data-bfa":n})};this.pinterest_pin_image=function(i,n){var a=function(e){var i="http://pinterest.com/pin/create/bookmarklet/?url="+sharing.lib.get_url(n);if(n["media"]&&n["media"].indexOf("http")!=0){var a=BF_STATIC.image_root?BF_STATIC.image_root:BF_STATIC.big_image_root;n["media"]=encodeURIComponent(a)+n["media"]}if(n["media"])i+="&media="+n["media"];if(n["description"])i+="&description="+decodeURIComponent(n["description"]);t._window({width:626,height:n["height"]||256,url:i,name:"pinterest"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.anchor,{href:"javascript:;",target:"_blank","rel:gt_act":"share/pinterest"})};this.pinterest_quiz_result=function(i,n){var a=function(e){var i="http://pinterest.com/pin/create/bookmarklet/?url="+sharing.lib.get_url(n);if(n["media"]&&n["media"].indexOf("http")!=0){var a=BF_STATIC.image_root?BF_STATIC.image_root:BF_STATIC.big_image_root;n["media"]=a+n["media"]}if(n["media"])i+="&media="+encodeURIComponent(n["media"]);if(n["description"])i+="&description="+encodeURIComponent(n["description"]);t._window({width:626,height:n["height"]||256,url:i,name:"pinterest"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);i.label.innerHTML="Pin it";sharing.lib.apply_attrs(i.container,{"class":"pinterest_share"});sharing.lib.apply_attrs(i.icon,{"class":"pi_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/pinterest","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Pinterest;"})};this.tumblr=function(i){if(!i){i=new Object}i.network="tumblr";var n=t._build(i);if(n.type()=="buzz"){t._tumblr_default(n,i)}else{t._tumblr_default(n,i)}n.network="tumblr";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._tumblr_default=function(i,n){
var a=function(e){EventManager.fire("share:user_shared",{type:"tumblr"});var i="http://www.tumblr.com/share/link?url="+sharing.lib.get_url(n);if(n["name"])i+="&name="+encodeURIComponent(n["name"]);if(n["description"])i+="&description="+encodeURIComponent(n["description"]);t._window({width:626,height:n["height"]||465,url:i,name:"tumblr"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);i.label.innerHTML="Tumblr";sharing.lib.apply_attrs(i.container,{"class":"tumblr_share"});sharing.lib.apply_attrs(i.icon,{"class":"tumblr_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/tumblr","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Tumblr;"})};this.reddit=function(i){if(!i){i=new Object}i.network="reddit";var n=t._build(i);if(n.type()=="subbuzz"){t._reddit_subbuzz(n,i)}else{t._reddit_default(n,i)}n.network="reddit";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._reddit_default=function(i,n){var a=function(e){EventManager.fire("share:user_shared",{type:"reddit"});var i="http://www.reddit.com/submit?url="+sharing.lib.get_url(n);t._window({width:900,height:700,url:i,name:"redditWindow"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.container,{"class":"reddit_share"});sharing.lib.apply_attrs(i.icon,{"class":"reddit_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/reddit","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Reddit;"})};this._reddit_subbuzz=function(t,i){throw Error("Share.js: Reddit subbuzz button not implemented.")};this.stumbleupon=function(i){if(!i){i=new Object}i.network="stumbleupon";var n=t._build(i);if(n.type()=="subbuzz"){t._stumbleupon_subbuzz(n,i)}else{t._stumbleupon_default(n,i)}n.network="stumbleupon";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._stumbleupon_default=function(i,n){var a=function(e){EventManager.fire("share:user_shared",{type:"stumbleupon"});var i="http://www.stumbleupon.com/submit?url="+sharing.lib.get_url(n);t._window({width:750,height:450,name:"stumbleWindow",url:i});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);i.label.innerHTML="Stumble";sharing.lib.apply_attrs(i.container,{"class":"stumbleupon_share"});sharing.lib.apply_attrs(i.icon,{"class":"su_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/su","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Stumbleupon;"})};this._stumbleupon_subbuzz=function(t,i){throw Error("Share.js: Stumbleupon subbuzz button is not implemented")};this.googleplus=function(i){if(!i){i=new Object}i.network="googleplus";var n=t._build(i);if(n.type()=="subbuzz"){t._googleplus_subbuzz(n,i)}else{t._googleplus_default(n,i)}n.network="googleplus";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._googleplus_default=function(i,n){var a=function(e){EventManager.fire("share:user_shared",{type:"gplus"});var i="https://plus.google.com/share?url="+sharing.lib.get_url(n);t._window({width:550,height:450,name:"gplusWindow",url:i});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.container,{"class":"gplus_share"});sharing.lib.apply_attrs(i.icon,{"class":"gplus_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/googleplus/plus-one","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Google+;"})};this._googleplus_subbuzz=function(t,i){throw Error("Share.js: Google Plus subbuzz button not implemented.")};this.comment_cb=null;if(BF_STATIC.bf_test_mode){this.comment_cb=function(){EventManager.fire("sharing:comment:done")}}this.comment=function(i){if(!i){i=new Object}i.network="buzzfeed";var n=t._build(i);if(n.type()=="subbuzz"){t._comment_subbuzz(n,i)}else{t._comment_default(n,i)}n.network="comment";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._comment_default=function(t,i){throw Error("Share.js: Comment default button not implemented.")};this._comment_subbuzz=function(t,i){sharing.lib.apply_attrs(t.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-response-share response-button hidden",id:"response"+i["subbuzz"],"rel:bf_bucket_data":JSON.stringify({"response-share":{id:i["subbuzz"]}}),"rel:gt_act":i["gt_act"]?i["gt_act"]:"share/contribute/list-item:"+i["subbuzz_no"],"rel:gt_label":i["gt_label"]?i["gt_label"]:null},sharing.buttons.comment_cb)};this.linkedin=function(i){if(!i){i=new Object}i.network="linkedin";var n=t._build(i);if(n.type()=="subbuzz"){t._linked_in_subbuzz(n,i)}else{t._linkedin_default(n,i)}n.network="linkedin";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._linkedin_default=function(i,n){var a=function(e){EventManager.fire("share:user_shared",{type:"linkedin"});var i="http://www.linkedin.com/shareArticle?mini=true";i+="&url="+sharing.lib.get_url(n);t._window({width:520,height:420,url:i,name:"linkedinWindow"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.container,{"class":"linkedin_share"});sharing.lib.apply_attrs(i.icon,{"class":"li_icon fa"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/linkedin","rel:gt_label":n["gt_label"]?n["gt_label"]:null,"rel:bf_bucket":"linkedin",href:"javascript:;","data-bfa":"@a:Share; @d:Linkedin;"})};this._linked_in_subbuzz=function(t,i){throw Error("Share.js: LinkedIn subbuzz is not implemented.")};this.rebuzz=function(i){if(!i){i=new Object}i.network="buzzfeed";var n=t._build(i);if(n.type()=="subbuzz"){t._rebuzz_subbuzz(n,i)}else{t._rebuzz_default(n,i)}n.network="rebuzz";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._rebuzz_default=function(t,i){var n=function(e){return sharing.lib.endEvent(e)};var a=function(e){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_REBUZZ});tracker.run()}};sharing.lib.bind(t.anchor,"mousedown",a);sharing.lib.bind(t.anchor,"click",n);t.label.innerHTML="Rebuzz";sharing.lib.apply_attrs(t.container,{"class":"rebuzz_share","rel:buzz_id":i["buzzid"]});sharing.lib.apply_attrs(t.icon,{"class":"rebuzz_icon fa"});sharing.lib.apply_attrs(t.anchor,{"class":"add-pick bf_dom make_pick shareBtn big square","rel:gt_act":i["gt_act"]?i["gt_act"]:"share/rebuzz","rel:gt_label":i["gt_label"]?i["gt_label"]:null,id:i["buzzid"]+"-make_pick-add","rel:data":JSON.stringify({username:i["username"]}),"data-bfa":"@a:Share; @d:Rebuzz;"});EventManager.fire("share_button:built",{type:"rebuzz_default",el:t.anchor})};this._rebuzz_subbuzz=function(t,i){throw Error("Share.js: Rebuzz subbuzz buttons are not implemented.")};this.twitter=function(i){if(!i){i=new Object}i.network="twitter";var n=t._build(i);if(n.type()=="subbuzz"){t._twitter_subbuzz(n,i)}else if(n.type()=="longform"){t._twitter_longform(n,i)}else if(n.type()=="circleshare"){t._twitter_circleshare(n,i)}else{t._twitter_default(n,i)}n.network="twitter";if(typeof universal_dom!="undefined")universal_dom.update(n.anchor);return n};this._twitter_build_url=function(t){var i="http://twitter.com/share?";var n=sharing.lib.get_url(t);var a=function(){var t=navigator.userAgent;var i=navigator.appVersion;var n=/twitter for iphone/i;if(t&&i&&(n.test(t)||n.test(i))){return true}return false};i+="url="+n;if(t["blurb"]){i+="&text="+encodeURIComponent(bfjs.decodeHTML(t["blurb"]))}if(t["via"]){i+="&via="+(a()&&t["via"][0]!="@"?"@":"")+t["via"]}if(t["hashtags"]&&t["hashtags"]!="#"){i+="&hashtags="+t["hashtags"].replace(/#/g,"")}return i};this._twitter_shorten_params=function(t){var i=22;if(t["hashtags"]){i+=t["hashtags"].length+3}if(t["via"]){var n=t["via"].length+5;if(i+n<140){i+=n}else{t["via"]=t["via"].replace(/ @buzzfeed(news|france|germany|brasil|mexico|espanol|oz|canada|uk|india)?/i,"");i+=t["via"].length+5}}if(t["blurb"]){var a=false,r=139-i,s;if(/%2520/.test(t.blurb)){s=decodeURIComponent(decodeURIComponent(t.blurb));a=true}else{s=t.blurb}if(r<s.length){while(s.indexOf(" ")>=0&&s.length>r){s=s.substring(0,s.lastIndexOf(" "))}if(a){s=encodeURIComponent(encodeURIComponent(s))}t.blurb=s}}return t};this._twitter_default=function(i,n){var a=function(e){EventManager.fire("share:user_shared",{type:"twitter"});var i=t._twitter_build_url(n);t._window({width:550,height:450,url:i,name:"twitterWindow"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};n=t._twitter_shorten_params(n);icoptions=t._twitter_shorten_params(n);sharing.lib.bind(i.anchor,"click",a);if(n["type"]=="ic_with_txt"){if(n["divider"]==true){i.container.setAttribute("class","tweet_share fa_ic br_bt")}else{i.container.setAttribute("class","tweet_share fa_ic")}i.icon.setAttribute("class","fa fa-twitter twitter_icon")}else{i.label.innerHTML="Tweet";sharing.lib.apply_attrs(i.container,{"class":"tweet_share"});sharing.lib.apply_attrs(i.icon,{"class":"twitter_icon fa"})}sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/twitter/tweet","rel:gt_label":n["gt_label"]?n["gt_label"]:null,href:"javascript:;","data-bfa":"@a:Share; @d:Twitter;"})};this._twitter_longform=function(i,n){var a=function(e){var i=t._twitter_build_url(n);t._window({width:550,height:450,url:i,name:"twitterWindow"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};n=t._twitter_shorten_params(n);sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":"share/twitter/tweet",href:"javascript:;","class":"bf_dom twitter_icon inlineShareBtn"})};this._twitter_subbuzz=function(i,n){var n=t._twitter_shorten_params(n);var a=n.subbuzz_no?"@a:Share; @d:Twitter; @e:{idx:"+n.subbuzz_no+"};":"@a:Share; @d:Link;";sharing.lib.apply_attrs(i.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-twitter-share fa fa-twitter",id:"twitter"+n["subbuzz"],"rel:hashtags":n["hashtags"]?n["hashtags"].replace(/#/g,""):"","rel:via":n["via"]?n["via"]:"","rel:sub_title":n["blurb"]?decodeURIComponent(decodeURIComponent(n["blurb"])):" ","rel:adtl_tweet_text":n["adtl_tweet_text"]?decodeURIComponent(n["adtl_tweet_text"]):" ","rel:bf_bucket_data":JSON.stringify({"tw-share":{id:n["subbuzz"]}}),"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/twitter/list-item:"+n["subbuzz_no"],"rel:gt_label":n["gt_label"]?n["gt_label"]:n["image"],"data-bfa":a})};this._twitter_circleshare=function(i,n){var a=function(e){var i="http://twitter.com/share?url="+sharing.lib.get_url(n);if(n["blurb"])i+="&text="+n["blurb"];if(n["via"])i+="&via="+n["via"];if(n["hashtags"])i+="&hashtags="+n["hashtags"];t._window({width:550,height:450,url:i,name:"twitterWindow"});if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){bf_visit.recordShare(this)}return sharing.lib.endEvent(e)};sharing.lib.bind(i.anchor,"click",a);sharing.lib.apply_attrs(i.icon,{"class":"fa fa-twitter","rel:gt_act":"ignore"});sharing.lib.apply_attrs(i.anchor,{"rel:gt_act":n["gt_act"]?n["gt_act"]:"share/twitter/share",href:"javascript:;","class":"bf_dom circle-share circle-twitter-share"})}};var ScrollToTop=function(){var t=false;var i=function(){if(n()){var t=new Element("div");t.id="back_to_top";t.className="back-to-top";t.onclick=function(){$s("body").scrollTo();if(gtrack.tt_page=="Buzz"){gtrack.track_events("[ttp]","scrollTo/Top",gtrack.scrollDepth+"%")}else{gtrack.track_events("[ttp]","scrollTo/Top")}};$$("body")[0].insert(t);Event.observe(window,"scroll",function(e){a()})}};var n=function(){if($$(".hp-layout").length||$$(".hp-beta").length){return true}if(!$$(".new-draft").length){if($$("#buzz_sub_buzz.suplist_list_show").length){return true}if(acl.user_can("general_admin")&&document.location.href.match("/_draft/")){return true}if($$(".BuzzPage").length){return true}}return false};var a=function(){try{if(document.viewport.getScrollOffsets()[1]>500&&!t){$("back_to_top").addClassName("show");new BF_Effect.FadeIn($("back_to_top"),1,20);t=true}else if(document.viewport.getScrollOffsets()[1]<100&&t){$("back_to_top").removeClassName("show");t=false}else if(document.viewport.getScrollOffsets()[1]<500&&t){var i=function(){$("back_to_top").removeClassName("show")};new BF_Effect.FadeOut($("back_to_top"),0,20,i);t=false}}catch(e){if(BF_STATIC.bf_env!="live"){console.error(e)}}};return{init:function(){try{i()}catch(t){if(BF_STATIC.bf_env!="live"){console.error(t)}}}}}();BuzzLoader.register(ScrollToTop.init,5);var HideSplashPost=function(){var t=null;var i="splash-container";var n="list-of-buzz";var a=function(t){return $(t).readAttribute("rel:buzz_id")};var r=function(t,i){$(t).select("li").each(function(t){if($(t).id=="post-"+i){$(t).remove()}})};return{init:function(){if($(i)==null||$(n)==null){return}t=a(i);if(t==null){return}r(n,t)}}}();if(BF_STATIC.tt_page!="Home"){BuzzLoader.register(HideSplashPost.init,1)}(function(){var t=(new Date).getTime(),i=$$("ul.breaking-posts li.last")[0],n=function(){var i=$$(".breaking-tweets iframe")[0],a=(new Date).getTime(),r=function(){if(!i)return false;var t=i.getStyle("height").match(/\d+/),n=t?+t[0]:125;return i.getHeight()>=n};if(!r()&&a-t<1e4){setTimeout(n,500)}else if(!r()){if(i)i.addClassName("hidden");$$("ul.breaking-posts li.last")[0].removeClassName("hidden")}};if(!i)return;setTimeout(n,500)})();if(typeof BF_STATIC!="undefined"&&typeof BF_STATIC.country_locale!="undefined"){window.___gcfg={lang:BF_STATIC.country_locale}}BF_UTIL.createScript({url:"https://apis.google.com/js/client:plusone.js?onload=GCallback"});if(BF_STATIC.bf_test_mode&&BF_STATIC.bf_env=="dev"){(function(){var t=document.createElement("script");t.type="text/javascript";t.async=true;t.src="https://apis.google.com/js/client:plusone.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)})()}function GCallback(){EventManager.fire("gplus:api-loaded")}var BFPinterestReferer=function(){this.COOKIE="bf_referer";this.PAGE_TYPE;this.PROMO_INDEX=5;this.PROMO_PER_ROW=2;this.PROMO_ROWS=2;this.SPONSOR_INDEX=1;this.pinit_ps={};this.init=function(){var t=true;if(BF_STATIC.tt_page.match(/^(MobileHome|MobileDiy|MobileFood|MobileHealth|MobileParents|MobileStyle|MobileTravel|MobileWeddings)$/i)){bf_pinterest_referer.PAGE_TYPE="vertical";bf_pinterest_referer.PROMO_ROWS=1}else if(BF_STATIC.tt_page.match(/^MobileBuzz$/)){bf_pinterest_referer.PAGE_TYPE="bpage-mobile";bf_pinterest_referer.PROMO_ROWS=1}else if(BF_STATIC.tt_page.match(/^(DIY|Food|Health|Parents|Style|Travel|Weddings)$/i)){bf_pinterest_referer.PAGE_TYPE="vertical"}else if(BF_STATIC.hp_type&&BF_STATIC.hp_type.match(/^Life$/i)){bf_pinterest_referer.PAGE_TYPE="life";bf_pinterest_referer.PROMO_PER_ROW=6;bf_pinterest_referer.PROMO_ROWS=1}else if(BF_STATIC.tt_page=="Buzz"){bf_pinterest_referer.PAGE_TYPE="bpage";if(document.getElementById("hotOnPinterestWrap")){var n=document.getElementById("hotOnPinterestWrap").getElementsByClassName("hot-on-pinterest");for(i=0;i<n.length;i++){pinterestunit=n[i];pinterestunit.setAttribute("data-promo_per_row",3);pinterestunit.setAttribute("data-promo_rows",1);pinterestunit.setAttribute("data-unit_type","bpage_bottom")}}}else{t=false}if(t)bf_pinterest_referer._init()};this._init=function(){bf_pinterest_referer.setup_observers();bf_pinterest_referer._loadPinterestScript();var t=document.getElementsByClassName("hot-on-pinterest__more");for(i=0;i<t.length;i++){bf_pinterest_referer.show_more(t[i])}};this.setup_observers=function(){var t=document.getElementsByClassName("hot-on-pinterest__more");for(i=0;i<t.length;i++){t[i].addEventListener("click",bf_pinterest_referer.show_more)}};this.show_more=function(t){var i=false;if(t.target){t=t.target;i=true}var n=t.parentNode.parentNode;var a=n.getAttribute("data-revealed");if(!a||i){var r=n.getAttribute("data-promo_per_row")||bf_pinterest_referer.PROMO_PER_ROW;var s=n.getAttribute("data-promo_rows")||bf_pinterest_referer.PROMO_ROWS;var o=r*s;if(a==o)o=12;if(a==12)o=21;if(o==21)t.className+=" hidden";bf_pinterest_referer.reveal_promos(n,o)}};this.reveal_promos=function(t,i){t.setAttribute("data-revealed",i);var n=bf_pinterest_referer._get_the_promos(t);for(var a in n){var r=t.getElementsByClassName("js-sponsored");r=Object.keys(r).map(function(t){return r[t]});for(var s=0;s<n[a].length;s++){if(r.indexOf(n[a][s])!=-1)n[a].splice(s,1)}}var o=function(t){for(var a in n){for(var r=0;r<i&&r<n[a].length;r++){t.call(null,n[a][r])}}};o(function(i){if(i.className&&!i.className.match("js-backfill")||t.getElementsByClassName("js-sponsored hidden").length){i.className=i.className.toString().replace("hidden","")}var n=i.getElementsByClassName("pinterest-list__link");if(n.length){n[0].setAttribute("data-pin-do","buttonPin");var a=n[0].parentNode;a.className=a.className.toString().replace(/\s+hidden/,"");if(!i.getElementsByClassName("js-get_repin_count").length&&i.getElementsByClassName("pinterest-list__pin-count").length){var r=i.getElementsByClassName("pinterest-list__pin-count")[0];var s=r.getAttribute("data-pin-url");var o=document.createElement("script");o.type="text/javascript";o.async=true;o.className="js-get_repin_count";o.src="//api.pinterest.com/v1/urls/count.json?callback=bf_pinterest_referer.set_repin_count&url="+s;r.parentNode.insertBefore(o,r)}}if(typeof window.buildPinterestBtns!="undefined")window.buildPinterestBtns(i)});var l=t.getElementsByClassName("pinterest-list__li hidden");l=Object.keys(l).map(function(t){return l[t]});if(l.length){for(var s=0;s<l.length;s++){if(l[s].className&&l[s].className.match(/js-sponsored|js-backfill/)){l.splice(s,1)}}var u=t.getAttribute("data-promo_per_row")||bf_pinterest_referer.PROMO_PER_ROW;if(l.length<u)l=[]}if(!l.length){t.getElementsByClassName("hot-on-pinterest__more")[0].className+=" hidden"}if(bf_pinterest_referer.PAGE_TYPE&&(!bf_pinterest_referer.PAGE_TYPE.match("bpage")||t.getAttribute("data-unit_type")=="bpage_bottom")){t.className=t.className.toString().replace("hidden","")}};this._get_the_promos=function(t){var i={};var n="pinterest_promo";var a=t.getElementsByClassName("pinterest-list__li");a=Object.keys(a).map(function(t){return a[t]});var r=t.getElementsByClassName("js-sponsored");r=Object.keys(r).map(function(t){return r[t]});var s=t.getElementsByClassName("js-backfill");s=Object.keys(s).map(function(t){return s[t]});r=r.concat(s);if(r.length<a.length){var o=[];var l=t.getAttribute("data-promo_per_row")||bf_pinterest_referer.PROMO_PER_ROW;for(var u=a.length-1;u>0&&a.length%l!=0;u--){if(r.indexOf(a[u])==-1){var d=a.splice(u,1);o.push(d[0])}}var c=t.getElementsByClassName("js-sponsored").length;if(o.length>=c){while(o.length&&c>0){a.push(o.pop());c--}}else{var _=l-c;for(var u=a.length-1;u>0&&_>0;u--){if(r.indexOf(a[u])==-1){a.splice(u,1);_--}}}}i[n]=a;return i};this.set_repin_count=function(t){if(t&&t.count&&(t.count=parseInt(t.count))){var i=document.querySelectorAll('div[data-pin-url="'+t.url+'"]');for(var n=0;i[n];n++){var a=i[n];a.innerHTML=t.count.toLocaleString()+" repins"}}};this._loadPinterestScript=function(){if(!BF_STATIC.bf_test_mode){if(typeof window.buildPinterestBtns=="undefined"){var t,i,n=document;i=n.createElement("SCRIPT");i.type="text/javascript";i.async=true;i.setAttribute("data-pin-color","red");i.setAttribute("data-pin-build","buildPinterestBtns");i.src="//assets.pinterest.com/js/pinit.js";t=n.getElementsByTagName("SCRIPT")[0];t.parentNode.insertBefore(i,t)}}else{console.info("disable Dynamically load assets.pinterest.com/js/pinit.js for test mode")}}};bf_pinterest_referer=new BFPinterestReferer;bf_pinterest_referer.init();var BF_Vertical=function(){this.init=function(){if(BF_STATIC.tt_page=="Community"){vertical.community_notice_toggle()}if($$(".twitter-widget").length>0){vertical.track_tweets_title_sidebar_clicks()}universal_dom.assign_handler({bucket:"close_community_note",event:"click",handler:vertical.remove_community_notice});universal_dom.assign_handler({bucket:"community_signin_post",event:"click",handler:vertical.community_signin_post})};this.track_tweets_title_sidebar_clicks=function(){new PeriodicalExecuter(function(t){if($$(".twitter-widget iframe.twitter-timeline").length>0&&typeof gtrack!=="undefined"){var i=$$("iframe.twitter-timeline")[0].contentDocument||$$("iframe.twitter-timeline")[0].contentWindow.document;if(typeof i.getElementsByTagName("h1")[0]!=="undefined"&&typeof i.getElementsByTagName("h1")[0].getElementsByTagName("a")[0]!=="undefined"){var n=i.getElementsByTagName("h1")[0].getElementsByTagName("a")[0];var a=typeof(new BF_User).getUserInfo().username!=="undefined"?(new BF_User).getUserInfo().username:"not_logged_in";if(typeof n==="undefined"){return}Event.observe(n,"click",function(){gtrack.track_events(BF_STATIC.tt_page+":sidebar/tweets","link","twitter/"+a)});t.stop()}}},.5)};this.community_notice_toggle=function(e){try{if($("community_all_note")){var t=localStorage.getItem("community_notice");if(t==null)$("community_all_note").removeClassName("hidden");else if(t)$("community_all_note").addClassName("hidden")}}catch(e){console.log(e)}};this.remove_community_notice=function(e){if($("community_all_note"))$("community_all_note").addClassName("hidden");localStorage.setItem("community_notice",true)};this.community_signin_post=function(e){e.stop();var t=new BF_User;if(t.isLoggedIn()){document.location.href=BF_STATIC.web_root+"/post"}else{BF_LOGIN_SIGNUP.show({locationName:"community",onSuccessLoginCb:function(){BF_LOGIN_SIGNUP.updateUserNav();location.reload()}.bind(this)})}}};var vertical=new BF_Vertical;BuzzLoader.register(vertical.init,1);(function(t){function i(t,i,n){switch(arguments.length){case 2:return null!=t?t:i;case 3:return null!=t?t:null!=i?i:n;default:throw new Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(t,i){function n(){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var a=!0;return u(function(){return a&&(n(),a=!1),i.apply(this,arguments)},i)}function e(t,i){return function(n){return _(t.call(this,n),i)}}function r(t,i){return function(n){return this.lang().ordinal(t.call(this,n),i)}}function s(){}function o(t){S(t),u(this,t)}function l(t){var i=b(t),n=i.year||0,a=i.quarter||0,e=i.month||0,r=i.week||0,s=i.day||0,o=i.hour||0,l=i.minute||0,u=i.second||0,d=i.millisecond||0;this._milliseconds=+d+1e3*u+6e4*l+36e5*o,this._days=+s+7*r,this._months=+e+3*a+12*n,this._data={},this._bubble()}function u(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return i.hasOwnProperty("toString")&&(t.toString=i.toString),i.hasOwnProperty("valueOf")&&(t.valueOf=i.valueOf),t}function d(t){var i,n={};for(i in t)t.hasOwnProperty(i)&&Le.hasOwnProperty(i)&&(n[i]=t[i]);return n}function c(t){return 0>t?Math.ceil(t):Math.floor(t)}function _(t,i,n){for(var a=""+Math.abs(t),e=t>=0;a.length<i;)a="0"+a;return(e?n?"+":"":"-")+a}function f(t,i,n,a){var e=i._milliseconds,r=i._days,s=i._months;a=null==a?!0:a,e&&t._d.setTime(+t._d+e*n),r&&oe(t,"Date",se(t,"Date")+r*n),s&&re(t,se(t,"Month")+s*n),a&&_e.updateOffset(t,r||s)}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function m(t,i,n){var a,e=Math.min(t.length,i.length),r=Math.abs(t.length-i.length),s=0;for(a=0;e>a;a++)(n&&t[a]!==i[a]||!n&&y(t[a])!==y(i[a]))&&s++;return s+r}function g(t){if(t){var i=t.toLowerCase().replace(/(.)s$/,"$1");t=tt[t]||it[i]||i}return t}function b(t){var i,n,a={};for(n in t)t.hasOwnProperty(n)&&(i=g(n),i&&(a[i]=t[n]));return a}function v(i){var n,a;if(0===i.indexOf("week"))n=7,a="day";else{if(0!==i.indexOf("month"))return;n=12,a="month"}_e[i]=function(e,r){var s,o,l=_e.fn._lang[i],u=[];if("number"==typeof e&&(r=e,e=t),o=function(t){var i=_e().utc().set(a,t);return l.call(_e.fn._lang,i,e||"")},null!=r)return o(r);for(s=0;n>s;s++)u.push(o(s));return u}}function y(t){var i=+t,n=0;return 0!==i&&isFinite(i)&&(n=i>=0?Math.floor(i):Math.ceil(i)),n}function w(t,i){return new Date(Date.UTC(t,i+1,0)).getUTCDate()}function k(t,i,n){return te(_e([t,11,31+i-n]),i,n).week}function T(t){return M(t)?366:365}function M(t){return t%4===0&&t%100!==0||t%400===0}function S(t){var i;t._a&&-2===t._pf.overflow&&(i=t._a[ve]<0||t._a[ve]>11?ve:t._a[ye]<1||t._a[ye]>w(t._a[be],t._a[ve])?ye:t._a[we]<0||t._a[we]>23?we:t._a[ke]<0||t._a[ke]>59?ke:t._a[Te]<0||t._a[Te]>59?Te:t._a[Me]<0||t._a[Me]>999?Me:-1,t._pf._overflowDayOfYear&&(be>i||i>ye)&&(i=ye),t._pf.overflow=i)}function L(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function z(t){return t?t.toLowerCase().replace("_","-"):t}function C(t,i){return i._isUTC?_e(t).zone(i._offset||0):_e(t).local()}function A(t,i){return i.abbr=t,Se[t]||(Se[t]=new s),Se[t].set(i),Se[t]}function B(t){delete Se[t]}function E(t){var i,n,a,e,r=0,s=function(t){if(!Se[t]&&ze)try{require("./lang/"+t)}catch(i){}return Se[t]};if(!t)return _e.fn._lang;if(!h(t)){if(n=s(t))return n;t=[t]}for(;r<t.length;){for(e=z(t[r]).split("-"),i=e.length,a=z(t[r+1]),a=a?a.split("-"):null;i>0;){if(n=s(e.slice(0,i).join("-")))return n;if(a&&a.length>=i&&m(e,a,!0)>=i-1)break;i--}r++}return _e.fn._lang}function I(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function F(t){var i,n,a=t.match(Ee);for(i=0,n=a.length;n>i;i++)a[i]=ot[a[i]]?ot[a[i]]:I(a[i]);return function(e){var r="";for(i=0;n>i;i++)r+=a[i]instanceof Function?a[i].call(e,t):a[i];return r}}function D(t,i){return t.isValid()?(i=Y(i,t.lang()),nt[i]||(nt[i]=F(i)),nt[i](t)):t.lang().invalidDate()}function Y(t,i){function n(t){return i.longDateFormat(t)||t}var a=5;for(Ie.lastIndex=0;a>=0&&Ie.test(t);)t=t.replace(Ie,n),Ie.lastIndex=0,a-=1;return t}function x(t,i){var n,a=i._strict;switch(t){case"Q":return Re;case"DDDD":return He;case"YYYY":case"GGGG":case"gggg":return a?We:Ye;case"Y":case"G":case"g":return Ge;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?Ve:$e;case"S":if(a)return Re;case"SS":if(a)return qe;case"SSS":if(a)return He;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return je;case"a":case"A":return E(i._l)._meridiemParse;case"X":return Ue;case"Z":case"ZZ":return Ne;case"T":return Oe;case"SSSS":return xe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?qe:Fe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Fe;case"Do":return Pe;default:return n=new RegExp(W(H(t.replace("\\","")),"i"))}}function j(t){t=t||"";var i=t.match(Ne)||[],n=i[i.length-1]||[],a=(n+"").match(Ze)||["-",0,0],e=+(60*a[1])+y(a[2]);return"+"===a[0]?-e:e}function N(t,i,n){var a,e=n._a;switch(t){case"Q":null!=i&&(e[ve]=3*(y(i)-1));break;case"M":case"MM":null!=i&&(e[ve]=y(i)-1);break;case"MMM":case"MMMM":a=E(n._l).monthsParse(i),null!=a?e[ve]=a:n._pf.invalidMonth=i;break;case"D":case"DD":null!=i&&(e[ye]=y(i));break;case"Do":null!=i&&(e[ye]=y(parseInt(i,10)));break;case"DDD":case"DDDD":null!=i&&(n._dayOfYear=y(i));break;case"YY":e[be]=_e.parseTwoDigitYear(i);break;case"YYYY":case"YYYYY":case"YYYYYY":e[be]=y(i);break;case"a":case"A":n._isPm=E(n._l).isPM(i);break;case"H":case"HH":case"h":case"hh":e[we]=y(i);break;case"m":case"mm":e[ke]=y(i);break;case"s":case"ss":e[Te]=y(i);break;case"S":case"SS":case"SSS":case"SSSS":e[Me]=y(1e3*("0."+i));break;case"X":n._d=new Date(1e3*parseFloat(i));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=j(i);break;case"dd":case"ddd":case"dddd":a=E(n._l).weekdaysParse(i),null!=a?(n._w=n._w||{},n._w.d=a):n._pf.invalidWeekday=i;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),i&&(n._w=n._w||{},n._w[t]=y(i));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=_e.parseTwoDigitYear(i)}}function O(t){var n,a,e,r,s,o,l,u;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(s=1,o=4,a=i(n.GG,t._a[be],te(_e(),1,4).year),e=i(n.W,1),r=i(n.E,1)):(u=E(t._l),s=u._week.dow,o=u._week.doy,a=i(n.gg,t._a[be],te(_e(),s,o).year),e=i(n.w,1),null!=n.d?(r=n.d,s>r&&++e):r=null!=n.e?n.e+s:s),l=ie(a,e,r,o,s),t._a[be]=l.year,t._dayOfYear=l.dayOfYear}function U(t){var n,a,e,r,s=[];if(!t._d){for(e=R(t),t._w&&null==t._a[ye]&&null==t._a[ve]&&O(t),t._dayOfYear&&(r=i(t._a[be],e[be]),t._dayOfYear>T(r)&&(t._pf._overflowDayOfYear=!0),a=X(r,0,t._dayOfYear),t._a[ve]=a.getUTCMonth(),t._a[ye]=a.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=s[n]=e[n];for(;7>n;n++)t._a[n]=s[n]=null==t._a[n]?2===n?1:0:t._a[n];t._d=(t._useUTC?X:K).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function P(t){var i;t._d||(i=b(t._i),t._a=[i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond],U(t))}function R(t){var i=new Date;return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function q(t){if(t._f===_e.ISO_8601)return void G(t);t._a=[],t._pf.empty=!0;var i,n,a,e,r,s=E(t._l),o=""+t._i,l=o.length,u=0;for(a=Y(t._f,s).match(Ee)||[],i=0;i<a.length;i++)e=a[i],n=(o.match(x(e,t))||[])[0],n&&(r=o.substr(0,o.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),o=o.slice(o.indexOf(n)+n.length),u+=n.length),ot[e]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(e),N(e,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(e);t._pf.charsLeftOver=l-u,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[we]<12&&(t._a[we]+=12),t._isPm===!1&&12===t._a[we]&&(t._a[we]=0),U(t),S(t)}function H(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,n,a,e){return i||n||a||e})}function W(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(t){var i,a,e,r,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)s=0,i=u({},t),i._pf=n(),i._f=t._f[r],q(i),L(i)&&(s+=i._pf.charsLeftOver,s+=10*i._pf.unusedTokens.length,i._pf.score=s,(null==e||e>s)&&(e=s,a=i));u(t,a||i)}function G(t){var i,n,a=t._i,e=Je.exec(a);if(e){for(t._pf.iso=!0,i=0,n=Ke.length;n>i;i++)if(Ke[i][1].exec(a)){t._f=Ke[i][0]+(e[6]||" ");break}for(i=0,n=Xe.length;n>i;i++)if(Xe[i][1].exec(a)){t._f+=Xe[i][0];break}a.match(Ne)&&(t._f+="Z"),q(t)}else t._isValid=!1}function J(t){G(t),t._isValid===!1&&(delete t._isValid,_e.createFromInputFallback(t))}function Q(i){var n=i._i,a=Ce.exec(n);n===t?i._d=new Date:a?i._d=new Date(+a[1]):"string"==typeof n?J(i):h(n)?(i._a=n.slice(0),U(i)):p(n)?i._d=new Date(+n):"object"==typeof n?P(i):"number"==typeof n?i._d=new Date(n):_e.createFromInputFallback(i)}function K(t,i,n,a,e,r,s){var o=new Date(t,i,n,a,e,r,s);return 1970>t&&o.setFullYear(t),o}function X(t){var i=new Date(Date.UTC.apply(null,arguments));return 1970>t&&i.setUTCFullYear(t),i}function $(t,i){if("string"==typeof t)if(isNaN(t)){if(t=i.weekdaysParse(t),"number"!=typeof t)return null;
}else t=parseInt(t,10);return t}function Z(t,i,n,a,e){return e.relativeTime(i||1,!!n,t,a)}function ee(t,i,n){var a=ge(Math.abs(t)/1e3),e=ge(a/60),r=ge(e/60),s=ge(r/24),o=ge(s/365),l=a<at.s&&["s",a]||1===e&&["m"]||e<at.m&&["mm",e]||1===r&&["h"]||r<at.h&&["hh",r]||1===s&&["d"]||s<=at.dd&&["dd",s]||s<=at.dm&&["M"]||s<at.dy&&["MM",ge(s/30)]||1===o&&["y"]||["yy",o];return l[2]=i,l[3]=t>0,l[4]=n,Z.apply({},l)}function te(t,i,n){var a,e=n-i,r=n-t.day();return r>e&&(r-=7),e-7>r&&(r+=7),a=_e(t).add("d",r),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function ie(t,i,n,a,e){var r,s,o=X(t,0,1).getUTCDay();return o=0===o?7:o,n=null!=n?n:e,r=e-o+(o>a?7:0)-(e>o?7:0),s=7*(i-1)+(n-e)+r+1,{year:s>0?t:t-1,dayOfYear:s>0?s:T(t-1)+s}}function ne(i){var n=i._i,a=i._f;return null===n||a===t&&""===n?_e.invalid({nullInput:!0}):("string"==typeof n&&(i._i=n=E().preparse(n)),_e.isMoment(n)?(i=d(n),i._d=new Date(+n._d)):a?h(a)?V(i):q(i):Q(i),new o(i))}function ae(t,i){var n,a;if(1===i.length&&h(i[0])&&(i=i[0]),!i.length)return _e();for(n=i[0],a=1;a<i.length;++a)i[a][t](n)&&(n=i[a]);return n}function re(t,i){var n;return"string"==typeof i&&(i=t.lang().monthsParse(i),"number"!=typeof i)?t:(n=Math.min(t.date(),w(t.year(),i)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](i,n),t)}function se(t,i){return t._d["get"+(t._isUTC?"UTC":"")+i]()}function oe(t,i,n){return"Month"===i?re(t,n):t._d["set"+(t._isUTC?"UTC":"")+i](n)}function le(t,i){return function(n){return null!=n?(oe(this,t,n),_e.updateOffset(this,i),this):se(this,t)}}function ue(t){_e.duration.fn[t]=function(){return this._data[t]}}function de(t,i){_e.duration.fn["as"+t]=function(){return+this/i}}function ce(t){"undefined"==typeof ender&&(fe=me.moment,me.moment=t?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):_e)}for(var _e,fe,he,pe="2.7.0",me="undefined"!=typeof global?global:this,ge=Math.round,be=0,ve=1,ye=2,we=3,ke=4,Te=5,Me=6,Se={},Le={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ze="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,Ae=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Be=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ee=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ie=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Fe=/\d\d?/,De=/\d{1,3}/,Ye=/\d{1,4}/,$e=/[+\-]?\d{1,6}/,xe=/\d+/,je=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ne=/Z|[\+\-]\d\d:?\d\d/gi,Oe=/T/i,Ue=/[\+\-]?\d+(\.\d{1,3})?/,Pe=/\d{1,2}/,Re=/\d/,qe=/\d\d/,He=/\d{3}/,We=/\d{4}/,Ve=/[+-]?\d{6}/,Ge=/[+-]?\d+/,Je=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qe="YYYY-MM-DDTHH:mm:ssZ",Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Xe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ze=/([\+\-]|\d\d)/gi,et=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),tt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},it={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},nt={},at={s:45,m:45,h:22,dd:25,dm:45,dy:345},rt="DDD w W M D d".split(" "),st="M D H h m s w W".split(" "),ot={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return _(this.year()%100,2)},YYYY:function(){return _(this.year(),4)},YYYYY:function(){return _(this.year(),5)},YYYYYY:function(){var t=this.year(),i=t>=0?"+":"-";return i+_(Math.abs(t),6)},gg:function(){return _(this.weekYear()%100,2)},gggg:function(){return _(this.weekYear(),4)},ggggg:function(){return _(this.weekYear(),5)},GG:function(){return _(this.isoWeekYear()%100,2)},GGGG:function(){return _(this.isoWeekYear(),4)},GGGGG:function(){return _(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return _(y(this.milliseconds()/10),2)},SSS:function(){return _(this.milliseconds(),3)},SSSS:function(){return _(this.milliseconds(),3)},Z:function(){var t=-this.zone(),i="+";return 0>t&&(t=-t,i="-"),i+_(y(t/60),2)+":"+_(y(t)%60,2)},ZZ:function(){var t=-this.zone(),i="+";return 0>t&&(t=-t,i="-"),i+_(y(t/60),2)+_(y(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},lt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];rt.length;)he=rt.pop(),ot[he+"o"]=r(ot[he],he);for(;st.length;)he=st.pop(),ot[he+he]=e(ot[he],2);for(ot.DDDD=e(ot.DDD,3),u(s.prototype,{set:function(t){var i,n;for(n in t)i=t[n],"function"==typeof i?this[n]=i:this["_"+n]=i},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var i,n,a;for(this._monthsParse||(this._monthsParse=[]),i=0;12>i;i++)if(this._monthsParse[i]||(n=_e.utc([2e3,i]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),this._monthsParse[i].test(t))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var i,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(n=_e([2e3,1]).day(i),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[i].test(t))return i},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var i=this._longDateFormat[t];return!i&&this._longDateFormat[t.toUpperCase()]&&(i=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=i),i},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,i,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,i){var n=this._calendar[t];return"function"==typeof n?n.apply(i):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,i,n,a){var e=this._relativeTime[n];return"function"==typeof e?e(t,i,n,a):e.replace(/%d/i,t)},pastFuture:function(t,i){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(i):n.replace(/%s/i,i)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return te(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(i,a,e,r){var s;return"boolean"==typeof e&&(r=e,e=t),s={},s._isAMomentObject=!0,s._i=i,s._f=a,s._l=e,s._strict=r,s._isUTC=!1,s._pf=n(),ne(s)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),_e.min=function(){var t=[].slice.call(arguments,0);return ae("isBefore",t)},_e.max=function(){var t=[].slice.call(arguments,0);return ae("isAfter",t)},_e.utc=function(i,a,e,r){var s;return"boolean"==typeof e&&(r=e,e=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=e,s._i=i,s._f=a,s._strict=r,s._pf=n(),ne(s).utc()},_e.unix=function(t){return _e(1e3*t)},_e.duration=function(t,i){var n,a,e,r=t,s=null;return _e.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},i?r[i]=t:r.milliseconds=t):(s=Ae.exec(t))?(n="-"===s[1]?-1:1,r={y:0,d:y(s[ye])*n,h:y(s[we])*n,m:y(s[ke])*n,s:y(s[Te])*n,ms:y(s[Me])*n}):(s=Be.exec(t))&&(n="-"===s[1]?-1:1,e=function(t){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*n},r={y:e(s[2]),M:e(s[3]),d:e(s[4]),h:e(s[5]),m:e(s[6]),s:e(s[7]),w:e(s[8])}),a=new l(r),_e.isDuration(t)&&t.hasOwnProperty("_lang")&&(a._lang=t._lang),a},_e.version=pe,_e.defaultFormat=Qe,_e.ISO_8601=function(){},_e.momentProperties=Le,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(i,n){return at[i]===t?!1:(at[i]=n,!0)},_e.lang=function(t,i){var n;return t?(i?A(z(t),i):null===i?(B(t),t="en"):Se[t]||E(t),n=_e.duration.fn._lang=_e.fn._lang=E(t),n._abbr):_e.fn._lang._abbr},_e.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),E(t)},_e.isMoment=function(t){return t instanceof o||null!=t&&t.hasOwnProperty("_isAMomentObject")},_e.isDuration=function(t){return t instanceof l},he=lt.length-1;he>=0;--he)v(lt[he]);_e.normalizeUnits=function(t){return g(t)},_e.invalid=function(t){var i=_e.utc(0/0);return null!=t?u(i._pf,t):i._pf.userInvalidated=!0,i},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)},u(_e.fn=o.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=_e(this).utc();return 0<t.year()&&t.year()<=9999?D(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):D(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return L(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0:!1},parsingFlags:function(){return u({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var i=D(this,t||_e.defaultFormat);return this.lang().postformat(i)},add:function(t,i){var n;return n="string"==typeof t&&"string"==typeof i?_e.duration(isNaN(+i)?+t:+i,isNaN(+i)?i:t):"string"==typeof t?_e.duration(+i,t):_e.duration(t,i),f(this,n,1),this},subtract:function(t,i){var n;return n="string"==typeof t&&"string"==typeof i?_e.duration(isNaN(+i)?+t:+i,isNaN(+i)?i:t):"string"==typeof t?_e.duration(+i,t):_e.duration(t,i),f(this,n,-1),this},diff:function(t,i,n){var a,e,r=C(t,this),s=6e4*(this.zone()-r.zone());return i=g(i),"year"===i||"month"===i?(a=432e5*(this.daysInMonth()+r.daysInMonth()),e=12*(this.year()-r.year())+(this.month()-r.month()),e+=(this-_e(this).startOf("month")-(r-_e(r).startOf("month")))/a,e-=6e4*(this.zone()-_e(this).startOf("month").zone()-(r.zone()-_e(r).startOf("month").zone()))/a,"year"===i&&(e/=12)):(a=this-r,e="second"===i?a/1e3:"minute"===i?a/6e4:"hour"===i?a/36e5:"day"===i?(a-s)/864e5:"week"===i?(a-s)/6048e5:a),n?e:c(e)},from:function(t,i){return _e.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(t){return this.from(_e(),t)},calendar:function(t){var i=t||_e(),n=C(i,this).startOf("day"),a=this.diff(n,"days",!0),e=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return M(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=$(t,this.lang()),this.add({d:t-i})):i},month:le("Month",!0),startOf:function(t){switch(t=g(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=g(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,i){return i="undefined"!=typeof i?i:"millisecond",+this.clone().startOf(i)>+_e(t).startOf(i)},isBefore:function(t,i){return i="undefined"!=typeof i?i:"millisecond",+this.clone().startOf(i)<+_e(t).startOf(i)},isSame:function(t,i){return i=i||"ms",+this.clone().startOf(i)===+C(t,this).startOf(i)},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),this>t?this:t}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),t>this?this:t}),zone:function(t,i){var n=this._offset||0;return null==t?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof t&&(t=j(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,n!==t&&(!i||this._changeInProgress?f(this,_e.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?_e(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(t){var i=ge((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==t?i:this.add("d",t-i)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var i=te(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?i:this.add("y",t-i)},isoWeekYear:function(t){var i=te(this,1,4).year;return null==t?i:this.add("y",t-i)},week:function(t){var i=this.lang().week(this);return null==t?i:this.add("d",7*(t-i))},isoWeek:function(t){var i=te(this,1,4).week;return null==t?i:this.add("d",7*(t-i))},weekday:function(t){var i=(this.day()+7-this.lang()._week.dow)%7;return null==t?i:this.add("d",t-i)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return k(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return k(this.year(),t.dow,t.doy)},get:function(t){return t=g(t),this[t]()},set:function(t,i){return t=g(t),"function"==typeof this[t]&&this[t](i),this},lang:function(i){return i===t?this._lang:(this._lang=E(i),this)}}),_e.fn.millisecond=_e.fn.milliseconds=le("Milliseconds",!1),_e.fn.second=_e.fn.seconds=le("Seconds",!1),_e.fn.minute=_e.fn.minutes=le("Minutes",!1),_e.fn.hour=_e.fn.hours=le("Hours",!0),_e.fn.date=le("Date",!0),_e.fn.dates=a("dates accessor is deprecated. Use date instead.",le("Date",!0)),_e.fn.year=le("FullYear",!0),_e.fn.years=a("years accessor is deprecated. Use year instead.",le("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,u(_e.duration.fn=l.prototype,{_bubble:function(){var t,i,n,a,e=this._milliseconds,r=this._days,s=this._months,o=this._data;o.milliseconds=e%1e3,t=c(e/1e3),o.seconds=t%60,i=c(t/60),o.minutes=i%60,n=c(i/60),o.hours=n%24,r+=c(n/24),o.days=r%30,s+=c(r/30),o.months=s%12,a=c(s/12),o.years=a},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(t){var i=+this,n=ee(i,!t,this.lang());return t&&(n=this.lang().pastFuture(i,n)),this.lang().postformat(n)},add:function(t,i){var n=_e.duration(t,i);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,i){var n=_e.duration(t,i);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=g(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=g(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:_e.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),i=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),e=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(i?i+"M":"")+(n?n+"D":"")+(a||e||r?"T":"")+(a?a+"H":"")+(e?e+"M":"")+(r?r+"S":""):"P0D"}});for(he in et)et.hasOwnProperty(he)&&(de(he,et[he]),ue(he.toLowerCase()));de("Weeks",6048e5),_e.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},_e.lang("en",{ordinal:function(t){var i=t%10,n=1===y(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return t+n}}),function(t){t(_e)}(function(t){return t.lang("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){var i={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return t.lang("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(t){return 12>t?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[۰-۹]/g,function(t){return n[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){var i={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return t.lang("ar",{months:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),monthsShort:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(t){return 12>t?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[۰-۹]/g,function(t){return n[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){var i={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};return t.lang("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(t){return 4>t?"gecə":12>t?"səhər":17>t?"gündüz":"axşam"},ordinal:function(t){if(0===t)return t+"-ıncı";var n=t%10,a=t%100-n,e=t>=100?100:null;return t+(i[n]||i[a]||i[e])},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinal:function(t){var i=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&20>n?t+"-ти":1===i?t+"-ви":2===i?t+"-ри":7===i||8===i?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){var i={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};return t.lang("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]})},meridiem:function(t){return 4>t?"রাত":10>t?"শকাল":17>t?"দুপুর":20>t?"বিকেল":"রাত"},week:{dow:0,doy:6}})}),function(t){t(_e)}(function(i){function n(t,i,n){var a={mm:"munutenn",MM:"miz",dd:"devezh"};return t+" "+r(a[n],t)}function a(t){switch(e(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}function e(t){return t>9?e(t%10):t}function r(t,i){return 2===i?s(t):t}function s(i){var n={m:"v",b:"v",d:"z"};return n[i.charAt(0)]===t?i:n[i.charAt(0)]+i.substring(1)}return i.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:n,h:"un eur",hh:"%d eur",d:"un devezh",dd:n,M:"ur miz",MM:n,y:"ur bloaz",yy:a},ordinal:function(t){var i=1===t?"añ":"vet";return t+i},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a=t+" ";switch(n){case"m":return i?"jedna minuta":"jedne minute";case"mm":return a+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return i?"jedan sat":"jednog sata";case"hh":return a+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return a+=1===t?"dan":"dana";case"MM":return a+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return a+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:i,mm:i,h:i,hh:i,d:"dan",dd:i,M:"mjesec",MM:i,y:"godinu",yy:i},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t){return t>1&&5>t&&1!==~~(t/10)}function n(t,n,a,e){var r=t+" ";switch(a){case"s":return n||e?"pár sekund":"pár sekundami";case"m":return n?"minuta":e?"minutu":"minutou";case"mm":return n||e?r+(i(t)?"minuty":"minut"):r+"minutami";break;case"h":return n?"hodina":e?"hodinu":"hodinou";case"hh":return n||e?r+(i(t)?"hodiny":"hodin"):r+"hodinami";break;case"d":return n||e?"den":"dnem";case"dd":return n||e?r+(i(t)?"dny":"dní"):r+"dny";break;case"M":return n||e?"měsíc":"měsícem";case"MM":return n||e?r+(i(t)?"měsíce":"měsíců"):r+"měsíci";break;case"y":return n||e?"rok":"rokem";case"yy":return n||e?r+(i(t)?"roky":"let"):r+"lety"}}var a="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),e="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");return t.lang("cs",{months:a,monthsShort:e,monthsParse:function(t,i){var n,a=[];for(n=0;12>n;n++)a[n]=new RegExp("^"+t[n]+"$|^"+i[n]+"$","i");return a}(a,e),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:
return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("cv",{months:"кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),monthsShort:"кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кç_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",LLL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",LLLL:"dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ĕнер] LT [сехетре]",nextWeek:"[Çитес] dddd LT [сехетре]",lastWeek:"[Иртнĕ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){var i=/сехет$/i.exec(t)?"рен":/çул$/i.exec(t)?"тан":"ран";return t+i},past:"%s каялла",s:"пĕр-ик çеккунт",m:"пĕр минут",mm:"%d минут",h:"пĕр сехет",hh:"%d сехет",d:"пĕр кун",dd:"%d кун",M:"пĕр уйăх",MM:"%d уйăх",y:"пĕр çул",yy:"%d çул"},ordinal:"%d-мĕш",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(t){var i=t,n="",a=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return i>20?n=40===i||50===i||60===i||80===i||100===i?"fed":"ain":i>0&&(n=a[i]),t+n},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return i?a[n][0]:a[n][1]}return t.lang("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return i?a[n][0]:a[n][1]}return t.lang("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,i){return/D/.test(i.substring(0,i.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,i,n){return t>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,i){var n=this._calendarEl[t],a=i&&i.hours();return"function"==typeof n&&(n=n.apply(i)),n.replace("{}",a%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinal:function(t){return t+"η"},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var i=t%10,n=1===~~(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return t+n},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var i=t%10,n=1===~~(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return t+n}})}),function(t){t(_e)}(function(t){return t.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var i=t%10,n=1===~~(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return t+n},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(t,i,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return t.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,a){return/-MMM-/.test(a)?n[t.month()]:i[t.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n,a){var e={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return i?e[n][2]?e[n][2]:e[n][1]:a?e[n][0]:e[n][1]}return t.lang("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:"%d päeva",M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){var i={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};return t.lang("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(t){return 12>t?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,function(t){return n[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]}).replace(/,/g,"،")},ordinal:"%dم",week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){function i(t,i,a,e){var r="";switch(a){case"s":return e?"muutaman sekunnin":"muutama sekunti";case"m":return e?"minuutin":"minuutti";case"mm":r=e?"minuutin":"minuuttia";break;case"h":return e?"tunnin":"tunti";case"hh":r=e?"tunnin":"tuntia";break;case"d":return e?"päivän":"päivä";case"dd":r=e?"päivän":"päivää";break;case"M":return e?"kuukauden":"kuukausi";case"MM":r=e?"kuukauden":"kuukautta";break;case"y":return e?"vuoden":"vuosi";case"yy":r=e?"vuoden":"vuotta"}return r=n(t,e)+" "+r}function n(t,i){return 10>t?i?e[t]:a[t]:t}var a="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),e=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",a[7],a[8],a[9]];return t.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")}})}),function(t){t(_e)}(function(t){return t.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return"uns segundos"===t?"nuns segundos":"en "+t},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY LT",LLLL:"dddd, D [ב]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t+" שנים"}}})}),function(t){t(_e)}(function(t){var i={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]})},meridiem:function(t){return 4>t?"रात":10>t?"सुबह":17>t?"दोपहर":20>t?"शाम":"रात"},week:{dow:0,doy:6}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a=t+" ";switch(n){case"m":return i?"jedna minuta":"jedne minute";case"mm":return a+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return i?"jedan sat":"jednog sata";case"hh":return a+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return a+=1===t?"dan":"dana";case"MM":return a+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return a+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("hr",{months:"sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:i,mm:i,h:i,hh:i,d:"dan",dd:i,M:"mjesec",MM:i,y:"godinu",yy:i},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){function i(t,i,n,a){var e=t;switch(n){case"s":return a||i?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(a||i?" perc":" perce");case"mm":return e+(a||i?" perc":" perce");case"h":return"egy"+(a||i?" óra":" órája");case"hh":return e+(a||i?" óra":" órája");case"d":return"egy"+(a||i?" nap":" napja");case"dd":return e+(a||i?" nap":" napja");case"M":return"egy"+(a||i?" hónap":" hónapja");case"MM":return e+(a||i?" hónap":" hónapja");case"y":return"egy"+(a||i?" év":" éve");case"yy":return e+(a||i?" év":" éve")}return""}function n(t){return(t?"":"[múlt] ")+"["+a[this.day()]+"] LT[-kor]"}var a="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");return t.lang("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(t,i,n){return 12>t?n===!0?"de":"DE":n===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){function i(t,i){var n={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},a=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(i)?"accusative":"nominative";return n[a][t.month()]}function n(t){var i="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return i[t.month()]}function a(t){var i="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return i[t.day()]}return t.lang("hy-am",{months:i,monthsShort:n,weekdays:a,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., LT",LLLL:"dddd, D MMMM YYYY թ., LT"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiem:function(t){return 4>t?"գիշերվա":12>t?"առավոտվա":17>t?"ցերեկվա":"երեկոյան"},ordinal:function(t,i){switch(i){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"siang":19>t?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){function i(t){return t%100===11?!0:t%10===1?!1:!0}function n(t,n,a,e){var r=t+" ";switch(a){case"s":return n||e?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return n?"mínúta":"mínútu";case"mm":return i(t)?r+(n||e?"mínútur":"mínútum"):n?r+"mínúta":r+"mínútu";case"hh":return i(t)?r+(n||e?"klukkustundir":"klukkustundum"):r+"klukkustund";case"d":return n?"dagur":e?"dag":"degi";case"dd":return i(t)?n?r+"dagar":r+(e?"daga":"dögum"):n?r+"dagur":r+(e?"dag":"degi");case"M":return n?"mánuður":e?"mánuð":"mánuði";case"MM":return i(t)?n?r+"mánuðir":r+(e?"mánuði":"mánuðum"):n?r+"mánuður":r+(e?"mánuð":"mánuði");case"y":return n||e?"ár":"ári";case"yy":return i(t)?r+(n||e?"ár":"árum"):r+(n||e?"ár":"ári")}}return t.lang("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",
LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(t){return 12>t?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}),function(t){t(_e)}(function(t){function i(t,i){var n={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},a=/D[oD] *MMMM?/.test(i)?"accusative":"nominative";return n[a][t.month()]}function n(t,i){var n={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},a=/(წინა|შემდეგ)/.test(i)?"accusative":"nominative";return n[a][t.day()]}return t.lang("ka",{months:i,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:n,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return/(წამი|წუთი|საათი|წელი)/.test(t)?t.replace(/ი$/,"ში"):t+"ში"},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinal:function(t){return 0===t?t:1===t?t+"-ლი":20>t||100>=t&&t%20===0||t%100===0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 mm분",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},meridiem:function(t){return 12>t?"오전":"오후"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinal:"%d일",meridiemParse:/(오전|오후)/,isPM:function(t){return"오후"===t}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[t+" Deeg",t+" Deeg"],M:["ee Mount","engem Mount"],MM:[t+" Méint",t+" Méint"],y:["ee Joer","engem Joer"],yy:[t+" Joer",t+" Joer"]};return i?a[n][0]:a[n][1]}function n(t){var i=t.substr(0,t.indexOf(" "));return s(i)?"a "+t:"an "+t}function a(t){var i=t.substr(0,t.indexOf(" "));return s(i)?"viru "+t:"virun "+t}function e(){var t=this.format("d");return r(t)?"[Leschte] dddd [um] LT":"[Leschten] dddd [um] LT"}function r(t){switch(t=parseInt(t,10)){case 0:case 1:case 3:case 5:case 6:return!0;default:return!1}}function s(t){if(t=parseInt(t,10),isNaN(t))return!1;if(0>t)return!0;if(10>t)return t>=4&&7>=t?!0:!1;if(100>t){var i=t%10,n=t/10;return s(0===i?n:i)}if(1e4>t){for(;t>=10;)t/=10;return s(t)}return t/=1e3,s(t)}return t.lang("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:e},relativeTime:{future:n,past:a,s:"e puer Sekonnen",m:i,mm:"%d Minutten",h:i,hh:"%d Stonnen",d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n,a){return i?"kelios sekundės":a?"kelių sekundžių":"kelias sekundes"}function n(t,i,n,a){return i?e(n)[0]:a?e(n)[1]:e(n)[2]}function a(t){return t%10===0||t>10&&20>t}function e(t){return o[t].split("_")}function r(t,i,r,s){var o=t+" ";return 1===t?o+n(t,i,r[0],s):i?o+(a(t)?e(r)[1]:e(r)[0]):s?o+e(r)[1]:o+(a(t)?e(r)[1]:e(r)[2])}function s(t,i){var n=-1===i.indexOf("dddd HH:mm"),a=l[t.day()];return n?a:a.substring(0,a.length-2)+"į"}var o={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},l="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_");return t.lang("lt",{months:"sausio_vasario_kovo_balandžio_gegužės_biržėlio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:s,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:i,m:n,mm:r,h:n,hh:r,d:n,dd:r,M:n,MM:r,y:n,yy:r},ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a=t.split("_");return n?i%10===1&&11!==i?a[2]:a[3]:i%10===1&&11!==i?a[0]:a[1]}function n(t,n,e){return t+" "+i(a[e],t,n)}var a={mm:"minūti_minūtes_minūte_minūtes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mēnesi_mēnešus_mēnesis_mēneši",yy:"gadu_gadus_gads_gadi"};return t.lang("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vēlāk",past:"%s agrāk",s:"dažas sekundes",m:"minūti",mm:n,h:"stundu",hh:n,d:"dienu",dd:n,M:"mēnesi",MM:n,y:"gadu",yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinal:function(t){var i=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&20>n?t+"-ти":1===i?t+"-ви":2===i?t+"-ри":7===i||8===i?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiem:function(t){return 4>t?"രാത്രി":12>t?"രാവിലെ":17>t?"ഉച്ച കഴിഞ്ഞ്":20>t?"വൈകുന്നേരം":"രാത്രി"}})}),function(t){t(_e)}(function(t){var i={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]})},meridiem:function(t){return 4>t?"रात्री":10>t?"सकाळी":17>t?"दुपारी":20>t?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}),function(t){t(_e)}(function(t){return t.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"tengahari":19>t?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){var i={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return i[t]})},meridiem:function(t){return 3>t?"राती":10>t?"बिहान":15>t?"दिउँसो":18>t?"बेलुका":20>t?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return t.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,a){return/-MMM-/.test(a)?n[t.month()]:i[t.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t){return 5>t%10&&t%10>1&&~~(t/10)%10!==1}function n(t,n,a){var e=t+" ";switch(a){case"m":return n?"minuta":"minutę";case"mm":return e+(i(t)?"minuty":"minut");case"h":return n?"godzina":"godzinę";case"hh":return e+(i(t)?"godziny":"godzin");case"MM":return e+(i(t)?"miesiące":"miesięcy");case"yy":return e+(i(t)?"lata":"lat")}}var a="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),e="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");return t.lang("pl",{months:function(t,i){return/D MMMM/.test(i)?e[t.month()]:a[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:n,y:"rok",yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [às] LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº"})}),function(t){t(_e)}(function(t){return t.lang("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(t%100>=20||t>=100&&t%100===0)&&(e=" de "),t+e+a[n]}return t.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:i,h:"o oră",hh:i,d:"o zi",dd:i,M:"o lună",MM:i,y:"un an",yy:i},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){function i(t,i){var n=t.split("_");return i%10===1&&i%100!==11?n[0]:i%10>=2&&4>=i%10&&(10>i%100||i%100>=20)?n[1]:n[2]}function n(t,n,a){var e={mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===a?n?"минута":"минуту":t+" "+i(e[a],+t)}function a(t,i){var n={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},a=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(i)?"accusative":"nominative";return n[a][t.month()]}function e(t,i){var n={nominative:"янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},a=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(i)?"accusative":"nominative";return n[a][t.month()]}function r(t,i){var n={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},a=/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(i)?"accusative":"nominative";return n[a][t.day()]}return t.lang("ru",{months:a,monthsShort:e,weekdays:r,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t){return 4>t?"ночи":12>t?"утра":17>t?"дня":"вечера"},ordinal:function(t,i){switch(i){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){function i(t){return t>1&&5>t}function n(t,n,a,e){var r=t+" ";switch(a){case"s":return n||e?"pár sekúnd":"pár sekundami";case"m":return n?"minúta":e?"minútu":"minútou";case"mm":return n||e?r+(i(t)?"minúty":"minút"):r+"minútami";break;case"h":return n?"hodina":e?"hodinu":"hodinou";case"hh":return n||e?r+(i(t)?"hodiny":"hodín"):r+"hodinami";break;case"d":return n||e?"deň":"dňom";case"dd":return n||e?r+(i(t)?"dni":"dní"):r+"dňami";break;case"M":return n||e?"mesiac":"mesiacom";case"MM":return n||e?r+(i(t)?"mesiace":"mesiacov"):r+"mesiacmi";break;case"y":return n||e?"rok":"rokom";case"yy":return n||e?r+(i(t)?"roky":"rokov"):r+"rokmi"}}var a="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),e="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");return t.lang("sk",{months:a,monthsShort:e,monthsParse:function(t,i){var n,a=[];for(n=0;12>n;n++)a[n]=new RegExp("^"+t[n]+"$|^"+i[n]+"$","i");return a}(a,e),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){function i(t,i,n){var a=t+" ";switch(n){case"m":return i?"ena minuta":"eno minuto";case"mm":return a+=1===t?"minuta":2===t?"minuti":3===t||4===t?"minute":"minut";case"h":return i?"ena ura":"eno uro";case"hh":return a+=1===t?"ura":2===t?"uri":3===t||4===t?"ure":"ur";case"dd":return a+=1===t?"dan":"dni";case"MM":return a+=1===t?"mesec":2===t?"meseca":3===t||4===t?"mesece":"mesecev";case"yy":return a+=1===t?"leto":2===t?"leti":3===t||4===t?"leta":"let"}}return t.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejšnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"%s nazaj",s:"nekaj sekund",m:i,mm:i,h:i,hh:i,d:"en dan",dd:i,M:"en mesec",MM:i,y:"eno leto",yy:i},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiem:function(t){return 12>t?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){var i={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,i){return 1===t?i[0]:t>=2&&4>=t?i[1]:i[2]},translate:function(t,n,a){var e=i.words[a];return 1===a.length?n?e[0]:e[1]:t+" "+i.correctGrammaticalCase(t,e)}};return t.lang("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var t=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:i.translate,mm:i.translate,h:i.translate,hh:i.translate,d:"дан",dd:i.translate,M:"месец",MM:i.translate,y:"годину",yy:i.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){var i={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,i){return 1===t?i[0]:t>=2&&4>=t?i[1]:i[2]},translate:function(t,n,a){var e=i.words[a];return 1===a.length?n?e[0]:e[1]:t+" "+i.correctGrammaticalCase(t,e)}};return t.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],
weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var t=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:i.translate,mm:i.translate,h:i.translate,hh:i.translate,d:"dan",dd:i.translate,M:"mesec",MM:i.translate,y:"godinu",yy:i.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinal:function(t){var i=t%10,n=1===~~(t%100/10)?"e":1===i?"a":2===i?"a":3===i?"e":"e";return t+n},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinal:function(t){return t+"வது"},meridiem:function(t){return t>=6&&10>=t?" காலை":t>=10&&14>=t?" நண்பகல்":t>=14&&18>=t?" எற்பாடு":t>=18&&20>=t?" மாலை":t>=20&&24>=t?" இரவு":t>=0&&6>=t?" வைகறை":void 0},week:{dow:0,doy:6}})}),function(t){t(_e)}(function(t){return t.lang("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiem:function(t){return 12>t?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}),function(t){t(_e)}(function(t){return t.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){var i={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};return t.lang("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(t){if(0===t)return t+"'ıncı";var n=t%10,a=t%100-n,e=t>=100?100:null;return t+(i[n]||i[a]||i[e])},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){return t.lang("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}),function(t){t(_e)}(function(t){function i(t,i){var n=t.split("_");return i%10===1&&i%100!==11?n[0]:i%10>=2&&4>=i%10&&(10>i%100||i%100>=20)?n[1]:n[2]}function n(t,n,a){var e={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===a?n?"хвилина":"хвилину":"h"===a?n?"година":"годину":t+" "+i(e[a],+t)}function a(t,i){var n={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},a=/D[oD]? *MMMM?/.test(i)?"accusative":"nominative";return n[a][t.month()]}function e(t,i){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},a=/(\[[ВвУу]\]) ?dddd/.test(i)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(i)?"genitive":"nominative";return n[a][t.day()]}function r(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}return t.lang("uk",{months:a,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:e,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., LT",LLLL:"dddd, D MMMM YYYY р., LT"},calendar:{sameDay:r("[Сьогодні "),nextDay:r("[Завтра "),lastDay:r("[Вчора "),nextWeek:r("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[Минулої] dddd [").call(this);case 1:case 2:case 4:return r("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiem:function(t){return 4>t?"ночі":12>t?"ранку":17>t?"дня":"вечора"},ordinal:function(t,i){switch(i){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}),function(t){t(_e)}(function(t){return t.lang("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(t,i){var n=100*t+i;return 600>n?"凌晨":900>n?"早上":1130>n?"上午":1230>n?"中午":1800>n?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var i,n;return i=t().startOf("week"),n=this.unix()-i.unix()>=604800?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var i,n;return i=t().startOf("week"),n=this.unix()<i.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinal:function(t,i){switch(i){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}),function(t){t(_e)}(function(t){return t.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(t,i){var n=100*t+i;return 900>n?"早上":1130>n?"上午":1230>n?"中午":1800>n?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(t,i){switch(i){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}),_e.lang("en"),ze?module.exports=_e:"function"==typeof define&&define.amd?(define("moment",function(t,i,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(me.moment=fe),_e}),ce(!0)):ce()}).call(this);var UI=typeof BF_UI=="undefined"?typeof MobileUI=="undefined"?new Object:MobileUI:BF_UI;UI.dateFormat={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."],monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],system_dateformats:["X","ddd MMM DD HH:mm:ss ZZ YYYY","YYYY-MM-DD HH:mm:ss ZZ"],supported_langs:["en","fr","pt","es","de","ja"],momentjs_settings:{en:{longDateFormat:{"tweet date format":"h:mm A - DD MMM YY","UTC date format":"MMMM D, YYYY, [at] H:mm:ss UTC","breaking date format":"h:mm a, MMMM D","post date format":"MMMM D, YYYY, [at] h:mm a","update date format":"MMMM D, YYYY, [at] h:mm a"},meridiem:function(t,i,n){var a={am:"a.m.",AM:"AM",pm:"p.m.",PM:"PM"};if(t>=12){return n?a.pm:a.PM}else{return n?a.am:a.AM}}},non_english:{longDateFormat:{},meridiem:function(t,i,n){var a={am:"a.m.",AM:"AM",pm:"p.m.",PM:"PM"};if(t>=12){return n?a.pm:a.PM}else{return n?a.am:a.AM}}}},init:function(){setTimeout(function(){if(typeof BF_STATIC!=="undefined"&&typeof BF_STATIC.timequeue!=="undefined")bfjs.universal_each(BF_STATIC.timequeue,function(t){t()})},0)},get_formatted_date:function(t,i){if(BF_STATIC.bf_test_mode)localStorage.setItem((bfjs.isMobile()?"mobile_":"")+(i?i+"_":"")+"posted_date",t);i=i=="correction"?"update":i;moment.lang("en");t=moment(t,UI.dateFormat.system_dateformats).format();if(moment(t).isValid()){var n=UI.dateFormat.momentjs_settings["en"];n.months=i=="UTC"?UI.dateFormat.monthsLong:UI.dateFormat.months;moment.lang("en",n);if(local.non_english&&UI.dateFormat.supported_langs.indexOf(BF_STATIC.language)>-1){n=UI.dateFormat.momentjs_settings.non_english;n.longDateFormat={"tweet date format":local.t("tweet date format"),"UTC date format":local.t("UTC date format"),"breaking date format":local.t("breaking date format"),"post date format":local.t("post date format"),"update date format":local.t("update date format")};moment.lang(BF_STATIC.language,n)}var a=UI.dateFormat.supported_langs.indexOf(BF_STATIC.language)>-1?BF_STATIC.language:"en";a=["tweet","UTC"].indexOf(i)==-1?a:"en";moment.lang(a);var r=moment.langData();var s="UTC"==i?moment(t).utc():moment(t);var o=r.longDateFormat((i||"post")+" date format");return s.format(o)}return t}};if(typeof bfjs=="object")bfjs.onPageLoad(UI.dateFormat.init);var BF_EmbedVideo=function(){this.agent=navigator.userAgent.toLowerCase();this.is_mobile=this.agent.match(/iphone|ipod|android|ipad/);this.index=1;this._init=function(){universal_dom.assign_handler({bucket:"video",handler:embed_video.load_video})};this.init=function(){if(typeof yt_player!="undefined"||BF_STATIC.tt_page=="Videos"||BF_STATIC.tt_page=="About")embed_video._init();else{new PeriodicalExecuter(function(t){if(typeof yt_player!="undefined"){t.stop();console.info("player is here");embed_video._init()}},.5)}};this.load_video=function(e,t){var i,n,a=new bf2_terminal_Video,r,s;try{i=JSON.parse(e.getAttribute("rel:bf_bucket_data"))}catch(o){console.error(o)}n=t!=true&&i.video?i.video:i.progload_video;r=n.url;if(e.getAttribute("id")==="video_buzz_element_"+n.id){s=e}else{s=$("video_buzz_element_"+n.id)}a.detect_type(n.url);if(a.type&&a.type!=null){r=a.src_link}var l=BF_initSwfObject(r,{width:n.width,height:n.height});if(l.flowplayer){if(size=="sidebar"||size=="tiny")l.hide_controls=true;if(size=="big")l.height=360;else if(size=="sidebar")l.height=189;else if(size=="small")l.height=183;else if(size=="tiny")l.height=141;if(is_mobile())l.use_html5=true;l.write(s)}else if(is_mobile()&&a.type=="buzzfeed"){if(is_mobile())l.use_html5=true;l.write(s)}else if(!is_mobile()&&l.installedVer&&l.installedVer.major<8&&a.type!="youtube"||is_mobile()&&a.type!="youtube"){$(s)[bfjs.add_class]("video-embed-noflash");bfjs.setStyle(s,{height:"340px"})}else{if(a.type=="youtube"){var u="yt_"+n.id;var d=a.start_time?"&start="+a.start_time:"";var c=typeof window.autoplay!=="undefined"?1:0;var _=BF_STATIC.tt_page=="Videos"||BF_STATIC.tt_page=="Video"?1:0;var f=n.meta_overlay?JSON.parse(n.meta_overlay):"";var h='<div style="position:relative;" id="video_wrapper_'+n.id+'"><iframe id="'+u+'" class="ytvideo" type="text/html" allowscriptaccess="always" allowfullscreen="true" width="'+n.width+'" height="'+n.height+'" data-length="'+n.length+'" data-published="'+n.published+'" src="https://www.youtube.com/embed/'+embed_video.get_youtube_video_id(n.url)+"?version=3&hl=en&fs=1&enablejsapi=1&origin="+window.location.protocol+"//"+window.location.host+"&autoplay="+c+"&showinfo="+_+"&wmode=opaque"+d+'" frameborder="0"></iframe></div>';$(s).innerHTML=h;if(typeof yt_player!="undefined")yt_player.init(u,f)}else if(a.type=="vimeo"){var p=new Template('<iframe id="vimeoplayer_'+n.id+'" data-length="'+n.length+'" data-published="'+n.published+'" class="vimeo_video" src="#{src}" width="#{width}" height="#{height}" frameborder="0"></iframe>');var m=p.evaluate({src:r+"?color=ee3322&api=1&player_id=vimeoplayer_"+n.id,width:n.width,height:n.height});$(s).innerHTML=m}else{try{l.addParam("wmode","opaque")}catch(e){}l.write(s)}}};this.get_youtube_video_id=function(t){if(!t){return null}var i=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var n=t.match(i);if(n&&n[7].length){return n[7]}else{return null}}};var embed_video=new BF_EmbedVideo;if(window.BuzzLoader){BuzzLoader.register(embed_video.init,1)}(function(){var t={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};var i={pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true};Event.simulate=function(n,a){var r=Object.extend(Object.clone(i),arguments[2]||{});var s,o=null;n=$(n);for(var l in t){if(t[l].test(a)){o=l;break}}if(!o)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");if(document.createEvent){s=document.createEvent(o);if(o=="HTMLEvents"){s.initEvent(a,r.bubbles,r.cancelable)}else{s.initMouseEvent(a,r.bubbles,r.cancelable,document.defaultView,r.button,r.pointerX,r.pointerY,r.pointerX,r.pointerY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,n)}n.dispatchEvent(s)}else{r.clientX=r.pointerX;r.clientY=r.pointerY;s=Object.extend(document.createEventObject(),r);n.fireEvent("on"+a,s)}return n};Element.addMethods({simulate:Event.simulate})})();var ProgressiveLoader=function(){this.elementList=[];this.default_scroll_dfference=2e3;this.defaultPreElement="div.bf_dom.c";this.defaultPreElementHeight=0;this.styleList=[];this.init=function(){progressiveLoader.loadStyleList();universal_dom.get_bucket_elements("progLoaderElement").each(function(e){var t=JSON.parse(e.getAttribute("rel:bf_bucket_data"));var i=$s(t.reachElementMark);if(i.innerHTML==""){i=$s(progressiveLoader.defaultPreElement);progressiveLoader.defaultPreElementHeight=i.offsetHeight}var n=t.scrollDifference?t.scrollDifference:progressiveLoader.default_scroll_dfference,a=t.name;if(progressiveLoader.elementList[a]==undefined){progressiveLoader.elementList[a]={name:a,element:i,difference:n,loaded:false,timerId:0,preElement_OffsetTop:0};progressiveLoader.load(progressiveLoader.elementList[a])}})};this.load=function(t){if(t.timerId==0&&!t.loaded)t.timerId=setInterval(function(){t.preElement_OffsetTop=progressiveLoader.defaultPreElementHeight>0?progressiveLoader.defaultPreElementHeight:t.element.offsetTop;if(Math.abs(window.pageYOffset-t.preElement_OffsetTop)<=t.difference){t.loaded=true;EventManager.fire("progressive-load-callback:"+t.name,t.timerId,t.name)}},250)};this.page_onLoad=function(){progressiveLoader.elementList=[];progressiveLoader.init()};this.loadStyleList=function(t){progressiveLoader.styleList.each(function(t){if(document.createStyleSheet){document.createStyleSheet(t)}else{var i=new Element("link",{type:"text/css",href:t,rel:"stylesheet"});$s("head").appendChild(i)}})}};var progressiveLoader=new ProgressiveLoader;bfjs.onPageLoad(progressiveLoader.page_onLoad);var BF_LanguagePrompt=function(){var t="",i="",n="",a="",a="",r="",s="",o="",l="",u="",d="",c="",_=null,f="";toolsBar="";closeDefault="";closeSwitch="";closeCheck="";appPromoBar="";this.init=function(){language_prompt.isMobile=bfjs.isMobile();t=getElement("#default-language-prompt");closeDefault=getElement("#default-language-prompt .close_prompt");i=getElement("#switch-to-english-prompt");closeSwitch=getElement("#switch-to-english-prompt .close_prompt");a=getElement("#accept_button");s=getElement(".cookie-notice")[bfjs.read_attr]("data-country");n=getElement("#check-it-out-prompt");closeCheck=getElement("#check-it-out-prompt .close_prompt");appPromoBar=getElement(".app_promo--top-container");toolsBar=getElement(".ptools-buzzpage");o=bfjs.read_cookie("country")||"us";u=BF_STATIC.language;c=BF_STATIC.tt_page.match("Buzz")?true:false;l=BF_STATIC.tt_page.match("Buzz")?language_prompt.getStoredItem("hide_language_prompt"):store.get("hide_cookie_prompt");f=language_prompt.isMobile?getElement(".page-head"):getElement("#page-header");d=language_prompt.setPrompt();if(d&&bfjs.getFirstEl(d)){language_prompt.bindEvents();language_prompt.showPrompt()}};this.bindEvents=function(){if(a){a[bfjs.observer]("click",function(e){if(t){language_prompt.setCountryCookie(s)}else{language_prompt.switchToUS(this.href)}})}r[bfjs.observer]("click",function(e){language_prompt.disablePrompt()})};this.prepareRedirectURL=function(t){t=t.replace("&country=uk","");t=t.replace("&country=en-uk","");return t};this.switchToUS=function(t){var i=language_prompt.prepareRedirectURL(t);window.location.href=i};this.setCountryCookie=function(t){if(language_prompt.isMobile){createCookie("country",t);language_prompt.hidePrompt()}else{BFW_Util.setCookie({name:"country",value:t,clem_valid:true,callback:language_prompt.hidePrompt()})}};this.disablePrompt=function(){if(n&&bfjs.getFirstEl(n)){language_prompt.setStoredItem("hide_language_prompt",1,7)}else{store.set("hide_cookie_prompt",1)}language_prompt.hidePrompt()};this.hidePrompt=function(){if(language_prompt.isMobile){d.hide();$(".cookie-notice").hide()}else{BF_Effect.FadeOut($$(".cookie-notice")[0])}_.remove();_=null};this.showPrompt=function(){var t=country_config.get_live_countries();if((!l||l==0)&&(s&&t.hasOwnProperty(s)&&t[s]===1||!s)&&(t.hasOwnProperty(o)&&t[o]===1)){bfjs.toggleClass(d,"hidden",0);bfjs.toggleClass(getElement(".cookie-notice"),"hidden",0);if(!_){_=document.createElement("div");_.id="bodyfixer";_.style.width="100%";if(f){if(language_prompt.isMobile){if(appPromoBar.hasClass("app_promo--hidden")){_.style.height="40px";f.before(_)}}else{_.style.height="45px";f.insert({before:_});$("back_to_top").style.top="65px"}}}if(toolsBar&&bfjs.getFirstEl(toolsBar)){d.up().style.top="40px"}if(document.querySelector(".internal-navigation")){var i=parseInt(d.up().style.top)||0;d.up().style.top=i+50+"px"}}};this.setPrompt=function(){var a=country_config.get_live_countries();var _=bfjs.getUrlVars()["browser_language_debug"]?bfjs.getUrlVars()["browser_language_debug"]:BF_STATIC.browser_language_settings?BF_STATIC.browser_language_settings.substr(0,2):bfjs.read_cookie("bf-browser-language")?bfjs.read_cookie("bf-browser-language"):"en,";countryMatchesCookie=s==o||!o&&s=="us"?true:false,user_country=bfjs.getUrlVars()["country_track_debug"]||BF_STATIC.country_track||bfjs.read_cookie("bf-geo-country")||"us",hide_spain_promo=1,hide_japan_promo=1,show_promo_debug=bfjs.getUrlVars()["show_promo_debug"]?bfjs.getUrlVars()["show_promo_debug"]:"";user_country=user_country.toLowerCase();if(user_country.match(/jp/)&&hide_japan_promo==1&&!(show_promo_debug==user_country))return"";if(user_country.match(/es/)&&hide_spain_promo==1&&!(show_promo_debug==user_country))return"";if(country_config.country_synonyms[user_country])user_country=country_config.country_synonyms[user_country];if(c&&!l){var f="";var h=-1;if(user_country.match(/jp|es/)){h=1;for(var p in country_config.get_country_categories(user_country)){if(p==BF_STATIC.bf_category){h=0;break}}}if(u=="en"||h==1){if((user_country=="mx"||_=="en"&&user_country.match(/uk|au|in|ca/))&&user_country!=o){f=user_country}else if(_!="en"){f=_}}var m=country_config.get_cookie_bar_vertical_bpage_message(f);if(f&&typeof a!="undefined"&&a.hasOwnProperty(f)&&a[f]&&m&&typeof m!="undefined"){d=n;r=closeCheck;if(language_prompt.isMobile){language_prompt.fillMobilePrompt(f)}else{language_prompt.fillPrompt(f)}}}else if(!c){if(countryMatchesCookie){if(s!="us"&&!(s.match(/jp/)&&bfjs.isMobile())){d=i;r=closeSwitch}}else{d=t;r=closeDefault}}else if(!countryMatchesCookie){d=t;r=closeDefault}return d};this.fillMobilePrompt=function(t){var i=country_config.get_cookie_bar_vertical_bpage_message(t);d.children("a").attr("href",country_config.get_homepage_link(t)+"&s=mobile");d.children("a").attr("data-label",i["name"]);r[bfjs.write_attr]("data-label",i["name"]);d.children("a").html("<span>"+decodeURIComponent(escape(i["text_mobile"]))+'</span><span class="cookie-notice__box--btn">'+decodeURIComponent(escape(i["button_mobile"]))+"</span>")};this.fillPrompt=function(t){var i=country_config.get_cookie_bar_vertical_bpage_message(t);d.select("a")[0][bfjs.write_attr]("href",country_config.get_homepage_link(t));d.select("a")[0][bfjs.write_attr]("rel:gt_label",i["name"]);r[bfjs.write_attr]("rel:gt_label",i["name"]);$$("#have-you-seen-message svg use")[0][bfjs.write_attr]("xlink:href","#"+t);$$("#have-you-seen-message span")[0].update(decodeURIComponent(escape(i["text_desktop"]))+"<button type='button' class='cookie-notice__box--btn' rel:gt_act='native-homepage' rel:gt_label='"+i["name"]+"'>"+decodeURIComponent(escape(i["button_desktop"]))+"</button>")};this.setStoredItem=function(t,i,n){if(!n)n=0;var a={value:i,timestamp:(new Date).getTime()+n*24*60*60*1e3};store.set(t,a)};this.getStoredItem=function(t){var i=store.get(t);if(!i)return false;var n=(new Date).getTime();if(n>i.timestamp){store.remove(t);return false}else{return i.value}};this.onPageLoad=function(){if(bfjs.isMobile()){$(document).ready(language_prompt.init)}else{BuzzLoader.register(language_prompt.init,6)}}};function getElement(t){if(bfjs.isMobile()){return $(t)}else{return $$(t)[0]}}var language_prompt=new BF_LanguagePrompt;language_prompt.onPageLoad();(function(t){if(t.getGlobal("bf_spinner"))return;var $=t.getGlobal("$");var i=function(t,i){if(!i)var i={};var n=false;var a=null;var r;var s;var o;var l="visibility: hidden; opacity: 0; -moz-opacity: 0; filter: alpha(opacity=0); display: none;";var u="visibility: visible; opacity: 1.0; -moz-opacity: 1.0; filter: alpha(opacity=100);";var d="visibility: visible; opacity: 0.89; -moz-opacity: 0.89; filter: alpha(opacity=89);";var c="top";var _={};var f;var h=false;if(t){u=u+" position: absolute;"}else{u=u+" position: fixed;"}try{o=document.body;if(i.insert_direction){c=i.insert_direction}if(i.disable_parents_background){h=i.disable_parents_background}if(i.additional_classes){f=i.additional_classes}if(!i.spinner_not_center){u+="top: 45%; left: 50%;"}if(t&&$(t)){o=$(t)}r=new Element("div",{"class":"loader "+f,id:"spinner_"+Math.floor(Math.random()*100)});s=new Element("div",{"class":"loader-overlay ",id:"suplist_disable_overlay_"+Math.floor(Math.random()*100)});_[c]=r;o.insert(_);if(!i.overlay_hide){_[c]=s;o.insert(_)}r.setAttribute("style",l);s.setAttribute("style",l)}catch(p){console.error(p)}return{active:function(){return a},start:function(){if(a)return true;else a=true;r.setAttribute("style",u);s.setAttribute("style",d);if(h){o.setAttribute("style","background:transparent;")}},loaderEl:r,overlayEl:s,stop:function(){try{r.setAttribute("style",l);s.setAttribute("style",l);if(h){o.setAttribute("style","")}a=false}catch(t){}},started:function(){return a}}};t.setGlobal("bf_spinner",i)})(bfjs);BF_BadgeHeader=function(){this.create_header_badge=function(t,i,n,a){var r=document.location.host.match("dev")?"/bf2/":"/";var s=document.createElement("li");var o=document.createElement("a");s.className="badge-list__item";s.appendChild(o);o.href=r+t.link_to+(a?"?country="+a:"");o.className="badge__link";o.style.height="50px";o.style.width="50px";o.style.backgroundImage="url("+BF_STATIC.image_root+t.path+")";if(typeof i.impression_pixel!=="undefined"&&i.impression_pixel.trim().length>0){trackPixel(i.impression_pixel)}if(typeof i.click_tracker!=="undefined"&&i.click_tracker.trim().length>0){var l=i.click_tracker;o.addEventListener("click",function(){var t=(new Date).getTime();var i=l.replace("[timestamp]",t);o.href=i})}var u=$$(".badge-list")[0];if(u){if(n==0){u.insert({top:s})}else{var d=$$(".badge-list__item--fail")[0];if(d){d.replace(s)}}}else{var c=$$(".reactions ul")[0];if(c){if(n==0){c.insert({top:s})}else{var _=$$(".fail")[0];if(_){_.replace(s)}}}}};this.get_cookie=function(t){var i=t+"=";var n=document.cookie.split(";");for(var a in n){if(!isNaN(a)&&n[a].trim().indexOf(i)==0){return n[a].substr(i.length+1)}}return""};this.header_badges=function(){var t=$$(".badge-list")[0];if(t&&t.innerHTML.trim()==""){
return}try{if(typeof buzzDetails!=undefined){if(typeof buzzDetails.nsfw!=undefined){if(buzzDetails.nsfw==1){return}}}}catch(e){}var i=this.get_cookie("country")||"us";var n=[];var a=0;var r=window.badge_header_flights;for(var s in r){if(r[s].header_flight){var o=r[s].header_flight.evalJSON();for(var l in o.flights){if(o.flights[l].start_date&&o.flights[l].end_date){var u=bfjs.getUrlVars()["test_date"]?Date.parse(decodeURIComponent(bfjs.getUrlVars()["test_date"])):Date.parse(Date());var d=Date.parse(o.flights[l].start_date);var c=Date.parse(o.flights[l].end_date);if(isNaN(u)||isNaN(d)||isNaN(c)){u=bfjs.getUrlVars()["test_date"]?Date.parse(decodeURIComponent(bfjs.getUrlVars()["test_date"].replace(/-/g,"/"))):Date.parse(Date());d=Date.parse(o.flights[l].start_date.replace(/-/g,"/"));c=Date.parse(o.flights[l].end_date.replace(/-/g,"/"))}if(d<=u&&c>=u){var _=true;if(typeof r[s]["show_in_"+i]!=="undefined"&&r[s]["show_in_"+i]=="0"){_=false}if(_){if(typeof window.BF_DFP_SITE!=="undefined"&&window.BF_DFP_SITE=="bfd.partnerpost"){_=false;if(typeof window.BF_STATIC.username!=="undefined"){if(typeof o.partners!=="undefined"&&o.partners.trim().length>0){if(o.partners.search(window.BF_STATIC.username)>=0&&window.BF_STATIC.username!=""||typeof window.bf_username!=="undefined"&&o.partners.search(window.bf_username)>=0){_=true}}}}}if(_){r[s].price=r[s].price.trim().replace(",","").replace(" ","");if(r[s].price==""){r[s].price="0"}n.push({badge:r[s],flight:{impression_pixel:o.impression_pixel,click_tracker:o.click_tracker}})}}}}}}if(n.length>0){var f=undefined;var h=undefined;for(var l in n){if(typeof n[l].badge!="undefined"){if(f==undefined){f=n[l]}else{if(Number(f.badge.price)<Number(n[l].badge.price)){h=f;f=n[l]}else{if(h==undefined){h=n[l]}else if(Number(h.badge.price)<Number(n[l].badge.price)){h=n[l]}}}}}if(typeof t!=="undefined"&&t.select(".badge-list__item--bestof2015").length){this.create_header_badge(f.badge,f.flight,1,i);return}else{this.create_header_badge(f.badge,f.flight,0,i)}if(typeof h!=="undefined"){this.create_header_badge(h.badge,h.flight,1,i)}}}};Load_More_SubBuzzes=function(){var t,i;this.init=function(){t=document.getElementsByClassName("js-load-more-subbuzzes")[0];i=document.getElementById("buzz_sub_buzz");if(bfjs.isMobile()){loader=document.getElementsByClassName("load-more-spinner")[0]}if(typeof t!=="undefined"){t.onclick=function(e){load_subbuzzes.load_more(e)}}};this.load_more=function(e){var i=BF_STATIC.web_root+"/_load_more_subbuzzes/"+BF_STATIC.campaignid+"?z=123";if(bfjs.isMobile()){bfjs.removeClass(loader,"hidden");$.ajax({url:i,traditional:true}).done(load_subbuzzes.on_success)}else{bfjs.addClass(t,"loading");(new BF_Request).request(i,{method:"get",onSuccess:load_subbuzzes.on_success})}};this.on_success=function(n){try{if(bfjs.isMobile()){bfjs.addClass(loader,"hidden")}else{bfjs.removeClass(t,"loading")}var a=bfjs.isMobile()?n:n.responseText;i.insertAdjacentHTML("beforeend",a);if(typeof bf_photoslider!=="undefined"){bf_photoslider.init()}if(!bfjs.isMobile()){var r=a.match(/<script.*<\/script>/g);if(r){function s(t,i){return r.indexOf(t)===i}var o=r.filter(s);for(var l=0;l<o.length;l++){var u=o[l].match(/src\s*=\s*["']?([^'"]*)["']?/);if(u.length!=2)console.error("Can't match url in ",o[l]);else{BF_UTIL.createScript({url:u[1]})}}}setTimeout(function(){UI.dateFormat.init();universal_dom.update("buzz_sub_buzz");bf_prog_load.init();if(FB)FB.XFBML.parse()},200)}else{$(document).on("click",".buzz_superlist_item_grid_row, .buzz_superlist_item_image, .buzz_superlist_item_video, .buzz_superlist_item_photoslider, .longform_pullquote",MobileUI.SubBuzz.subBuzzHandler)}bfjs.addClass(t,"hidden");bfjs.addClass(t,"disabled")}catch(d){console.dir(d)}}};load_subbuzzes=new Load_More_SubBuzzes;bfjs.onPageLoad(load_subbuzzes.init);(function(){if(typeof BF_STATIC!=="undefined"&&BF_STATIC.tt_page==="Home"){var t=bfjs.read_cookie("bf2-b");var i=bfjs.read_cookie("default_session_key");if(t||i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){bfjs.write_cookie("bf2-b","",-1);bfjs.write_cookie("default_session_key","",-1)}};n.open("GET","/buzzfeed/_www_login");n.send()}}})();var BFHomePageTest=function(){this.init=function(){if(BF_STATIC.country=="us"&&BF_STATIC.hp_type=="index"){bfjs.createScript({url:BF_STATIC.static_root+"/js/mustache/compiled/lede.homepage.js"});bfjs.createScript({url:BF_STATIC.static_root+"/js/mustache/compiled/ad-default.js"});if(BF_STATIC.hp_beta||BF_STATIC.hp_alpha){if(localStorage.getItem("add-abtest--homepage-simple-homepage")){localStorage.removeItem("add-abtest--homepage-simple-homepage")}if(localStorage.getItem("add-abtest--homepage-soba")){localStorage.removeItem("add-abtest--homepage-soba")}if(BF_STATIC.hp_beta){if(!localStorage.getItem("add-abtest--homepage-darwin")||localStorage.getItem("add-abtest--homepage-darwin")&&localStorage.getItem("add-abtest--homepage-darwin")!="homepage-darwin--test"){localStorage.setItem("add-abtest--homepage-darwin","homepage-darwin--test")}gtrack.postEvents.push("homepage-darwin:homepage-darwin--test")}if(BF_STATIC.hp_alpha){if(!localStorage.getItem("add-abtest--homepage-darwin")||localStorage.getItem("add-abtest--homepage-darwin")&&localStorage.getItem("add-abtest--homepage-darwin")!="homepage-darwin--control"){localStorage.setItem("add-abtest--homepage-darwin","homepage-darwin--control")}gtrack.postEvents.push("homepage-darwin:homepage-darwin--control")}}if(BF_STATIC.hp_four||BF_STATIC.hp_five){if(localStorage.getItem("add-abtest--homepage-simple-homepage")){localStorage.removeItem("add-abtest--homepage-simple-homepage")}if(localStorage.getItem("add-abtest--homepage-darwin")){localStorage.removeItem("add-abtest--homepage-darwin")}if(BF_STATIC.hp_four){if(!localStorage.getItem("add-abtest--homepage-soba")||localStorage.getItem("add-abtest--homepage-soba")&&localStorage.getItem("add-abtest--homepage-soba")!="homepage-soba--test"){localStorage.setItem("add-abtest--homepage-soba","homepage-soba--test")}gtrack.postEvents.push("homepage-soba:homepage-soba--test")}if(BF_STATIC.hp_five){if(!localStorage.getItem("add-abtest--homepage-soba")||localStorage.getItem("add-abtest--homepage-soba")&&localStorage.getItem("add-abtest--homepage-soba")!="homepage-soba--control"){localStorage.setItem("add-abtest--homepage-soba","homepage-soba--control")}gtrack.postEvents.push("homepage-soba:homepage-soba--control")}}}};if(BF_STATIC.country!="us"&&BF_STATIC.hp_type=="index"){if(localStorage.getItem("add-abtest--homepage-darwin")){localStorage.removeItem("add-abtest--homepage-darwin")}}};var homepagetest=new BFHomePageTest;BuzzLoader.register(homepagetest.init,1);window.addEventListener("load",function(){"use strict";var t=BF_STATIC&&BF_STATIC.Features&&BF_STATIC.Features["save_webp_images"];if(!t){return}function i(t){for(var i=t.length-1;i>=0;i--){var n=t[i];n.addEventListener("mousedown",function(){if(this.getAttribute("class").indexOf("js-alternate-image-preview")>-1)return true;var t=this.getAttribute("src");t=t+(t.indexOf("?")>0?"&no-auto":"?no-auto");this.setAttribute("srcset",t)})}}function n(){var t=document.body.querySelector(".buzz");if(t){var n=t.querySelectorAll(".buzz-superlist-item img");i(n)}}function a(){var t=document.body.querySelector(".js-qp-superlist");if(t){var n=t.querySelectorAll(".suplist_image img");i(n)}}n();EventManager.observe("superlist:load:done",a)});(function(e){function t(){try{return a in e&&e[a]}catch(t){return!1}}var i={},n=e.document,a="localStorage",r="script",s;i.disabled=!1,i.set=function(e,t){},i.get=function(e){},i.remove=function(e){},i.clear=function(){},i.transact=function(e,t,n){var a=i.get(e);n==null&&(n=t,t=null),typeof a=="undefined"&&(a=t||{}),n(a),i.set(e,a)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(e){return JSON.stringify(e)},i.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(t())s=e[a],i.set=function(e,t){return t===undefined?i.remove(e):(s.setItem(e,i.serialize(t)),t)},i.get=function(e){return i.deserialize(s.getItem(e))},i.remove=function(e){s.removeItem(e)},i.clear=function(){s.clear()},i.getAll=function(){var e={};return i.forEach(function(t,i){e[t]=i}),e},i.forEach=function(e){for(var t=0;t<s.length;t++){var n=s.key(t);e(n,i.get(n))}};else if(n.documentElement.addBehavior){var o,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),l.close(),o=l.w.frames[0].document,s=o.createElement("div")}catch(u){s=n.createElement("div"),o=n.body}function d(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(s),o.appendChild(s),s.addBehavior("#default#userData"),s.load(a);var n=e.apply(i,t);return o.removeChild(s),n}}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function _(e){return e.replace(/^d/,"___$&").replace(c,"___")}i.set=d(function(e,t,n){return t=_(t),n===undefined?i.remove(t):(e.setAttribute(t,i.serialize(n)),e.save(a),n)}),i.get=d(function(e,t){return t=_(t),i.deserialize(e.getAttribute(t))}),i.remove=d(function(e,t){t=_(t),e.removeAttribute(t),e.save(a)}),i.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var i=0,n;n=t[i];i++)e.removeAttribute(n.name);e.save(a)}),i.getAll=function(e){var t={};return i.forEach(function(e,i){t[e]=i}),t},i.forEach=d(function(e,t){var n=e.XMLDocument.documentElement.attributes;for(var a=0,r;r=n[a];++a)t(r.name,i.deserialize(e.getAttribute(r.name)))})}try{var f="__storejs__";i.set(f,f),i.get(f)!=f&&(i.disabled=!0),i.remove(f)}catch(u){i.disabled=!0}i.enabled=!i.disabled,typeof module!="undefined"&&module.exports&&this.module!==module?module.exports=i:typeof define=="function"&&define.amd?define(i,[]):e.store=i})(Function("return this")());var Base64={_Rixits:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/",fromNumber:function(t){if(isNaN(Number(t))||t===null||t===Number.POSITIVE_INFINITY)throw"The input is not valid";if(t<0)throw"Can't represent negative numbers now";var i;var n=Math.floor(t);var a="";while(true){i=n%64;a=this._Rixits.charAt(i)+a;n=Math.floor(n/64);if(n==0)break}return a},toNumber:function(t){var i=0;t=t.split("");for(e in t){i=i*64+this._Rixits.indexOf(t[e])}return i},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){if(typeof t=="undefined"||t==null){t=""}var i="";var n,a,r,s,o,l,u;var d=0;t=Base64._utf8_encode(t);while(d<t.length){n=t.charCodeAt(d++);a=t.charCodeAt(d++);r=t.charCodeAt(d++);s=n>>2;o=(n&3)<<4|a>>4;l=(a&15)<<2|r>>6;u=r&63;if(isNaN(a)){l=u=64}else if(isNaN(r)){u=64}i=i+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(l)+this._keyStr.charAt(u)}return i},decode:function(t){if(typeof t=="undefined"||t==null){return""}var i="";var n,a,r;var s,o,l,u;var d=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(d<t.length){s=this._keyStr.indexOf(t.charAt(d++));o=this._keyStr.indexOf(t.charAt(d++));l=this._keyStr.indexOf(t.charAt(d++));u=this._keyStr.indexOf(t.charAt(d++));n=s<<2|o>>4;a=(o&15)<<4|l>>2;r=(l&3)<<6|u;i=i+String.fromCharCode(n);if(l!=64){i=i+String.fromCharCode(a)}if(u!=64){i=i+String.fromCharCode(r)}}i=Base64._utf8_decode(i);return i},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");var i="";for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);if(a<128){i+=String.fromCharCode(a)}else if(a>127&&a<2048){i+=String.fromCharCode(a>>6|192);i+=String.fromCharCode(a&63|128)}else{i+=String.fromCharCode(a>>12|224);i+=String.fromCharCode(a>>6&63|128);i+=String.fromCharCode(a&63|128)}}return i},_utf8_decode:function(t){var i="";var n=0;var a=c1=c2=0;while(n<t.length){a=t.charCodeAt(n);if(a<128){i+=String.fromCharCode(a);n++}else if(a>191&&a<224){c2=t.charCodeAt(n+1);i+=String.fromCharCode((a&31)<<6|c2&63);n+=2}else{c2=t.charCodeAt(n+1);c3=t.charCodeAt(n+2);i+=String.fromCharCode((a&15)<<12|(c2&63)<<6|c3&63);n+=3}}return i}};var CryptoJS=CryptoJS||function(t,i){var n={},a=n.lib={},r=function(){},s=a.Base={extend:function(t){r.prototype=this;var i=new r;t&&i.mixIn(t);i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)});i.init.prototype=i;i.$super=this;return i},create:function(){var t=this.extend();t.init.apply(t,arguments);return t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=s.extend({init:function(t,n){t=this.words=t||[];this.sigBytes=n!=i?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var i=this.words,n=t.words,a=this.sigBytes;t=t.sigBytes;this.clamp();if(a%4)for(var e=0;e<t;e++)i[a+e>>>2]|=(n[e>>>2]>>>24-8*(e%4)&255)<<24-8*((a+e)%4);else if(65535<n.length)for(e=0;e<t;e+=4)i[a+e>>>2]=n[e>>>2];else i.push.apply(i,n);this.sigBytes+=t;return this},clamp:function(){var i=this.words,n=this.sigBytes;i[n>>>2]&=4294967295<<32-8*(n%4);i.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);t.words=this.words.slice(0);return t},random:function(i){for(var n=[],a=0;a<i;a+=4)n.push(4294967296*t.random()|0);return new o.init(n,i)}}),l=n.enc={},u=l.Hex={stringify:function(t){var i=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++){var e=i[a>>>2]>>>24-8*(a%4)&255;n.push((e>>>4).toString(16));n.push((e&15).toString(16))}return n.join("")},parse:function(t){for(var i=t.length,n=[],a=0;a<i;a+=2)n[a>>>3]|=parseInt(t.substr(a,2),16)<<24-4*(a%8);return new o.init(n,i/2)}},d=l.Latin1={stringify:function(t){var i=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++)n.push(String.fromCharCode(i[a>>>2]>>>24-8*(a%4)&255));return n.join("")},parse:function(t){for(var i=t.length,n=[],a=0;a<i;a++)n[a>>>2]|=(t.charCodeAt(a)&255)<<24-8*(a%4);return new o.init(n,i)}},c=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(i){throw Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},_=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init;this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t));this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function(i){var n=this._data,a=n.words,r=n.sigBytes,e=this.blockSize,s=r/(4*e),s=i?t.ceil(s):t.max((s|0)-this._minBufferSize,0);i=s*e;r=t.min(4*i,r);if(i){for(var l=0;l<i;l+=e)this._doProcessBlock(a,l);l=a.splice(0,i);n.sigBytes-=r}return new o.init(l,r)},clone:function(){var t=s.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0});a.Hasher=_.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function(){_.reset.call(this);this._doReset()},update:function(t){this._append(t);this._process();return this},finalize:function(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function(t){return function(i,n){return new t.init(n).finalize(i)}},_createHmacHelper:function(t){return function(i,n){return new f.HMAC.init(t,n).finalize(i)}}});var f=n.algo={};return n}(Math);(function(){var t=CryptoJS,i=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp();t=[];for(var a=0;a<i;a+=3)for(var r=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,s=0;4>s&&a+.75*s<i;s++)t.push(n.charAt(r>>>6*(3-s)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,n=this._map,a=n.charAt(64);a&&(a=t.indexOf(a),-1!=a&&(e=a));for(var a=[],r=0,s=0;s<e;s++)if(s%4){var o=n.indexOf(t.charAt(s-1))<<2*(s%4),l=n.indexOf(t.charAt(s))>>>6-2*(s%4);a[r>>>2]|=(o|l)<<24-8*(r%4);r++}return i.create(a,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();var Hashids=function(){"use strict";function t(t,i,n){var a,r,s,o,l,u,d;this.version="1.0.1";this.minAlphabetLength=16;this.sepDiv=3.5;this.guardDiv=12;this.errorAlphabetLength="error: alphabet must contain at least X unique characters";this.errorAlphabetSpace="error: alphabet cannot contain spaces";this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";this.seps="cfhistuCFHISTU";this.minHashLength=parseInt(i,10)>0?i:0;this.salt=typeof t==="string"?t:"";if(typeof n==="string"){this.alphabet=n}for(a="",r=0,o=this.alphabet.length;r!==o;r++){if(a.indexOf(this.alphabet[r])===-1){a+=this.alphabet[r]}}this.alphabet=a;if(this.alphabet.length<this.minAlphabetLength){throw this.errorAlphabetLength.replace("X",this.minAlphabetLength)}if(this.alphabet.search(" ")!==-1){throw this.errorAlphabetSpace}for(r=0,o=this.seps.length;r!==o;r++){s=this.alphabet.indexOf(this.seps[r]);if(s===-1){this.seps=this.seps.substr(0,r)+" "+this.seps.substr(r+1)}else{this.alphabet=this.alphabet.substr(0,s)+" "+this.alphabet.substr(s+1)}}this.alphabet=this.alphabet.replace(/ /g,"");this.seps=this.seps.replace(/ /g,"");this.seps=this.consistentShuffle(this.seps,this.salt);if(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv){l=Math.ceil(this.alphabet.length/this.sepDiv);if(l===1){l++}if(l>this.seps.length){u=l-this.seps.length;this.seps+=this.alphabet.substr(0,u);this.alphabet=this.alphabet.substr(u)}else{this.seps=this.seps.substr(0,l)}}this.alphabet=this.consistentShuffle(this.alphabet,this.salt);d=Math.ceil(this.alphabet.length/this.guardDiv);if(this.alphabet.length<3){this.guards=this.seps.substr(0,d);this.seps=this.seps.substr(d)}else{this.guards=this.alphabet.substr(0,d);this.alphabet=this.alphabet.substr(d)}}t.prototype.encode=function(){var t="",i,n,a=Array.prototype.slice.call(arguments);if(!a.length){return t}if(a[0]instanceof Array){a=a[0]}for(i=0,n=a.length;i!==n;i++){if(typeof a[i]!=="number"||a[i]%1!==0||a[i]<0){return t}}return this._encode(a)};t.prototype.decode=function(t){var i=[];if(!t.length||typeof t!=="string"){return i}return this._decode(t,this.alphabet)};t.prototype.encodeHex=function(t){var i,n,a;t=t.toString();if(!/^[0-9a-fA-F]+$/.test(t)){return""}a=t.match(/[\w\W]{1,12}/g);for(i=0,n=a.length;i!==n;i++){a[i]=parseInt("1"+a[i],16)}return this.encode.apply(this,a)};t.prototype.decodeHex=function(t){var i=[],n,a,r=this.decode(t);for(n=0,a=r.length;n!==a;n++){i+=r[n].toString(16).substr(1)}return i};t.prototype._encode=function(t){var i,n,a,r,s,o,l,u,d,c,_,f,h=this.alphabet,p=t.length,m=0;for(a=0,r=t.length;a!==r;a++){m+=t[a]%(a+100)}n=i=h[m%h.length];for(a=0,r=t.length;a!==r;a++){s=t[a];o=n+this.salt+h;h=this.consistentShuffle(h,o.substr(0,h.length));l=this.hash(s,h);i+=l;if(a+1<p){s%=l.charCodeAt(0)+a;u=s%this.seps.length;i+=this.seps[u]}}if(i.length<this.minHashLength){d=(m+i[0].charCodeAt(0))%this.guards.length;c=this.guards[d];i=c+i;if(i.length<this.minHashLength){d=(m+i[2].charCodeAt(0))%this.guards.length;c=this.guards[d];i+=c}}_=parseInt(h.length/2,10);while(i.length<this.minHashLength){h=this.consistentShuffle(h,h);i=h.substr(_)+i+h.substr(0,_);f=i.length-this.minHashLength;if(f>0){i=i.substr(f/2,this.minHashLength)}}return i};t.prototype._decode=function(t,i){var n=[],a=0,r,s,o,l,u=new RegExp("["+this.guards+"]","g"),d=t.replace(u," "),c=d.split(" ");if(c.length===3||c.length===2){a=1}d=c[a];if(typeof d[0]!=="undefined"){r=d[0];d=d.substr(1);u=new RegExp("["+this.seps+"]","g");d=d.replace(u," ");c=d.split(" ");for(a=0,s=c.length;a!==s;a++){o=c[a];l=r+this.salt+i;i=this.consistentShuffle(i,l.substr(0,i.length));n.push(this.unhash(o,i))}if(this._encode(n)!==t){n=[]}}return n};t.prototype.consistentShuffle=function(t,i){var n,a,r,s,o,l;if(!i.length){return t}for(s=t.length-1,o=0,l=0;s>0;s--,o++){o%=i.length;l+=n=i[o].charCodeAt(0);a=(n+o+l)%s;r=t[a];t=t.substr(0,a)+t[s]+t.substr(a+1);t=t.substr(0,s)+r+t.substr(s+1)}return t};t.prototype.hash=function(t,i){var n="",a=i.length;do{n=i[t%a]+n;t=parseInt(t/a,10)}while(t);return n};t.prototype.unhash=function(t,i){var n=0,a,r;for(r=0;r<t.length;r++){a=i.indexOf(t[r]);n+=a*Math.pow(i.length,t.length-r-1)}return n};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return t},[])}return t}();if(typeof module!="undefined"){module.exports=Hashids}var pound={};pound.VERSION="2.0";pound.ENV="dev";pound.VERTICAL="default";pound.BUZZID=undefined;pound.BUZZ_NAME=undefined;pound.TIMESTAMP=138e7;if(typeof pound.LOGGED_IN_ONLY=="undefined"){pound.LOGGED_IN_ONLY=true}if(typeof pound.VERIFY_IDENTITIES=="undefined"){pound.VERIFY_IDENTITIES=false}if(typeof Date!="undefined"){pound.TIMESTAMP=(new Date).getTime()}else if(typeof Math!="undefined"&&typeof Math.random!="undefined"){pound.TIMESTAMP=Math.random()}else{pound.TIMESTAMP=0}if(typeof pound.SOCIAL_COUNTS=="undefined"){pound.SOCIAL_COUNTS={facebook_shares:0,twitter_shares:0}}var bf_static_was_undefined=false;if(typeof BF_STATIC!="undefined"){pound.ENV=BF_STATIC["bf_env"]?BF_STATIC["bf_env"]:"dev";pound.VERTICAL=BF_STATIC["vertical"]||"default";pound.BUZZID=BF_STATIC["campaignid"];pound.BUZZ_NAME=BF_STATIC["buzz_name"];pound.TIMESTAMP=BF_STATIC["generated_timestamp"]}else{bf_static_was_undefined=true}if(typeof pound.VERIFY_IDENTITIES=="undefined"){pound.VERIFY_IDENTITIES=false}pound.FONTS=["Andale Mono","Arial Black","Arnoldboecklin","Avantgarde","Blippo","Book Antiqua","Brushstroke","Charcoal","Comic Sans","Comic Sans MS","Coronetscript","Courier","Courier New","Fixed","Florence","Gadget","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Narrow","Impact","Lucida Console","Lucida Grande","Lucida Sans Unicode","Lucidatypewriter","MS Sans Serif","MS Serif","Monaco","New Century Schoolbook","New York","Oldtown","Palatino","Palatino Linotype","Parkavenue","Symbol","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Webdings","Zapf Chancery","cursive","fantasy","monospace","sans-serif","serif"];pound.ACTIVEX_PLUGINS=["AOL Toolbar","Activeweave","Advanced searchbar","Affine","AhnLab SiteGuard","Alexa Toolbar","Altavista toolbar","Bing Bar","Browser toolbar","Data Toolbar","DeeperWeb","DoNotTrackMe","Earthlink toolbar","FeedsPlus","Fiddler","GeoSurf","Ghostery","Gofor-It Internet Explorer","Google Toolbar","IE Ad-dons","IE Developer toolbar","IE7pro","IMacros","LastPass Password Manager","LuckyTabSave","MSFeedIcon","Microsoft Internet Mail and News","Microsoft NetMeeting","Mitto Password Manager","Mouse Gestures for Internet Explorer","Offer Assistant","Outlook Express","Quero","SafeWallet Password Manager","Simple Adblock","Speckle","SpoofStick","Stickis","Streaming Internet Radio Toolbar","Surf Canyon","Turn Off the Lights","Vivisimo MiniBar","WOT Services","WebNotes","Windows Address Book","Windows Live Toolbar","Windows Messaging","Xmarks Sync","Xupiter","Yahoo! Axis","Yahoo! Toolbar","Yolink","Zemanta"];pound.lib={};if(typeof Base64=="undefined"){var Base64={encode:function(t){return encodeURIComponent(t)},decode:function(t){return decodeURIComponent(t)}}}pound.lib.decodeCascadeString=function(t){if(!t||t=="undefined"){return{}}var i=Base64.decode(unescape(t));if(i&&i.length>0&&i[0]=="?"){i=i.substr(1,i.length)}var n=pound.lib.parseQueryString(i,"/");for(var a in n){if(n.hasOwnProperty(a)){var r=(typeof n[a]).toLowerCase();if(r!="string"&&r!="object"){return{}}if(a!="t"&&a!="o"&&a!="v"&&a!="b"&&a!="u"){return{}}}}return n};pound.lib.encodeCascadeObject=function(t){return Base64.encode(pound.lib.createQueryString(t,"/"))};pound.lib.setCookie=function(t,i,n,a){var r=[];var s=[[t,escape(i)],["expires",n],["path",a]];var o,l;for(o=0;o<s.length;o++){l=s[o];r.push(l.join("="))}var u=r.join("; ")+";";document.cookie=u;return u};pound.lib.getCookie=function(t){var i=document.cookie;var n=i.indexOf(t+"=");var a=i.indexOf(";",n);if(a<0){a=i.length}var r=i.slice(n,a).split("=");return r[1]};pound.lib.expireCookie=function(t){var i=new Date;i.setDate(i.getDate()-60);pound.lib.setCookie(t,"",i.toUTCString(),"/");pound.lib.setCookie(t,"",i.toUTCString(),"")};pound.lib.createQueryString=function(t,i){var n=[];var a;if(typeof i=="undefined"){i="&"}if(t===null||t===undefined){return""}if(t==={}){return"?"}for(var r in t){if(t.hasOwnProperty(r)){a=t[r];if(a===null){a=""}if(a===undefined){n.push(r)}else{n.push(r+"="+a)}}}return"?"+n.join(i)};pound.lib.parseQueryString=function(t,i){if(t==""||t==undefined||t==null){return{}}if(typeof i=="undefined"){i="&"}var n=t.split(i);var a;var r={};for(var s=0;s<n.length;s++){a=n[s].split("=");if(a[1]==""){a[1]=null}r[a[0]]=a[1]}return r};pound.lib.getSubBuzzIdFromChildNode=function(t){if(!t){throw new Error("No node was passed to getSubBuzzIdFromChildNode")}var i=/buzz_superlist_item/;while(t.parentNode){if(t.hasAttribute("class")&&t.getAttribute("class").match(i)){break}t=t.parentNode}return t.getAttribute("id").replace("superlist_","")};pound.lib.bind=function(t,i,n){if(window.addEventListener){t.addEventListener(i,n,false)}else if(window.attachEvent){t.attachEvent("on"+i,n)}else{t["on"+i]=n}};pound.lib.unbind=function(t,i,n){if(!t){return}if(t.removeEventListener){t.removeEventListener(i,n,false)}else if(t.detachEvent){t.detachEvent("on"+i,n)}else{t["on"+i]=function(e){return false}}};pound.lib.endEvent=function(t){if(t){t.cancelBubble=true;t.returnValue=false;if(t.stopPropagation){t.stopPropagation()}if(typeof t.preventDefault!="undefined"){t.preventDefault()}}return false};pound.lib.walk=function(t,i,n){if(!t){return t}var a;for(var r=0;r<t.childNodes.length;r++){if(i(t.childNodes.item(r))){a=t.childNodes.item(r)}else if(n(t.childNodes.item(r))){a=pound.lib.walk(t.childNodes.item(r),i,n)}else{continue}if(a){return a}}};pound.lib.isInView=function(t,i,n){if(!t.offsetParent){return false}var a=document.documentElement,r=window.innerHeight||a.clientHeight,s=window.innerWidth||a.clientWidth,n=n?n:"both";var o=t.getBoundingClientRect(),l=o.top>=0&&o.top<r,u=o.top<=0,d=o.bottom>0&&o.bottom<=r,c=o.bottom>=r,_=o.left>=0&&o.left<s,f=o.left<=0,h=o.right>0&&o.right<=s,p=o.right>=s;var m=i?l||d||u&&c:l&&d;var g=i?_||h||f&&p:_&&h;if(n==="both")return m&&g;else if(n==="vertical")return m;else if(n==="horizontal")return g};pound.lib.isMobileReady=function(){if(BF_STATIC.os==="android"&&BF_STATIC.app_version<49e3||BF_STATIC.os==="ios"&&BF_STATIC.app_version<48e3)return false;return true};pound.lib.getReferrer=function(t){if(t==undefined){t=document.referrer}if(typeof t==="string"&&t.indexOf("/h1/")>-1){var i=pound.lib.getCookie("HT_PRIMARY");if(i!==undefined){var n=decodeURIComponent(i).split(",");if(n.length>4){return n[4]==="not_available"?"":n[4]}}}return t};pound.lib.optOut=function(){var t=new Date;t.setDate(t.getDate()+1e4);pound.lib.setCookie("pound_opt_out","1",t.toUTCString(),"/");pound.lib.OPTED_OUT=true;alert(local.t("You have successfully opted out."))};pound.lib.optedOut=function(){if(typeof pound.lib.OPTED_OUT=="undefined"){if(pound.lib.getCookie("pound_opt_out")){pound.lib.OPTED_OUT=true}else{pound.lib.OPTED_OUT=false}}return pound.lib.OPTED_OUT};if(typeof pound=="undefined"){pound={}}if(typeof pound.sharing=="undefined"){pound.sharing={}}pound.sharing.hooks=new function(){var t=this;t.hooks=[];this.register=function(i){if(typeof i!="undefined"){t.hooks.push(i)}};this.execute=function(i){for(var n=0;n<t.hooks.length;n++){t.hooks[n](i)}}};if(typeof pound=="undefined"){var pound={}}if(typeof pound.identity=="undefined"){pound.identity={}}pound.identity.Unique=function(t){var i=this;var n=new RegExp("[0-9A-Za-z]+");function a(){var n=NaN;if(t){i.id=t}else{for(var a=0;a<10;a++){if(isNaN(n)){i.id=parseInt(Math.random()*1e10)}else{break}}}}this.hashed=function(){var t=parseInt(Math.random()*25+10).toString(36)+parseInt(Math.random()*25+10).toString(36);var n=new Hashids(t);var a=n.encode(i.id);return"."+t+a};this.munge=function(){var t=parseInt(i.id);if(isNaN(i.id)){return null}return t};this.unhashed=function(t){if(!t)throw new Error("Id is a required parameter");if(t.indexOf(".")!==0){var i=n.exec(t);if(i!==null&&i[0]==t){return parseInt(t,36)}else return false}var a=t.substr(1,2);var r=t.substr(3);var s=parseInt(r,36);var o=new Hashids(a);return o.decode(r)[0]};this.toString=function(){return i.id.toString()};this.validate=function(t){var n=t?t:i.id;if(!n||isNaN(n)||n>25e9){return false}return true};this.getCategory=function(){if(!i.id||isNaN(i.id))return undefined;else if(i.id<=1e10)return"user";else if(i.id<=15e9)return"promotion";else if(i.id<=25e9)return"mobile_app_user";else return undefined};a()};if(typeof module!="undefined"){module.exports=pound.identity.Unique}if(typeof pound=="undefined"){var pound={}}if(typeof pound.identity=="undefined"){pound.identity={}}function default_buzzfeed_id(){return undefined}pound.identity.Buzzfeed=function(){if(typeof BF_User!="undefined"){var t=(new BF_User).getUserInfo().userid;return t}return default_buzzfeed_id()};pound.Validate=new function(){var t=this;var i=new RegExp("[0-9A-Za-z]+");this.stringId=function(t){if(!t||!t.length||isNaN(parseInt(t,36))){return false}var n=i.exec(t);if(n!=null&&n[0]==t){return true}return false};this.cookie=function(){var i=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));return t.idObject(i)};this.idObject=function(i){var n={};if(i["u"]&&!t.stringId(i["u"])){n["u"]=i["u"]}if(i["o"]&&!t.stringId(i["o"])){n["o"]=i["o"]}if(i["t"]&&!t.stringId(i["t"])){n["t"]=i["t"]}return n};this.shareObject=function(i){var n={};if(i["u"]&&!t.stringId(i["u"])){n["u"]=i["u"]}if(i["c"]&&isNaN(i["c"])){n["c"]=i["c"]}if(i["p"]&&isNaN(i["p"])){n["p"]=i["p"]}return n};this.munge=function(i){while(i&&i.length&&i.length>0){if(!t.stringId(i)){i=i.substr(0,i.length-1)}else{return i}}return false}};pound.UrlRewriting=function(){var t=this;this.init=function(){t.utm_param="utm_term";t.protocol=window.location.protocol;t.domain=window.location.hostname;t.path=t._removePoundSegment(window.location.pathname);t.baseHashString=window.location.hash.substr(1,window.location.hash.length);t.baseQueryString=window.location.search.substr(1,window.location.search.length);var i=pound.lib.parseQueryString(t.baseQueryString);if(typeof i["qa"]!="undefined"&&i["qa"]=="1"){t.domain=t.domain.replace("dev.","www.");t.pathname=t.pathname.replace("/bf2","")}};this.hasPoundSegment=function(){var t=window.location.pathname.match(/\/p\/\.[a-zA-Z0-9]+/);if(t&&t.length){return true}return false};this.getHistoryState=function(){var i=t._removeQueryString(t.baseQueryString);i=!!i?"?"+i:"";if(t.path.match(/^\/bf2/)){return"/bf2"+t.getPoundSegment()+"/"+t.path.replace(/^\/bf2\//,"")+i}return t.getPoundSegment()+t.path+i};this.getPoundSegment=function(){return"/p/"+window.bf_visit.unique.hashed()};this._removePoundSegment=function(t){return t.replace(/\/p\/\.[a-zA-Z0-9]+/,"")};this.getBaseUrl=function(){var i=!!window.location.port?":"+window.location.port:"";return t.protocol+"//"+t.domain+i+t.path};this._getCascadeString=function(){var t=window.bf_visit.sharer.hashed();var i=window.bf_visit.unique.hashed();if(typeof t!="undefined"){return pound.lib.encodeCascadeObject({t:t.hashed(),o:i.hashed()})}return pound.lib.encodeCascadeObject({o:i.hashed()})};this._addHash=function(i){if(pound.lib.optedOut()){return i}var n=window.bf_visit.unique.hashed();return t._removeHash(i)+(n!==undefined?"#"+n:"")};this._removeHash=function(t){if(t.indexOf("#")>-1){return t.substr(0,t.indexOf("#"))}return t};this._removeQueryString=function(i){var n=t._getHash(i);if(i.indexOf("?")>-1){return i.substr(0,i.indexOf("?"))+(n!==undefined?"#"+n:"")}return i};this._getHash=function(t){if(t.indexOf("#")>-1){return t.substr(t.indexOf("#")+1,t.length)}return undefined};this._getQueryString=function(i){i=t._removeHash(i);if(i.indexOf("?")>-1){return i.substr(i.indexOf("?")+1,i.length)}return undefined};this._addQueryString=function(i,n,a){if(pound.lib.optedOut()){return i}var r=t._getHash(i);var s=pound.lib.parseQueryString(t._getQueryString(i));var o;i=t._removeHash(i);i=t._removeQueryString(i);s[t.utm_param]=window.bf_visit.unique.hashed();if(typeof n!="undefined"){for(var l=0;l<n.length;l++){o=n[l];s[o]=escape(window.bf_visit.unique.hashed())}}if(typeof a!="undefined"){for(l=0;l<a.length;l++){
o=a[l][0];pval=a[l][1];s[o]=pval}}var u=i+pound.lib.createQueryString(s)+(r?"#"+r:"");return u};this.poundSegmentOnly=function(){if(t.path.match(/^\/bf2/)){return t.protocol+"//"+t.domain+"/bf2"+t.getPoundSegment()+"/"+t.path.replace(/^\/bf2\//,"")}return t.protocol+"//"+t.domain+t.getPoundSegment()+t.path};this.hashOnly=function(){if(t.hasPoundSegment()){return escape(t.poundSegmentOnly())}return escape(t._addHash(t.getBaseUrl()))};this.queryStringOnly=function(i,n){var a;if(t.hasPoundSegment()){return escape(t.poundSegmentOnly())}if(typeof i!="undefined"){a=t._addQueryString(t.getBaseUrl(),i,n)}else{a=t._addQueryString(t.getBaseUrl())}return escape(a)};this.hashAndQueryString=function(i,n){if(t.hasPoundSegment()){return escape(t.poundSegmentOnly())}if(typeof i!="undefined"){return escape(t._addHash(t._addQueryString(t.getBaseUrl(),i,n)))}return escape(t._addHash(t._addQueryString(t.getBaseUrl())))};this.stripped=function(){return t.getBaseUrl()};this.unescaped={hashOnly:function(){return unescape(t.hashOnly())},queryStringOnly:function(i,n){return unescape(t.queryStringOnly(i,n))},hashAndQueryString:function(i,n){return unescape(t.hashAndQueryString(i,n))}};this.setBaseUrl=function(i){t.baseUrl=t._removePoundSegment(t._removeQueryString(t._removeHash(i)));t.baseQueryString=i.substr(i.indexOf("?"),i.length);t.baseHashString=i.substr(i.indexOf("#"),i.length)}};pound.urls=new pound.UrlRewriting;pound.poundEvents=function(){var t={processEvent:i,messageNo:0};function i(i,a){if(!BF_STATIC.pound_enabled||BF_STATIC.mobile_app&&!pound.lib.isMobileReady()||typeof pixiedust==="undefined"&&!window.BZFD){return false}var r=n(i);t["messageNo"]++;if(window.BZFD&&window.bfa){window.bfa("track/pound/"+r.type,{data:r})}else{if(!pixiedust.push(r)){delete r["r"];pixiedust.push(r)}if(a){pixiedust.flush()}}return true}function n(t){if(!t["type"]){throw new Error("Pound Events: missing type from message_data")}t["v"]=pound.VERSION;t["r"]=pound.lib.getReferrer();return t}return t}();(function(){var t=window.pound;t.widgets=function(){var i="js-pound-widget";var n={process:c,addWidget:o,addImpression:l,updateWidgetIds:u,impression_count:0,widgets:{}};var a=null;t.lib.bind(window,"scroll",s);t.lib.bind(window,"resize",s);var r=t.poundEvents;function s(){if(a){clearTimeout(a)}a=setTimeout(d,500)}function o(t){if(n.widgets[t.widget_id]===undefined){n.widgets[t.widget_id]=[t]}else{n.widgets[t.widget_id].push(t)}}function l(t,i,a){n["impression_count"]++;r.processEvent({widget_id:t,buzz_id:i,buzz_type:a["buzz_type"],type:"buzz_recommendation_impression",variation:a["variation"],fallback:a["fallback"]})}function u(t){var i=[];for(var a=0;a<t.length;a++){var r=t[a];var s=n.widgets[r];if(s===undefined){continue}var l=s.length;for(var u=0;u<l;u++){var d=s.shift();d.widget_id=d.container.getAttribute("pound_position");o(d)}if(n.widgets[r].length===0){delete n.widgets[r]}}}function d(){for(var t in n.widgets){var i=n.widgets[t];for(var a=0;a<i.length;a++){i[a]._recalculateInView(true)}}}function c(){Array.prototype.forEach.call(document.getElementsByClassName(i),t.Widget)}return n}();window.bf_widgets=t.widgets;var i=/(^|\s)preview-(\d+)(\s|$)/;t.Widget=function(n){if(!(this instanceof t.Widget)){return new t.Widget(n)}this.init=function(){this.container=n;this.widget_id=n.getAttribute("pound_position");this.buzzes={};this.impressions=[];this.in_view=this._recalculateInView(true);bf_widgets.addWidget(this);if(BF_STATIC["pound_widget_tracking_enabled"]){var i=this;t.lib.bind(n,"click",function(t){i._trackClickEvent(t)})}this.evt=t.poundEvents};this._recalculateInView=function(i,n){this.in_view=t.lib.isInView(this.container,i,n);if(this.in_view){this.locate_buzzes();for(var a in this.buzzes){if(this.buzzes[a].sent){continue}this.buzzes[a].seen=t.lib.isInView(this.buzzes[a].element,true);if(BF_STATIC["pound_widget_tracking_enabled"]&&this.buzzes[a].seen){this.buzzes[a].sent=true;bf_widgets.addImpression(this.widget_id,a,this.buzzes[a])}}}return this.in_view};this.isPartnerBuzz=function(t){var n=i.exec(t.className);return n?n[2]:null};this.locate_buzzes=function(){var t=this.container.getElementsByTagName("*");for(var i=0,n=t.length;i<n;i++){var a=t[i].getAttribute("rel:buzz_id");if(a&&!(a in this.buzzes)){this.buzzes[a]={buzz_id:a,element:t[i].parentNode,buzz_type:"editorial"};continue}var r=this.isPartnerBuzz(t[i]);if(r&&!(r in this.buzzes)){this.buzzes[r]={buzz_id:r,element:t[i],buzz_type:"ad"}}}return this.buzzes};this._trackClick=function(t,i){var n=null;var a=null;var r=null;while(t!==this.container){if(t.tagName&&t.tagName.toUpperCase()==="A"){a=t}if(t.getAttribute("rel:buzz_id")){n=t.getAttribute("rel:buzz_id");r="editorial";break}var s=this.isPartnerBuzz(t);if(s){n=s;r="ad";break}t=t.parentNode}if(n===null||a===null){return}this.evt.processEvent({widget_id:this.widget_id,buzz_id:n,type:"buzz_recommendation_click",buzz_type:r},true);window.open(a.getAttribute("href"),"_self")};this._trackClickEvent=function(t){var i=t.target||t.srcElement;this._trackClick(i,t)};this.init()}})();if(typeof pound=="undefined"){var pound={}}pound.Share=function(t,i){var n=this;this.user=t;this.buzzid=i;this.ab=typeof abtest!=="undefined"&&typeof ab_config!=="undefined"?abtest.abTestsToString():"";this.toObject=function(){return{u:encodeURIComponent(n.user.hashed()),s:encodeURIComponent(n.buzzid)}};this.toMessage=function(){return{buzz_id:n.buzzid,pound_id:n.user.id,ab:n.ab,type:"share",channel:n.shareChannel}}};pound.UserEdge=function(t,i,n){var a=this;this.from=t;this.to=i;this.buzzid=n;this.equals=function(t,i){var n=new pound.identity.Unique;var a=n.unhashed(t.o);var r=n.unhashed(t.u);var s=n.unhashed(i.o);var o=n.unhashed(i.u);var l=n.unhashed(t.c);var u=n.unhashed(i.c);if(typeof a=="undefined"||typeof s=="undefined"){return false}if(a==s&&r==o&&l==u){return true}return false};this.toObject=function(){return{o:encodeURIComponent(a.from.hashed()),u:encodeURIComponent(a.to.hashed()),c:encodeURIComponent(a.buzzid)}};this.getPlatform=function(){if(window.BZFD){return"bzfd"}if(BF_STATIC.tt_page&&BF_STATIC.tt_page.indexOf("Mobile")>-1){if(BF_STATIC.mobile_app){return"app"}else{return"mobileweb"}}else{return"web"}};this.isAd=function(){return!!BF_STATIC.f_ad};this.toMessage=function(){return{from_client_id:a.from.id,client_id:a.to.id,buzz_id:a.buzzid,type:"user_edge",ad:a.isAd(),platform:a.getPlatform()}}};pound.PostEdge=function(t,i,n){var a=this;this.from=t;this.to=i;this.user=n;this.toObject=function(){return{p:encodeURIComponent(a.from),c:encodeURIComponent(a.to),u:encodeURIComponent(a.user.hashed())}};this.toMessage=function(){return{from_buzz_id:a.from,to_buzz_id:a.to,type:"post_edge"}}};pound.UpdatedUnique=function(t,i){var n=this;this.old_unique=t;this.new_unique=i;this.toObject=function(){return{u1:encodeURIComponent(n.old_unique),u2:encodeURIComponent(n.new_unique)}}};pound.Event=function(){var t=this;this.o={};this.callbacks=[];this.empty=true;this.merge=function(i){for(var n in i){if(i.hasOwnProperty(n)){t.o[n]=i[n]}}t.o.r=encodeURIComponent(pound.lib.getReferrer());t.o.v=encodeURIComponent(pound.VERSION);t.empty=false};this.addCallback=function(i){t.callbacks.push(i)}};pound.Visit=function(){var t=this;this.init=function(){window.bf_visit=this;this.img=undefined;this.bf=undefined;this.random=undefined;this.sharer=null;this.errors=[];this.poundEvents=pound.poundEvents;this.pixelNo=0;this.OPTED_OUT=undefined;t.setIdentity();pound.urls.init();if(document.readyState==="complete"){t.setState()}else if(document.readyState==="interactive"){setTimeout(t.setState.bind(t),1)}else{document.addEventListener("DOMContentLoaded",t.setState)}};this._removeFromBounces=function(i){var n=i.o,a=n?t.unique.unhashed(n):n,r=i.c,s=i.u;if(t._acquireBounceLock()){var o="unprocessed_propagation_events";var l=store.get(o);var u=-1;if(l&&l.length){for(var d=0,c=l.length;d<c;d++){var _=l[d],f=t._getClientId(_[0]);if(a&&!t.unique.validate(a)){a=undefined}if((a&&a==t.unique.unhashed(f)||!a&&n==f)&&r==_[1]){u=d;break}}if(u>-1){l.splice(u,1)}store.set(o,l);t._releaseBounceLock()}}else{setTimeout(function(){t._removeFromBounces(i)},100)}};this._releaseBounceLock=function(){if(t.bounceLockAcquired){t.bounceLockAcquired=false}else{throw new Error("Tried to release a lock that is not acquired.")}};this._acquireBounceLock=function(){if(t.bounceLockAcquired){return false}t.bounceLockAcquired=true;return true};this._processBounces=function(){var i="unprocessed_propagation_events";var n=store.get(i);if(n&&typeof n.shift!="undefined"){while(n.length){var a=n.shift();var r=t._getClientId(a[0]),s=a[1],o=a[2],l=t.unique.unhashed(r),u=new pound.UserEdge(new pound.identity.Unique(l),t.unique,s);if(!l||!t.unique.validate(l)){var d=u.toObject();d["o"]=r;t._removeFromBounces(d);continue}if(l==t.unique.id){t._removeFromBounces(u.toObject());continue}if(t.poundEvents.processEvent(u.toMessage())){t._removeFromBounces(u.toObject())}}}};this._getClientId=function(t){return typeof t==="string"?t:t["utm_term"]};this.setState=function(){t.processCascadeSegment();if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&!pound.lib.optedOut()){window.location.hash="#"+t.unique.hashed();if(typeof window.history!="undefined"){if(window.location.pathname.match(/\/p\//)){window.history.replaceState({},null,pound.urls.getHistoryState())}else{window.history.replaceState({},null,pound.urls._addQueryString(window.location.href))}}}if(typeof document.referrer!="undefined"&&document.referrer.indexOf("buzzfeed.com")>-1){if(t.previous_buzzid&&t.current_buzzid&&t.previous_buzzid!=t.current_buzzid){t.recordPostEdge()}}t._processBounces()};this.toJson=function(){return JSON.stringify({sharer:t.sharer.hashed(),unique:t.unique.hashed(),bf:t.bf,current_buzzid:t.current_buzzid,previous_buzzid:t.previous_buzzid,errors:t.errors})};this._parseHash=function(){var i=window.location.hash.slice(1,window.location.hash.length);if(i){var n=(new pound.identity.Unique).unhashed(i);if(n&&!isNaN(n)){var a=new pound.identity.Unique(n);if(a.validate()){if(a.id!=t.unique.id){t.sharer=a}else{t.sharer=null}}}}};this._parseQueryString=function(){var i=null;if(location.search.length>=1){params=pound.lib.parseQueryString(location.search.substr(1));i=params["utm_term"]||params["fb_ref"]}if(typeof i!="undefined"&&i!=null){sharer_id=(new pound.identity.Unique).unhashed(i);t.sharer=new pound.identity.Unique(sharer_id)}};this._parseLocalStorage=function(){var t=null;if(typeof store!=="undefined"&&store.enabled){sharer_id=store.get("pound_position")||undefined;if(sharer_id&&typeof sharer_id!="undefined"){var i=(new pound.identity.Unique).unhashed(sharer_id);t=new pound.identity.Unique(i)}store.set("pound_position",undefined)}if(typeof t!="undefined"&&t!=null){this.sharer=t}};this._parsePath=function(){var t=window.location.pathname;var i=undefined;var n=t.split("/");var a={};for(var r=0,s=n.length;r<s-1;r++){a[n[r]]=n[r+1]}var o=a["p"]||undefined;if(o&&typeof o!="undefined"){var l=(new pound.identity.Unique).unhashed(o);i=new pound.identity.Unique(l)}if(typeof i!="undefined"&&i!=null){this.sharer=i}};this._parseCascadeSegment=function(){t._parseLocalStorage();t._parseQueryString();t._parseHash();t._parsePath();if(t.sharer&&!t.sharer.validate()){t.sharer.munge();if(!t.sharer.validate()){t.errors.push(":4:"+t.sharer.toString());t.sharer=null}}if(t.sharer&&t.sharer!==undefined&&t.sharer.id==t.unique.id){t.sharer=null}};this._loadStateFromCookie=function(){var i=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));var n,a;if(i["c"]!==undefined||i["c"]!=BF_STATIC.campaignid){t.previous_buzzid=i["c"]}if(i["b"]===undefined&&i["u"]===undefined||i["v"]!=pound.VERSION){pound.lib.expireCookie("bf_visit");return{success:false,old_unique:i["u"]}}var a=i["u"];if(typeof a!="undefined"){a=(new pound.identity.Unique).unhashed(a);t.unique=new pound.identity.Unique(a);if(!t.unique.validate()){pound.lib.expireCookie("bf_visit");return{success:false}}}t.bf=i["b"];return{success:true}};this.storeCurrentBPage=function(){var i=unescape(pound.lib.getCookie("bf_visit"));var n=pound.lib.parseQueryString(i);n["c"]=t.current_buzzid;n=pound.lib.createQueryString(n);var a=new Date;a.setDate(a.getDate()+1e4);pound.lib.setCookie("bf_visit",n.slice(1,n.length),a.toUTCString(),"/")};this._loadStateToCookie=function(){var i=pound.lib.createQueryString({b:t.bf,u:t.unique.hashed(),v:pound.VERSION});var n=new Date;n.setDate(n.getDate()+1e4);pound.lib.setCookie("bf_visit",i.slice(1,i.length),n.toUTCString(),"/")};this.setIdentity=function(){var i=0;var n=t._loadStateFromCookie();if(!n["success"]){t.bf=pound.identity.Buzzfeed();t.unique=new pound.identity.Unique}while(!t.unique.validate()&&i++<10){t.unique=new pound.identity.Unique}t.current_buzzid=BF_STATIC["campaignid"];if(!t.unique.validate()){t.errors.push(":2:"+t.unique.toString())}else{t._loadStateToCookie()}};this.recordUserEdge=function(){var i=new pound.UserEdge(t.sharer,t.unique,t.current_buzzid);if(t.poundEvents.processEvent(i.toMessage())){t._removeFromBounces(i.toObject())}};this.recordShare=function(i){var n=new pound.Share(t.unique,t.current_buzzid);if(window.bfaBinder){var a=i||this;var r=window.BZFD?"BZFD":BF_STATIC.tt_page=="MobileBuzz"?"Mobile":"Desktop";if(a.getAttribute){var s=window.bfaBinder.parser.parse(a);if(s.action||s.description||s.location){n.shareChannel=r+":"+s.description+":"+s.action+":"+s.location;if(s.data&&s.data.idx){n.shareChannel+=":"+s.data.idx}}}}t.poundEvents.processEvent(n.toMessage())};this.recordPostEdge=function(){var i=new pound.PostEdge(t.previous_buzzid,t.current_buzzid,t.unique);t.poundEvents.processEvent(i.toMessage())};this.currentUserEdgeNotInLocalStorage=function(){if(t.sharer===null){return true}var i=t.sharer.id;var n=t.unique.id;var a=t.current_buzzid;var r=store.get("unprocessed_propagation_events")||[];for(var s=0,o=r.length;s<o;s++){var e=r[s];var l=t.unique.unhashed(t._getClientId(e[0]));var u=e[1];if(t.sharer==l&&t.current_buzzid==u){return false}}return true};this.processCascadeSegment=function(){t._parseCascadeSegment();t.storeCurrentBPage();if(t.sharer!==null&&t.currentUserEdgeNotInLocalStorage()){t.recordUserEdge()}};this.toString=function(){return"[object pound.Visit]"};t.init()};window.bf_visit=new pound.Visit;if(typeof module!=="undefined"){module.exports=pound}else{var pound_retries=0;function init_pound(){if(typeof bf_login=="undefined"||typeof BF_User=="undefined"){if(pound_retries<20){setTimeout(init_pound,1e3)}pound_retries+=1;return false}else{if(pound.VERIFY_IDENTITIES){if(pound.LOGGED_IN_ONLY&&(new BF_User).isLoggedIn()||!pound.LOGGED_IN_ONLY){window.bf_visit.processCascadeSegment()}else{bf_login.loggedInCallbacks.push(window.bf_visit.processCascadeSegment)}}window.bf_widgets.process()}return false}function registerWithBuzzLoader(){if(typeof BuzzLoader!="undefined"){BuzzLoader.register(init_pound,5)}else{if(typeof bfjs=="undefined"||!bfjs.isMobile()){setTimeout(registerWithBuzzLoader,500)}else{init_pound()}}}registerWithBuzzLoader()}if(window.location.hash||window.location.search.indexOf("utm_term")>-1){var key="unprocessed_propagation_events";var prop_events=store.get(key);var qshash="";var hashval="";if(typeof window.location.search=="string"){qs_obj=pound.lib.parseQueryString(window.location.search.slice(1))["utm_term"]}if(typeof window.location.hash=="string"){hashval=window.location.hash.slice(1)}if(!prop_events){prop_events=[]}if(hashval){prop_events.push([hashval,BF_STATIC.campaignid,(new Date).getTime()])}else if(qs_obj){prop_events.push([qs_obj,BF_STATIC.campaignid,(new Date).getTime()])}store.set(key,prop_events)}