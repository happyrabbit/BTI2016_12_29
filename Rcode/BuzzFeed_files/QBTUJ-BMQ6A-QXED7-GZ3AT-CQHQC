function BOOMR_check_doc_domain(a){var b;if(!a){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(c){BOOMR.isCrossOriginError(c)||BOOMR.addError(c,"BOOMR_check_doc_domain.domainFix")}a=document.domain}if(-1!==a.indexOf(".")){try{b=window.parent.document;return}catch(c){document.domain=a}try{b=window.parent.document;return}catch(c){a=a.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(a)}}BOOMR_start=(new Date).getTime();BOOMR_check_doc_domain();!function(a){var b,c,d,e,f,g,h,i,j=a;if(a.parent!==a&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()){a=a.parent;e=document.getElementById("boomr-if-as").src}d=a.document;a.BOOMR||(a.BOOMR={});BOOMR=a.BOOMR;if(!BOOMR.version){BOOMR.version="1.376.1462309808";BOOMR.window=a;BOOMR.boomerang_frame=j;BOOMR.plugins||(BOOMR.plugins={});!function(){try{void 0!==new a.CustomEvent("CustomEvent")&&(f=function(b,c){return new a.CustomEvent(b,c)})}catch(b){}try{!f&&d.createEvent&&d.createEvent("CustomEvent")&&(f=function(a,b){var c=d.createEvent("CustomEvent");b=b||{cancelable:!1,bubbles:!1};c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c})}catch(b){}!f&&d.createEventObject&&(f=function(a,b){var c=d.createEventObject();c.type=c.propertyName=a;c.detail=b.detail;return c});f||(f=function(){return void 0})}();g=function(a,b,c){function e(){d.dispatchEvent?d.dispatchEvent(g):d.fireEvent&&d.fireEvent("onpropertychange",g)}var g=f(a,{detail:b});g&&(c?BOOMR.setImmediate(e):e())};if("undefined"!=typeof document.hidden){h="visibilityState";i="visibilitychange"}else if("undefined"!=typeof document.mozHidden){h="mozVisibilityState";i="mozvisibilitychange"}else if("undefined"!=typeof document.msHidden){h="msVisibilityState";i="msvisibilitychange"}else if("undefined"!=typeof document.webkitHidden){h="webkitVisibilityState";i="webkitvisibilitychange"}b={beacon_url:location.protocol+"//c.go-mpulse.net/",beacon_type:"AUTO",user_ip:"",autorun:!0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},xb_handler:function(c){return function(d){var e;d||(d=a.event);d.target?e=d.target:d.srcElement&&(e=d.srcElement);3===e.nodeType&&(e=e.parentNode);e&&"OBJECT"===e.nodeName.toUpperCase()&&"application/x-shockwave-flash"===e.type||b.fireEvent(c,e)}},fireEvent:function(a,b){var c,d,e;a=a.toLowerCase();if(this.events.hasOwnProperty(a)){this.public_events.hasOwnProperty(a)&&g(this.public_events[a],b);e=this.events[a];"before_beacon"!==a&&"onbeacon"!==a&&BOOMR.real_sendBeacon();for(c=0;c<e.length;c++)try{d=e[c];d.fn.call(d.scope,b,d.cb_data)}catch(f){BOOMR.addError(f,"fireEvent."+a+"<"+c+">")}}}};c={t_start:BOOMR_start,url:e,config_url:null,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:null,ID:Math.random().toString(36).replace(/^0\./,""),start:void 0,length:0},utils:{objectToString:function(a,b,c){var d,e=[];if(!a||"object"!=typeof a)return a;void 0===b&&(b="\n	");c||(c=0);if("[object Array]"===Object.prototype.toString.call(a)){for(d=0;d<a.length;d++)c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(this.objectToString(a[d],b+("\n	"===b?"	":""),c-1)):"&"===b?e.push(encodeURIComponent(a[d])):e.push(a[d]);b=","}else for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(encodeURIComponent(d)+"="+this.objectToString(a[d],b+("\n	"===b?"	":""),c-1)):"&"===b?e.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d])):e.push(d+"="+a[d]));return e.join(b)},getCookie:function(a){if(!a)return null;a=" "+a+"=";var b,c;c=" "+d.cookie+";";if((b=c.indexOf(a))>=0){b+=a.length;c=c.substring(b,c.indexOf(";",b)).replace(/^"/,"").replace(/"$/,"");return c}},setCookie:function(a,b,c){var e,f,g,h,i;if(!a||!BOOMR.session.domain){BOOMR.debug("No cookie name or site domain: "+a+"/"+BOOMR.session.domain);return null}e=this.objectToString(b,"&");f=a+'="'+e+'"';h=[f,"path=/","domain="+BOOMR.session.domain];if(c){i=new Date;i.setTime(i.getTime()+1e3*c);i=i.toGMTString();h.push("expires="+i)}if(f.length<500){d.cookie=h.join("; ");g=this.getCookie(a);if(e===g)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+e+"\n"+g)}else BOOMR.warn("Cookie too long: "+f.length+" "+f);return!1},getSubCookies:function(a){var b,c,d,e,f=!1,g={};if(!a)return null;if("string"!=typeof a){BOOMR.debug("TypeError: cookie is not a string: "+typeof a);return null}b=a.split("&");for(c=0,d=b.length;d>c;c++){e=b[c].split("=");if(e[0]){e.push("");g[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);f=!0}}return f?g:null},removeCookie:function(a){return this.setCookie(a,{},-86400)},cleanupURL:function(a,c){if(!a||"[object Array]"===Object.prototype.toString.call(a))return"";b.strip_query_string&&(a=a.replace(/\?.*/,"?qs-redacted"));if("undefined"!=typeof c&&a&&a.length>c){var d=a.indexOf("?");a=-1!==d&&c>d?a.substr(0,d)+"?...":a.substr(0,c-3)+"..."}return a},hashQueryString:function(a,b){if(!a)return a;if(!a.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof a);return""}a.match(/^\/\//)&&(a=location.protocol+a);if(!a.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+a);return""}b&&(a=a.replace(/#.*/,""));return BOOMR.utils.MD5?a.replace(/\?([^#]*)/,function(a,b){return"?"+(b.length>10?BOOMR.utils.MD5(b):b)}):a},pluginConfig:function(a,b,c,d){var e,f=0;if(!b||!b[c])return!1;for(e=0;e<d.length;e++)if(void 0!==b[c][d[e]]){a[d[e]]=b[c][d[e]];f++}return f>0},arrayFilter:function(a,b){var c=[];if("function"==typeof a.filter)c=a.filter(b);else for(var d,e=-1,f=a.length;++e<f;){d=a[e];b(d,e,a)&&(c[c.length]=d)}return c},addObserver:function(a,b,c,d,e,f){function g(a){var b=!1;if(h.timer){clearTimeout(h.timer);h.timer=null}if(d){b=d.call(f,a,e);b||(d=null)}if(!b&&h.observer){h.observer.disconnect();h.observer=null}"number"==typeof b&&b>0&&(h.timer=setTimeout(g,b))}var h={observer:null,timer:null};if(!window.MutationObserver||!d||!a)return null;h.observer=new MutationObserver(g);c&&(h.timer=setTimeout(g,h.timeout));h.observer.observe(a,b);return h},addListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},removeListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},pushVars:function(a,b,c){var d,e,f,g=0;for(d in b)if(b.hasOwnProperty(d))if("[object Array]"===Object.prototype.toString.call(b[d]))for(e=0;e<b[d].length;++e)g+=BOOMR.utils.pushVars(a,b[d][e],d+"["+e+"]");else{f=document.createElement("input");f.type="hidden";f.name=c?c+"["+d+"]":d;f.value=void 0===b[d]||null===b[d]?"":b[d];a.appendChild(f);g+=encodeURIComponent(f.name).length+encodeURIComponent(f.value).length+2}return g},inArray:function(a,b){var c;if("undefined"==typeof a||"undefined"==typeof b||!b.length)return!1;for(c=0;c<b.length;c++)if(b[c]===a)return!0;return!1}},init:function(c){var e,f,g=["beacon_url","beacon_type","user_ip","strip_query_string","secondary_beacons","autorun"];BOOMR_check_doc_domain();c||(c={});if(c.primary&&b.handlers_attached)return this;void 0!==c.site_domain&&(this.session.domain=c.site_domain);void 0!==c.log&&(this.log=c.log);this.log||(this.log=function(){});"undefined"!=typeof c.autorun&&(b.autorun=c.autorun);for(f in this.plugins)if(this.plugins.hasOwnProperty(f)){if(c[f]&&c[f].hasOwnProperty("enabled")&&c[f].enabled===!1){b.disabled_plugins[f]=1;"function"==typeof this.plugins[f].disable&&this.plugins[f].disable();continue}if(b.disabled_plugins[f]){if(!c[f]||!c[f].hasOwnProperty("enabled")||c[f].enabled!==!0)continue;"function"==typeof this.plugins[f].enable&&this.plugins[f].enable();delete b.disabled_plugins[f]}if("function"==typeof this.plugins[f].init)try{this.plugins[f].init(c)}catch(h){BOOMR.addError(h,f+".init")}}for(e=0;e<g.length;e++)void 0!==c[g[e]]&&(b[g[e]]=c[g[e]]);if(b.handlers_attached)return this;if(!b.onloadfired&&(void 0===c.autorun||c.autorun!==!1))if(d.readyState&&"complete"===d.readyState){BOOMR.loadedLate=!0;this.setImmediate(BOOMR.page_ready_autorun,null,null,BOOMR)}else a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pageshow",BOOMR.page_ready_autorun):BOOMR.utils.addListener(a,"load",BOOMR.page_ready_autorun);BOOMR.utils.addListener(a,"DOMContentLoaded",function(){b.fireEvent("dom_loaded")});!function(){var c,e;if(void 0!==i){BOOMR.utils.addListener(d,i,function(){b.fireEvent("visibility_changed")});BOOMR.subscribe("visibility_changed",function(){BOOMR.lastVisibilityEvent[BOOMR.visibilityState()]=BOOMR.now()})}BOOMR.utils.addListener(d,"mouseup",b.xb_handler("click"));c=d.getElementsByTagName("form");for(e=0;e<c.length;e++)BOOMR.utils.addListener(c[e],"submit",b.xb_handler("form_submit"));a.onpagehide||null===a.onpagehide||BOOMR.utils.addListener(a,"unload",function(){BOOMR.window=a=null})}();b.handlers_attached=!0;return this},page_ready_autorun:function(a){b.autorun&&BOOMR.page_ready(a)},page_ready:function(c){c||(c=a.event);c||(c={name:"load"});if(b.onloadfired)return this;b.fireEvent("page_ready",c);b.onloadfired=!0;return this},setImmediate:function(b,c,d,e){var f,g;if("undefined"!=typeof Error){g=new Error;g=g.stack?g.stack.replace(/^Error/,"Called"):void 0}f=function(){b.call(e||null,c,d||{},g);f=null};a.setImmediate?a.setImmediate(f):a.msSetImmediate?a.msSetImmediate(f):a.webkitSetImmediate?a.webkitSetImmediate(f):a.mozSetImmediate?a.mozSetImmediate(f):setTimeout(f,10)},now:function(){try{var a=BOOMR.getPerformance();if(a&&"function"==typeof a.now)return function(){return Math.round(a.now()+a.timing.navigationStart)}}catch(b){}return Date.now||function(){return(new Date).getTime()}}(),getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(a){}},visibilityState:void 0===h?function(){return"visible"}:function(){return d[h]},lastVisibilityEvent:{},registerEvent:function(a){if(b.events.hasOwnProperty(a))return this;b.events[a]=[];return this},fireEvent:function(a,c){return b.fireEvent(a,c)},subscribe:function(c,d,e,f){var g,h,i;c=c.toLowerCase();b.events.hasOwnProperty(c)||(b.events[c]=[]);i=b.events[c];for(g=0;g<i.length;g++){h=i[g];if(h&&h.fn===d&&h.cb_data===e&&h.scope===f)return this}i.push({fn:d,cb_data:e||{},scope:f||null});"page_ready"===c&&b.onloadfired&&b.autorun&&this.setImmediate(d,null,e,f);("page_unload"===c||"before_unload"===c)&&!function(){var g,h=i.length;g=function(g){d&&d.call(f,g||a.event,e);"page_unload"===c&&h===b.events[c].length&&BOOMR.real_sendBeacon()};"page_unload"===c&&(a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pagehide",g):BOOMR.utils.addListener(a,"unload",g));BOOMR.utils.addListener(a,"beforeunload",g)}();return this},addError:function(a,c,d){var e,f=BOOMR.plugins.Errors;if(f&&f.is_supported())if("string"==typeof a)f.send({message:a,extra:d,functionName:c,noStack:!0},f.VIA_APP,f.SOURCE_BOOMERANG);else{"string"==typeof c&&(a.functionName=c);"undefined"!=typeof d&&(a.extra=d);f.send(a,f.VIA_APP,f.SOURCE_BOOMERANG)}else{if("string"!=typeof a){e=String(a);e.match(/^\[object/)&&(e=a.name+": "+(a.description||a.message).replace(/\r\n$/,""));a=e}void 0!==c&&(a="["+c+":"+BOOMR.now()+"] "+a);d&&(a+=":: "+d);b.errors[a]?b.errors[a]++:b.errors[a]=1}},isCrossOriginError:function(a){return"SecurityError"===a.name||"TypeError"===a.name&&"Permission denied"===a.message||"Error"===a.name&&a.message&&a.message.match(/^(Permission|Access is) denied/)},addVar:function(a,c){if("string"==typeof a)b.vars[a]=c;else if("object"==typeof a){var d,e=a;for(d in e)e.hasOwnProperty(d)&&(b.vars[d]=e[d])}return this},removeVar:function(a){var c,d;if(!arguments.length)return this;d=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(a)?a:arguments;for(c=0;c<d.length;c++)b.vars.hasOwnProperty(d[c])&&delete b.vars[d[c]];return this},hasVar:function(a){return b.vars.hasOwnProperty(a)},setVarPriority:function(a,c){if("number"!=typeof c||1!==Math.abs(c))return this;b.varPriority[c][a]=1;return this},requestStart:function(a){var b=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+a,b);return{loaded:function(c){BOOMR.responseEnd(a,b,c)}}},hasCrumb:function(){return"undefined"!=typeof b.vars["h.cr"]},responseEnd:function(a,c,d){if(BOOMR.hasCrumb())if("object"==typeof a&&a.url)b.fireEvent("xhr_load",a);else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",a);BOOMR.plugins.RT.startTimer("xhr_"+a,c);b.fireEvent("xhr_load",{name:"xhr_"+a,data:d})}else if("object"!=typeof a){var e=a+"|"+(BOOMR.now()-c);b.vars.qt?b.vars.qt+=","+e:b.vars.qt=e}else BOOMR.debug("Attempt to send a resource before a crumb")},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(a){a&&(b.beacon_url_override=a);if(!b.beaconQueued){b.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return!0},real_sendBeacon:function(){var c,e,f,g,h,i=[],j=[],k=1,l={},m={},n=[],o=[];if(!b.beaconQueued)return!1;b.beaconQueued=!1;BOOMR.debug("Checking if we can send beacon");for(c in this.plugins)if(this.plugins.hasOwnProperty(c)){if(b.disabled_plugins[c])continue;if(!this.plugins[c].is_complete()){BOOMR.debug("Plugin "+c+" is not complete, deferring beacon send");return!1}}var p=BOOMR.utils.inArray(b.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),q=p?d.URL:d.URL.replace(/#.*/,"");b.vars.pgu=BOOMR.utils.cleanupURL(q);(!b.vars.u||p)&&(b.vars.u=b.vars.pgu);b.vars.pgu===b.vars.u&&delete b.vars.pgu;b.vars.v=BOOMR.version;b.vars["rt.si"]=BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36);b.vars["rt.ss"]=BOOMR.session.start;b.vars["rt.sl"]=BOOMR.session.length;if(BOOMR.visibilityState()){b.vars["vis.st"]=BOOMR.visibilityState();BOOMR.lastVisibilityEvent.visible&&(b.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible);BOOMR.lastVisibilityEvent.hidden&&(b.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)}b.vars["ua.plt"]=navigator.platform;b.vars["ua.vnd"]=navigator.vendor;a!==window&&(b.vars["if"]="");for(c in b.errors)b.errors.hasOwnProperty(c)&&i.push(c+(b.errors[c]>1?" (*"+b.errors[c]+")":""));i.length>0&&(b.vars.errors=i.join("\n"));b.errors={};b.fireEvent("before_beacon",b.vars);b.beacon_url=b.beacon_url_override||b.beacon_url;BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(b.vars));if(!b.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return!0}for(c in b.vars)if(b.vars.hasOwnProperty(c)){l[c]=b.vars[c];m[c]=b.vars[c]}n=this.getVarsOfPriority(m,-1);o=this.getVarsOfPriority(m,1);j=n.concat(this.getVarsOfPriority(m,0),o);g=j.join("&");e=b.beacon_url+(b.beacon_url.indexOf("?")>-1?"&":"?")+g;e.length>BOOMR.constants.MAX_GET_LENGTH&&(k=!1);BOOMR.removeVar("qt");b.fireEvent("onbeacon",l);if(0===j.length)return this;if(BOOMR.session.rate_limited){BOOMR.debug("Skipping because we're rate limited");return this}BOOMR.orig_XMLHttpRequest||BOOMR.window&&BOOMR.window.XMLHttpRequest||(k=!0);if(k){f=new Image;f.src=e;if(b.secondary_beacons)for(c=0;c<b.secondary_beacons.length;c++){e=b.secondary_beacons[c]+"?"+g;f=new Image;f.src=e}}else{h=new(BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);h.open("POST",b.beacon_url);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(g)}return!0},getVarsOfPriority:function(a,c){var d,e=[];if(0!==c){for(d in b.varPriority[c])if(b.varPriority[c].hasOwnProperty(d)&&a.hasOwnProperty(d)){e.push(this.getUriEncodedVar(d,a[d]));delete a[d]}}else for(d in a)a.hasOwnProperty(d)&&e.push(this.getUriEncodedVar(d,a[d]));return e},getUriEncodedVar:function(a,b){var c=encodeURIComponent(a)+"="+(void 0===b||null===b?"":encodeURIComponent(b));return c},getResourceTiming:function(a){var b;try{if(BOOMR.getPerformance()&&"function"==typeof BOOMR.getPerformance().getEntriesByName){b=BOOMR.getPerformance().getEntriesByName(a);if(b&&b.length)return b[b.length-1]}}catch(c){}}};delete BOOMR_start;if("number"==typeof BOOMR_lstart){c.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else"number"==typeof BOOMR.window.BOOMR_lstart&&(c.t_lstart=BOOMR.window.BOOMR_lstart);"number"==typeof BOOMR.window.BOOMR_onload&&(c.t_onload=BOOMR.window.BOOMR_onload);!function(){var a;"object"==typeof console&&void 0!==console.log&&(c.log=function(a,b,c){console.log(c+": ["+b+"] "+a)});a=function(a){return function(b,c){this.log(b,a,"boomerang"+(c?"."+c:""));return this}};c.debug=a("debug");c.info=a("info");c.warn=a("warn");c.error=a("error")}();!function(){var a;for(a in c)c.hasOwnProperty(a)&&(BOOMR[a]=c[a]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}();g("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);!function(){if(!BOOMR.plugins.ConfigOverride){var a={safeConfigOverride:function(b,c,d){for(var e in c)if(b.hasOwnProperty(e)&&c.hasOwnProperty(e)&&("object"!=typeof c[e]||"object"==typeof b[e]))if("object"==typeof b[e]&&"object"==typeof c[e]){d[e]=d[e]||{};a.safeConfigOverride(b[e],c[e],d[e])}else{d[e]=b[e];BOOMR.addVar("c.o","")}},allowedConfigOverrides:{Angular:{enabled:!0},Ember:{enabled:!0},Backbone:{enabled:!0},History:{enabled:!0,auto:!0},PageParams:{pageGroups:!0,customMetrics:!0,customDimensions:!0,customTimers:!0,abTests:!0,defaultDecimal:!0,defaultThousands:!0},instrument_xhr:!0,RT:{cookie:!0,session_exp:!0},BW:{base_url:!0,enabled:!0,test_https:!0},ResourceTiming:{enabled:!0,clearOnBeacon:!0},AutoXHR:{alwaysSendXhr:!0},Errors:{enabled:!0,onError:!0,monitorGlobal:!0,monitorNetwork:!0,monitorConsole:!0,monitorEvents:!0,monitorTimeout:!0,sendAfterOnload:!0,maxErrors:!0,sendInterval:!0},secondaryBeacons:!0,autorun:!0}};BOOMR.plugins.ConfigOverride={init:function(b){if(BOOMR.window&&BOOMR.window.BOOMR_config){BOOMR.debug("Found BOOMR_config on global scope: "+BOOMR.utils.objectToString(BOOMR.window.BOOMR_config),"ConfigOverride");a.safeConfigOverride(BOOMR.window.BOOMR_config,a.allowedConfigOverrides,b)}return this},is_complete:function(){return!0}}}}();!function(){var a,b,c,d,e,f;BOOMR=window.BOOMR||{};if(!BOOMR.plugins.PageParams){var g=".",h=",",i=/(-?(?:[1-9][\d,]*)?[0-9](?:\.\d+)?)/,j={".,":i},k={".":/\./g,",":/,/g," ":/ /g,"'":/'/g};f=function(a){this.varname=a.varname;this.method=a.method||BOOMR.addVar;this.ctx=a.ctx||BOOMR;this.preProcessor=a.preProcessor;this.sanitizeRE=a.sanitizeRE||/[^\w \-]/g;this.cleanUpRE=a.cleanUpRE;return this};f.prototype={apply:function(a){this.preProcessor&&(a=this.preProcessor(a));if(!a&&0!==a)return!1;this.method.call(this.ctx,this.varname,a);return!0},handle:function(a){var b=this;if(!this.isValid(a))return!1;if(a.label){b=new f(this);b.varname=a.label}return b[a.type](a)},isValid:function(a){return a&&"object"==typeof a&&a.hasOwnProperty("type")&&"function"==typeof this[a.type]&&(this.varname||a.label)},cleanUp:function(a,b){var c,d,f,i,l=this.cleanUpRE;if(!a)return a;if(l){d=b&&b.decimal?b.decimal:e.defaultDecimal;f=b&&b.thousands?b.thousands:e.defaultThousands;if(d!==g||f!==h){i=d+f;l=j[i];if("undefined"==typeof l){l=new RegExp("(-?(?:[1-9][\\d"+f+"]*)?[0-9](?:\\"+d+"\\d+)?)");j[i]=l}}c=a.match(l);if(c&&c.length>1){a=c[1];l=k[f];if("undefined"==typeof l){l=new RegExp("\\"+f,"g");k[f]=l}a=a.replace(l,"");d!==g&&(a=a.replace(d,g));return a}return""}return a.replace(this.sanitizeRE,"")},isValidObjectMember:function(a,b){return null===a?!1:"object"==typeof a?!0:"function"==typeof a&&a.hasOwnProperty(b)?!0:"string"==typeof a&&a.hasOwnProperty(b)?!0:!1},extractFromDOMElement:function(a,b){var c,d,e="";"INPUT"===a.nodeName.toUpperCase()||"SELECT"===a.nodeName.toUpperCase()?("checkbox"!==a.type.toLowerCase()&&"radio"!==a.type.toLowerCase()||a.checked)&&(e=a.value):e=a.textContent||a.innerText;if(b.match&&"numeric"!==b.match){if("boolean"===b.match)e=1;else if(b.match.match(/^regex:/)){c=b.match.match(/^regex:(.*)/);if(!c||c.length<2)return!1;try{d=new RegExp(c[1],"i");d.test(e)&&(e=1)}catch(f){BOOMR.debug("Bad pattern: "+b.match,"PageVars");BOOMR.debug(f,"PageVars");BOOMR.addError(f,"PageVars.URLPatternType",b.match);return!1}}}else e=this.cleanUp(e,b);return e},handleRegEx:function(a,b,c){var d,e;if(!(a instanceof RegExp))try{a=new RegExp(a,"i")}catch(f){BOOMR.debug("Error generating regex: "+f,"PageVars");BOOMR.addError(f,"PageVars.handleRegEx",a);return!1}if("undefined"==typeof c)return!1;e=a.exec(c);if(!e||!e.length)return!1;d=b.replace(/\$([1-9])/g,function(a,b){return decodeURIComponent(e[parseInt(b,10)])});d=this.cleanUp(d);return this.apply(d)},checkURLPattern:function(a,c){var d;if(!a)return!0;d=a.replace(/([.+?\^=!:${}()|\[\]\/\\])/g,"\\$1").replace(/\*/g,".*?");try{d=new RegExp("^"+d+"$","i")}catch(e){BOOMR.debug("Bad pattern: "+d,"PageVars");BOOMR.debug(e,"PageVars");BOOMR.addError(e,"PageVars.checkURLPattern",a);return!1}c||(c=b.href);if(!d.exec(c)){BOOMR.debug("No match "+d+" on "+c,"PageVars");return!1}return!0},nodeWalk:function(a,b){var c,d,e,f;if(!b)return a;c=b.match(/^(\w+)(?:\[(\d+)\])?\/?(.*)/);if(!c||!c.length)return null;d=a.getElementsByTagName(c[1]);if(c[2]){e=parseInt(c[2],10);if(isNaN(e))return null;e--;if(d.length<=e)return null;d=[d[e]]}for(e=0;e<d.length;e++){f=this.nodeWalk(d[e],c[3]);if(f)return f}return null},runXPath:function(a){var b,d,e,f=!1;try{c.evaluate?b=c.evaluate(a,c,null,9,null):c.selectNodes?b=c.selectNodes(a):f=!0}catch(g){e=g;f=!0}if(!b&&f)try{if(a.match(/^\/html(?:\/\w+(?:\[\d+\])?)*$/)){a=a.slice(6);return this.nodeWalk(c,a)}if(null!==(d=a.match(/\[@id=(["'])([^"']+)\1\]((?:\/\w+(?:\[\d+\])?)*)$/))){b=c.getElementById(d[2]);return b&&d[3]?this.nodeWalk(b,d[3].slice(1)):b}if(null!==(d=a.match(/\[@class="([^"]+)"\]((?:\/\w+(?:\[\d+\])?)*)$/))){b=c.getElementsByClassName(d[1]);b&&b.length&&(b=b[0]);return b&&d[2]?this.nodeWalk(b,d[2].slice(1)):b}BOOMR.debug("Could not evaluate XPath","PageVars");if(e){BOOMR.error("Error evaluating XPath: "+e,"PageVars");BOOMR.addError(e,"PageVars.runXPath.native",a)}return null}catch(g){BOOMR.error("Error evaluating XPath: "+g,"PageVars");BOOMR.addError(g,"PageVars.runXPath.ours",a);return null}if(!b||9!==b.resultType||!b.singleNodeValue){BOOMR.debug("XPath did not return anything: "+b+", "+b.resultType+", "+b.singleNodeValue,"PageVars");return null}return b.singleNodeValue},runQuerySelector:function(a){var b;try{if(!c.querySelector)return null;b=c.querySelector(a)}catch(d){BOOMR.error(""+d,"PageVars");BOOMR.addError(d,"PageVars.runQueryselector",a);return null}b||BOOMR.debug("QuerySelector '"+a+"'yielded no result!");return b},JavaScriptVar:function(a){return this.checkURLPattern(a.parameter1)?this.extractJavaScriptVariable(a.varName,a):!1},Custom:function(a){return this.checkURLPattern(a.parameter2)?this.extractJavaScriptVariable(a.parameter1,a):!1},extractJavaScriptVariable:function(b,c){var d,e,f=a;if(!b)return!1;BOOMR.debug("Got variable: "+b,"PageVars");d=b.split(/\./);if(!d||0===d.length)return!1;e=this.extractJavaScriptVariableValue(a,d.shift());try{for(;d.length&&this.isValidObjectMember(e,d[0]);){BOOMR.debug("looking at "+d[0],"PageVars");f=e;e=this.extractJavaScriptVariableValue(e,d.shift())}}catch(g){BOOMR.addError(g,"PageVars.extractJavaScriptVariable",b+"::"+d.join("."));return!1}if(0!==d.length)return!1;if("function"==typeof e)try{e=e.call(f,this.varname)}catch(g){BOOMR.addError(g,"PageVars.extractJavaScriptVariable",b+"()");return!1}if(void 0===e||"object"==typeof e&&null!==e)return!1;BOOMR.debug("final value: "+e,"PageVars");if(c&&"boolean"===c.match)return e?this.apply(1):void 0;e=this.cleanUp(String(e),c);return this.apply(e)},extractJavaScriptVariableValue:function(a,b){var c,d,e=/(.+?)\[(\d+)\]((?:\[\d+\])+)*/;if(null===(c=e.exec(b)))return a[b];e=/([a-zA-Z_$][\w$]*|\[(\d+)\])/g;for(;null!==(c=e.exec(b))&&"undefined"!=typeof a;)if(3===c.length&&c[2]){d=parseInt(c[2],10);a=a[d]}else a=a[c[1]];return a},URLPattern:function(a){var c,d,e,f;if(!a.parameter2)return!1;BOOMR.debug("Got URL Pattern: "+a.parameter1+", "+a.parameter2,"PageVars");if(!this.checkURLPattern(a.parameter1))return!1;d=b.search.slice(1).split(/&/);BOOMR.debug("Got params: "+d,"PageVars");for(e=0;e<d.length;e++)if(d[e]){f=d[e].split("=");if(f.length&&f[0]===a.parameter2){BOOMR.debug("final value: "+f[1],"PageVars");c=this.cleanUp(decodeURIComponent(f[1]));return this.apply(c)}}},URLSubstringEndOfText:function(a){return this.URLSubstringTrailingText(a)},URLSubstringTrailingText:function(a){if(!a.parameter1)return!1;BOOMR.debug("Got URL Substring: "+a.parameter1+", "+a.parameter2,"PageVars");return this.handleRegEx("^"+a.parameter1.replace(/([.+?\^=!:${}()|\[\]\/\\])/g,"\\$1").replace(/([^\.])\*/g,"$1.*?").replace(/^\*/,".*")+"(.*)"+(a.parameter2||"").replace(/([.+?\^=!:${}()|\[\]\/\\])/g,"\\$1").replace(/([^\.])\*/g,"$1.*")+"$","$1",b.href)},UserAgentRegex:function(a){return this._Regex(a.parameter1,a.regex,a.replacement,navigator.userAgent)},CookieRegex:function(a){return this._Regex(a.parameter1,a.regex,a.replacement,a.cookieName?BOOMR.utils.getCookie(a.cookieName):c.cookie)},URLRegex:function(a){return this._Regex(a.parameter1,a.regex,a.replacement,b.href)},Regexp:function(a){return this._Regex(null,a.parameter1,a.parameter2,b.href)},_Regex:function(a,b,c,d){if(!b||!c)return!1;if(!this.checkURLPattern(a))return!1;BOOMR.debug("Got RegEx: "+a+", "+b+", "+c,"PageVars");return this.handleRegEx(b,c,d)},URLPatternType:function(a){var b;BOOMR.debug("Got URLPatternType: "+a.parameter1+", "+a.parameter2,"PageVars");if(!this.checkURLPattern(a.parameter1))return!1;if(!a.parameter1||a.parameter2||a.queryselector)if(a.queryselector){b=this.runQuerySelector(a.queryselector);if(!b)return!1;b=this.extractFromDOMElement(b,a)}else{if(!a.parameter2)return!1;b=this.runXPath(a.parameter2);if(!b)return!1;b=this.extractFromDOMElement(b,a)}else b="1";BOOMR.debug("Final value: "+b,"PageVars");return this.apply(b)},ResourceTiming:function(a){var b,c,f,g,h,i;if(!a.parameter2&&!a.url&&!a.queryselector)return!1;if(!a.start||!a.end&&"*"!==a.start)return!1;if(!d||!d.getEntriesByName){BOOMR.debug("This browser does not support ResourceTiming","PageVars");return!1}BOOMR.debug("Got ResourceTiming: "+a.parameter1+", "+a.parameter2+", "+a.url,"PageVars");if(!this.checkURLPattern(a.parameter1))return!1;"slowest"===a.parameter2||"slowest"===a.url?c="slowest":a.url?c=a.url:a.parameter2?b=this.runXPath(a.parameter2):a.queryselector&&(b=this.runQuerySelector(a.queryselector));if(b)c=b.src||b.href;else if(!c)return!1;f=this.findResource(c);if(!f){BOOMR.debug("No resource matched","PageVars");e.mayRetry.push({handler:this,data:a});return!1}"slowest"===c&&BOOMR.addVar("dom.res.slowest",f.name);if("*"===a.start){for(i in f)f.hasOwnProperty(i)&&i.match(/(Start|End)$/)&&f[i]>0&&BOOMR.addVar(this.varname+"."+i.replace(/^(...).*(St|En).*$/,"$1$2"),Math.round(f[i]));return this.apply(f.duration)}if(a.relative_to_nt||"navigationStart"===a.start)g=0;else{g=parseFloat(f[a.start],10);if(!isNaN(g)&&0===g){BOOMR.debug("Start was 0 (not supported on this resource)","PageVars");return!1}}h=parseFloat(f[a.end],10);if(isNaN(g)||isNaN(h)){BOOMR.debug("Start and end were not numeric: "+g+", "+h,"PageVars");return!1}if(0===h){BOOMR.debug("End was 0 (not supported on this resource)","PageVars");return!1}BOOMR.debug("Final values: "+g+", "+h,"PageVars");BOOMR.addVar(this.varname+"_st",Math.round(g));return this.apply(h-g)},findResource:function(b,c){var d,e,f,g;c||(c=a);try{g=c.location&&c.location.href;if(!("performance"in c&&c.performance&&c.performance.getEntriesByName&&c.performance.getEntriesByType))return null;f=c.performance.getEntriesByName(b)}catch(h){if(BOOMR.isCrossOriginError(h))return null;try{if("TypeError"===h.name&&"Invalid calling object"===h.message&&c.document.location.pathname.match(/\.pdf$/))return null}catch(i){}BOOMR.addError(h,"PageVars.findResource");return null}if(f&&f.length>0)return f[0];f=c.performance.getEntriesByType("resource");if(f&&f.length>0)for(d=0;d<f.length;d++)if("slowest"===b)(!e||f[d].duration>e.duration)&&(e=f[d]);else if(f[d].name&&this.checkURLPattern(b,f[d].name)){e=f[d];b=e.name;break}if(e)return e;if(c.frames)for(d=0;d<c.frames.length;d++){e=this.findResource(b,c.frames[d]);if(e)return e}},UserTiming:function(a){var b,c;if(!a.parameter2)return!1;if(!d||"function"!=typeof d.getEntriesByType){BOOMR.debug("This browser does not support UserTiming","PageVars");return!1}if(!this.checkURLPattern(a.parameter1))return!1;b=d.getEntriesByType("mark");for(c=0;b&&c<b.length;c++)if(b[c].name===a.parameter2)return this.apply(b[c].startTime);b=d.getEntriesByType("measure");for(c=0;b&&c<b.length;c++)if(b[c].name===a.parameter2){b[c].startTime&&BOOMR.addVar(this.varname+"_st",Math.round(b[c].startTime));return this.apply(b[c].duration)}e.mayRetry.push({handler:this,data:a})}};BOOMR.utils.runXPath=f.prototype.runXPath;BOOMR.utils.runQuerySelector=f.prototype.runQuerySelector;f.prototype.XPath=f.prototype.URLPatternType;f.prototype.URLQueryParam=f.prototype.URLPattern;e={pageGroups:[],abTests:[],customTimers:[],customMetrics:[],customDimensions:[],complete:!1,initialized:!1,configReceived:!1,rerunAfterConfig:!1,unloadFired:!1,onloadfired:!1,defaultDecimal:g,defaultThousands:h,autorun:!0,mayRetry:[],done:function(d,g){var h,j,k,l,m,n=e;if(e.configReceived){k={pageGroups:{varname:"h.pg",stopOnFirst:!0},abTests:{varname:"h.ab",stopOnFirst:!0},customMetrics:{cleanUpRE:i},customDimensions:{sanitizeRE:/[^\w\. \-]/g},customTimers:{cleanUpRE:i,method:BOOMR.plugins.RT.setTimer,ctx:BOOMR.plugins.RT,preProcessor:function(a){return Math.round("number"==typeof a?a:parseFloat(a,10))}}};if("xhr"===g||!this.complete){BOOMR_check_doc_domain();if("xhr"!==g||BOOMR.utils.inArray(d.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){b=a.location;this.complete=!0}else{n=e.extractXHRParams(d,k);if(null===n)return;e.complete=!1;m=d.data?d.data:d;if(m.url){b=c.createElement("a");b.href=m.url;n.pageGroups=e.pageGroups;k.pageGroups.varname="xhr.pg";k.pageGroups.preProcessor=function(a){if(a&&a.match(/_subresource$/)){a=a.replace(/_subresource$/,"");d.subresource="passive"}return a}}}e.clearMetrics();e.mayRetry=[];for(j in k)if(k.hasOwnProperty(j)){l=new f(k[j]);for(h=0;h<n[j].length;h++)if(("xhr"===g||!n[j][h].only_xhr)&&l.handle(n[j][h])&&k[j].stopOnFirst){n[j][h].subresource&&"xhr"===g&&d&&(d.subresource="active");break}}BOOMR.sendBeacon()}}else e.rerunAfterConfig={edata:d,ename:g}},retry:function(){var a,b,c,d=e.mayRetry;e.mayRetry=[];for(a=0;a<d.length;a++)if(d[a]){c=b=null;try{b=d[a].handler;c=d[a].data;b[c.type](c)}catch(f){BOOMR.addError(f,"PageVars.retry."+(c?c.type:"?")+"."+(b?b.varname:"?"))}}},clearMetrics:function(){var a,b;for(a=0;a<e.customMetrics.length;a++){b=e.customMetrics[a].label;BOOMR.removeVar(b)}BOOMR.removeVar("dom.res.slowest");for(a=0;a<e.customTimers.length;a++){b=e.customTimers[a].label+"_st";BOOMR.removeVar(b)}BOOMR.removeVar("h.pg","h.ab","xhr.pg")},onload:function(){this.onloadfired=!0},extractXHRParams:function(a,b){var c,d,g,h,i,j,k,l,m,n,o;if(!a)return null;o=a.data?a.data:a;if(!(o.url||o.timers&&o.timers.length||o.metrics&&o.metrics.length||o.dimensions&&o.dimensions.length))return null;c={pageGroups:[],abTests:e.abTests,customTimers:[],customMetrics:[],customDimensions:[]};d={timers:{impl:"customTimers",data:o.timers},metrics:{impl:"customMetrics",data:o.metrics},dimensions:{impl:"customDimensions",data:o.dimensions}};for(g in d)if(d.hasOwnProperty(g)){h=d[g];if(h.data&&h.data.length)for(m=0;m<h.data.length;m++){k=h.data[m].split(/\s*=\s*/);i=k[0];j=k[1];for(l=0;l<e[h.impl].length;l++)if(e[h.impl][l].name===i)if(void 0===j)c[h.impl].push(e[h.impl][l]);else{n=new f(b[h.impl]);n.varname=e[h.impl].label;n.apply(n.cleanUp(j));
n=null}}else if(o.url)for(l=0;l<e[h.impl].length;l++)e[h.impl][l].xhr_ok&&c[h.impl].push(e[h.impl][l])}return c},onunload:function(){e.unloadFired=!0;return this}};BOOMR.plugins.PageParams={init:function(f){var g=["pageGroups","abTests","customTimers","customMetrics","customDimensions","autorun","defaultDecimal","defaultThousands"];a=BOOMR.window;b=a.location;c=a.document;d=BOOMR.getPerformance();BOOMR.utils.pluginConfig(e,f,"PageParams",g);e.complete=!1;"undefined"!=typeof f.autorun&&(e.autorun=f.autorun);if(e.initialized){e.configReceived=!0;if(e.rerunAfterConfig){BOOMR.debug("Re-running now that config came in");e.done(e.rerunAfterConfig.edata,e.rerunAfterConfig.ename);e.rerunAfterConfig=!1;return}}if(e.onloadfired)e.autorun&&e.done("load");else{BOOMR.subscribe("page_ready",e.onload,"load",e);BOOMR.subscribe("page_ready",e.done,"load",e)}if(!e.initialized){BOOMR.subscribe("before_unload",e.onunload,null,e);BOOMR.subscribe("before_unload",e.done,"unload",e);BOOMR.subscribe("onbeacon",e.clearMetrics,null,e);BOOMR.subscribe("xhr_load",e.done,"xhr",e);e.initialized=!0}return this},is_complete:function(){e.mayRetry.length>0&&e.retry();return e.configReceived||e.unloadFired}}}}();!function(){function a(a){if(!a)return null;a.href=a.href;var b=a.pathname;"/"!==b.charAt(0)&&(b="/"+b);return b}function b(b){return b.href&&b.href.match(/^(about:|javascript:|data:)/i)?!0:BOOMR.xhr_excludes.hasOwnProperty(b.href)||BOOMR.xhr_excludes.hasOwnProperty(b.hostname)||BOOMR.xhr_excludes.hasOwnProperty(a(b))}function c(){this.watch=0;this.timer=null;this.pending_events=[]}function d(){BOOMR.subscribe("click",function(){if(!l){var a={timing:{},initiator:"click"};if(BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest){a.timing.requestStart=BOOMR.now();i.addEvent(a)}}})}function e(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==BOOMR.window.XMLHttpRequest)if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===BOOMR.window.XMLHttpRequest){BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest;c.start()}else{BOOMR.orig_XMLHttpRequest=BOOMR.window.XMLHttpRequest;c.start();d();BOOMR.proxy_XMLHttpRequest=function(){var a,c,d,e={timing:{},initiator:"xhr"};a=new BOOMR.orig_XMLHttpRequest;c=a.open;d=a.send;a.open=function(d,f,g){function loadFinished(){var a,b;if(!e.timing.loadEventEnd){e.status&&BOOMR.fireEvent("onxhrerror",e);e.timing.loadEventEnd=BOOMR.now();a=BOOMR.getResourceTiming(e.url);if(a){b=BOOMR.getPerformance().timing.navigationStart;0!==a.responseEnd&&(e.timing.responseEnd=Math.round(b+a.responseEnd));0!==a.responseStart&&(e.timing.responseStart=Math.round(b+a.responseStart));0!==a.startTime&&(e.timing.requestStart=Math.round(b+a.startTime))}e.index>-1?i.load_finished(e.index,e.timing.responseEnd):n?i.sendResource(e):(!l||m)&&i.addEvent(e)}}function h(b,c){a.addEventListener(b,function(){if("readystatechange"===b){e.timing[o[a.readyState]]=BOOMR.now();if(4===a.readyState&&0!==a.status){(a.status<200||a.status>=400)&&(e.status=a.status);loadFinished()}}else{e.status=void 0===c?a.status:c;loadFinished()}},!1)}j.href=f;if(b(j))return c.apply(a,arguments);void 0===g&&(g=!0);l&&i.watch&&!n&&i.add_event_resource(e);g&&h("readystatechange");h("load");h("timeout",q);h("error",s);h("abort",r);e.url=j.href;e.method=d;delete e.status;g||(e.synchronous=!0);try{return c.apply(a,arguments)}catch(k){e.status=t;loadFinished()}};a.send=function(){e.timing.requestStart=BOOMR.now();return"undefined"==typeof e.status||e.status!==t?d.apply(a,arguments):void 0};a.resource=e;return a};BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype;BOOMR.window.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest}}function f(){BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==BOOMR.window.XMLHttpRequest&&(BOOMR.window.XMLHttpRequest=BOOMR.orig_XMLHttpRequest)}function g(a){a.initiator="xhr";BOOMR.responseEnd(a)}var h,i,j,k,l=!1,m=!1,n=!1,o=["uninitialized","open","responseStart","domInteractive","responseEnd"],p=1e3,q=-1001,r=-999,s=-998,t=-997,u=["xmlhttprequest","script"];if(window.XMLHttpRequest&&(new XMLHttpRequest).addEventListener){BOOMR=window.BOOMR||{};if(!BOOMR.plugins.AutoXHR){c.stop=function(){if(c.observer&&c.observer.observer){c.observer.observer.disconnect();c.observer=null}};c.start=function(){c.observer=BOOMR.utils.addObserver(h,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]},null,i.mutation_cb,null,i);BOOMR.subscribe("page_unload",c.stop,null,c)};c.prototype.addEvent=function(a){var b,d,e={type:a.initiator,resource:a,nodes_to_wait:0,resources:[],complete:!1},f=this.pending_events.length;for(b=f-1;b>=0;b--)if(this.pending_events[b]&&!this.pending_events[b].complete){d=this.pending_events[b];break}if(d)if("click"===d.type){if(0===d.nodes_to_wait||!d.resource.url){this.pending_events[b]=void 0;return null}}else if("xhr"===d.type){if("click"===e.type)return null}else if(BOOMR.utils.inArray(d.type,BOOMR.constants.BEACON_TYPE_SPAS)&&"xhr"===e.type)return null;this.watch++;this.pending_events.push(e);if(c.observer){BOOMR.utils.inArray(e.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(p,f):this.setTimeout(50,f);return f}if(BOOMR.utils.inArray(e.type,BOOMR.constants.BEACON_TYPE_SPAS)){c.start();this.setTimeout(p,f);return f}a.url&&a.timing.loadEventEnd&&this.sendEvent(f);return null};c.prototype.sendEvent=function(a){var b=this.pending_events[a],c=this;if(b&&!b.complete){b.complete=!0;this.watch--;this.clearTimeout();if(BOOMR.hasVar("h.cr")){b.resource.resources=b.resources;"spa"===b.type&&0===b.resources.length&&(b.resource.timing.loadEventEnd=BOOMR.now()-p);this.sendResource(b.resource,a)}else setTimeout(function(){c.sendEvent(a)},5e3)}};c.prototype.sendResource=function(a,b){var c=this,d=a.timing?a.timing.requestStart:void 0,e=function(e){e&&(a.timing.loadEventEnd=BOOMR.now());if(BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_supported()&&a.timing&&a.timing.requestStart){var f=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(a.timing.requestStart,a.timing.loadEventEnd);BOOMR.addVar("restiming",JSON.stringify(f))}a.onComplete&&a.onComplete();BOOMR.utils.inArray(a.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&c.calculateSpaTimings(a);BOOMR.responseEnd(a,d,a);b&&(c.pending_events[b]=void 0)};if(a.wait)a.waitComplete=function(){e(!0)};else{if(BOOMR.utils.inArray(a.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&h&&h.readyState&&"complete"!==h.readyState){BOOMR.window.addEventListener("load",function(){e(!0)});return}e(!1)}};c.prototype.calculateSpaTimings=function(a){var b=BOOMR.getPerformance();if(b&&b.timing)if("spa_hard"===a.initiator){a.timing.responseEnd=b.timing.responseStart;a.timing.fetchStart=b.timing.fetchStart}else{if(!BOOMR.plugins.ResourceTiming)return;var c=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(a.timing.requestStart,a.timing.loadEventEnd,k.spaBackEndResources),d=Math.round(a.timing.loadEventEnd-a.timing.requestStart);if(!c||!c.length){BOOMR.plugins.ResourceTiming.is_supported()&&(a.timers={t_resp:0,t_page:d,t_done:d});return}var e=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(c)),f=d-e;if(0>e||0>d)return;a.timers={t_resp:e,t_page:f,t_done:d}}};c.prototype.setTimeout=function(a,b){var c=this;if(a){this.clearTimeout();this.timer=setTimeout(function(){c.timedout(b)},a)}};c.prototype.timedout=function(a){this.clearTimeout();var b=this.pending_events[a];if(b&&BOOMR.utils.inArray(b.type,BOOMR.constants.BEACON_TYPE_SPAS.concat("xhr")))"xhr"===b.type?this.sendEvent(a):BOOMR.utils.inArray(b.type,BOOMR.constants.BEACON_TYPE_SPAS)&&0===b.nodes_to_wait&&this.sendEvent(a);else{this.watch>0&&this.watch--;this.pending_events[a]=void 0}};c.prototype.clearTimeout=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};c.prototype.load_cb=function(a,b){var c,d,e=BOOMR.now();c=a.target||a.srcElement;if(c&&c._bmr){d=c._bmr.idx;b="undefined"!=typeof b?b:c._bmr.res||0;if(!c._bmr.end[b]){c._bmr.end[b]=e;this.load_finished(d,e)}}};c.prototype.load_finished=function(a,b){var c=this.pending_events[a];if(c){c.nodes_to_wait--;if(0===c.nodes_to_wait){c.resource.timing.loadEventEnd=b||BOOMR.now();BOOMR.utils.inArray(c.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(p,a):this.sendEvent(a)}}};c.prototype.wait_for_node=function(a,c){var d,e,f,g,h,i,k=this,m=!1,n=!1;if(a.nodeName.match(/^(IMG|SCRIPT|IFRAME)$/)||"LINK"===a.nodeName&&a.rel&&a.rel.match(/\<stylesheet\>/i)){a._bmr&&a._bmr.res&&a._bmr.end[a._bmr.res]&&(n=!0);h=a.src||a.href;if("IMG"===a.nodeName){if(a.naturalWidth&&!n)return!1;if(""===a.getAttribute("src"))return!1}if(!h||h.match(/^(about:|javascript:|data:)/i))return!1;d=this.pending_events[c];if(!d)return!1;i=d.resources.length;a._bmr||(a._bmr={end:{}});d.urls||(d.urls={});if(d.urls[h])return!1;if("SCRIPT"===a.nodeName&&l)return!1;if(!d.resource.url&&("SCRIPT"===a.nodeName||"IMG"===a.nodeName)){j.href=h;if(b(j))return!1;d.resource.url=j.href}a._bmr.res=i;a._bmr.idx=c;a.addEventListener("load",function(a){k.load_cb(a,i)});a.addEventListener("error",function(a){k.load_cb(a,i)});d.nodes_to_wait++;d.resources.push(a);d.urls[h]=1;m=!0}else if(a.nodeType===Node.ELEMENT_NODE){e=a.getElementsByTagName("IMG");if(e&&e.length)for(f=0,g=e.length;g>f;f++)m|=this.wait_for_node(e[f],c)}return m};c.prototype.add_event_resource=function(a){var b,c=this.pending_events.length-1;if(0>c)return-1;b=this.pending_events[c];if(!b)return-1;if(!a)return-1;b.nodes_to_wait++;a.index=c;return c};c.prototype.mutation_cb=function(a){var b,c,d;if(!this.watch)return!0;b=this;c=this.pending_events.length-1;if(0>c||!this.pending_events[c])return!0;d=this.pending_events[c];"undefined"==typeof d.interesting&&(d.interesting=!1);if(a&&a.length){d.resource.timing.domComplete=BOOMR.now();a.forEach(function(a){var e,f,g;if("attributes"===a.type)d.interesting|=b.wait_for_node(a.target,c);else if("childList"===a.type){f=a.addedNodes.length;for(e=0;f>e;e++)d.interesting|=b.wait_for_node(a.addedNodes[e],c);f=a.removedNodes.length;for(e=0;f>e;e++){g=a.removedNodes[e];"IFRAME"===g.nodeName&&g._bmr&&b.load_cb({target:g,type:"removed"})}}})}d.interesting||this.setTimeout(p,c);return!0};c.prototype.queue_is_empty=function(){if(0===this.pending_events.length)return!0;var a=this.pending_events.length-1;return this.pending_events[a]?0===this.pending_events[a].nodes_to_wait?!0:!1:!0};i=new c;k={spaBackEndResources:u};BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(a){var b;h=BOOMR.window.document;j=BOOMR.window.document.createElement("A");BOOMR.utils.pluginConfig(k,a,"AutoXHR",["spaBackEndResources"]);BOOMR.instrumentXHR=e;BOOMR.uninstrumentXHR=f;m=a.instrument_xhr;if(BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks){var c=BOOMR.plugins.SPA.supported_frameworks();for(b=0;b<c.length;b++){var d=c[b];if(a[d]&&a[d].enabled){l=!0;break}}}n=a.AutoXHR&&a.AutoXHR.alwaysSendXhr;if(n&&m&&BOOMR.xhr&&"function"==typeof BOOMR.xhr.stop){var i=BOOMR.xhr.stop(g);if(!i||!i.length)return;var o=function(){if(BOOMR.hasCrumb())for(b=0;b<i.length;b++)g(i[b]);else setTimeout(o,1e3)};BOOMR.setImmediate(o)}if(l){n||(m=!1);BOOMR.instrumentXHR()}else m?BOOMR.instrumentXHR():m===!1&&BOOMR.uninstrumentXHR();BOOMR.registerEvent("onxhrerror")},getMutationHandler:function(){return i},getPathname:a,enableAutoXhr:function(){m=!0}}}}}();!function(){var a,b=!1,c=!1,d=!1,e="",f=!1,g=!0,h=!1,i=!1,j=[];BOOMR.plugins.SPA||(BOOMR.plugins.SPA={is_complete:function(){return!0},init:function(a){if(a&&a.instrument_xhr){f=a.instrument_xhr;c&&f&&BOOMR.plugins.AutoXHR.enableAutoXhr()}},register:function(a){j.push(a)},supported_frameworks:function(){return j},hook:function(a,c){c=c||{};if(b)return this;if(a){f&&BOOMR.plugins.AutoXHR.enableAutoXhr();d=!0;BOOMR.real_sendBeacon();BOOMR.addVar("http.initiator","spa_hard");g=!1;BOOMR.addVar("spa.missed","1");BOOMR.page_ready()}"function"==typeof c.routeFilter&&(h=c.routeFilter);"function"==typeof c.routeChangeWaitFilter&&(i=c.routeChangeWaitFilter);b=!0;return this},route_change:function(){if(h)try{if(!h.apply(null,arguments))return}catch(b){BOOMR.addError(b,"SPA.route_change.routeFilter")}c=!0;var j=d?BOOMR.now():BOOMR.plugins.RT.navigationStart(),k=e?e:BOOMR.window.document.URL,l={timing:{requestStart:j},initiator:g?"spa_hard":"spa",url:k};g=!1;d||(l.onComplete=function(){d=!0});if(i)try{if(i.apply(null,arguments)){l.wait=!0;a=l}}catch(b){BOOMR.addError(b,"SPA.route_change.routeChangeWaitFilter")}l.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(l);f&&BOOMR.plugins.AutoXHR.enableAutoXhr()},last_location:function(a){e=a},wait_complete:function(){if(a){a.wait=!1;a.waitComplete&&a.waitComplete();a=null}}})}(BOOMR.window);!function(){function a(a){function b(b){BOOMR.debug(a.$id+": "+b,"angular")}if("undefined"==typeof a)return!1;if(!BOOMR.plugins.AutoXHR||!BOOMR.plugins.SPA)return!1;b("Startup");a.$on("$routeChangeStart",function(a,e,f){if(c){b("$routeChangeStart: "+(e?e.templateUrl:""));BOOMR.plugins.SPA.route_change(a,e,f)}else d=!0});a.$on("$locationChangeStart",function(a,d){if(c){b("$locationChangeStart: "+d);BOOMR.plugins.SPA.last_location(d)}});a.$on("$stateChangeStart",function(a,e,f,g,h){if(c){b("$stateChangeStart: "+e);BOOMR.plugins.SPA.route_change(a,e,f,g,h)}else d=!0});a.$on("$stateChangeSuccess",function(a,d,e,f,g){if(c){var h=window.location.pathname+window.location.search;b("$stateChangeSuccess: "+h);BOOMR.plugins.SPA.last_location(h)}});return!0}var b=!1,c=!0,d=!1;if(!BOOMR.plugins.Angular&&"undefined"!=typeof BOOMR.plugins.SPA){BOOMR.plugins.SPA.register("Angular");BOOMR.plugins.Angular={is_complete:function(){return!0},hook:function(c,d,e){if(b)return this;if(a(c)){BOOMR.plugins.SPA.hook(d,e);b=!0}return this},disable:function(){c=!1;return this},enable:function(){c=!0;if(b&&d){d=!1;BOOMR.plugins.SPA.route_change()}return this}}}}(BOOMR.window);!function(){function a(a){function b(a){BOOMR.debug(a,"backbone")}if("undefined"==typeof BOOMR.window.Backbone||"undefined"==typeof a)return!1;if(!BOOMR.plugins.AutoXHR||!BOOMR.plugins.SPA)return!1;b("Startup");a.on("route",function(){if(c){b("route");BOOMR.plugins.SPA.route_change()}else d=!0});return!0}var b=!1,c=!0,d=!1;if(!BOOMR.plugins.Backbone&&"undefined"!=typeof BOOMR.plugins.SPA){BOOMR.plugins.SPA.register("Backbone");BOOMR.plugins.Backbone={is_complete:function(){return!0},hook:function(c,d,e){if(b)return this;if(a(c)){BOOMR.plugins.SPA.hook(d,e);b=!0}return this},disable:function(){c=!1;return this},enable:function(){c=!0;if(b&&d){d=!1;BOOMR.plugins.SPA.route_change()}return this}}}}(BOOMR.window);!function(){function a(a){function b(a){BOOMR.debug(a,"Ember")}function f(a){this._super(a);if(!d){e=!0;return!0}b("beforeModel");if(a&&a.intent&&a.intent.url){b("[beforeModel] LastLocation: "+a.intent.url);BOOMR.plugins.SPA.last_location(a.intent.url)}if(!c){BOOMR.plugins.SPA.route_change();c=!0}return!0}function g(a){this._super(a);if(!d){e=!0;return!0}b("willTransition");if(a&&a.intent&&a.intent.url){b("[willTransition] LastLocation: "+a.intent.url);BOOMR.plugins.SPA.last_location(a.intent.url)}if(!c){BOOMR.plugins.SPA.route_change();c=!0}return!0}function h(a){this._super(a);if(!d)return!0;b("didTransition");c=!1}if("undefined"==typeof a)return!1;if(!BOOMR.plugins.AutoXHR||!BOOMR.plugins.SPA)return!1;b("Startup");a.ApplicationRoute?a.ApplicationRoute.reopen({beforeModel:f,actions:{willTransition:g,didTransition:h}}):a.ApplicationRoute=BOOMR.window.Ember.Route.extend({beforeModel:f,actions:{willTransition:g,didTransition:h}});return!0}var b=!1,c=!1,d=!0,e=!1;if(!BOOMR.plugins.Ember&&"undefined"!=typeof BOOMR.plugins.SPA){BOOMR.plugins.SPA.register("Ember");BOOMR.plugins.Ember={is_complete:function(){return!0},hook:function(c,d,e){if(b)return this;if(a(c)){BOOMR.plugins.SPA.hook(d,e);b=!0}return this},disable:function(){d=!1;return this},enable:function(){d=!0;if(b&&e){e=!1;BOOMR.plugins.SPA.route_change()}return this}}}}();!function(){function a(a){BOOMR.debug(a,"History")}function b(){if(d.enabled)if(d.routeChangeInProgress)a("routeChangeInProgress, not triggering");else{a("routeChange triggered, sending route_change() event");d.routeChangeInProgress=!0;BOOMR.plugins.SPA.route_change()}else{a("Not enabled - we've missed a routeChange");d.hadMissedRouteChange=!0;d.routeChangeInProgress=!1}}function c(c){c||(c=BOOMR.window.history);var e={listen:c.listen,transitionTo:c.transitionTo,pushState:c.pushState,setState:c.setState,replaceState:c.replaceState,go:c.go};c.setState=function(){a("setState");b();e.setState.apply(this,arguments)};c.listen=function(){a("listen");b();e.listen.apply(this,arguments)};c.transitionTo=function(){a("transitionTo");b();e.transitionTo.apply(this,arguments)};c.pushState=function(c,d,f){a("pushState");b();e.pushState.apply(this,arguments)};c.replaceState=function(){a("replaceState");b();e.replaceState.apply(this,arguments)};c.go=function(){a("go");b();e.go.apply(this,arguments)};BOOMR.window.addEventListener("hashchange",function(){a("hashchange");b()});BOOMR.subscribe("onbeacon",function(){a("Beacon sending, resetting routeChangeInProgress.");d.routeChangeInProgress=!1});return!0}var d={auto:!1,enabled:!0,hooked:!1,routeHooked:!1,hadMissedRouteChange:!1,routeChangeInProgress:!1};if(!BOOMR.plugins.History&&"undefined"!=typeof BOOMR.plugins.SPA&&"undefined"!=typeof BOOMR.plugins.AutoXHR&&BOOMR.window&&BOOMR.window.history){BOOMR.plugins.SPA.register("History");BOOMR.plugins.History={is_complete:function(){return!0},hook:function(a,b,e){if(d.hooked)return this;if(c(a)){BOOMR.plugins.SPA.hook(b,e);d.hooked=!0}return this},init:function(a){BOOMR.utils.pluginConfig(d,a,"History",["auto","enabled"]);d.auto&&d.enabled&&this.hook(void 0,!1,{})},disable:function(){d.enabled=!1;return this},enable:function(){d.enabled=!0;if(d.hooked&&d.hadMissedRouteChange){d.hadMissedRouteChange=!1;BOOMR.plugins.SPA.route_change();d.routeChangeInProgress=!0;a("Hooked and hadMissedRouteChange sending route_change!")}return this}}}}();!function(a){var b,c,d=1800,e=604800;if(!BOOMR.plugins.RT){c={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:e,session_exp:d,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,loadTime:0,oboError:0,sessionHistory:[],t_start:void 0,cached_t_start:void 0,cached_xhr_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,beacon_url:void 0,next_beacon_url:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},addedVars:[],updateCookie:function(a,b){var e,f,g,h;if(!this.cookie)return!1;g=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{};for(h in g)g.hasOwnProperty(h)&&(isNaN(parseInt(h,10))||delete g[h]);if("object"==typeof a)for(h in a)if(a.hasOwnProperty(h))if(void 0===a[h])g.hasOwnProperty(h)&&delete g[h];else{("nu"===h||"r"===h)&&(a[h]=BOOMR.utils.hashQueryString(a[h],!0));g[h]=a[h]}g.dm=BOOMR.session.domain;g.si=BOOMR.session.ID;g.ss=BOOMR.session.start;g.sl=BOOMR.session.length;c.session_exp!==d&&(g.se=c.session_exp);BOOMR.session.rate_limited&&(g.rl=1);g.tt=this.loadTime;g.obo=this.oboError;this.sessionHistory&&(g.sh=this.sessionHistory.join(","));f=BOOMR.now();if(b){g[b]=f;c.lastActionTime=f}this.beacon_url&&(g.bcn=this.beacon_url);BOOMR.debug("Setting cookie (timer="+b+")\n"+BOOMR.utils.objectToString(g),"rt");if(!BOOMR.utils.setCookie(this.cookie,g,this.cookie_exp)){BOOMR.error("cannot set start cookie","rt");return!1}e=BOOMR.now();if(e-f>50){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "+f+" -> "+e,"rt")}return!0},refreshSession:function(a){a||(a=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)));if(a){a.ss?BOOMR.session.start=parseInt(a.ss,10):BOOMR.session.start=BOOMR.t_lstart||BOOMR.t_start;a.si&&a.si.match(/-/)&&(BOOMR.session.ID=a.si);a.sl&&(BOOMR.session.length=parseInt(a.sl,10));a.tt&&a.tt.match(/\d/)&&(this.loadTime=parseInt(a.tt,10));a.obo&&(this.oboError=parseInt(a.obo,10)||0);a.dm&&!BOOMR.session.domain&&(BOOMR.session.domain=a.dm);a.se&&(c.session_exp=parseInt(a.se,10)||d);a.sh&&(c.sessionHistory=a.sh.split(","));a.bcn&&(this.beacon_url=a.bcn);a.rl&&"1"===a.rl&&(BOOMR.session.rate_limited=!0)}},maybeResetSession:function(a,b){BOOMR.debug("Current session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt");BOOMR.debug("Timers: t_start="+b+", sessionLoad="+c.loadTime+", sessionError="+c.oboError+", lastAction="+c.lastActionTime,"rt");BOOMR.removeVar("rt.srst");var d=0;BOOMR.session.start&&BOOMR.session.length&&(d=(BOOMR.now()-BOOMR.session.start)/BOOMR.session.length);var e=1e3*c.session_exp;if(!BOOMR.session.start||b&&BOOMR.session.start>b||a-(c.lastActionTime||BOOMR.t_start)>e||d>e){BOOMR.addVar("rt.srst",BOOMR.session.ID+"-"+BOOMR.session.start+":"+BOOMR.session.length+":"+c.oboError+":"+c.loadTime+":"+b+":"+c.lastActionTime+":"+a+":"+c.sessionHistory.join(","));c.addedVars.push("rt.srst");BOOMR.session.start=b||BOOMR.t_lstart||BOOMR.t_start;BOOMR.session.length=0;BOOMR.session.rate_limited=!1;c.loadTime=0;c.oboError=0;c.beacon_url=c.next_beacon_url;c.lastActionTime=a;c.sessionHistory=[];c.updateCookie({rl:void 0,sl:BOOMR.session.length,ss:BOOMR.session.start,tt:c.loadTime,obo:c.oboError,bcn:c.beacon_url,sh:c.sessionHistory.join(",")})}BOOMR.debug("New session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt");BOOMR.debug("Timers: t_start="+b+", sessionLoad="+c.loadTime+", sessionError="+c.oboError,"rt")},initFromCookie:function(){var a,c;c=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie));if(c){c.s=Math.max(+c.ld||0,Math.max(+c.ul||0,+c.cl||0));BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(c),"rt");if(c.s&&(c.r||c.nu)){this.r=c.r;a=BOOMR.utils.hashQueryString(b.URL,!0);BOOMR.debug(this.r+" =?= "+this.r2,"rt");BOOMR.debug(c.s+" <? "+(+c.cl+15),"rt");BOOMR.debug(c.nu+" =?= "+a,"rt");if(!this.strict_referrer||c.nu&&c.nu===a&&c.s<+c.cl+15||c.s===+c.ul&&this.r===this.r2){this.t_start=c.s;+c.hd>c.s&&(this.t_fb_approx=parseInt(c.hd,10))}else this.t_start=this.t_fb_approx=void 0}c.s&&(this.lastActionTime=c.s);this.refreshSession(c);this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0,ld:void 0,rl:void 0});this.maybeResetSession(BOOMR.now())}},incrementSessionDetails:function(){BOOMR.session.length++;isNaN(c.timers.t_done.delta)?c.oboError++:c.loadTime+=c.timers.t_done.delta;c.sessionHistory.unshift(BOOMR.now()+"="+BOOMR.session.length+":"+c.oboError+":"+c.loadTime);c.sessionHistory.length>5&&(c.sessionHistory.length=5)},getBoomerangTimings:function(){function a(a,b){var c=Math.round(a?a:0),d=Math.round(b?b:0);c=0===c?0:c-d;return c?c:""}var b,d,e,f,g;if(BOOMR.t_start){BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start);BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end);BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart);BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)}}try{if(window.performance&&window.performance.getEntriesByName){d={"rt.bmr":BOOMR.url,"rt.cnf":BOOMR.config_url};for(e in d)if(d.hasOwnProperty(e)&&d[e]){b=window.performance.getEntriesByName(d[e]);if(!b||0===b.length||!b[0])continue;b=b[0];f=a(b.startTime,0);g=[f,a(b.responseEnd,f),a(b.responseStart,f),a(b.requestStart,f),a(b.connectEnd,f),a(b.secureConnectionStart,f),a(b.connectStart,f),a(b.domainLookupEnd,f),a(b.domainLookupStart,f),a(b.redirectEnd,f),a(b.redirectStart,f)].join(",").replace(/,+$/,"");BOOMR.addVar(e,g);c.addedVars.push(e)}}}catch(h){BOOMR.addError(h,"rt.getBoomerangTimings")}},checkPreRender:function(){if("prerender"!==BOOMR.visibilityState())return!1;BOOMR.plugins.RT.startTimer("t_load",this.navigationStart);BOOMR.plugins.RT.endTimer("t_load");BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart);BOOMR.plugins.RT.startTimer("t_postrender");return!0},initFromNavTiming:function(){var b,c,d;if(!this.navigationStart){c=BOOMR.getPerformance();c&&c.navigation&&(this.navigationType=c.navigation.type);if(c&&c.timing)b=c.timing;else if(a.chrome&&a.chrome.csi&&a.chrome.csi().startE){b={navigationStart:a.chrome.csi().startE};d="csi"}else if(a.gtbExternal&&a.gtbExternal.startE()){b={navigationStart:a.gtbExternal.startE()};d="gtb"}if(b){BOOMR.addVar("rt.start",d||"navigation");this.navigationStart=b.navigationStart||b.fetchStart||void 0;this.responseStart=b.responseStart||void 0;navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=b.unloadEventStart||b.fetchStart||void 0)}else BOOMR.warn("This browser doesn't support the WebTiming API","rt")}},validateLoadTimestamp:function(a,b,c){var d;if(b&&b.timing&&b.timing.loadEventEnd)return b.timing.loadEventEnd;if(!("xhr"!==c||b&&BOOMR.utils.inArray(b.initiator,BOOMR.constants.BEACON_TYPE_SPAS)))return a;if(BOOMR.loadedLate){d=BOOMR.getPerformance();if(!d||!d.timing)return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||a;if(d.timing.loadEventStart&&d.timing.loadEventStart<BOOMR.t_end)return d.timing.loadEventStart}return a},setPageLoadTimers:function(a,b,d){var e,f,g,h;if("xhr"!==a){c.initFromCookie();c.initFromNavTiming();if(c.checkPreRender())return!1}if("xhr"===a){if(d.timers)for(var i in d.timers)d.timers.hasOwnProperty(i)&&BOOMR.plugins.RT.setTimer(i,d.timers[i]);else if(d&&d.timing){e=d.timing.responseEnd;f=d.timing.fetchStart;g=BOOMR.getPerformance();var j=BOOMR.getResourceTiming(d.url);if(j&&g){h=g.timing.navigationStart;e=Math.round(h+j.responseEnd);f=Math.round(h+j.startTime)}}}else c.responseStart?e=c.responseStart:c.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):c.t_fb_approx&&(e=c.t_fb_approx);if(e){f?BOOMR.plugins.RT.setTimer("t_resp",f,e):BOOMR.plugins.RT.endTimer("t_resp",e);c.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",c.timers.t_load.end-e):e>b?BOOMR.addVar("t_page.inv",1):BOOMR.plugins.RT.setTimer("t_page",b-e)}if(c.timers.hasOwnProperty("t_postrender")){BOOMR.plugins.RT.endTimer("t_postrender");BOOMR.plugins.RT.endTimer("t_prerender")}return!0},setSupportingTimestamps:function(a){a&&BOOMR.addVar("rt.tstart",a);"number"==typeof c.t_start&&c.t_start!==a&&BOOMR.addVar("rt.cstart",c.t_start);BOOMR.addVar("rt.bstart",BOOMR.t_start);BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart);BOOMR.addVar("rt.end",c.timers.t_done.end)},determineTStart:function(a,b){var d;if("xhr"===a){b&&b.name&&c.timers[b.name]?d=c.timers[b.name].start:b&&b.timing&&b.timing.requestStart&&(d=b.timing.requestStart);"undefined"==typeof d&&b&&BOOMR.utils.inArray(b.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual");c.cached_xhr_start=d}else{if(c.navigationStart)d=c.navigationStart;else if(c.t_start&&2!==c.navigationType){d=c.t_start;BOOMR.addVar("rt.start","cookie")}else if(c.cached_t_start)d=c.cached_t_start;else{BOOMR.addVar("rt.start","none");d=void 0}c.cached_t_start=d}BOOMR.debug("Got start time: "+d,"rt");return d},page_ready:function(){this.onloadfired=!0},check_visibility:function(){var a=BOOMR.visibilityState();"visible"===a&&(c.visiblefired=!0);if("prerender"===c.visibilityState&&"prerender"!==a&&c.onloadfired&&c.autorun){BOOMR.addVar("vis.pre","1");BOOMR.plugins.RT.done(null,"visible")}c.visibilityState=a},page_unload:function(a){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt");this.unloadfired||BOOMR.plugins.RT.done(a,"unload");this.updateCookie({r:b.URL},"beforeunload"===a.type?"ul":"hd");this.unloadfired=!0},_iterable_click:function(a,b,d,e){var f;if(d){BOOMR.debug(a+" called with "+d.nodeName,"rt");for(;d&&d.nodeName.toUpperCase()!==b;)d=d.parentNode;if(d&&d.nodeName.toUpperCase()===b){BOOMR.debug("passing through","rt");this.refreshSession();this.maybeResetSession(BOOMR.now());f=e(d);this.updateCookie({nu:f},"cl");BOOMR.addVar("nu",BOOMR.utils.cleanupURL(f));c.addedVars.push("nu")}}},onclick:function(a){c._iterable_click("Click","A",a,function(a){return a.href})},onerror:function(){this.onloadfired&&(c.complete=!0)},onsubmit:function(a){c._iterable_click("Submit","FORM",a,function(a){var c=a.getAttribute("action")||b.URL||"";return c.match(/\?/)?c:c+"?"})},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start");if(c.addedVars&&c.addedVars.length>0){BOOMR.removeVar(c.addedVars);c.addedVars=[]}}};BOOMR.plugins.RT={init:function(d){BOOMR.debug("init RT","rt");a!==BOOMR.window&&(a=BOOMR.window);b=a.document;BOOMR.utils.pluginConfig(c,d,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]);d&&"undefined"!=typeof d.autorun&&(c.autorun=d.autorun);if(d&&d.beacon_url){(!c.beacon_url||d.force_beacon_url)&&(c.beacon_url=d.beacon_url);c.next_beacon_url=d.beacon_url}"undefined"!=typeof b&&(c.r=c.r2=BOOMR.utils.hashQueryString(b.referrer,!0));c.initFromCookie();if(c.initialized)return this;c.complete=!1;c.timers={};c.check_visibility();BOOMR.subscribe("page_ready",c.page_ready,null,c);BOOMR.subscribe("visibility_changed",c.check_visibility,null,c);BOOMR.subscribe("page_ready",this.done,"load",this);BOOMR.subscribe("xhr_load",this.done,"xhr",this);BOOMR.subscribe("dom_loaded",c.domloaded,null,c);BOOMR.subscribe("page_unload",c.page_unload,null,c);BOOMR.subscribe("click",c.onclick,null,c);BOOMR.subscribe("form_submit",c.onsubmit,null,c);BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this);BOOMR.subscribe("onbeacon",c.clear,null,c);BOOMR.subscribe("onerror",c.onerror,null,c);BOOMR.getBeaconURL=function(){return c.beacon_url};c.initialized=!0;return this},startTimer:function(a,b){if(a){"t_page"===a&&this.endTimer("t_resp",b);c.timers[a]={start:"number"==typeof b?b:BOOMR.now()}}return this},endTimer:function(a,b){if(a){c.timers[a]=c.timers[a]||{};void 0===c.timers[a].end&&(c.timers[a].end="number"==typeof b?b:BOOMR.now())}return this},setTimer:function(a,b,d){a&&("undefined"!=typeof d?c.timers[a]={start:b,end:d,delta:d-b}:c.timers[a]={delta:b});return this},addTimersToBeacon:function(a,b){var d,e,f=[];for(d in c.timers)if(c.timers.hasOwnProperty(d)){e=c.timers[d];if("number"!=typeof e.delta){"number"!=typeof e.start&&(e.start="xhr"===b?c.cached_xhr_start:c.cached_t_start);e.delta=e.end-e.start}if(isNaN(e.delta))continue;if(c.basic_timers.hasOwnProperty(d)){BOOMR.addVar(d,e.delta);c.addedVars.push(d)}else f.push(d+"|"+e.delta)}if(f.length){BOOMR.addVar("t_other",f.join(","));c.addedVars.push("t_other")}if("beacon"===b){c.timers={};c.complete=!1}},done:function(a,b){BOOMR.debug("Called done: "+b,"rt");var d,e,f=BOOMR.now(),g=!1;c.complete=!1;e=c.validateLoadTimestamp(f,a,b);if(("load"===b||"visible"===b||"xhr"===b)&&!c.setPageLoadTimers(b,e,a))return this;("load"===b||"visible"===b||"xhr"===b&&a&&BOOMR.utils.inArray(a.initiator,BOOMR.constants.BEACON_TYPE_SPAS))&&c.getBoomerangTimings();d=c.determineTStart(b,a);c.refreshSession();c.maybeResetSession(e,d);this.endTimer("t_done",e);a&&"xhr"===a.initiator&&this.setTimer("t_done",a.timing.requestStart,a.timing.loadEventEnd);BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld","http.errno","http.method","xhr.sync","rt.ss","rt.sl","rt.tt","rt.lt");c.setSupportingTimestamps(d);this.addTimersToBeacon(null,b);BOOMR.addVar("r",BOOMR.utils.cleanupURL(c.r));c.r2!==c.r&&BOOMR.addVar("r2",BOOMR.utils.cleanupURL(c.r2));"xhr"===b&&a&&a&&a.data&&(a=a.data);if("xhr"===b&&a){g=a.subresource;if(a.url){BOOMR.addVar("u",BOOMR.utils.cleanupURL(a.url.replace(/#.*/,"")));c.addedVars.push("u")}a.status&&(a.status<-1||a.status>=400)&&BOOMR.addVar("http.errno",a.status);a.method&&"GET"!==a.method&&BOOMR.addVar("http.method",a.method);a.headers&&BOOMR.addVar("http.hdr",a.headers);a.synchronous&&BOOMR.addVar("xhr.sync",1);a.initiator&&BOOMR.addVar("http.initiator",a.initiator);c.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")}if(g&&"passive"!==g){BOOMR.addVar("rt.subres",1);c.addedVars.push("rt.subres")}if("load"===b||"visible"===b||"xhr"===b&&!g||!c.onloadfired){
c.incrementSessionDetails();c.updateCookie(null,"ld")}BOOMR.addVar({"rt.tt":c.loadTime,"rt.obo":c.oboError,"rt.sh":c.sessionHistory.join(",")});c.addedVars.push("rt.tt","rt.obo","rt.sh");c.updateCookie();if("unload"===b){BOOMR.addVar("rt.quit","");c.onloadfired||BOOMR.addVar("rt.abld","");c.visiblefired||BOOMR.addVar("rt.ntvu","")}c.complete=!0;BOOMR.sendBeacon(c.beacon_url);return this},is_complete:function(){return c.complete},navigationStart:function(){c.navigationStart||c.initFromNavTiming();return c.navigationStart}}}}(window);!function(){var a,b;if(!BOOMR.plugins.BW){b=[{name:"image-0.png",size:11483,timeout:1400},{name:"image-1.png",size:40658,timeout:1200},{name:"image-2.png",size:164897,timeout:1300},{name:"image-3.png",size:381756,timeout:1500},{name:"image-4.png",size:1234664,timeout:1200},{name:"image-5.png",size:4509613,timeout:1200},{name:"image-6.png",size:9084559,timeout:1200}];b.end=b.length;b.start=0;b.l={name:"image-l.gif",size:35,timeout:1e3};a={base_url:"",timeout:15e3,nruns:5,latency_runs:10,user_ip:"",block_beacon:!1,test_https:!1,cookie_exp:604800,cookie:"BA",results:[],latencies:[],latency:null,runs_left:0,aborted:!1,complete:!0,running:!1,initialized:!1,ncmp:function(a,b){return a-b},iqr:function(a){var b,c,d,e,f=a.length-1,g=[];b=(a[Math.floor(.25*f)]+a[Math.ceil(.25*f)])/2;c=(a[Math.floor(.75*f)]+a[Math.ceil(.75*f)])/2;d=1.5*(c-b);if(0===d)return a;f++;for(e=0;f>e&&a[e]<c+d;e++)a[e]>b-d&&g.push(a[e]);return g},calc_latency:function(){var a,b,c,d,e,f,g,h=0,i=0;this.latencies.shift();g=this.iqr(this.latencies.sort(this.ncmp));b=g.length;BOOMR.debug("latencies: "+this.latencies,"bw");BOOMR.debug("lat_filtered: "+g,"bw");for(a=0;b>a;a++){h+=g[a];i+=g[a]*g[a]}c=Math.round(h/b);e=Math.sqrt(i/b-h*h/(b*b));f=(1.96*e/Math.sqrt(b)).toFixed(2);e=e.toFixed(2);d=Math.round((g[Math.floor(b/2)]+g[Math.ceil(b/2)])/2);return{mean:c,median:d,stddev:e,stderr:f}},calc_bw:function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p=0,q=[],r=[],s=0,t=0,u=0,v=0,w=[];for(a=0;a<this.nruns;a++)if(this.results[a]&&this.results[a].r){d=this.results[a].r;m=0;for(c=d.length-1;c>=0&&3>m&&d[c];c--)if(null!==d[c].t){p++;m++;n=1e3*b[c].size/d[c].t;q.push(n);if(d[c].t>this.latency.mean){o=1e3*b[c].size/(d[c].t-this.latency.mean);r.push(o)}else w.push(c+"_"+d[c].t)}}BOOMR.debug("got "+p+" readings","bw");BOOMR.debug("bandwidths: "+q,"bw");BOOMR.debug("corrected: "+r,"bw");if(q.length>3){q=this.iqr(q.sort(this.ncmp));r=this.iqr(r.sort(this.ncmp))}else{q=q.sort(this.ncmp);r=r.sort(this.ncmp)}BOOMR.debug("after iqr: "+q,"bw");BOOMR.debug("corrected: "+r,"bw");p=Math.max(q.length,r.length);for(a=0;p>a;a++){if(a<q.length){s+=q[a];t+=Math.pow(q[a],2)}if(a<r.length){u+=r[a];v+=Math.pow(r[a],2)}}p=q.length;e=Math.round(s/p);f=Math.sqrt(t/p-Math.pow(s/p,2));g=Math.round(1.96*f/Math.sqrt(p));f=Math.round(f);p=q.length-1;h=Math.round((q[Math.floor(p/2)]+q[Math.ceil(p/2)])/2);if(r.length<1){BOOMR.debug("not enough valid corrected datapoints, falling back to uncorrected","bw");w.push("l=="+r.length);i=e;j=f;k=g;l=h}else{p=r.length;i=Math.round(u/p);j=Math.sqrt(v/p-Math.pow(u/p,2));k=(1.96*j/Math.sqrt(p)).toFixed(2);j=j.toFixed(2);p=r.length-1;l=Math.round((r[Math.floor(p/2)]+r[Math.ceil(p/2)])/2)}BOOMR.debug("amean: "+e+", median: "+h,"bw");BOOMR.debug("corrected amean: "+i+", median: "+l,"bw");return{mean:e,stddev:f,stderr:g,median:h,mean_corrected:i,stddev_corrected:j,stderr_corrected:k,median_corrected:l,debug_info:w}},load_img:function(a,c,d){function e(b){return function(){d&&d.call(j,a,h,c,b);if(null!==b){i.onload=i.onerror=null;i=null;clearTimeout(g);j=d=null}}}var f=this.base_url+b[a].name+"?t="+BOOMR.now()+Math.random(),g=0,h=0,i=new Image,j=this;i.onload=e(!0);i.onerror=e(!1);g=setTimeout(e(null),b[a].timeout+Math.min(400,this.latency?this.latency.mean:400));h=BOOMR.now();i.src=f},lat_loaded:function(a,b,c,d){if(c===this.latency_runs+1){if(null!==d){var e=BOOMR.now()-b;this.latencies.push(e)}0===this.latency_runs&&(this.latency=this.calc_latency());BOOMR.setImmediate(this.iterate,null,null,this)}},img_loaded:function(a,c,d,e){if(d===this.runs_left+1&&!this.results[this.nruns-d].r[a])if(null!==e){var f={start:c,end:BOOMR.now(),t:null,state:e,run:d};e&&(f.t=f.end-f.start);this.results[this.nruns-d].r[a]=f;if(a>=b.end-1||void 0!==this.results[this.nruns-d].r[a+1]){BOOMR.debug(BOOMR.utils.objectToString(this.results[this.nruns-d],void 0,2),"bw");d===this.nruns&&(b.start=a);BOOMR.setImmediate(this.iterate,null,null,this)}else this.load_img(a+1,d,this.img_loaded)}else this.results[this.nruns-d].r[a+1]={t:null,state:null,run:d}},finish:function(){this.latency||(this.latency=this.calc_latency());var a=this.calc_bw(),b={bw:a.median_corrected,bw_err:parseFloat(a.stderr_corrected,10),lat:this.latency.mean,lat_err:parseFloat(this.latency.stderr,10),bw_time:Math.round(BOOMR.now()/1e3)};BOOMR.addVar(b);a.debug_info.length>0&&BOOMR.addVar("bw_debug",a.debug_info.join(","));!isNaN(b.bw)&&b.bw>0&&BOOMR.utils.setCookie(this.cookie,{ba:Math.round(b.bw),be:b.bw_err,l:b.lat,le:b.lat_err,ip:this.user_ip,t:b.bw_time},this.user_ip?this.cookie_exp:0);this.complete=!0;this.block_beacon===!0&&BOOMR.sendBeacon();this.running=!1},iterate:function(){if(!this.aborted)if(this.runs_left)if(this.latency_runs)this.load_img("l",this.latency_runs--,this.lat_loaded);else{this.results.push({r:[]});this.load_img(b.start,this.runs_left--,this.img_loaded)}else this.finish()},setVarsFromCookie:function(){var b,c,d,e,f,g,h,i,j;b=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(a.cookie));if(b&&b.ba){c=parseInt(b.ba,10);d=parseFloat(b.be,10);e=parseInt(b.l,10)||0;f=parseFloat(b.le,10)||0;g=b.ip.replace(/\.\d+$/,"0");h=parseInt(b.t,10);i=this.user_ip.replace(/\.\d+$/,"0");j=Math.round(BOOMR.now()/1e3);if(g===i&&h>=j-this.cookie_exp&&c>0){this.complete=!0;BOOMR.addVar({bw:c,lat:e,bw_err:d,lat_err:f,bw_time:h});return!0}}return!1}};BOOMR.plugins.BW={init:function(c){if(a.initialized)return this;BOOMR.utils.pluginConfig(a,c,"BW",["base_url","timeout","nruns","cookie","cookie_exp","test_https","block_beacon"]);c&&c.user_ip&&(a.user_ip=c.user_ip);if(!a.base_url)return this;b.start=0;a.runs_left=a.nruns;a.latency_runs=10;a.results=[];a.latencies=[];a.latency=null;a.complete=a.aborted=!1;BOOMR.removeVar("ba","ba_err","lat","lat_err");a.setVarsFromCookie()||BOOMR.subscribe("page_ready",this.run,null,this);a.initialized=!0;return this},run:function(){var b;if(a.running||a.complete)return this;b=BOOMR.window.document.createElement("a");b.href=a.base_url;if(!a.test_https&&"https:"===b.protocol){BOOMR.info("HTTPS detected, skipping bandwidth test","bw");a.complete=!0;a.block_beacon===!0&&BOOMR.sendBeacon();return this}a.base_url=b.href;a.running=!0;setTimeout(this.abort,a.timeout);a.iterate();return this},abort:function(){a.aborted=!0;a.running&&a.finish()},is_complete:function(){return a.block_beacon===!0?a.complete:!0}}}}();!function(){if(!BOOMR.plugins.NavigationTiming){var a={complete:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(b){var c;if(b&&"spa_hard"===b.initiator)a.done(b);else if(b&&"spa"===b.initiator)a.sendBeacon();else{var d,e,f=(BOOMR.window,{});if(b){b.data&&(b=b.data);c=BOOMR.getPerformance();if(b.url&&c&&c.getEntriesByName){d=c.getEntriesByName(b.url);if(d&&d.length>0){d=d[0];f={nt_red_st:d.redirectStart,nt_red_end:d.redirectEnd,nt_fet_st:d.fetchStart,nt_dns_st:d.domainLookupStart,nt_dns_end:d.domainLookupEnd,nt_con_st:d.connectStart,nt_con_end:d.connectEnd,nt_req_st:d.requestStart,nt_res_st:d.responseStart,nt_res_end:d.responseEnd};d.secureConnectionStart&&(f.nt_ssl_st=d.secureConnectionStart);for(e in f)if(f.hasOwnProperty(e)&&f[e]){f[e]+=c.timing.navigationStart;f[e]=Math.round(f[e])}}}if(b.timing){d=b.timing;f.nt_req_st||(f.nt_req_st=d.requestStart);f.nt_res_st||(f.nt_res_st=d.responseStart);f.nt_res_end||(f.nt_res_end=d.responseEnd);f.nt_domint=d.domInteractive;f.nt_domcomp=d.domComplete;f.nt_load_st=d.loadEventEnd;f.nt_load_end=d.loadEventEnd}for(e in f)f.hasOwnProperty(e)&&!f[e]&&delete f[e];BOOMR.addVar(f);try{a.addedVars.push.apply(a.addedVars,Object.keys(f))}catch(g){}a.sendBeacon()}}},done:function(){var b,c,d,e,f=BOOMR.window;if(this.complete)return this;a.addedVars=[];b=BOOMR.getPerformance();if(b&&b.timing&&b.navigation){BOOMR.info("This user agent supports NavigationTiming.","nt");c=b.navigation;d=b.timing;e={nt_red_cnt:c.redirectCount,nt_nav_type:c.type,nt_nav_st:d.navigationStart,nt_red_st:d.redirectStart,nt_red_end:d.redirectEnd,nt_fet_st:d.fetchStart,nt_dns_st:d.domainLookupStart,nt_dns_end:d.domainLookupEnd,nt_con_st:d.connectStart,nt_con_end:d.connectEnd,nt_req_st:d.requestStart,nt_res_st:d.responseStart,nt_res_end:d.responseEnd,nt_domloading:d.domLoading,nt_domint:d.domInteractive,nt_domcontloaded_st:d.domContentLoadedEventStart,nt_domcontloaded_end:d.domContentLoadedEventEnd,nt_domcomp:d.domComplete,nt_load_st:d.loadEventStart,nt_load_end:d.loadEventEnd,nt_unload_st:d.unloadEventStart,nt_unload_end:d.unloadEventEnd};d.secureConnectionStart&&(e.nt_ssl_st=d.secureConnectionStart);d.msFirstPaint&&(e.nt_first_paint=d.msFirstPaint);BOOMR.addVar(e);try{a.addedVars.push.apply(a.addedVars,Object.keys(e))}catch(g){}}if(f.chrome&&f.chrome.loadTimes){d=f.chrome.loadTimes();if(d){e={nt_spdy:d.wasFetchedViaSpdy?1:0,nt_cinf:d.connectionInfo,nt_first_paint:d.firstPaintTime};BOOMR.addVar(e);try{a.addedVars.push.apply(a.addedVars,Object.keys(e))}catch(g){}}}a.sendBeacon()},clear:function(){if(a.addedVars&&a.addedVars.length>0){BOOMR.removeVar(a.addedVars);a.addedVars=[]}this.complete=!1}};BOOMR.plugins.NavigationTiming={init:function(){if(!a.initialized){BOOMR.subscribe("page_ready",a.done,null,a);BOOMR.subscribe("xhr_load",a.xhr_done,null,a);BOOMR.subscribe("before_unload",a.done,null,a);BOOMR.subscribe("onbeacon",a.clear,null,a);a.initialized=!0}return this},is_complete:function(){return!0}}}}();!function(){function a(a){var b,c,d,e,f,g,h,i,j={};for(b in a){c=b;for(d=0;d<m.xssBreakWords.length;d++)c=c.replace(m.xssBreakWords[d],"$1"+p+"$2");if(a.hasOwnProperty(b)){e=a[b];f=c.split("");h=j;for(d=0;d<f.length;d++){g=f[d];i=h[g];"undefined"==typeof i?h=h[g]=d===f.length-1?e:{}:"string"==typeof i?h=h[g]={"|":i}:d===f.length-1?h[g]["|"]=e:h=h[g]}}}return j}function b(a,c){var d,e,f,g=0,h=[];for(d in a)a.hasOwnProperty(d)&&h.push(d);for(var i=0;i<h.length;i++){d=h[i];if("object"==typeof a[d]){e=b(a[d],!1);if(e){delete a[d];if(d===p){d=e.name;g++}else d+=e.name;a[d]=e.value}}g++}if(1===g){if(c){f={};f[d]=a[d];return f}return{name:d,value:a[d]}}return c?a:!1}function c(a,b){"number"!=typeof a&&(a=0);"number"!=typeof b&&(b=0);var c=Math.round(a?a:0),d=Math.round(b?b:0);return 0===c?0:c-d}function d(a){var b,c=0;try{b=a.location&&a.location.href;"performance"in a&&a.performance&&a.performance.timing&&a.performance.timing.navigationStart&&(c=a.performance.timing.navigationStart)}catch(d){}return c}function e(a,b,c,f){var g,h,i,j,k,l,m,n,o=[];"undefined"==typeof b&&(b=!0);"undefined"==typeof c&&(c=0);"undefined"==typeof f&&(f=0);if(f>10)return o;try{i=d(a);if(a.frames)for(g=0;g<a.frames.length;g++){j=d(a.frames[g]);k=0;j>i&&(k=c+(j-i));o=o.concat(e(a.frames[g],!1,k,f+1))}try{n=a.location&&a.location.href;if(!("performance"in a&&a.performance&&"function"==typeof a.performance.getEntriesByType))return o}catch(p){return o}if(b){h=a.performance.getEntriesByType("navigation");if(h&&1===h.length){l=h[0];o.push({name:a.location.href,startTime:0,initiatorType:"html",redirectStart:l.redirectStart,redirectEnd:l.redirectEnd,fetchStart:l.fetchStart,domainLookupStart:l.domainLookupStart,domainLookupEnd:l.domainLookupEnd,connectStart:l.connectStart,secureConnectionStart:l.secureConnectionStart,connectEnd:l.connectEnd,requestStart:l.requestStart,responseStart:l.responseStart,responseEnd:l.responseEnd})}else if(a.performance.timing){m=a.performance.timing;o.push({name:a.location.href,startTime:0,initiatorType:"html",redirectStart:m.redirectStart?m.redirectStart-m.navigationStart:0,redirectEnd:m.redirectEnd?m.redirectEnd-m.navigationStart:0,fetchStart:m.fetchStart?m.fetchStart-m.navigationStart:0,domainLookupStart:m.domainLookupStart?m.domainLookupStart-m.navigationStart:0,domainLookupEnd:m.domainLookupEnd?m.domainLookupEnd-m.navigationStart:0,connectStart:m.connectStart?m.connectStart-m.navigationStart:0,secureConnectionStart:m.secureConnectionStart?m.secureConnectionStart-m.navigationStart:0,connectEnd:m.connectEnd?m.connectEnd-m.navigationStart:0,requestStart:m.requestStart?m.requestStart-m.navigationStart:0,responseStart:m.responseStart?m.responseStart-m.navigationStart:0,responseEnd:m.responseEnd?m.responseEnd-m.navigationStart:0})}}var q=a.performance.getEntriesByType("resource"),r=[];for(g=0;q&&g<q.length;g++){m=q[g];r.push({name:m.name,initiatorType:m.initiatorType,startTime:m.startTime+c,redirectStart:m.redirectStart?m.redirectStart+c:0,redirectEnd:m.redirectEnd?m.redirectEnd+c:0,fetchStart:m.fetchStart?m.fetchStart+c:0,domainLookupStart:m.domainLookupStart?m.domainLookupStart+c:0,domainLookupEnd:m.domainLookupEnd?m.domainLookupEnd+c:0,connectStart:m.connectStart?m.connectStart+c:0,secureConnectionStart:m.secureConnectionStart?m.secureConnectionStart+c:0,connectEnd:m.connectEnd?m.connectEnd+c:0,requestStart:m.requestStart?m.requestStart+c:0,responseStart:m.responseStart?m.responseStart+c:0,responseEnd:m.responseEnd?m.responseEnd+c:0})}o=o.concat(r)}catch(p){return o}return o}function f(a){return"number"==typeof a&&0!==a?a.toString(36):"string"==typeof a?a:""}function g(a){var b,c,d=["IMG","IFRAME"],e={},f=a.document;b=void 0!==a.pageXOffset?a.pageXOffset:(f.documentElement||f.body.parentNode||f.body).scrollLeft;c=void 0!==a.pageYOffset?a.pageYOffset:(f.documentElement||f.body.parentNode||f.body).scrollTop;d.forEach(function(a){var d,g,h,i=f.getElementsByTagName(a);for(g=0;g<i.length;g++){d=i[g];if(d&&d.src&&!e[d.src]){h=d.getBoundingClientRect();(h.height||d.offsetHeight)&&(h.width||d.offsetWidth)&&(e[d.src]=[d.offsetHeight,d.offsetWidth,Math.round(h.top+c),Math.round(h.left+b)])}}});return e}function h(a,b,c){var f,g,h=e(BOOMR.window,!0,0,0),i=d(BOOMR.window);if(!h||!h.length)return[];var j=[];for(f=0;f<h.length;f++){g=h[f];if(0!==g.name.indexOf("about:")&&0!==g.name.indexOf("javascript:")&&!(g.name.indexOf(BOOMR.url)>-1||g.name.indexOf(BOOMR.config_url)>-1||a&&i+g.startTime<a)){if(b&&i+g.startTime>b)break;("undefined"==typeof c||"*"===c||!c.length||g.initiatorType&&BOOMR.utils.inArray(g.initiatorType,c))&&j.push(g)}}return j}function i(a){var b,c,d,e;if(a.encodedBodySize||a.decodedBodySize||a.transferSize){b=a.transferSize;c=a.encodedBodySize;d=a.decodedBodySize;e=[c,b?b-c:"_",d?d-c:0];return e.map(f).join(",").replace(/,+$/,"")}return""}function j(d,e){var j,k,l,o,p,q=h(d,e),u={},v={};if(!q||!q.length)return{};v=g(BOOMR.window);for(j=0;j<q.length;j++){k=q[j];l=n[k.initiatorType];"undefined"==typeof l&&(l=0);p=l+[c(k.startTime,0),c(k.responseEnd,k.startTime),c(k.responseStart,k.startTime),c(k.requestStart,k.startTime),c(k.connectEnd,k.startTime),c(k.secureConnectionStart,k.startTime),c(k.connectStart,k.startTime),c(k.domainLookupEnd,k.startTime),c(k.domainLookupStart,k.startTime),c(k.redirectEnd,k.startTime),c(k.redirectStart,k.startTime)].map(f).join(",").replace(/,+$/,"");var w=i(k);""!==w&&(p+=r+t+w);o=BOOMR.utils.cleanupURL(k.name,m.urlLimit);void 0!==u[o]?u[o]+="|"+p:void 0!==v[o]?u[o]=r+s+v[o].map(f).join(",").replace(/,+$/,"")+"|"+p:u[o]=p}return b(a(u),!0)}function k(a){var b=[];if(!a||!a.length)return b;for(var c=0;c<a.length;c++){var d=a[c];(c===a.length-1||d.fetchStart!==a[c+1].fetchStart)&&b.push({fetchStart:d.fetchStart,responseEnd:d.responseStart||d.responseEnd})}return b}function l(a){var b;if(!a||!a.length)return 0;a.sort(function(a,b){if(a.fetchStart!==b.fetchStart)return a.fetchStart-b.fetchStart;var c=a.responseStart||a.responseEnd,d=b.responseStart||b.responseEnd;return c-d});var c=k(a),d=[],e=0;for(b=0;b<c.length;b++){var f=c[b];f.fetchStart<e&&(f.fetchStart=e);if(f.fetchStart<f.responseEnd){d.push(f);e=f.responseEnd}}var g=k(d),h=0;for(b=0;b<g.length;b++)h+=g[b].responseEnd-g[b].fetchStart;return h}var m;if(!BOOMR.plugins.ResourceTiming){var n={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6},o=[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],p="\n",q=1e3,r="*",s="0",t="1";m={complete:!1,sentNavBeacon:!1,initialized:!1,supported:!1,xhr_load:function(){if(!this.complete){this.complete=!0;BOOMR.sendBeacon()}},xssBreakWords:o,urlLimit:q,clearOnBeacon:!1,done:function(){var a;if(!this.sentNavBeacon){BOOMR.removeVar("restiming");a=j();if(a){BOOMR.info("Client supports Resource Timing API","restiming");BOOMR.addVar({restiming:JSON.stringify(a)})}this.complete=!0;this.sentNavBeacon=!0;BOOMR.sendBeacon()}},onBeacon:function(a){var b=BOOMR.getPerformance();a.hasOwnProperty("restiming")&&BOOMR.removeVar("restiming");if(m.clearOnBeacon&&b){var c=b.clearResourceTimings||b.webkitClearResourceTimings;c&&"function"==typeof c&&c.call(b)}}};BOOMR.plugins.ResourceTiming={init:function(a){var b=BOOMR.getPerformance();BOOMR.utils.pluginConfig(m,a,"ResourceTiming",["xssBreakWords","clearOnBeacon","urlLimit"]);if(m.initialized)return this;if(b&&"function"==typeof b.getEntriesByType){BOOMR.subscribe("page_ready",m.done,null,m);BOOMR.subscribe("xhr_load",m.xhr_load,null,m);BOOMR.subscribe("onbeacon",m.onBeacon,null,m);BOOMR.subscribe("before_unload",m.done,null,m);m.supported=!0}else m.complete=!0;m.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return m.initialized&&m.supported},getCompressedResourceTiming:j,getFilteredResourceTiming:h,calculateResourceTimingUnion:l}}}();!function(){var a;"object"==typeof navigator&&(a=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection);if(a){BOOMR.addVar("mob.ct",a.type);BOOMR.addVar("mob.bw",a.bandwidth);BOOMR.addVar("mob.mt",a.metered)}}();!function(){function a(a,b,c){var e,f,g;try{e=d.getElementsByTagName(a);f=e.length;if(b&&b.length){g={};g[b[0]]=f;if("function"==typeof c)try{e=BOOMR.utils.arrayFilter(e,c);e.length!==f&&(b.length>1?g[b[1]]=e.length:f+="/"+e.length)}catch(h){BOOMR.addError(h,"Memory.nodeList."+a+".filter")}}return g||f}catch(h){BOOMR.addError(h,"Memory.nodeList."+a);return 0}}function b(a,b,c){if(a)try{b()}catch(d){BOOMR.addError(d,"Memory.done."+c)}}var c,d,e,f,g,h,i,j={};if(!BOOMR.plugins.Memory){i={done:function(){if(c){BOOMR.removeVar("dom.res");b(!0,function(){var a,b,c={};if(j&&"function"==typeof j.getEntriesByType){a=j.getEntriesByType("resource");if(a&&a.length){BOOMR.addVar("dom.res",a.length);b=BOOMR.window.document.createElement("a");[].forEach.call(a,function(a){b.href=a.name;c[b.hostname]=!0});BOOMR.addVar("dom.doms",Object.keys(c).length)}}},"resources");e&&BOOMR.addVar({"mem.total":e.totalJSHeapSize,"mem.limit":e.jsHeapSizeLimit,"mem.used":e.usedJSHeapSize});b(f,function(){BOOMR.addVar({"scr.xy":f.width+"x"+f.height,"scr.bpp":f.colorDepth+"/"+(f.pixelDepth||"")});f.orientation&&BOOMR.addVar("scr.orn",f.orientation.angle+"/"+f.orientation.type);c.devicePixelRatio>1&&BOOMR.addVar("scr.dpx",c.devicePixelRatio);(0!==c.scrollX||0!==c.scrollY)&&BOOMR.addVar("scr.sxy",c.scrollX+"x"+c.scrollY)},"screen");b(g,function(){g.hardwareConcurrency&&BOOMR.addVar("cpu.cnc",g.hardwareConcurrency);g.maxTouchPoints&&BOOMR.addVar("scr.mtp",g.maxTouchPoints)},"navigator");b(h,function(){BOOMR.addVar("bat.lvl",h.level)},"battery");b(!0,function(){BOOMR.addVar({"dom.ln":a("*"),"dom.sz":d.documentElement.innerHTML.length});BOOMR.addVar(a("img",["dom.img","dom.img.ext"],function(a){return a.src&&!a.src.match(/^(?:about:|javascript:|data:|#)/)}));BOOMR.addVar(a("script",["dom.script","dom.script.ext"],function(a){return a.src&&!a.src.match(/^(?:about:|javascript:|#)/)}))},"dom")}}};BOOMR.plugins.Memory={init:function(){var a;try{c=BOOMR.window;d=c.document;j=BOOMR.getPerformance();a=c.console;f=c.screen;g=c.navigator;g&&g.battery?h=g.battery:g&&g.getBattery&&g.getBattery().then(function(a){h=a})}catch(b){BOOMR.addError(b,"Memory.init")}e=j&&j.memory?j.memory:a&&a.memory?a.memory:null;if(i.initialized)return this;i.initialized=!0;BOOMR.subscribe("before_beacon",i.done,null,i);return this},is_complete:function(){return!0}}}}();!function(){if(!BOOMR.plugins.CACHE_RELOAD){var a={url:""};BOOMR.plugins.CACHE_RELOAD={init:function(b){BOOMR.utils.pluginConfig(a,b,"CACHE_RELOAD",["url"]);if(!a.url)return this;var c=document.createElement("iframe");c.style.display="none";c.src=a.url;document.body.appendChild(c);return this},is_complete:function(){return!0}}}}();!function(){"use strict";function a(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function b(a,b){return a<<b|a>>>32-b}function c(c,d,e,f,g,h){return a(b(a(a(d,c),a(f,h)),g),e)}function d(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)}function e(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)}function f(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)}function g(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)}function h(b,c){b[c>>5]|=128<<c%32;b[(c+64>>>9<<4)+14]=c;var h,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(h=0;h<b.length;h+=16){i=m;j=n;k=o;l=p;m=d(m,n,o,p,b[h],7,-680876936);p=d(p,m,n,o,b[h+1],12,-389564586);o=d(o,p,m,n,b[h+2],17,606105819);n=d(n,o,p,m,b[h+3],22,-1044525330);m=d(m,n,o,p,b[h+4],7,-176418897);p=d(p,m,n,o,b[h+5],12,1200080426);o=d(o,p,m,n,b[h+6],17,-1473231341);n=d(n,o,p,m,b[h+7],22,-45705983);m=d(m,n,o,p,b[h+8],7,1770035416);p=d(p,m,n,o,b[h+9],12,-1958414417);o=d(o,p,m,n,b[h+10],17,-42063);n=d(n,o,p,m,b[h+11],22,-1990404162);m=d(m,n,o,p,b[h+12],7,1804603682);p=d(p,m,n,o,b[h+13],12,-40341101);o=d(o,p,m,n,b[h+14],17,-1502002290);n=d(n,o,p,m,b[h+15],22,1236535329);m=e(m,n,o,p,b[h+1],5,-165796510);p=e(p,m,n,o,b[h+6],9,-1069501632);o=e(o,p,m,n,b[h+11],14,643717713);n=e(n,o,p,m,b[h],20,-373897302);m=e(m,n,o,p,b[h+5],5,-701558691);p=e(p,m,n,o,b[h+10],9,38016083);o=e(o,p,m,n,b[h+15],14,-660478335);n=e(n,o,p,m,b[h+4],20,-405537848);m=e(m,n,o,p,b[h+9],5,568446438);p=e(p,m,n,o,b[h+14],9,-1019803690);o=e(o,p,m,n,b[h+3],14,-187363961);n=e(n,o,p,m,b[h+8],20,1163531501);m=e(m,n,o,p,b[h+13],5,-1444681467);p=e(p,m,n,o,b[h+2],9,-51403784);o=e(o,p,m,n,b[h+7],14,1735328473);n=e(n,o,p,m,b[h+12],20,-1926607734);m=f(m,n,o,p,b[h+5],4,-378558);p=f(p,m,n,o,b[h+8],11,-2022574463);o=f(o,p,m,n,b[h+11],16,1839030562);n=f(n,o,p,m,b[h+14],23,-35309556);m=f(m,n,o,p,b[h+1],4,-1530992060);p=f(p,m,n,o,b[h+4],11,1272893353);o=f(o,p,m,n,b[h+7],16,-155497632);n=f(n,o,p,m,b[h+10],23,-1094730640);m=f(m,n,o,p,b[h+13],4,681279174);p=f(p,m,n,o,b[h],11,-358537222);o=f(o,p,m,n,b[h+3],16,-722521979);n=f(n,o,p,m,b[h+6],23,76029189);m=f(m,n,o,p,b[h+9],4,-640364487);p=f(p,m,n,o,b[h+12],11,-421815835);o=f(o,p,m,n,b[h+15],16,530742520);n=f(n,o,p,m,b[h+2],23,-995338651);m=g(m,n,o,p,b[h],6,-198630844);p=g(p,m,n,o,b[h+7],10,1126891415);o=g(o,p,m,n,b[h+14],15,-1416354905);n=g(n,o,p,m,b[h+5],21,-57434055);m=g(m,n,o,p,b[h+12],6,1700485571);p=g(p,m,n,o,b[h+3],10,-1894986606);o=g(o,p,m,n,b[h+10],15,-1051523);n=g(n,o,p,m,b[h+1],21,-2054922799);m=g(m,n,o,p,b[h+8],6,1873313359);p=g(p,m,n,o,b[h+15],10,-30611744);o=g(o,p,m,n,b[h+6],15,-1560198380);n=g(n,o,p,m,b[h+13],21,1309151649);m=g(m,n,o,p,b[h+4],6,-145523070);p=g(p,m,n,o,b[h+11],10,-1120210379);o=g(o,p,m,n,b[h+2],15,718787259);n=g(n,o,p,m,b[h+9],21,-343485551);m=a(m,i);n=a(n,j);o=a(o,k);p=a(p,l)}return[m,n,o,p]}function i(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function j(a){var b,c=[];c[(a.length>>2)-1]=void 0;for(b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function k(a){return i(h(j(a),8*a.length))}function l(a,b){var c,d,e=j(a),f=[],g=[];f[15]=g[15]=void 0;e.length>16&&(e=h(e,8*a.length));for(c=0;16>c;c+=1){f[c]=909522486^e[c];g[c]=1549556828^e[c]}d=h(f.concat(j(b)),512+8*b.length);return i(h(g.concat(d),640))}function m(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1){b=a.charCodeAt(c);e+=d.charAt(b>>>4&15)+d.charAt(15&b)}return e}function n(a){return unescape(encodeURIComponent(a))}function o(a){return k(n(a))}function p(a){return m(o(a))}function q(a,b){return l(n(a),n(b))}function r(a,b){return m(q(a,b))}function s(a,b,c){return b?c?q(b,a):r(b,a):c?o(a):p(a)}if(!BOOMR.utils||!BOOMR.utils.md5){BOOMR.utils=BOOMR.utils||{};BOOMR.utils.MD5=s}}();!function(){if(!BOOMR.utils||!BOOMR.utils.Compression){var a=BOOMR.utils.Compression={};a.jsUrl=function(b){function c(a){if(!/[^\w-.]/.test(a))return a;a=a.replace(/[^\w-.]/g,function(a){if("$"===a)return"!";a=a.charCodeAt(0);return 256>a?"*"+("00"+a.toString(16)).slice(-2):"**"+("0000"+a.toString(16)).slice(-4)});return a}var d=[];switch(typeof b){case"number":return isFinite(b)?"~"+b:"~null";case"string":return"~'"+c(b);case"boolean":return"~"+b;case"object":if(!b)return"~null";if(Array.isArray(b)){for(var e=0;e<b.length;e++)e in b&&(d[e]=a.jsUrl(b[e])||"~null");return"~("+(d.join("")||"~")+")"}for(var f in b)if(b.hasOwnProperty(f)){var g=a.jsUrl(b[f]);g&&d.push(c(f)+g)}return"~("+d.sort().join("~")+")";default:return void 0}}}}();Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});!function(a,b){"use strict";a.ErrorStackParser=b()}(this,function(){"use strict";function a(a,b,c){if("function"==typeof Array.prototype.map)return a.map(b,c);for(var d=new Array(a.length),e=0;e<a.length;e++)d[e]=b.call(c,a[e]);return d}function b(a,b,c){if("function"==typeof Array.prototype.filter)return a.filter(b,c);for(var d=[],e=0;e<a.length;e++)b.call(c,a[e])&&d.push(a[e]);return d}var c=/(^|@)\S+\:\d+/,d=/^\s*at .*(\S+\:\d+|\(native\))/m,e=/^(eval@)?(\[native code\])?$/;return{parse:function(a){if("undefined"!=typeof a.stacktrace||"undefined"!=typeof a["opera#sourceloc"])return this.parseOpera(a);if(a.stack&&a.stack.match(d))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(-1===a.indexOf(":"))return[a];var b=a.replace(/[\(\)\s]/g,"").split(":"),c=b.pop(),d=b[b.length-1];if(!isNaN(parseFloat(d))&&isFinite(d)){var e=b.pop();return[b.join(":"),e,c]}return[b.join(":"),c,void 0]},parseV8OrIE:function(c){var e=b(c.stack.split("\n"),function(a){return!!a.match(d)},this);return a(e,function(a){a.indexOf("(eval ")>-1&&(a=a.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var b=a.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),c=this.extractLocation(b.pop()),d=b.join(" ")||void 0,e="eval"===c[0]?void 0:c[0];return{functionName:d,fileName:e,lineNumber:c[1],columnNumber:c[2],source:a}},this)},parseFFOrSafari:function(c){var d=b(c.stack.split("\n"),function(a){return!a.match(e)},this);return a(d,function(a){a.indexOf(" > eval")>-1&&(a=a.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1"));if(-1===a.indexOf("@")&&-1===a.indexOf(":"))return{functionName:a};var b=a.split("@"),c=this.extractLocation(b.pop()),d=b.join("@")||void 0;return{functionName:d,fileName:c[0],lineNumber:c[1],columnNumber:c[2],source:a}},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var b=/Line (\d+).*script (?:in )?(\S+)/i,c=a.message.split("\n"),d=[],e=2,f=c.length;f>e;e+=2){var g=b.exec(c[e]);g&&d.push({fileName:g[2],lineNumber:g[1],source:c[e]})}return d},parseOpera10:function(a){for(var b=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,c=a.stacktrace.split("\n"),d=[],e=0,f=c.length;f>e;e+=2){var g=b.exec(c[e]);g&&d.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:c[e]})}return d},parseOpera11:function(d){var e=b(d.stack.split("\n"),function(a){return!!a.match(c)&&!a.match(/^Error created at/)},this);return a(e,function(a){var b,c=a.split("@"),d=this.extractLocation(c.pop()),e=c.shift()||"",f=e.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;e.match(/\(([^\)]*)\)/)&&(b=e.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var g=void 0===b||"[arguments not available]"===b?void 0:b.split(",");return{functionName:f,args:g,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:a}},this)}}});!function(){function a(a){a=a||{};"number"==typeof a.count||"string"==typeof a.count?this.count=parseInt(a.count,10):this.count=1;"number"==typeof a.timestamp?this.timestamp=a.timestamp:this.timestamp=BOOMR.now();("number"==typeof a.code||"string"==typeof a.code)&&(this.code=parseInt(a.code,10));"string"==typeof a.message&&(this.message=a.message);"string"==typeof a.functionName&&(this.functionName=a.functionName);"string"==typeof a.fileName&&(this.fileName=a.fileName);("number"==typeof a.lineNumber||"string"==typeof a.lineNumber)&&(this.lineNumber=parseInt(a.lineNumber,10));("number"==typeof a.columnNumber||"string"==typeof a.columnNumber)&&(this.columnNumber=parseInt(a.columnNumber,10));"string"==typeof a.stack&&(this.stack=a.stack);"string"==typeof a.type&&(this.type=a.type);"undefined"!=typeof a.extra&&(this.extra=a.extra);this.source="number"==typeof a.source||"string"==typeof a.source?parseInt(a.source,10):BOOMR.plugins.Errors.SOURCE_APP;("number"==typeof a.via||"string"==typeof a.via)&&(this.via=parseInt(a.via,10));Array.isArray(a.frames)?this.frames=a.frames:this.frames=[];Array.isArray(a.events)?this.events=a.events:this.events=[]}var b;if(!BOOMR.plugins.Errors){var c=["BOOMR_addError","BOOMR_plugins_errors_wrap"];a.prototype.equals=function(a){return"object"!=typeof a?!1:this.code!==a.code?!1:this.message!==a.message?!1:this.functionName!==a.functionName?!1:this.fileName!==a.fileName?!1:this.lineNumber!==a.lineNumber?!1:this.columnNumber!==a.columnNumber?!1:this.stack!==a.stack?!1:this.type!==a.type?!1:this.source!==a.source?!1:!0};a.fromError=function(b,d,e){var f,g,h,i,j=!1,k=BOOMR.now();if(!b)return null;if(b.stack){g=ErrorStackParser.parse(b);if(g&&g.length){if(b.generatedStack){if(g.length>=4&&g[1].functionName&&-1!==g[1].functionName.indexOf("createStackForSend")){g=g.slice(3);j=!0}if(g.length>=3&&g[0].functionName&&-1!==g[0].functionName.indexOf("createStackForSend")){g=g.slice(2);j=!0}if(g.length>=1&&g[0].functionName&&-1!==g[0].functionName.indexOf("BOOMR_plugins_errors")){g=g.slice(1);j=!0}}for(h=0;h<g.length;h++)if(g[h].functionName)for(i=0;i<c.length;i++)if(-1!==g[h].functionName.indexOf(c[i])){g.splice(h,1);j=!0;h--;break}f=g[0];(j||"undefined"==typeof b.lineNumber)&&(b.lineNumber=f.lineNumber);(j||"undefined"==typeof b.columnNumber)&&(b.columnNumber=f.columnNumber);(j||"undefined"==typeof b.functionName)&&(b.functionName=f.functionName);(j||"undefined"==typeof b.fileName)&&(b.fileName=f.fileName);b.stack&&(b.stack=b.stack.replace(/\s\s+/g," "))}}else(b.functionName||b.fileName||b.lineNumber||b.columnNumber)&&(g=[{lineNumber:b.lineNumber,columnNumber:b.columnNumber,fileName:b.fileName,functionName:b.functionName}]);-1!==b.message.indexOf("ReferenceError:")&&"Error"===b.name&&(b.name="ReferenceError");var l=new a({code:b.code?b.code:void 0,message:b.message?b.message:void 0,functionName:b.functionName?b.functionName:void 0,fileName:b.fileName?b.fileName:void 0,lineNumber:b.lineNumber?b.lineNumber:void 0,columnNumber:b.columnNumber?b.columnNumber:void 0,stack:b.stack?b.stack:void 0,type:b.name?b.name:void 0,source:e,via:d,frames:g,extra:b.extra?b.extra:void 0,timestamp:b.timestamp?b.timestamp:k});return l};b={onError:void 0,monitorGlobal:!0,monitorNetwork:!0,monitorConsole:!0,monitorEvents:!0,monitorTimeout:!0,sendAfterOnload:!1,isDuringLoad:!0,maxErrors:10,sendInterval:1e3,sendIntervalId:-1,maxEvents:10,initialized:!1,supported:!1,errors:[],q:[],events:[],send:function(a,c,d){function createStackForSend(){try{throw Error(a)}catch(f){a=f;a.generatedStack=!0;a.timestamp=e;b.addError(a,c,d)}}var e=BOOMR.now();c=c||BOOMR.plugins.Errors.VIA_APP;d=d||BOOMR.plugins.Errors.SOURCE_APP;if(a.stack||a.noStack){a.timestamp=e;b.addError(a,c,d)}else createStackForSend();
},addError:function(c,d,e){var f,g,h=!1;if(b.isDuringLoad||b.sendAfterOnload){if(b.onError){try{f=b.onError(c)}catch(i){f=!1}if(!f)return}if(!(b.errors.length>=b.maxErrors)){g=a.fromError(c,d,e);h=b.mergeDuplicateErrors(b.errors,g,!1);BOOMR.fireEvent("onerror",h||g);b.mergeDuplicateErrors(b.q,g,!0);if(!b.isDuringLoad&&-1===b.sendIntervalId){if(h)return;b.sendIntervalId=setTimeout(function(){b.sendIntervalId=-1;BOOMR.addVar("http.initiator","error");BOOMR.addVar("api",1);b.addErrorsToBeacon();BOOMR.sendBeacon()},b.sendInterval)}}}},findDuplicateError:function(a,b){if(!Array.isArray(a)||"undefined"==typeof b)return void 0;for(var c=0;c<a.length;c++)if(a[c].equals(b))return a[c];return void 0},mergeDuplicateErrors:function(a,c,d){if(!Array.isArray(a)||"undefined"==typeof c)return void 0;var e=b.findDuplicateError(a,c);if(e){d&&(e.count+=c.count);return e}a.push(c);return void 0},onBeacon:function(){BOOMR.removeVar("err");BOOMR.removeVar("api");BOOMR.removeVar("http.initiator")},pageReady:function(){b.isDuringLoad=!1},getErrors:function(){return 0===b.errors.length?!1:b.errors},getErrorsForUrl:function(a){a=b.compressErrors(a);if(BOOMR.utils.Compression.jsUrl)return BOOMR.utils.Compression.jsUrl(a);url+=JSON.stringify(a);return void 0},addErrorsToBeacon:function(){if(b.q.length){BOOMR.addVar("err",this.getErrorsForUrl(b.q));b.q=[]}},beforeBeacon:function(){b.addErrorsToBeacon()},wrapFn:function(a,c,d,e,f){var g=c[a];"function"==typeof g&&(c[a]=function(){try{var a=Array.prototype.slice.call(arguments),h=a[e];a[e]=b.wrap(h,d?this:c,f);return g.apply(d?this:c,a)}catch(i){b.send(i,f)}})},wrap:function(a,c,d){if("function"!=typeof a)return function(){};d=d||BOOMR.plugins.Errors.VIA_APP;return function(){try{return a.apply(c,arguments)}catch(e){b.send(e,d)}}},test:function(){var a,c,d;if(0===arguments.length)return void 0;a=arguments[0];if("function"!=typeof a)return void 0;c=arguments.length>1?arguments[1]:BOOMR.window;var d=Array.prototype.slice.call(arguments,2);return b.wrap(a,c).apply(c,d)},compressErrors:function(a){var b,c,d,e,f,g,h,i,j,k=0;i=BOOMR.window.location.origin;for(b=0;b<a.length;b++){d=a[b];j={};1!==d.count&&(j.n=d.count);if("number"==typeof d.timestamp){k=d.timestamp;j.d=d.timestamp.toString(36)}if(d.frames.length){j.f=[];for(c=0;c<d.frames.length;c++){e=d.frames[c];e.lineNumber&&(e.lineNumber=parseInt(e.lineNumber,10));e.columnNumber&&(e.columnNumber=parseInt(e.columnNumber,10));g={l:e.lineNumber,c:e.columnNumber};"string"==typeof e.fileName&&(-1!==e.fileName.indexOf(i)?g.wo=e.fileName.replace(i,""):g.w=e.fileName);"string"==typeof e.functionName&&(g.f=e.functionName);j.f.push(g)}}if(d.events.length){j.e=[];for(c=0;c<d.events.length;c++){f=d.events[c];h={t:f.type,d:k?k-f.timestamp:f.timestamp};if(f.type===BOOMR.plugins.Errors.EVENT_CLICK){f.id&&(h.i=f.id);f.name&&(h.n=f.name);f.tagName&&(h.g=f.tagName)}else if(f.type===BOOMR.plugins.Errors.EVENT_NETWORK){f.url&&(h.u=f.url);f.method&&(h.m=f.method);f.result&&(h.r=f.result)}else if(f.type===BOOMR.plugins.Errors.EVENT_LOG){f.severity&&(h.s=f.severity);f.message&&(h.m=f.message)}j.e.push(h)}}d.source!==BOOMR.plugins.Errors.SOURCE_APP&&(j.s=d.source);"undefined"!=typeof d.via&&d.via!==BOOMR.plugins.Errors.VIA_APP&&(j.v=d.via);"undefined"!=typeof d.type&&"Error"!==d.type&&(j.t=d.type);d.code&&(j.c=d.code);d.message&&(j.m=d.message);d.extra&&(j.x=d.extra);a[b]=j}return a}};var d=BOOMR.plugins.Errors={init:function(a){BOOMR.utils.pluginConfig(b,a,"Errors",["onError","monitorGlobal","monitorNetwork","monitorConsole","monitorEvents","monitorTimeout","sendAfterOnload","sendInterval","maxErrors"]);if(b.initialized)return this;b.initialized=!0;b.supported=!0;if(!b.supported)return this;BOOMR.subscribe("before_beacon",b.beforeBeacon,null,b);BOOMR.subscribe("onbeacon",b.onBeacon,null,b);BOOMR.subscribe("page_ready",b.pageReady,null,b);BOOMR.registerEvent("onerror");if(b.monitorGlobal)try{var c=BOOMR.window.onerror;BOOMR.window.onerror=function(a,e,f,g,h){"undefined"!=typeof h&&null!==h?b.send(h,d.VIA_GLOBAL_EXCEPTION_HANDLER):b.send({message:a,fileName:e,lineNumber:f,columnNumber:g,noStack:!0},d.VIA_GLOBAL_EXCEPTION_HANDLER);"function"==typeof c&&c.apply(window,arguments)}}catch(e){BOOMR.debug("Exception in the window.onerror handler","Errors")}b.monitorNetwork&&BOOMR.subscribe("onxhrerror",function(a){b.send({code:a.status,message:a.url,noStack:!0},d.VIA_NETWORK)});if(b.monitorConsole){BOOMR.window.console||(BOOMR.window.console={});var f=BOOMR.window.console.error;try{BOOMR.window.console.error=function(){1===arguments.length?b.send(arguments[0],d.VIA_CONSOLE):b.send(JSON.stringify(message),d.VIA_CONSOLE);"function"==typeof f&&("function"==typeof f.apply?f.apply(this,arguments):f(arguments[0],arguments[1],arguments[2]))}}catch(g){BOOMR.debug("Exception in the window.console.error handler","Errors")}}if(b.monitorEvents&&BOOMR.window.addEventListener&&BOOMR.window.Element){b.wrapFn("addEventListener",BOOMR.window,!1,1,d.VIA_EVENTHANDLER);b.wrapFn("addEventListener",BOOMR.window.Element.prototype,!0,1,d.VIA_EVENTHANDLER);b.wrapFn("addEventListener",BOOMR.window.XMLHttpRequest.prototype,!0,1,d.VIA_EVENTHANDLER)}if(b.monitorTimeout){b.wrapFn("setTimeout",BOOMR.window,!1,0,d.VIA_TIMEOUT);b.wrapFn("setInterval",BOOMR.window,!1,0,d.VIA_TIMEOUT)}return this},is_complete:function(){return!0},is_supported:function(){return b.initialized&&b.supported},SOURCE_APP:1,SOURCE_BOOMERANG:2,VIA_APP:1,VIA_GLOBAL_EXCEPTION_HANDLER:2,VIA_NETWORK:3,VIA_CONSOLE:4,VIA_EVENTHANDLER:5,VIA_TIMEOUT:6,EVENT_CLICK:1,EVENT_NETWORK:2,EVENT_LOG:3,send:b.send,wrap:b.wrap,test:b.test,BoomerangError:a}}}();!function(a){function b(){if(!i){i=!0;j=!1;k&&BOOMR.sendBeacon()}}function c(a){a.parentNode.removeChild(a)}function d(){var b,j,k,l=f.getElementsByTagName(g)[0],n=f.createElement("A"),o=BOOMR.getBeaconURL?BOOMR.getBeaconURL():"",p=[];for(j in BOOMR.plugins)BOOMR.plugins.hasOwnProperty(j)&&p.push(encodeURIComponent(j));e=BOOMR.now();k="//c.go-mpulse.net/boomerang/config.js";k+="?key="+(a.BOOMR_LOGN_key?a.BOOMR_LOGN_key:"QBTUJ-BMQ6A-QXED7-GZ3AT-CQHQC")+"&d="+encodeURIComponent(h)+"&t="+Math.round(e/3e5)+"&v="+BOOMR.version+(a===window?"":"&if=")+"&sl="+(BOOMR.session.length>0?1:0)+"&si="+BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36)+(i?"&r=":"")+(o?"&bcn="+encodeURIComponent(o):"")+(i?"":"&plugins="+p.join(","));n.href=k;BOOMR.config_url=n.href;b=f.createElement(g);b.src=k;l.parentNode.insertBefore(b,l);l=null;i&&setTimeout(function(){d();if(b){c(b);b=null}},m)}var e,f=document,g="script",h=a.location.hostname,i=!1,j=!1,k=!0,l="undefined"!=typeof a.BOOMR_LOGN_always,m=a.BOOMR_CONFIG_RELOAD_TIMEOUT||33e4,n=!1;(l||!(BOOMR.plugins.LOGN||!h||"localhost"===h||h.match(/\.\d+$/)||h.match(/^mhtml/)||h.match(/^file:\//)))&&(BOOMR.plugins.LOGN={init:function(c){if(i||BOOMR.session.rate_limited)return this;if(c&&c.rate_limited){BOOMR.session.rate_limited=!0;return this}c&&"undefined"!=typeof c.autorun&&(k=c.autorun);if(j){BOOMR.fireEvent("onconfig",c);n=!0;BOOMR.setImmediate(b);setTimeout(d,m);BOOMR.addVar("t_configjs",BOOMR.now()-e);if("number"==typeof BOOMR_configt){BOOMR.addVar("t_configfb",BOOMR_configt-e);delete BOOMR_configt}return this}BOOMR.registerEvent("onconfig");BOOMR.setVarPriority("h.d",-1);BOOMR.setVarPriority("h.key",-1);BOOMR.setVarPriority("h.t",-1);BOOMR.setVarPriority("h.cr",1);j=!0;a===window?BOOMR.subscribe("page_ready",d,null,null):d();return this},is_complete:function(){return n}})}(BOOMR.window);BOOMR.addVar({"h.key":"QBTUJ-BMQ6A-QXED7-GZ3AT-CQHQC"}).init({primary:!0,log:null,wait:!0,site_domain:null,ResourceTiming:{enabled:!1},Angular:{enabled:!1},Ember:{enabled:!1},Backbone:{enabled:!1},History:{enabled:!1},Errors:{enabled:!1}});BOOMR.t_end=(new Date).getTime();
